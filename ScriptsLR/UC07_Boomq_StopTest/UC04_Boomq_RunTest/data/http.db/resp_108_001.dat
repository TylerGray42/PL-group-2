(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5216],{63250:(re,u,e)=>{"use strict";e.d(u,{K:()=>l});var r=e(42844),O=e(27702),S=e(66310);const l=({children:R})=>{const I=(0,S.wW)(L);return O.createElement("div",{className:I.root},R)},L=R=>({root:(0,r.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:R.spacing(3),minHeight:R.spacing(4)})})},29473:(re,u,e)=>{"use strict";e.d(u,{B:()=>O});var r=e(27702);const O=({grow:S,shrink:l})=>r.createElement("div",{style:{display:"block",flexGrow:S,flexShrink:l}})},29036:(re,u,e)=>{"use strict";e.d(u,{X:()=>F});var r=e(42844),O=e(27702),S=e(66310),l=e(28580),L=e(50285),R=Object.defineProperty,I=Object.defineProperties,A=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,b=(w,B,Y)=>B in w?R(w,B,{enumerable:!0,configurable:!0,writable:!0,value:Y}):w[B]=Y,M=(w,B)=>{for(var Y in B||(B={}))E.call(B,Y)&&b(w,Y,B[Y]);if(P)for(var Y of P(B))T.call(B,Y)&&b(w,Y,B[Y]);return w},D=(w,B)=>I(w,A(B)),j=(w,B)=>{var Y={};for(var X in w)E.call(w,X)&&B.indexOf(X)<0&&(Y[X]=w[X]);if(w!=null&&P)for(var X of P(w))B.indexOf(X)<0&&T.call(w,X)&&(Y[X]=w[X]);return Y};function F(w){var B=w,{label:Y}=B,X=j(B,["label"]);const Z=(0,S.wW)(K),[z]=(0,O.useState)(()=>Math.random().toString(16).slice(2)),U={SelectContainer:$,ValueContainer:V,SingleValue:V};return O.createElement("div",{className:Z.root},Y&&O.createElement("label",{className:Z.label,htmlFor:z},Y,":","\xA0"),O.createElement(l.Ph,D(M({openMenuOnFocus:!0,inputId:z},X),{components:U})))}const $=w=>{const{children:B}=w,Y=(0,S.wW)(K);return O.createElement(L.e,D(M({},w),{className:(0,r.cx)(w.className,Y.container)}),B)},V=w=>{const{className:B,children:Y}=w,X=(0,S.wW)(K);return O.createElement("div",{className:(0,r.cx)(B,X.valueContainer)},Y)},K=w=>({root:(0,r.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,r.css)({color:w.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,r.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,r.css)({display:"flex",alignItems:"center",flex:"initial",color:w.colors.text.secondary,fontSize:12})})},5560:(re,u,e)=>{"use strict";e.r(u),e.d(u,{AND:()=>M,AS:()=>T,ASC:()=>A,BY:()=>R,COMPARISON_OPERATORS:()=>V,DESC:()=>I,EQUALS:()=>F,FROM:()=>O,GROUP:()=>l,LIMIT:()=>P,LOGICAL_OPERATORS:()=>j,NOT_EQUALS:()=>$,OR:()=>D,ORDER:()=>L,SCHEMA:()=>b,SELECT:()=>r,STD_OPERATORS:()=>K,WHERE:()=>S,WITH:()=>E,conf:()=>w,language:()=>B});const r="select",O="from",S="where",l="group",L="order",R="by",I="desc",A="asc",P="limit",E="with",T="as",b="schema",M="AND",D="OR",j=[M,D],F="=",$="!=",V=[F,$],K=[...V],w={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},B={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT","ABSOLUTE","ACTION","ADA","ADD","AFTER","ALL","ALLOCATE","ALTER","ALWAYS","ANALYZE","AND","ANY","ARE","AS","ASC","ASSERTION","AT","ATTACH","AUTHORIZATION","AUTOINCREMENT","AVG","BACKUP","BEFORE","BEGIN","BETWEEN","BIT","BIT_LENGTH","BOTH","BREAK","BROWSE","BULK","BY","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLLATION","COLUMN","COMMIT","COMPUTE","CONFLICT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CORRESPONDING","COUNT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DAY","DBCC","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DETACH","DIAGNOSTICS","DISCONNECT","DISK","DISTINCT","DISTRIBUTED","DO","DOMAIN","DOUBLE","DROP","DUMP","EACH","ELSE","END","END-EXEC","ERRLVL","ESCAPE","EXCEPT","EXCEPTION","EXCLUDE","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTERNAL","EXTRACT","FAIL","FALSE","FETCH","FILE","FILLFACTOR","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GENERATED","GET","GLOB","GLOBAL","GO","GOTO","GRANT","GROUP","GROUPS","HAVING","HOLDLOCK","HOUR","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IGNORE","IMMEDIATE","IN","INCLUDE","INDEX","INDEXED","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","IS","ISNULL","ISOLATION","JOIN","KEY","KILL","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LIMIT","LINENO","LOAD","LOCAL","LOWER","MATCH","MATERIALIZED","MAX","MERGE","MIN","MINUTE","MODULE","MONTH","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOCHECK","NONCLUSTERED","NONE","NOT","NOTHING","NOTNULL","NULL","NULLIF","NULLS","NUMERIC","OCTET_LENGTH","OF","OFF","OFFSET","OFFSETS","ON","ONLY","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OTHERS","OUTER","OUTPUT","OVER","OVERLAPS","PAD","PARTIAL","PARTITION","PASCAL","PERCENT","PIVOT","PLAN","POSITION","PRAGMA","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRINT","PRIOR","PRIVILEGES","PROC","PROCEDURE","PUBLIC","QUERY","RAISE","RAISERROR","RANGE","READ","READTEXT","REAL","RECONFIGURE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELATIVE","RELEASE","RENAME","REPLACE","REPLICATION","RESTORE","RESTRICT","RETURN","RETURNING","REVERT","REVOKE","RIGHT","ROLLBACK","ROW","ROWCOUNT","ROWGUIDCOL","ROWS","RULE","SAVE","SAVEPOINT","SCHEMA","SCROLL","SECOND","SECTION","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION","SESSION_USER","SET","SETUSER","SHUTDOWN","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCA","SQLCODE","SQLERROR","SQLSTATE","SQLWARNING","STATISTICS","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLESAMPLE","TEMP","TEMPORARY","TEXTSIZE","THEN","TIES","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRAN","TRANSACTION","TRANSLATE","TRANSLATION","TRIGGER","TRIM","TRUE","TRUNCATE","TRY_CONVERT","TSEQUAL","UNBOUNDED","UNION","UNIQUE","UNKNOWN","UNPIVOT","UPDATE","UPDATETEXT","UPPER","USAGE","USE","USER","USING","VACUUM","VALUE","VALUES","VARCHAR","VARYING","VIEW","VIRTUAL","WAITFOR","WHEN","WHENEVER","WHERE","WHILE","WINDOW","WITH","WITHIN GROUP","WITHOUT","WORK","WRITE","WRITETEXT","YEAR","ZONE"],operators:["EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],logicalOperators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME"],comparisonOperators:["<>",">","<",">=","<=","=","!=","&","~","^","%"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@templateVariables"},{include:"@macros"},{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},{include:"@schemaTable"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$|<|>|=|!|%|&|+|\|-|*|/|~|^]+/,{cases:{"@operators":"operator","@comparisonOperators":"operator","@logicalOperators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}]],templateVariables:[[/\$[a-zA-Z0-9]+/,"variable"]],macros:[[/\$__[a-zA-Z0-9-_]+/,"type"]],schemaTable:[[/(\w+)\./,"identifier"],[/(\w+\.\w+)/,"identifier"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}}},60429:(re,u,e)=>{"use strict";e.d(u,{h:()=>L});var r=e(6411);const O="column",S="'5m'",l=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:[O],type:r.mB.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:r.mB.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:r.mB.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:[O,S],type:r.mB.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:r.mB.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:r.mB.Column,description:"Will be replaced by the query column."}];function L(R,I){var A,P,E;const T={triggerCharacters:["."," ","$",",","(","'"]};I&&Array.isArray(I.builtinFunctions)&&(T.supportedFunctions=()=>I.builtinFunctions.map(M=>({id:M,name:M})));const b=[];return(A=I?.comparisonOperators)!=null&&A.length&&b.push(...I.comparisonOperators.map(M=>({id:M.toLocaleLowerCase(),operator:M,type:r.$M.Comparison}))),I.logicalOperators=(P=I.logicalOperators)!=null?P:I.operators,(E=I?.logicalOperators)!=null&&E.length&&b.push(...I.logicalOperators.map(M=>({id:M.toLocaleLowerCase(),operator:M,type:r.$M.Logical}))),T.supportedOperators=()=>b,T.supportedMacros=()=>l,T}},6411:(re,u,e)=>{"use strict";e.d(u,{$M:()=>r,G8:()=>R,a7:()=>A,cm:()=>I,fC:()=>l,is:()=>L,iv:()=>S,je:()=>P,mB:()=>O});var r=(E=>(E[E.Comparison=0]="Comparison",E[E.Logical=1]="Logical",E))(r||{}),O=(E=>(E[E.Value=0]="Value",E[E.Filter=1]="Filter",E[E.Group=2]="Group",E[E.Column=3]="Column",E[E.Table=4]="Table",E))(O||{}),S=(E=>(E.Parenthesis="delimiter.parenthesis.sql",E.Whitespace="white.sql",E.Keyword="keyword.sql",E.Delimiter="delimiter.sql",E.Operator="operator.sql",E.Identifier="identifier.sql",E.IdentifierQuote="identifier.quote.sql",E.Type="type.sql",E.Function="predefined.sql",E.Number="number.sql",E.String="string.sql",E.Variable="variable.sql",E))(S||{}),l=(E=>(E.Unknown="unknown",E.SelectKeyword="selectKeyword",E.WithKeyword="withKeyword",E.AfterSelectKeyword="afterSelectKeyword",E.AfterSelectArguments="afterSelectArguments",E.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",E.SelectAlias="selectAlias",E.AfterFromKeyword="afterFromKeyword",E.AfterTable="afterTable",E.SchemaFuncFirstArgument="schemaFuncFirstArgument",E.SchemaFuncExtraArgument="schemaFuncExtraArgument",E.FromKeyword="fromKeyword",E.AfterFrom="afterFrom",E.WhereKeyword="whereKeyword",E.WhereComparisonOperator="whereComparisonOperator",E.WhereValue="whereValue",E.AfterWhereFunctionArgument="afterWhereFunctionArgument",E.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",E.AfterWhereValue="afterWhereValue",E.AfterGroupByKeywords="afterGroupByKeywords",E.AfterGroupBy="afterGroupBy",E.AfterOrderByKeywords="afterOrderByKeywords",E.AfterOrderByFunction="afterOrderByFunction",E.AfterOrderByDirection="afterOrderByDirection",E.AfterIsOperator="afterIsOperator",E.AfterIsNotOperator="afterIsNotOperator",E.AfterSchema="afterSchema",E))(l||{}),L=(E=>(E.Schemas="schemas",E.Tables="tables",E.Columns="columns",E.SelectKeyword="selectKeyword",E.WithKeyword="withKeyword",E.FunctionsWithArguments="functionsWithArguments",E.FromKeyword="fromKeyword",E.WhereKeyword="whereKeyword",E.GroupByKeywords="groupByKeywords",E.OrderByKeywords="orderByKeywords",E.FunctionsWithoutArguments="functionsWithoutArguments",E.LimitKeyword="limitKeyword",E.SortOrderDirectionKeyword="sortOrderDirectionKeyword",E.ComparisonOperators="comparisonOperators",E.LogicalOperators="logicalOperators",E.SelectMacro="selectMacro",E.TableMacro="tableMacro",E.FilterMacro="filterMacro",E.GroupMacro="groupMacro",E.BoolValues="boolValues",E.NullValue="nullValue",E.NotKeyword="notKeyword",E.TemplateVariables="templateVariables",E.StarWildCard="starWildCard",E))(L||{}),R=(E=>(E.High="a",E.MediumHigh="d",E.Medium="g",E.MediumLow="k",E.Low="q",E))(R||{}),I=(E=>(E[E.Method=0]="Method",E[E.Function=1]="Function",E[E.Constructor=2]="Constructor",E[E.Field=3]="Field",E[E.Variable=4]="Variable",E[E.Class=5]="Class",E[E.Struct=6]="Struct",E[E.Interface=7]="Interface",E[E.Module=8]="Module",E[E.Property=9]="Property",E[E.Event=10]="Event",E[E.Operator=11]="Operator",E[E.Unit=12]="Unit",E[E.Value=13]="Value",E[E.Constant=14]="Constant",E[E.Enum=15]="Enum",E[E.EnumMember=16]="EnumMember",E[E.Keyword=17]="Keyword",E[E.Text=18]="Text",E[E.Color=19]="Color",E[E.File=20]="File",E[E.Reference=21]="Reference",E[E.Customcolor=22]="Customcolor",E[E.Folder=23]="Folder",E[E.TypeParameter=24]="TypeParameter",E[E.User=25]="User",E[E.Issue=26]="Issue",E[E.Snippet=27]="Snippet",E))(I||{}),A=(E=>(E[E.KeepWhitespace=1]="KeepWhitespace",E[E.InsertAsSnippet=4]="InsertAsSnippet",E))(A||{}),P=(E=>(E.Builder="builder",E.Code="code",E))(P||{})},25789:(re,u,e)=>{"use strict";e.d(u,{M:()=>rn});var r=e(27702),O=e(25111),S=e(60426),l=e(6411),L=e(97997),R=e(60244),I=e(1277),A=e(63250),P=e(29036),E=e(29473),T=e(57942),b=e(81924),M=e(42074),D=e(66670),j=e(80011),F=e(40705),$=e(53624),V=e(13741),K=e(73453);function w({isOpen:ne,onCancel:te,onDiscard:ie,onCopy:ve}){const Oe=(0,r.useRef)(null);return(0,r.useEffect)(()=>{ne&&Oe.current?.focus()},[ne]),r.createElement(V.u,{title:r.createElement("div",{className:"modal-header-title"},r.createElement(K.J,{name:"exclamation-triangle",size:"lg"}),r.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:te,isOpen:ne},r.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),r.createElement("p",null,"Do you want to copy your code to the clipboard?"),r.createElement(V.u.ButtonRow,null,r.createElement(D.zx,{type:"button",variant:"secondary",onClick:te,fill:"outline"},"Cancel"),r.createElement(D.zx,{variant:"destructive",type:"button",onClick:ie,ref:Oe},"Discard code and switch"),r.createElement(D.zx,{variant:"primary",onClick:ve},"Copy code and switch")))}var B=e(28580),Y=e(6539);const X=({dataset:ne,db:te,isPostgresInstance:ie,onChange:ve,preconfiguredDataset:Oe})=>{const Re=!!Oe||ie,Ne=(0,O.Z)(async()=>(0,Y.F)()&&Re?(ve((0,$.Er)(Oe)),[(0,$.Er)(Oe)]):(ne&&ve((0,$.Er)(ne)),(await te.datasets()).map($.Er)),[]);return(0,r.useEffect)(()=>{(0,Y.F)()||(ne?Ne.value&&Ne.value.find(Ve=>Ve.value===ne)===void 0&&Ne.value.length>0&&ve(Ne.value[0]):Ne.value&&Ne.value[0]&&ve(Ne.value[0]))},[Ne.value,ve,ne]),r.createElement(B.Ph,{"aria-label":"Dataset selector",value:ne,options:Ne.value,onChange:ve,disabled:Ne.loading,isLoading:Ne.loading,menuShouldPortal:!0})};var Z=e(81078);const z=({db:ne,dataset:te,table:ie,className:ve,onChange:Oe})=>{const Re=(0,O.Z)(async()=>te?(await ne.tables(te)).map(Z.E):[],[te]);return r.createElement(B.Ph,{className:ve,disabled:Re.loading,"aria-label":"Table selector",value:ie,options:Re.value,onChange:Oe,isLoading:Re.loading,menuShouldPortal:!0,placeholder:Re.loading?"Loading tables":"Select table"})},U=[{label:"Builder",value:l.je.Builder},{label:"Code",value:l.je.Code}];function C({db:ne,isPostgresInstance:te,isQueryRunnable:ie,onChange:ve,onQueryRowChange:Oe,onRunQuery:Re,preconfiguredDataset:Ne,query:Ve,queryRowFilter:Be}){const{editorMode:Ye}=Ve,[ze,dt]=(0,I.Z)(),[Ot,et]=(0,r.useState)(!1),nt=ne.toRawSql,Tt=(0,r.useCallback)(mt=>{if(Ye===l.je.Code){et(!0);return}ve({...Ve,editorMode:mt})},[Ye,ve,Ve]),Ut=mt=>{const Mt={...Ve,format:mt.value!==void 0?mt.value:$.ws.Table};ve(Mt)},Yt=mt=>{if(mt.value===Ve.dataset)return;const Mt={...Ve,dataset:mt.value,table:void 0,sql:void 0,rawSql:""};ve(Mt)},At=mt=>{if(mt.value===Ve.table)return;const Mt={...Ve,table:mt.value,sql:void 0,rawSql:""};ve(Mt)},yt=()=>!(!(0,Y.F)()&&te);return r.createElement(r.Fragment,null,r.createElement(A.K,null,r.createElement(P.X,{label:"Format",value:Ve.format,placeholder:"Select format",menuShouldPortal:!0,onChange:Ut,options:$.x7}),Ye===l.je.Builder&&r.createElement(r.Fragment,null,r.createElement(M.x,{id:"sql-filter",label:"Filter",transparent:!0,showLabel:!0,value:Be.filter,onChange:mt=>mt.target instanceof HTMLInputElement&&Oe({...Be,filter:mt.target.checked})}),r.createElement(M.x,{id:"sql-group",label:"Group",transparent:!0,showLabel:!0,value:Be.group,onChange:mt=>mt.target instanceof HTMLInputElement&&Oe({...Be,group:mt.target.checked})}),r.createElement(M.x,{id:"sql-order",label:"Order",transparent:!0,showLabel:!0,value:Be.order,onChange:mt=>mt.target instanceof HTMLInputElement&&Oe({...Be,order:mt.target.checked})}),r.createElement(M.x,{id:"sql-preview",label:"Preview",transparent:!0,showLabel:!0,value:Be.preview,onChange:mt=>mt.target instanceof HTMLInputElement&&Oe({...Be,preview:mt.target.checked})})),r.createElement(E.B,{grow:1}),ie?r.createElement(D.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>Re()},"Run query"):r.createElement(j.u,{theme:"error",content:r.createElement(r.Fragment,null,"Your query is invalid. Check below for details. ",r.createElement("br",null),"However, you can still run this query."),placement:"top"},r.createElement(D.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>Re()},"Run query")),r.createElement(F.S,{options:U,size:"sm",value:Ye,onChange:Tt}),r.createElement(w,{isOpen:Ot,onCopy:()=>{et(!1),dt(Ve.rawSql),ve({...Ve,rawSql:nt(Ve),editorMode:l.je.Builder})},onDiscard:()=>{et(!1),ve({...Ve,rawSql:nt(Ve),editorMode:l.je.Builder})},onCancel:()=>et(!1)})),Ye===l.je.Builder&&r.createElement(r.Fragment,null,r.createElement(S.T,{v:.5}),r.createElement(T.p,null,yt()&&r.createElement(b.S,{label:"Dataset",width:25},r.createElement(X,{db:ne,dataset:Ve.dataset,isPostgresInstance:te,preconfiguredDataset:Ne,onChange:Yt})),r.createElement(b.S,{label:"Table",width:25},r.createElement(z,{db:ne,dataset:Ve.dataset||Ne,table:Ve.table,onChange:At})))))}var d=e(42844),f=e(96284),g=e(55925),o=e(66310),i=e(11649);function s(ne,te){var ie;const ve=ne?.getPreviousNonWhiteSpaceToken(),Oe=ne?.getPreviousKeyword(),Re=(ie=ne?.getPreviousNonWhiteSpaceToken())==null?void 0:ie.is(l.iv.Operator,"/"),Ne=te.list(),Ve=[];for(const Be of Ne)Be.resolve(ne,Oe??null,ve??null,!!Re)&&Ve.push(Be.id);return Ve.length===0?[l.fC.Unknown]:Ve}var c=Object.defineProperty,y=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(ne,te,ie)=>te in ne?c(ne,te,{enumerable:!0,configurable:!0,writable:!0,value:ie}):ne[te]=ie,m=(ne,te)=>{for(var ie in te||(te={}))p.call(te,ie)&&n(ne,ie,te[ie]);if(y)for(var ie of y(te))a.call(te,ie)&&n(ne,ie,te[ie]);return ne};const v=(ne,te,ie={})=>m({label:ne,insertText:ne,kind:l.cm.Field,sortText:l.G8.Medium,range:te},ie);var N=Object.defineProperty,G=Object.defineProperties,q=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,H=(ne,te,ie)=>te in ne?N(ne,te,{enumerable:!0,configurable:!0,writable:!0,value:ie}):ne[te]=ie,_=(ne,te)=>{for(var ie in te||(te={}))W.call(te,ie)&&H(ne,ie,te[ie]);if(J)for(var ie of J(te))k.call(te,ie)&&H(ne,ie,te[ie]);return ne},ae=(ne,te)=>G(ne,q(te));const oe=async(ne,te,ie,ve,Oe)=>{let Re=[];const Ve=te?.isWhiteSpace()||te?.isParenthesis()||te?.isIdentifier()&&te.value.endsWith(".")||!te?.range?ne.Range.fromPositions(ve.position):te?.range;for(const Be of[...new Set(ie)]){const Ye=Oe.getIfExists(Be);if(Ye){const ze=await Ye.suggestions(ae(_({},ve),{range:Ve}),ne);Re=[...Re,...ze.map(dt=>v(dt.label,Ve,_({kind:dt.kind},dt)))]}}return Promise.resolve(Re)},le=()=>[{id:l.fC.SelectKeyword,name:l.fC.SelectKeyword,kind:[l.is.SelectKeyword]},{id:l.fC.WithKeyword,name:l.fC.WithKeyword,kind:[l.is.WithKeyword]},{id:l.fC.AfterSelectKeyword,name:l.fC.AfterSelectKeyword,kind:[l.is.StarWildCard,l.is.FunctionsWithArguments,l.is.Columns,l.is.SelectMacro]},{id:l.fC.AfterSelectFuncFirstArgument,name:l.fC.AfterSelectFuncFirstArgument,kind:[l.is.Columns]},{id:l.fC.AfterGroupByFunctionArgument,name:l.fC.AfterGroupByFunctionArgument,kind:[l.is.Columns]},{id:l.fC.AfterWhereFunctionArgument,name:l.fC.AfterWhereFunctionArgument,kind:[l.is.Columns]},{id:l.fC.AfterSelectArguments,name:l.fC.AfterSelectArguments,kind:[l.is.Columns]},{id:l.fC.AfterFromKeyword,name:l.fC.AfterFromKeyword,kind:[l.is.Schemas,l.is.Tables,l.is.TableMacro]},{id:l.fC.AfterSchema,name:l.fC.AfterSchema,kind:[l.is.Tables,l.is.TableMacro]},{id:l.fC.SelectAlias,name:l.fC.SelectAlias,kind:[l.is.Columns,l.is.FunctionsWithArguments]},{id:l.fC.FromKeyword,name:l.fC.FromKeyword,kind:[l.is.FromKeyword]},{id:l.fC.AfterFrom,name:l.fC.AfterFrom,kind:[l.is.WhereKeyword,l.is.GroupByKeywords,l.is.OrderByKeywords,l.is.LimitKeyword]},{id:l.fC.AfterTable,name:l.fC.AfterTable,kind:[l.is.WhereKeyword,l.is.GroupByKeywords,l.is.OrderByKeywords,l.is.LimitKeyword]},{id:l.fC.WhereKeyword,name:l.fC.WhereKeyword,kind:[l.is.Columns,l.is.FilterMacro,l.is.TemplateVariables]},{id:l.fC.WhereComparisonOperator,name:l.fC.WhereComparisonOperator,kind:[l.is.ComparisonOperators]},{id:l.fC.WhereValue,name:l.fC.WhereValue,kind:[l.is.FilterMacro,l.is.TemplateVariables]},{id:l.fC.AfterWhereValue,name:l.fC.AfterWhereValue,kind:[l.is.LogicalOperators,l.is.GroupByKeywords,l.is.OrderByKeywords,l.is.LimitKeyword,l.is.Columns,l.is.TemplateVariables]},{id:l.fC.AfterGroupByKeywords,name:l.fC.AfterGroupByKeywords,kind:[l.is.GroupMacro,l.is.Columns]},{id:l.fC.AfterGroupBy,name:l.fC.AfterGroupBy,kind:[l.is.OrderByKeywords,l.is.LimitKeyword]},{id:l.fC.AfterOrderByKeywords,name:l.fC.AfterOrderByKeywords,kind:[l.is.Columns]},{id:l.fC.AfterOrderByFunction,name:l.fC.AfterOrderByFunction,kind:[l.is.SortOrderDirectionKeyword,l.is.LimitKeyword]},{id:l.fC.AfterOrderByDirection,name:l.fC.AfterOrderByDirection,kind:[l.is.LimitKeyword]},{id:l.fC.AfterIsOperator,name:l.fC.AfterOrderByDirection,kind:[l.is.NotKeyword,l.is.NullValue,l.is.BoolValues]},{id:l.fC.AfterIsNotOperator,name:l.fC.AfterOrderByDirection,kind:[l.is.NullValue,l.is.BoolValues]}];function ue(ne,te){let ie=[];for(let ve=0;ve<ne.length;ve++){const Oe=te.getIfExists(ne[ve]);Oe&&(ie=ie.concat(Oe.kind))}return ie}class me{constructor(te,ie,ve,Oe,Re){this.type=te,this.value=ie,this.range=ve,this.previous=Oe,this.next=Re}isKeyword(){return this.type===l.iv.Keyword}isWhiteSpace(){return this.type===l.iv.Whitespace}isParenthesis(){return this.type===l.iv.Parenthesis}isIdentifier(){return this.type===l.iv.Identifier}isString(){return this.type===l.iv.String}isNumber(){return this.type===l.iv.Number}isDoubleQuotedString(){return this.type===l.iv.Type}isVariable(){return this.type===l.iv.Variable}isFunction(){return this.type===l.iv.Function}isOperator(){return this.type===l.iv.Operator}isTemplateVariable(){return this.type===l.iv.Variable}is(te,ie){const ve=this.type===te;return ie!==void 0?ve&&pe(te,this,ie):ve}getPreviousNonWhiteSpaceToken(){let te=this.previous;for(;te!=null;){if(!te.isWhiteSpace())return te;te=te.previous}return null}getPreviousOfType(te,ie){let ve=this.previous;for(;ve!=null;){const Oe=ve.type===te;if(ie!==void 0?Oe&&pe(te,ve,ie):Oe)return ve;ve=ve.previous}return null}getPreviousUntil(te,ie,ve){let Oe=[],Re=this.previous;for(;Re!=null;){if(ie.some(Ve=>Ve===Re?.type)){Re=Re.previous;continue}const Ne=Re.type===te;if(ve!==void 0?Ne&&pe(te,Re,ve):Ne)return Oe;Re.isWhiteSpace()||Oe.push(Re),Re=Re.previous}return Oe}getNextUntil(te,ie,ve){let Oe=[],Re=this.next;for(;Re!=null;){if(ie.some(Ve=>Ve===Re?.type)){Re=Re.next;continue}const Ne=Re.type===te;if(ve!==void 0?Ne&&pe(te,Re,ve):Ne)return Oe;Re.isWhiteSpace()||Oe.push(Re),Re=Re.next}return Oe}getPreviousKeyword(){let te=this.previous;for(;te!=null;){if(te.isKeyword())return te;te=te.previous}return null}getNextNonWhiteSpaceToken(){let te=this.next;for(;te!=null;){if(!te.isWhiteSpace())return te;te=te.next}return null}getNextOfType(te,ie){let ve=this.next;for(;ve!=null;){const Oe=ve.type===te;if(ie!==void 0?Oe&&pe(te,ve,ie):Oe)return ve;ve=ve.next}return null}}function pe(ne,te,ie){return ne===l.iv.Keyword||ne===l.iv.Operator?te.value.toLowerCase()===ie.toString().toLowerCase():te.value===ie}function Ee(ne,te,ie,ve="sql"){var Oe;let Re=null,Ne=null;const Ve=ne.editor.tokenize((Oe=te.getValue())!=null?Oe:"",ve);for(let Be=0;Be<Ve.length;Be++){const Ye=Ve[Be];if(!Ye.length&&Ne){const ze={offset:0,type:l.iv.Whitespace,language:ve,_tokenBrand:void 0};Ye.push(ze)}for(let ze=0;ze<Ye.length;ze++){const dt=Ye[ze];let Ot=Ye.length>ze+1?Ye[ze+1].offset+1:te.getLineLength(Be+1)+1;const et={startLineNumber:Be+1,startColumn:dt.offset===0?0:dt.offset+1,endLineNumber:Be+1,endColumn:Ot},nt=te.getValueInRange(et),Tt=new me(dt.type,nt,et,Ne,null);ne.Range.containsPosition(et,ie)&&(Re=Tt),Ne&&(Ne.next=Tt),Ne=Tt}}return Re}var ge=e(5560);const Se=ne=>{var te;return(te=ne?.getPreviousOfType(l.iv.Keyword,ge.SELECT))!=null?te:null},Ae=ne=>{const te=Se(ne);return te?.getNextOfType(l.iv.Keyword,ge.FROM)},ye=ne=>{var te;const ie=Ae(ne),ve=ie?.getNextNonWhiteSpaceToken();return ve?.isVariable()||ve?.isKeyword()&&((te=ve.next)!=null&&te.is(l.iv.Parenthesis,"("))?null:ve},De=ne=>{const te=ne?.value.split(".");return te?.length===1?{table:te[0]}:te?.length===2?{schema:te[0],table:te[1]}:null},Fe={id:"editor.action.triggerSuggest",title:""};var We,Ke=new Uint8Array(16);function _e(){if(!We&&(We=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!We))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return We(Ke)}const He=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function at(ne){return typeof ne=="string"&&He.test(ne)}const ke=at;for(var de=[],Ce=0;Ce<256;++Ce)de.push((Ce+256).toString(16).substr(1));function Le(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ie=(de[ne[te+0]]+de[ne[te+1]]+de[ne[te+2]]+de[ne[te+3]]+"-"+de[ne[te+4]]+de[ne[te+5]]+"-"+de[ne[te+6]]+de[ne[te+7]]+"-"+de[ne[te+8]]+de[ne[te+9]]+"-"+de[ne[te+10]]+de[ne[te+11]]+de[ne[te+12]]+de[ne[te+13]]+de[ne[te+14]]+de[ne[te+15]]).toLowerCase();if(!ke(ie))throw TypeError("Stringified UUID is invalid");return ie}const we=Le;function Ue(ne,te,ie){ne=ne||{};var ve=ne.random||(ne.rng||_e)();if(ve[6]=ve[6]&15|64,ve[8]=ve[8]&63|128,te){ie=ie||0;for(var Oe=0;Oe<16;++Oe)te[ie+Oe]=ve[Oe];return te}return we(ve)}const Ge=Ue;var be=e(25359),$e=e(39317);const rt=(ne,te,ie)=>()=>[{id:l.is.SelectKeyword,name:l.is.SelectKeyword,suggestions:(ve,Oe)=>Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Snippet,command:Fe,sortText:l.G8.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Snippet,command:Fe,sortText:l.G8.Medium}])},{id:l.is.TemplateVariables,name:l.is.TemplateVariables,suggestions:(ve,Oe)=>{const Re=(0,$e.J)();return Re?Promise.resolve(Re.getVariables().map(Ne=>{const Ve=`$${Ne.name}`,Be=Re.replace(Ve);return{label:Ve,detail:`(Template Variable) ${Be}`,kind:l.cm.Snippet,documentation:`(Template Variable) ${Be}`,insertText:`\\$${Ne.name} `,insertTextRules:l.a7.InsertAsSnippet,command:Fe,sortText:l.G8.Low}})):Promise.resolve([])}},{id:l.is.SelectMacro,name:l.is.SelectMacro,suggestions:(ve,Oe)=>Promise.resolve([...ie.list().filter(Re=>Re.type===l.mB.Value||Re.type===l.mB.Column).map(it)])},{id:l.is.TableMacro,name:l.is.TableMacro,suggestions:(ve,Oe)=>Promise.resolve([...ie.list().filter(Re=>Re.type===l.mB.Table).map(it)])},{id:l.is.GroupMacro,name:l.is.GroupMacro,suggestions:(ve,Oe)=>Promise.resolve([...ie.list().filter(Re=>Re.type===l.mB.Group).map(it)])},{id:l.is.FilterMacro,name:l.is.FilterMacro,suggestions:(ve,Oe)=>Promise.resolve([...ie.list().filter(Re=>Re.type===l.mB.Filter).map(it)])},{id:l.is.WithKeyword,name:l.is.WithKeyword,suggestions:(ve,Oe)=>Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Snippet,command:Fe,sortText:l.G8.Medium}])},{id:l.is.StarWildCard,name:l.is.StarWildCard,suggestions:(ve,Oe)=>Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Field,command:Fe,sortText:l.G8.High}])},{id:l.is.FunctionsWithArguments,name:l.is.FunctionsWithArguments,suggestions:(ve,Oe)=>Promise.resolve([...ne.list().map(Re=>({label:Re.name,insertText:`${Re.name}($0)`,documentation:Re.description,insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Function,command:Fe,sortText:l.G8.MediumLow}))])},{id:l.is.FunctionsWithoutArguments,name:l.is.FunctionsWithoutArguments,suggestions:(ve,Oe)=>Promise.resolve([...ne.list().map(Re=>({label:Re.name,insertText:`${Re.name}()`,documentation:Re.description,insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Function,command:Fe,sortText:l.G8.MediumHigh}))])},{id:l.is.FromKeyword,name:l.is.FromKeyword,suggestions:(ve,Oe)=>Promise.resolve([{label:"FROM",insertText:"FROM $0",command:Fe,insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Keyword}])},{id:l.is.Schemas,name:l.is.Schemas,suggestions:(ve,Oe)=>Promise.resolve([])},{id:l.is.Tables,name:l.is.Tables,suggestions:(ve,Oe)=>Promise.resolve([])},{id:l.is.Columns,name:l.is.Columns,suggestions:(ve,Oe)=>Promise.resolve([])},{id:l.is.LogicalOperators,name:l.is.LogicalOperators,suggestions:(ve,Oe)=>Promise.resolve(te.list().filter(Re=>Re.type===l.$M.Logical).map(Re=>({label:Re.operator,insertText:`${Re.operator} `,documentation:Re.description,command:Fe,sortText:l.G8.MediumHigh,kind:l.cm.Operator})))},{id:l.is.WhereKeyword,name:l.is.WhereKeyword,suggestions:(ve,Oe)=>Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:Fe,sortText:l.G8.MediumHigh,kind:l.cm.Keyword}])},{id:l.is.ComparisonOperators,name:l.is.ComparisonOperators,suggestions:(ve,Oe)=>Promise.resolve([...te.list().filter(Re=>Re.type===l.$M.Comparison).map(Re=>({label:Re.operator,insertText:`${Re.operator} `,documentation:Re.description,command:Fe,sortText:l.G8.MediumHigh,kind:l.cm.Operator})),{label:"IN (...)",insertText:"IN ( $0 )",command:Fe,sortText:l.G8.Medium,kind:l.cm.Operator,insertTextRules:l.a7.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:Fe,sortText:l.G8.Medium,kind:l.cm.Operator,insertTextRules:l.a7.InsertAsSnippet},{label:"IS",insertText:"IS",command:Fe,sortText:l.G8.Medium,kind:l.cm.Operator},{label:"IS NOT",insertText:"IS NOT",command:Fe,sortText:l.G8.Medium,kind:l.cm.Operator}])},{id:l.is.GroupByKeywords,name:l.is.GroupByKeywords,suggestions:(ve,Oe)=>Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:Fe,sortText:l.G8.MediumHigh,kind:l.cm.Keyword}])},{id:l.is.OrderByKeywords,name:l.is.OrderByKeywords,suggestions:(ve,Oe)=>Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:Fe,sortText:l.G8.Medium,kind:l.cm.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:Fe,sortText:l.G8.MediumLow,kind:l.cm.Snippet,insertTextRules:l.a7.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:Fe,sortText:l.G8.MediumLow,kind:l.cm.Snippet,insertTextRules:l.a7.InsertAsSnippet}])},{id:l.is.LimitKeyword,name:l.is.LimitKeyword,suggestions:(ve,Oe)=>Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:Fe,sortText:l.G8.MediumLow,kind:l.cm.Keyword}])},{id:l.is.SortOrderDirectionKeyword,name:l.is.SortOrderDirectionKeyword,suggestions:(ve,Oe)=>Promise.resolve([ge.ASC,ge.DESC].map(Re=>({label:Re,insertText:`${Re} `,command:Fe,kind:l.cm.Keyword})))},{id:l.is.NotKeyword,name:l.is.NotKeyword,suggestions:()=>Promise.resolve([{label:"NOT",insertText:"NOT",command:Fe,kind:l.cm.Keyword,sortText:l.G8.High}])},{id:l.is.BoolValues,name:l.is.BoolValues,suggestions:()=>Promise.resolve(["TRUE","FALSE"].map(ve=>({label:ve,insertText:`${ve}`,command:Fe,kind:l.cm.Keyword,sortText:l.G8.Medium})))},{id:l.is.NullValue,name:l.is.NullValue,suggestions:()=>Promise.resolve(["NULL"].map(ve=>({label:ve,insertText:`${ve}`,command:Fe,kind:l.cm.Keyword,sortText:l.G8.Low})))}];function it(ne){return{label:ne.name,insertText:`${"\\"+ne.text}${Qe(ne.args)} `,insertTextRules:l.a7.InsertAsSnippet,kind:l.cm.Snippet,documentation:ne.description,command:Fe}}function Qe(ne){return ne?"(".concat(ne.map((te,ie)=>`\${${ie}:${te}}`).join(", ")).concat(")"):"()"}function ut(){return[{id:l.fC.SelectKeyword,name:l.fC.SelectKeyword,resolve:(ne,te,ie,ve)=>!!(ne===null||ne.isWhiteSpace()&&ne.previous===null||ne.is(l.iv.Keyword,ge.SELECT)||ne.is(l.iv.Keyword,ge.SELECT)&&ne.previous===null||ve||ne.isIdentifier()&&(ve||ne?.previous===null)||ne.isIdentifier()&&ge.SELECT.startsWith(ne.value.toLowerCase()))},{id:l.fC.WithKeyword,name:l.fC.WithKeyword,resolve:(ne,te,ie,ve)=>!!(ne===null||ne.isWhiteSpace()&&ne.previous===null||ne.is(l.iv.Keyword,ge.WITH)&&ne.previous===null||ne.isIdentifier()&&ge.WITH.toLowerCase().startsWith(ne.value.toLowerCase()))},{id:l.fC.AfterSelectKeyword,name:l.fC.AfterSelectKeyword,resolve:(ne,te,ie,ve)=>ie?.value.toLowerCase()===ge.SELECT},{id:l.fC.AfterSelectArguments,name:l.fC.AfterSelectArguments,resolve:(ne,te,ie,ve)=>te?.value.toLowerCase()===ge.SELECT&&ie?.value===","},{id:l.fC.AfterSelectFuncFirstArgument,name:l.fC.AfterSelectFuncFirstArgument,resolve:(ne,te,ie,ve)=>!!((te?.value.toLowerCase()===ge.SELECT||te?.value.toLowerCase()===ge.AS)&&(ie?.is(l.iv.Parenthesis,"(")||ne?.is(l.iv.Parenthesis,"()")))},{id:l.fC.AfterWhereFunctionArgument,name:l.fC.AfterWhereFunctionArgument,resolve:(ne,te,ie,ve)=>!!(te?.is(l.iv.Keyword,ge.WHERE)&&(ie?.is(l.iv.Parenthesis,"(")||ne?.is(l.iv.Parenthesis,"()")))},{id:l.fC.AfterGroupBy,name:l.fC.AfterGroupBy,resolve:(ne,te,ie,ve)=>{var Oe;return!!(te?.is(l.iv.Keyword,ge.BY)&&((Oe=te?.getPreviousKeyword())!=null&&Oe.is(l.iv.Keyword,ge.GROUP))&&(ie?.isIdentifier()||ie?.isDoubleQuotedString()||ie?.is(l.iv.Parenthesis,")")||ie?.is(l.iv.Parenthesis,"()")))}},{id:l.fC.SelectAlias,name:l.fC.SelectAlias,resolve:(ne,te,ie,ve)=>ie?.value===","&&te?.value.toLowerCase()===ge.AS},{id:l.fC.FromKeyword,name:l.fC.FromKeyword,resolve:(ne,te,ie,ve)=>!!(te?.value.toLowerCase()===ge.SELECT&&ie?.value!==","||(ne?.isKeyword()||ne?.isIdentifier())&&ge.FROM.toLowerCase().startsWith(ne.value.toLowerCase()))},{id:l.fC.AfterFromKeyword,name:l.fC.AfterFromKeyword,resolve:(ne,te,ie,ve)=>!ne?.value.includes(".")&&ie?.value.toLowerCase()===ge.FROM},{id:l.fC.AfterSchema,name:l.fC.AfterSchema,resolve:(ne,te,ie,ve)=>(ne?.isWhiteSpace()&&ne?.next&&(ne=ne?.previous,ie=ne.getPreviousNonWhiteSpaceToken()),!!(ne?.isIdentifier()&&ne?.value.endsWith(".")&&ie?.value.toLowerCase()===ge.FROM))},{id:l.fC.AfterFrom,name:l.fC.AfterFrom,resolve:(ne,te,ie,ve)=>!!(te?.value.toLowerCase()===ge.FROM&&ie?.isDoubleQuotedString()||te?.value.toLowerCase()===ge.FROM&&ie?.isIdentifier()||te?.value.toLowerCase()===ge.FROM&&ie?.isVariable())},{id:l.fC.AfterTable,name:l.fC.AfterTable,resolve:(ne,te,ie,ve)=>!!(te?.value.toLowerCase()===ge.FROM&&(ie?.isVariable()||ie?.value!==""&&ie?.value.toLowerCase()!==ge.FROM))},{id:l.fC.WhereKeyword,name:l.fC.WhereKeyword,resolve:(ne,te,ie,ve)=>!!(te?.value.toLowerCase()===ge.WHERE&&(ie?.isKeyword()||ie?.is(l.iv.Parenthesis,"(")||ie?.is(l.iv.Operator,ge.AND)))},{id:l.fC.WhereComparisonOperator,name:l.fC.WhereComparisonOperator,resolve:(ne,te,ie,ve)=>{var Oe;return!!(te?.value.toLowerCase()===ge.WHERE&&!((Oe=ie?.getPreviousNonWhiteSpaceToken())!=null&&Oe.isOperator())&&!ne?.is(l.iv.Delimiter,".")&&!ne?.isParenthesis()&&(ie?.isIdentifier()||ie?.isDoubleQuotedString()))}},{id:l.fC.WhereValue,name:l.fC.WhereValue,resolve:(ne,te,ie,ve)=>!!(te?.value.toLowerCase()===ge.WHERE&&ie?.isOperator())},{id:l.fC.AfterWhereValue,name:l.fC.AfterWhereValue,resolve:(ne,te,ie,ve)=>{var Oe,Re,Ne;return!!(te?.value.toLowerCase()===ge.WHERE&&(ie?.is(l.iv.Operator,"and")||ie?.is(l.iv.Operator,"or")||ie?.isString()||ie?.isNumber()||ie?.is(l.iv.Parenthesis,")")||ie?.is(l.iv.Parenthesis,"()")||ie?.isTemplateVariable()||ie?.is(l.iv.IdentifierQuote)&&((Oe=ie.getPreviousNonWhiteSpaceToken())!=null&&Oe.is(l.iv.Identifier))&&((Ne=(Re=ie?.getPreviousNonWhiteSpaceToken())==null?void 0:Re.getPreviousNonWhiteSpaceToken())!=null&&Ne.is(l.iv.IdentifierQuote))))}},{id:l.fC.AfterGroupByKeywords,name:l.fC.AfterGroupByKeywords,resolve:(ne,te,ie,ve)=>{var Oe;return!!(te?.is(l.iv.Keyword,ge.BY)&&((Oe=te?.getPreviousKeyword())!=null&&Oe.is(l.iv.Keyword,ge.GROUP))&&(ie?.is(l.iv.Keyword,ge.BY)||ie?.is(l.iv.Delimiter,",")))}},{id:l.fC.AfterGroupByFunctionArgument,name:l.fC.AfterGroupByFunctionArgument,resolve:(ne,te,ie,ve)=>{var Oe;return!!(te?.is(l.iv.Keyword,ge.BY)&&((Oe=te?.getPreviousKeyword())!=null&&Oe.is(l.iv.Keyword,ge.GROUP))&&(ie?.is(l.iv.Parenthesis,"(")||ne?.is(l.iv.Parenthesis,"()")))}},{id:l.fC.AfterOrderByKeywords,name:l.fC.AfterOrderByKeywords,resolve:(ne,te,ie,ve)=>{var Oe;return!!(ie?.is(l.iv.Keyword,ge.BY)&&((Oe=ie?.getPreviousKeyword())!=null&&Oe.is(l.iv.Keyword,ge.ORDER)))}},{id:l.fC.AfterOrderByFunction,name:l.fC.AfterOrderByFunction,resolve:(ne,te,ie,ve)=>{var Oe,Re;return!!(te?.is(l.iv.Keyword,ge.BY)&&((Oe=te?.getPreviousKeyword())!=null&&Oe.is(l.iv.Keyword,ge.ORDER))&&ie?.is(l.iv.Parenthesis)&&((Re=ie?.getPreviousNonWhiteSpaceToken())!=null&&Re.is(l.iv.Function)))}},{id:l.fC.AfterOrderByDirection,name:l.fC.AfterOrderByDirection,resolve:(ne,te,ie,ve)=>!!(te?.is(l.iv.Keyword,ge.DESC)||te?.is(l.iv.Keyword,ge.ASC))},{id:l.fC.AfterIsOperator,name:l.fC.AfterIsOperator,resolve:(ne,te,ie,ve)=>!!ie?.is(l.iv.Operator,"IS")},{id:l.fC.AfterIsNotOperator,name:l.fC.AfterIsNotOperator,resolve:(ne,te,ie,ve)=>{var Oe;return!!(ie?.is(l.iv.Operator,"NOT")&&((Oe=ie.getPreviousNonWhiteSpaceToken())!=null&&Oe.is(l.iv.Operator,"IS")))}}]}var st=e(46414),Je=e(12343);let vt={logger:()=>{}},gt=()=>{};st.x&&Je.h&&(vt=(0,Je.h)("SQLEditor"),gt=vt.logger,(0,st.x)("sqleditor",void 0,vt));var It=e(60429);const Lt={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:()=>Promise.resolve().then(e.bind(e,5560)),completionProvider:It.h};var lt=Object.defineProperty,Rt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,Et=(ne,te,ie)=>te in ne?lt(ne,te,{enumerable:!0,configurable:!0,writable:!0,value:ie}):ne[te]=ie,Ct=(ne,te)=>{for(var ie in te||(te={}))zt.call(te,ie)&&Et(ne,ie,te[ie]);if(wt)for(var ie of wt(te))ct.call(te,ie)&&Et(ne,ie,te[ie]);return ne},Pt=(ne,te)=>Rt(ne,bt(te));const xt="sql",Ft=new Map,xe=new Map,ft=({children:ne,onBlur:te,onChange:ie,query:ve,language:Oe={id:xt},width:Re,height:Ne})=>{const Ve=(0,r.useRef)(null),Be=(0,r.useRef)(),Ye=(0,r.useMemo)(()=>{const dt=Ge(),Ot=`${Oe.id}-${dt}`;return Be.current=Ot,Ot},[Oe.id]);(0,r.useEffect)(()=>()=>{Be.current&&xe.delete(Be.current),gt(`Removing instance cache ${Be.current}`,!1,xe)},[]);const ze=(0,r.useCallback)(()=>{Ve.current&&Ve.current.getAction("editor.action.formatDocument").run()},[]);return r.createElement("div",{style:{width:Re}},r.createElement(i.p,{height:Ne||"240px",width:Re?`${Re-2}px`:void 0,language:Ye,value:ve,onBlur:dt=>{ie&&ie(dt,!1),te&&te()},showMiniMap:!1,showLineNumbers:!0,onEditorDidMount:(dt,Ot)=>{Ve.current=dt,dt.onDidChangeModelContent(et=>{const nt=dt.getValue();ie&&ie(nt,!1)}),dt.addCommand(Ot.KeyMod.CtrlCmd|Ot.KeyCode.Enter,()=>{const et=dt.getValue();ie&&ie(et,!0)}),dt.onKeyUp(et=>{et.keyCode===84&&dt.trigger(Fe.id,Fe.id,{})}),Ze(Ot,Oe,Ye)}}),ne&&ne({formatQuery:ze}))},pt=(ne,te)=>{if(te?.id!==xt&&!te.loader){gt(`Loading language '${te?.id}' from Monaco registry`,!1);const ve=ne.languages.getLanguages().find(({id:Oe})=>Oe===te?.id);if(!ve)throw Error(`Unknown Monaco language ${te?.id}`);return Ct(Ct({completionProvider:It.h},ve),te)}return Ct(Ct({},Lt),te)},Ze=async(ne,te,ie)=>{const ve=pt(ne,te);if(!ve.loader)return;const{language:Oe,conf:Re}=await ve.loader(ne);if(ne.languages.register({id:ie}),ne.languages.setMonarchTokensProvider(ie,Ct({},Oe)),ne.languages.setLanguageConfiguration(ie,Ct({},Re)),ve.formatter&&ne.languages.registerDocumentFormattingEditProvider(ie,{provideDocumentFormattingEdits:Ne=>{var Ve;const Be=(Ve=te.formatter)==null?void 0:Ve.call(te,Ne.getValue());return[{range:Ne.getFullModelRange(),text:Be||""}]}}),ve.completionProvider){const Ne=ve.completionProvider(ne,Oe);Nt(te.id,ie,Ne);const Ve=Ft.get(te.id),Be=xe.get(ie),Ye=async(ze,dt,Ot,et)=>{const nt=Ee(ne,ze,dt,ie),Tt=s(nt,Ve.positionResolvers),Ut=ue(Tt,Ve.suggestionKinds);gt("Statement position",!1,Tt),gt("Suggestion kinds",!1,Ut);const Yt={position:dt,currentToken:nt,statementPosition:Tt,kind:Ut,range:ne.Range.fromPositions(dt)};return{suggestions:await oe(ne,nt,Ut,Yt,Be)}};ne.languages.registerCompletionItemProvider(ie,Pt(Ct({},Ne),{provideCompletionItems:Ye}))}};function Nt(ne,te,ie){var ve;Ft.has(ne)||$t(ne);const Oe=Ft.get(ne);xe.has(te)||xe.set(te,new be.B(rt(Oe.functions,Oe.operators,Oe.macros)));const Re=xe.get(te);if(ie.supportedFunctions)for(const Ne of ie.supportedFunctions())Oe.functions.getIfExists(Ne.id)||Oe.functions.register(Ne);if(ie.supportedOperators)for(const Ne of ie.supportedOperators())Oe.operators.getIfExists(Ne.id)||Oe.operators.register(Pt(Ct({},Ne),{name:Ne.id}));if(ie.supportedMacros)for(const Ne of ie.supportedMacros())Oe.macros.getIfExists(Ne.id)||Oe.macros.register(Pt(Ct({},Ne),{name:Ne.id}));if(ie.customStatementPlacement)for(const Ne of ie.customStatementPlacement()){const Ve=Oe.positionResolvers.getIfExists(Ne.id);if(!Ve)Oe.positionResolvers.register(Pt(Ct({},Ne),{id:Ne.id,name:Ne.id})),Oe.suggestionKinds.register({id:Ne.id,name:Ne.id,kind:[]});else{const Be=Ve.resolve;Ve.resolve=(...Ye)=>{const ze=Ne.resolve(...Ye);return Ne.overrideDefault?ze:Be(...Ye)||ze}}}if(ie.customSuggestionKinds)for(const Ne of ie.customSuggestionKinds()){if((ve=Ne.applyTo)==null||ve.forEach(Ve=>{const Be=Oe.suggestionKinds.getIfExists(Ve);Be&&Be.kind.indexOf(Ne.id)===-1&&Be.kind.push(Ne.id)}),Ne.overrideDefault){const Ve=Re.get(Ne.id);if(Ve!==void 0){Ve.suggestions=Ne.suggestionsResolver;continue}}Re.register({id:Ne.id,name:Ne.id,suggestions:Ne.suggestionsResolver})}if(ie.schemas){const Ne=Re.get(l.is.Schemas),Ve=Ne.suggestions;Ne.suggestions=async(Be,Ye)=>{const ze=await Ve(Be,Ye);if(!ie.schemas)return[...ze];const Ot=(await ie.schemas.resolve()).map(et=>{var nt;return{label:et.name,insertText:`${(nt=et.completion)!=null?nt:et.name}.`,command:Fe,kind:l.cm.Module,sortText:l.G8.High}});return[...ze,...Ot]}}if(ie.tables){const Ne=Re.get(l.is.Tables),Ve=Ne.suggestions;Ne.suggestions=async(Be,Ye)=>{var ze,dt,Ot,et,nt;const Tt=await Ve(Be,Ye),Ut=ye(Be.currentToken),At=((dt=(ze=ie.tables)==null?void 0:ze.parseName)!=null?dt:De)(Ut),yt=((nt=await((et=(Ot=ie.tables)==null?void 0:Ot.resolve)==null?void 0:et.call(Ot,At)))!=null?nt:[]).map(mt=>{var Mt;return{label:mt.name,insertText:`${(Mt=mt.completion)!=null?Mt:mt.name}${mt.completion===mt.name?" $0":""}`,insertTextRules:l.a7.InsertAsSnippet,command:Fe,kind:l.cm.Field,sortText:l.G8.MediumHigh}});return[...Tt,...yt]}}if(ie.columns){const Ne=Re.get(l.is.Columns),Ve=Ne.suggestions;Ne.suggestions=async(Be,Ye)=>{var ze,dt,Ot;const et=await Ve(Be,Ye),nt=ye(Be.currentToken);let Tt;const Ut=(dt=(ze=ie.tables)==null?void 0:ze.parseName)!=null?dt:De;nt&&nt.value&&(Tt=Ut(nt));let Yt=[];if(Tt){const At=await((Ot=ie.columns)==null?void 0:Ot.resolve(Tt));Yt=At?At.map(yt=>{var mt;return{label:yt.name,insertText:(mt=yt.completion)!=null?mt:yt.name,kind:l.cm.Field,sortText:l.G8.High,detail:yt.type,documentation:yt.description}}):[]}return[...et,...Yt]}}}function $t(ne){return Ft.has(ne)||Ft.set(ne,{functions:new be.B,operators:new be.B,suggestionKinds:new be.B(le),positionResolvers:new be.B(ut),macros:new be.B}),Ft.get(ne)}function Wt({children:ne,onChange:te,query:ie,width:ve,height:Oe,editorLanguageDefinition:Re}){const Ne=(0,r.useRef)(ie);(0,r.useEffect)(()=>{Ne.current=ie},[ie]);const Ve=(0,r.useCallback)((Be,Ye)=>{const ze={...Ne.current,rawQuery:!0,rawSql:Be};te(ze,Ye)},[te]);return r.createElement(ft,{width:ve,height:Oe,query:ie.rawSql,onChange:Ve,language:Re},ne)}var Xt=e(64022),qe=e(67437),kt=e(26811),ce=e(46961),Te=e(21609),je=e(62108);function ot({db:ne,query:te,onValidate:ie,range:ve}){const[Oe,Re]=(0,r.useState)(),Ne=(0,o.l4)(),Ve=(0,r.useMemo)(()=>(0,Te.Cf)("bytes"),[]),Be=(0,r.useMemo)(()=>({error:(0,d.css)`
        color: ${Ne.colors.error.text};
        font-size: ${Ne.typography.bodySmall.fontSize};
        font-family: ${Ne.typography.fontFamilyMonospace};
      `,valid:(0,d.css)`
        color: ${Ne.colors.success.text};
      `,info:(0,d.css)`
        color: ${Ne.colors.text.secondary};
      `}),[Ne]),[Ye,ze]=(0,kt.Z)(async Ot=>Ot.rawSql?.trim()===""?null:await ne.validateQuery(Ot,ve),[ne]),[,]=(0,ce.Z)(async()=>{const Ot=await ze(te);return Ot&&Re(Ot),null},1e3,[te,ze]);if((0,r.useEffect)(()=>{Oe?.isError&&ie(!1),Oe?.isValid&&ie(!0)},[Oe,ie]),!Ye.value&&!Ye.loading)return null;const dt=Ye.value?.error?Dt(Ye.value.error):"";return r.createElement(r.Fragment,null,Ye.loading&&r.createElement("div",{className:Be.info},r.createElement(je.$,{inline:!0,size:12})," Validating query..."),!Ye.loading&&Ye.value&&r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,Ye.value.isValid&&Ye.value.statistics&&r.createElement("div",{className:Be.valid},r.createElement(K.J,{name:"check"})," This query will process"," ",r.createElement("strong",null,(0,Te.zc)(Ve(Ye.value.statistics.TotalBytesProcessed)))," ","when run.")),r.createElement(r.Fragment,null,Ye.value.isError&&r.createElement("div",{className:Be.error},dt))))}function Dt(ne){const te=ne.split(":");return te.length>2?te.slice(2).join(":"):ne}function Kt({showTools:ne,onFormatCode:te,onExpand:ie,isExpanded:ve,...Oe}){const Re=(0,o.l4)(),[Ne,Ve]=(0,r.useState)(),Be=(0,r.useMemo)(()=>({container:(0,d.css)`
        border: 1px solid ${Re.colors.border.medium};
        border-top: none;
        padding: ${Re.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${Re.typography.bodySmall.fontSize};
      `,error:(0,d.css)`
        color: ${Re.colors.error.text};
        font-size: ${Re.typography.bodySmall.fontSize};
        font-family: ${Re.typography.fontFamilyMonospace};
      `,valid:(0,d.css)`
        color: ${Re.colors.success.text};
      `,info:(0,d.css)`
        color: ${Re.colors.text.secondary};
      `,hint:(0,d.css)`
        color: ${Re.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[Re]);let Ye={};return!ne&&Ne===void 0&&(Ye={height:0,padding:0,visibility:"hidden"}),r.createElement("div",{className:Be.container,style:Ye},r.createElement("div",null,Oe.onValidate&&r.createElement(ot,{...Oe,onValidate:ze=>{Ve(ze),Oe.onValidate(ze)}})),ne&&r.createElement("div",null,r.createElement(Xt.Lh,{spacing:"sm"},te&&r.createElement(qe.h,{onClick:te,name:"brackets-curly",size:"xs",tooltip:"Format query"}),ie&&r.createElement(qe.h,{onClick:()=>ie(!ve),name:ve?"angle-up":"angle-down",size:"xs",tooltip:ve?"Collapse editor":"Expand editor"}),r.createElement(j.u,{content:"Hit CTRL/CMD+Return to run query"},r.createElement(K.J,{className:Be.hint,name:"keyboard"})))))}function rr({db:ne,query:te,onChange:ie,onRunQuery:ve,onValidate:Oe,queryToValidate:Re,range:Ne}){const Ve=(0,o.l4)(),Be=(0,o.wW)(Tr),[Ye,ze]=(0,r.useState)(!1),[dt,Ot]=(0,f.Z)(),[et,nt]=(0,f.Z)(),Tt=(0,r.useMemo)(()=>ne.getEditorLanguageDefinition(),[ne]),Ut=(yt,mt)=>r.createElement(Wt,{editorLanguageDefinition:Tt,query:te,width:yt,height:mt?mt-Ot.height:void 0,onChange:ie},({formatQuery:Mt})=>r.createElement("div",{ref:dt},r.createElement(Kt,{db:ne,query:Re,onValidate:Oe,onFormatCode:Mt,showTools:!0,range:Ne,onExpand:ze,isExpanded:Ye}))),Yt=(yt=!1)=>yt?r.createElement(g.Z,null,({width:mt,height:Mt})=>Ut(mt,Mt)):r.createElement("div",{ref:et},Ut()),At=()=>r.createElement("div",{style:{width:nt.width,height:nt.height,background:Ve.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return r.createElement(r.Fragment,null,Ye?At():Yt(),Ye&&r.createElement(V.u,{title:`Query ${te.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:Be.modal,contentClassName:Be.modalContent,isOpen:Ye,onDismiss:()=>{ze(!1)}},Yt(!0)))}function Tr(ne){return{modal:(0,d.css)`
      width: 95vw;
      height: 95vh;
    `,modalContent:(0,d.css)`
      height: 100%;
      padding-top: 0;
    `}}var dr=e(83788),Lr=e(22209),Mr=e(1814);function pr({rawSql:ne}){const[te,ie]=(0,I.Z)(),ve=(0,o.wW)(vr),Oe=r.createElement("div",{className:ve.labelWrapper},r.createElement("span",{className:ve.label},"Preview"),r.createElement(qe.h,{tooltip:"Copy to clipboard",onClick:()=>ie(ne),name:"copy"}));return r.createElement(Lr.g,{label:Oe,className:ve.grow},r.createElement(i.p,{language:"sql",height:80,value:(0,Mr._)(ne),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function vr(ne){return{grow:(0,d.css)({flexGrow:1}),label:(0,d.css)({fontSize:12,fontWeight:ne.typography.fontWeightMedium}),labelWrapper:(0,d.css)({display:"flex",justifyContent:"space-between",paddingBottom:ne.spacing(.5)})}}function nr({query:ne,onQueryChange:te,db:ie}){return{onSqlChange:(0,r.useCallback)(Oe=>{const Re=ie.toRawSql,Ne=Re({sql:Oe,dataset:ne.dataset,table:ne.table,refId:ne.refId}),Ve={...ne,sql:Oe,rawSql:Ne};te(Ve)},[ie,te,ne])}}var gr=e(38162),ar=e(70774),Sr=e(76715);function hr({sql:ne,columns:te,onSqlChange:ie}){const ve=(0,r.useCallback)(Oe=>{const Re=Oe.map(Ve=>(0,R.U2)(Ve.property?.name)),Ne={...ne,groupBy:Re};ie(Ne)},[ie,ne]);return r.createElement(gr.k,{items:ne.groupBy,onChange:ve,renderItem:mr({options:te})})}function mr({options:ne}){return function(ie,ve,Oe){return r.createElement(ar.B,null,r.createElement(B.Ph,{value:ie.property?.name?(0,Z.E)(ie.property.name):null,"aria-label":"Group by",options:ne,menuShouldPortal:!0,onChange:({value:Re})=>Re&&ve((0,R.U2)(Re))}),r.createElement(Sr._,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:Oe}))}}function br({fields:ne,query:te,onQueryChange:ie,db:ve}){const{onSqlChange:Oe}=nr({query:te,onQueryChange:ie,db:ve});return r.createElement(hr,{columns:ne,sql:te.sql,onSqlChange:Oe})}var Zt=e(89949),ir=e(1128);const qr=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function en({sql:ne,onSqlChange:te,columns:ie,showOffset:ve}){const Oe=(0,r.useCallback)(Be=>{const Ye={...ne,orderByDirection:Be};te(Ye)},[te,ne]),Re=(0,r.useCallback)(Be=>{const Ye={...ne,limit:Number.parseInt(Be.currentTarget.value,10)};te(Ye)},[te,ne]),Ne=(0,r.useCallback)(Be=>{const Ye={...ne,offset:Number.parseInt(Be.currentTarget.value,10)};te(Ye)},[te,ne]),Ve=(0,r.useCallback)(Be=>{const Ye={...ne,orderBy:(0,R.ax)(Be?.value)};Be===null&&(Ye.orderByDirection=void 0),te(Ye)},[te,ne]);return r.createElement(r.Fragment,null,r.createElement(b.S,{label:"Order by",width:25},r.createElement(ar.B,null,r.createElement(B.Ph,{"aria-label":"Order by",options:ie,value:ne.orderBy?.property.name?(0,Z.E)(ne.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:Ve}),r.createElement(S.T,{h:1.5}),r.createElement(F.S,{options:qr,disabled:!ne?.orderBy?.property.name,value:ne.orderByDirection,onChange:Oe}))),r.createElement(b.S,{label:"Limit",optional:!0,width:25},r.createElement(ir.I,{type:"number",min:0,id:(0,Zt.uniqueId)("limit-"),value:ne.limit||"",onChange:Re})),ve&&r.createElement(b.S,{label:"Offset",optional:!0,width:25},r.createElement(ir.I,{type:"number",id:(0,Zt.uniqueId)("offset-"),value:ne.offset||"",onChange:Ne})))}function Vt({fields:ne,query:te,onQueryChange:ie,db:ve}){const{onSqlChange:Oe}=nr({query:te,onQueryChange:ie,db:ve});let Re=[];return ne&&(Re=[{value:"",label:"Selected columns",options:te.sql?.columns?.map((Ve,Be)=>{const Ye=Ve.name?`${Ve.name}(${Ve.parameters?.map(ze=>ze.name)})`:Ve.parameters?.map(ze=>ze.name);return{value:Ye,label:`${Be+1} - ${Ye}`}}),expanded:!0},...ne]),r.createElement(en,{sql:te.sql,onSqlChange:Oe,columns:Re})}var Kr=e(71366),wr=e(23852),Qt=e(37181);const or={label:"*",value:"*"};function Rr({sql:ne,format:te,columns:ie,onSqlChange:ve,functions:Oe}){const Re=(0,o.wW)(Hr),Ne=[or,...ie||[]],Ve=[];te===$.ws.Timeseries&&(Ve.push({label:"time",value:"time"}),Ve.push({label:"value",value:"value"}));const Be=(0,r.useCallback)((et,nt)=>Tt=>{let Ut={...et};et.parameters?.length?Ut.parameters=et.parameters.map(At=>At.type===Qt.a.FunctionParameter?{...At,name:Tt.value}:At):Ut.parameters=[{type:Qt.a.FunctionParameter,name:Tt.value}];const Yt={...ne,columns:ne.columns?.map((At,yt)=>yt===nt?Ut:At)};ve(Yt)},[ve,ne]),Ye=(0,r.useCallback)((et,nt)=>Tt=>{const Ut={...et,name:Tt?.value},Yt={...ne,columns:ne.columns?.map((At,yt)=>yt===nt?Ut:At)};ve(Yt)},[ve,ne]),ze=(0,r.useCallback)((et,nt)=>Tt=>{let Ut={...et};Tt!==null?Ut={...et,alias:`"${Tt?.value?.trim()}"`}:delete Ut.alias;const Yt={...ne,columns:ne.columns?.map((At,yt)=>yt===nt?Ut:At)};ve(Yt)},[ve,ne]),dt=(0,r.useCallback)(et=>()=>{const nt=[...ne.columns];nt.splice(et,1);const Tt={...ne,columns:nt};ve(Tt)},[ve,ne]),Ot=(0,r.useCallback)(()=>{const et={...ne,columns:[...ne.columns,(0,R.Wf)()]};ve(et)},[ve,ne]);return r.createElement(wr.K,{gap:2,wrap:!0,direction:"column"},ne.columns?.map((et,nt)=>r.createElement("div",{key:nt},r.createElement(wr.K,{gap:2,alignItems:"end"},r.createElement(b.S,{label:"Column",width:25},r.createElement(B.Ph,{value:Cr(et),options:Ne,inputId:`select-column-${nt}-${(0,Zt.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:Be(et,nt)})),r.createElement(b.S,{label:"Aggregation",optional:!0,width:25},r.createElement(B.Ph,{value:et.name?(0,Z.E)(et.name):null,inputId:`select-aggregation-${nt}-${(0,Zt.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:Oe,onChange:Ye(et,nt)})),r.createElement(b.S,{label:"Alias",optional:!0,width:15},r.createElement(B.Ph,{value:et.alias?(0,Z.E)(et.alias):null,inputId:`select-alias-${nt}-${(0,Zt.uniqueId)()}`,options:Ve,onChange:ze(et,nt),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),r.createElement(D.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:dt(nt)})))),r.createElement(D.zx,{type:"button",onClick:Ot,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:Re.addButton}))}const Hr=()=>({addButton:(0,d.css)({alignSelf:"flex-start"})});function Cr({parameters:ne}){const te=ne?.find(ie=>ie.type===Qt.a.FunctionParameter);return te?.name?(0,Z.E)(te.name):null}function kr({fields:ne,query:te,onQueryChange:ie,db:ve}){const{onSqlChange:Oe}=nr({query:te,onQueryChange:ie,db:ve}),Re=[...Kr.W,...ve.functions?.()||[]].map(Z.E);return r.createElement(Rr,{columns:ne,sql:te.sql,format:te.format,functions:Re,onSqlChange:Oe})}var Vr=e(80601),Gt=e(94313),Ur=e(99633),Er=e(48419);const Nr={add:"Add",remove:"Remove"},fr={id:Gt.cQ.uuid(),type:"group",children1:{[Gt.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},Ar={id:Gt.cQ.uuid(),type:"group",children1:{[Gt.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},Pr={...Gt.I4.widgets,text:{...Gt.I4.widgets.text,factory:function(te){return r.createElement(ir.I,{value:te?.value||"",placeholder:te?.placeholder,onChange:ie=>te?.setValue(ie.currentTarget.value)})}},number:{...Gt.I4.widgets.number,factory:function(te){return r.createElement(ir.I,{value:te?.value,placeholder:te?.placeholder,type:"number",onChange:ie=>te?.setValue(Number.parseInt(ie.currentTarget.value,10))})}},datetime:{...Gt.I4.widgets.datetime,factory:function(te){return r.createElement(Er.x,{onChange:ie=>{te?.setValue(ie.format(Gt.I4.widgets.datetime.valueFormat))},date:(0,Ur.CQ)(te?.value).utc()})}}},Ht={...Gt.I4.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:Nr.add,deleteLabel:Nr.remove,renderConjs:function(te){return r.createElement(B.Ph,{id:te?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:te?.conjunctionOptions?Object.keys(te?.conjunctionOptions).map(Z.E):void 0,value:te?.selectedConjunction,onChange:ie=>te?.setConjunction(ie.value)})},renderField:function(te){const ie=te?.config?.fields||{};return r.createElement(B.Ph,{id:te?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:te?.items.map(ve=>{const Oe=ie[ve.key].mainWidgetProps?.customProps?.icon;return{label:ve.label,value:ve.key,icon:Oe}}),value:te?.selectedKey,onChange:ve=>{te?.setField(ve.label)}})},renderButton:function(te){return r.createElement(D.zx,{type:"button",title:`${te?.label} filter`,onClick:te?.onClick,variant:"secondary",size:"md",icon:te?.label===Nr.add?"plus":"times"})},renderOperator:function(te){return r.createElement(B.Ph,{options:te?.items.map(ie=>({label:ie.label,value:ie.key})),"aria-label":"Operator",menuShouldPortal:!0,value:te?.selectedKey,onChange:ie=>{te?.setField(ie.value||"")}})}};var Yr=(ne=>(ne.IN="select_any_in",ne.NOT_IN="select_not_any_in",ne))(Yr||{});const Gr=Or(Gt.I4),Wr=Gt.I4.types.text.widgets.text,Fr=[...Wr.operators||[],"select_any_in","select_not_any_in"],zr={...Wr,operators:Fr},qt={...Gt.I4.types,text:{...Gt.I4.types.text,widgets:{...Gt.I4.types.text.widgets,text:zr}}},yr={...Gt.I4,widgets:Pr,settings:Ht,operators:Gr,types:qt};function Or(ne){const{...te}=ne.operators,ie=()=>"",ve=te.select_any_in.sqlFormatOp||ie,Oe=(Be,Ye,ze,dt,Ot,et,nt,Tt)=>ve(Be,Ye,cr(ze),dt,Ot,et,nt,Tt),Re=te.select_not_any_in.sqlFormatOp||ie,Ne=(Be,Ye,ze,dt,Ot,et,nt,Tt)=>Re(Be,Ye,cr(ze),dt,Ot,et,nt,Tt);return{...te,select_any_in:{...te.select_any_in,sqlFormatOp:Oe},select_not_any_in:{...te.select_not_any_in,sqlFormatOp:Ne}}}function cr(ne){return(0,Zt.isString)(ne)?ne.split(","):ne}function $r({sql:ne,config:te,onSqlChange:ie}){const[ve,Oe]=(0,r.useState)(),Re=(0,r.useMemo)(()=>({...yr,...te}),[te]);(0,r.useEffect)(()=>{if(!ve){const Ve=Gt.cQ.checkTree(Gt.cQ.loadTree(ne.whereJsonTree??Ar),Re);Oe(Ve)}},[Re,ne.whereJsonTree,ve]),(0,r.useEffect)(()=>{ne.whereJsonTree||Oe(Gt.cQ.checkTree(Gt.cQ.loadTree(Ar),Re))},[Re,ne.whereJsonTree]);const Ne=(0,r.useCallback)((Ve,Be)=>{Oe(Ve);const Ye={...ne,whereJsonTree:Gt.cQ.getTree(Ve),whereString:Gt.cQ.sqlFormat(Ve,Be)};ie(Ye)},[ie,ne]);return ve?r.createElement(Gt.AE,{...Re,value:ve,onChange:Ne,renderBuilder:Ve=>r.createElement(Gt.Ib,{...Ve})}):null}function Ir(ne){return`
    display: flex;
    gap: 8px;
    flex-direction: ${ne};`}(0,d.injectGlobal)`
  .group--header {
    ${Ir("row")}
  }

  .group-or-rule {
    ${Ir("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${Ir("row")}
  }

  .group--children {
    ${Ir("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function jr({query:ne,fields:te,onQueryChange:ie,db:ve}){const Oe=(0,Vr.Z)(async()=>_r(te),[te]),{onSqlChange:Re}=nr({query:ne,onQueryChange:ie,db:ve});return r.createElement($r,{key:JSON.stringify(Oe.value),config:{fields:Oe.value||{}},sql:ne.sql,onSqlChange:Ne=>{Re(Ne)}})}function _r(ne){const te={};for(const ie of ne)te[ie.value]={type:ie.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:ie.icon}}};return te}const tn=({query:ne,db:te,queryRowFilter:ie,onChange:ve,onValidate:Oe,range:Re})=>{const Ne=(0,O.Z)(async()=>await te.fields(ne),[te,ne.dataset,ne.table]);return r.createElement(r.Fragment,null,r.createElement(dr._,null,r.createElement(T.p,null,r.createElement(kr,{fields:Ne.value||[],query:ne,onQueryChange:ve,db:te})),ie.filter&&r.createElement(T.p,null,r.createElement(b.S,{label:"Filter by column value",optional:!0},r.createElement(jr,{fields:Ne.value||[],query:ne,onQueryChange:ve,db:te}))),ie.group&&r.createElement(T.p,null,r.createElement(b.S,{label:"Group by column"},r.createElement(br,{fields:Ne.value||[],query:ne,onQueryChange:ve,db:te}))),ie.order&&r.createElement(T.p,null,r.createElement(Vt,{fields:Ne.value||[],query:ne,onQueryChange:ve,db:te})),ie.preview&&ne.rawSql&&r.createElement(T.p,null,r.createElement(pr,{rawSql:ne.rawSql}))),r.createElement(Kt,{db:te,query:ne,onValidate:Oe,range:Re}))};function rn({datasource:ne,query:te,onChange:ie,onRunQuery:ve,range:Oe,queryHeaderProps:Re}){const[Ne,Ve]=(0,r.useState)(!0),Be=ne.getDB(),{preconfiguredDatabase:Ye}=ne,ze=!!Re?.isPostgresInstance,{loading:dt,error:Ot}=(0,O.Z)(async()=>()=>{ne.getDB(ne.id).init!==void 0&&ne.getDB(ne.id).init()},[ne]),et=(0,L.Y)(te),[nt,Tt]=(0,r.useState)({filter:!!et.sql?.whereString,group:!!et.sql?.groupBy?.[0]?.property.name,order:!!et.sql?.orderBy?.property.name,preview:!0}),[Ut,Yt]=(0,r.useState)(et);(0,r.useEffect)(()=>()=>{ne.getDB(ne.id).dispose!==void 0&&ne.getDB(ne.id).dispose()},[ne]);const At=(0,r.useCallback)(Mt=>{Br(Mt)&&ve&&ve()},[ve]),yt=(Mt,nn=!0)=>{Yt(Mt),ie(Mt),(0,R.IC)(Mt.sql?.columns)&&Mt.sql?.columns.some(an=>an.name)&&!nt.group&&Tt({...nt,group:!0}),nn&&At(Mt)},mt=Mt=>{Yt(Mt),ie(Mt)};return dt||Ot?null:r.createElement(r.Fragment,null,r.createElement(C,{db:Be,preconfiguredDataset:Ye,onChange:mt,onRunQuery:ve,onQueryRowChange:Tt,queryRowFilter:nt,query:et,isQueryRunnable:Ne,isPostgresInstance:ze}),r.createElement(S.T,{v:.5}),et.editorMode!==l.je.Code&&r.createElement(tn,{db:Be,query:et,onChange:Mt=>yt(Mt,!1),queryRowFilter:nt,onValidate:Ve,range:Oe}),et.editorMode===l.je.Code&&r.createElement(rr,{db:Be,query:et,queryToValidate:Ut,onChange:yt,onRunQuery:ve,onValidate:Ve,range:Oe}))}const Br=ne=>!!ne.rawSql},6539:(re,u,e)=>{"use strict";e.d(u,{F:()=>O});var r=e(34667);const O=()=>!!r.config.featureToggles.sqlDatasourceDatabaseSelection},77553:(re,u,e)=>{"use strict";e.d(u,{K:()=>A});var r=e(27702),O=e(34667),S=e(5229),l=e(48024),L=e(71107),R=e(42074),I=e(55093);const A=P=>{const{onOptionsChange:E,options:T,labelWidth:b}=P,M=T.jsonData,D=M.maxIdleConnsAuto!==void 0?M.maxIdleConnsAuto:!1,j=K=>{const w={...T,jsonData:{...M,...K}};return E(w)},F=K=>w=>{j({[K]:w})},$=K=>{j(D&&K?{maxOpenConns:K,maxIdleConns:K}:{maxOpenConns:K})},V=()=>{let K,w;D?(w=M.maxOpenConns,K=M.maxIdleConns):M.maxOpenConns!==void 0&&(w=M.maxOpenConns,K=M.maxOpenConns),j({maxIdleConnsAuto:!D,maxIdleConns:K,maxOpenConns:w})};return r.createElement(S.C,{label:"Connection limits"},r.createElement(l._,{tooltip:r.createElement("span",null,"The maximum number of open connections to the database.If ",r.createElement("i",null,"Max idle connections")," is greater than 0 and the ",r.createElement("i",null,"Max open connections")," is less than ",r.createElement("i",null,"Max idle connections"),", then",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, there is no limit on the number of open connections."),labelWidth:b,label:"Max open"},r.createElement(I.Y,{placeholder:"unlimited",value:M.maxOpenConns,onChange:$})),r.createElement(L.Z,null,r.createElement(l._,{tooltip:r.createElement("span",null,"The maximum number of connections in the idle connection pool.If ",r.createElement("i",null,"Max open connections")," is greater than 0 but less than the ",r.createElement("i",null,"Max idle connections"),", then the ",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, no idle connections are retained."),labelWidth:b,label:"Max idle"},r.createElement(I.Y,{placeholder:"2",value:M.maxIdleConns,onChange:F("maxIdleConns"),width:8,fieldDisabled:D})),r.createElement(l._,{label:"Auto",labelWidth:8,tooltip:r.createElement("span",null,"If enabled, automatically set the number of ",r.createElement("i",null,"Maximum idle connections")," to the same value as",r.createElement("i",null," Max open connections"),". If the number of maximum open connections is not set it will be set to the default (",O.config.sqlConnectionLimits.maxIdleConns,").")},r.createElement(R.x,{value:D,onChange:V}))),r.createElement(l._,{tooltip:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.",labelWidth:b,label:"Max lifetime"},r.createElement(I.Y,{placeholder:"14400",value:M.connMaxLifetime,onChange:F("connMaxLifetime")})))}},10467:(re,u,e)=>{"use strict";e.d(u,{D:()=>l});var r=e(27702),O=e(91106),S=e(34667);function l({onOptionsChange:L,options:R}){(0,r.useEffect)(()=>{const I=R.jsonData;let A={...R},P=!1;if(R.database&&((0,O.o7)(`Migrating from options.database with value ${R.database} for ${R.name}`),A.database="",A.jsonData={...I,database:R.database},P=!0),I.maxOpenConns===void 0&&I.maxIdleConns===void 0&&I.maxIdleConnsAuto===void 0){const{maxOpenConns:E,maxIdleConns:T}=S.config.sqlConnectionLimits;(0,O.o7)(`Setting default max open connections to ${E} and setting max idle connection to ${T}`),A.jsonData={...A.jsonData,maxOpenConns:E,maxIdleConns:T,maxIdleConnsAuto:!0},P=!0}if(I.connMaxLifetime===void 0){const{connMaxLifetime:E}=S.config.sqlConnectionLimits;A.jsonData={...A.jsonData,connMaxLifetime:E},P=!0}P&&L(A)},[L,R])}},71366:(re,u,e)=>{"use strict";e.d(u,{W:()=>r,n:()=>O});const r=["AVG","COUNT","MAX","MIN","SUM"],O=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},53085:(re,u,e)=>{"use strict";e.d(u,{D:()=>B});var r=e(91826),O=e(78209),S=e(39343),l=e(62247),L=e(83505),R=e(27938),I=e(6411),A=e(42751),P=e(39317),E=e(73289),T=e(35306),b=e(26858),M=e(89949);class D{transformMetricFindResponse(X){const Z=[],z=X.fields.find(C=>C.name==="__text"),U=X.fields.find(C=>C.name==="__value");if(z&&U)for(let C=0;C<z.values.length;C++)Z.push({text:""+z.values[C],value:""+U.values[C]});else for(const C of X.fields)for(const d of C.values)Z.push({text:d});return(0,M.uniqBy)(Z,"text")}}var j=e(25789),F=e(71366),$=e(53624),V=e(97997);function K(Y){const X=typeof Y.rawQuery=="string"?Y.rawQuery:null;if(!X)return Y;const Z=(0,V.Y)({refId:"Annotation",...Y.target??{},rawSql:X});return{...Y,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:Z}}var w=e(6539);class B extends A.CK{constructor(X,Z=(0,P.J)()){super(X),this.templateSrv=Z,this.interpolateVariable=(U,C)=>typeof U=="string"?C.multi||C.includeAll?this.getQueryModel().quoteLiteral(U):String(U).replace(/'/g,"''"):typeof U=="number"?U:Array.isArray(U)?U.map(f=>this.getQueryModel().quoteLiteral(f)).join(","):U,this.name=X.name,this.responseParser=new D,this.id=X.id;const z=X.jsonData||{};this.interval=z.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=z.database??"",this.annotations={prepareAnnotation:K,QueryEditor:j.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(X,Z){let z=X;return X&&X.length>0&&(z=X.map(U=>({...U,datasource:this.getRef(),rawSql:this.templateSrv.replace(U.rawSql,Z,this.interpolateVariable),rawQuery:!0}))),z}filterQuery(X){return!X.hide}applyTemplateVariables(X,Z){return{refId:X.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(X.rawSql,Z,this.interpolateVariable),format:X.format}}query(X){if((0,w.F)()){const Z=this.checkForDatabaseIssue(X);if(Z){const z=new Error(Z);return(0,r._)(()=>z)}}return super.query(X)}checkForDatabaseIssue(X){if(this.type==="postgres"&&!this.preconfiguredDatabase)return`You do not currently have a default database configured for this data source. Postgres requires a default
             database with which to connect. Please configure one through the Data Sources Configuration page, or if you
             are using a provisioning file, update that configuration file with a default database.`;if(X.app!==l.zj.Explore&&this.preconfiguredDatabase){for(const Z of X.targets)if(Z.editorMode===I.je.Builder&&Z.dataset!==this.preconfiguredDatabase)return`The configuration for this panel's data source has been modified. The previous database used in this panel's
                   saved query is no longer available. Please update the query to use the new database option.
                   Previous query parameters will be preserved until the query is updated.`}}async metricFindQuery(X,Z){let z="tempvar";Z&&Z.variable&&Z.variable.name&&(z=Z.variable.name);const U={...Z?.scopedVars,...(0,L._)({query:X,wildcardChar:"%",options:Z})},C=this.templateSrv.replace(X,U,this.interpolateVariable),d={refId:z,datasource:this.getRef(),rawSql:C,format:$.ws.Table},f=await this.runMetaQuery(d,Z);return this.getResponseParser().transformMetricFindResponse(f)}async runSql(X,Z){const z=await this.runMetaQuery({rawSql:X,format:$.ws.Table,refId:Z?.refId},Z);return new R.U(z)}runMetaQuery(X,Z){const z=(0,b.$t)().timeRange(),U=X.refId||"meta",C=[{...X,datasource:X.datasource||this.getRef(),refId:U}];return(0,O.n)((0,E.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:Z?.range?.from.valueOf().toString()||z.from.valueOf().toString(),to:Z?.range?.to.valueOf().toString()||z.to.valueOf().toString(),queries:C},requestId:U}).pipe((0,S.U)(d=>(0,T.z1)(d,C).data[0]??{fields:[]})))}targetContainsTemplate(X){let Z=X.rawSql;return F.n.forEach(z=>{Z=Z?.replace(z,"")||""}),this.templateSrv.containsTemplate(Z)}}},97997:(re,u,e)=>{"use strict";e.d(u,{Y:()=>l});var r=e(6411),O=e(53624),S=e(60244);function l(L){let R=L?.editorMode||r.je.Builder;return L?.editorMode===void 0&&L?.rawSql!==void 0&&(R=r.je.Code),{...L,refId:L?.refId||"A",format:L?.format!==void 0?L.format:O.ws.Table,rawSql:L?.rawSql||"",editorMode:R,sql:L?.sql||{columns:[(0,S.Wf)()],groupBy:[(0,S.U2)()],limit:50}}}},37181:(re,u,e)=>{"use strict";e.d(u,{R:()=>r,a:()=>O});var r=(S=>(S.String="string",S))(r||{}),O=(S=>(S.Property="property",S.Operator="operator",S.Or="or",S.And="and",S.GroupBy="groupBy",S.Function="function",S.FunctionParameter="functionParameter",S))(O||{})},53624:(re,u,e)=>{"use strict";e.d(u,{Er:()=>L,ws:()=>O,x7:()=>S});var r=e(81078),O=(R=>(R.Timeseries="time_series",R.Table="table",R))(O||{});const S=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],l=R=>({label:R,value:R}),L=r.E??l},1814:(re,u,e)=>{"use strict";e.d(u,{_:()=>O});var r=e(80261);function O(S){return r.ZP.format(S).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,l=>l.replace(/\s/g,""))}},60244:(re,u,e)=>{"use strict";e.d(u,{IC:()=>S,U2:()=>l,Wf:()=>R,ax:()=>L,zE:()=>O});var r=e(37181);function O(I){return`SELECT ${I.map(P=>{let E="";return P.name&&P.alias?E+=`${P.name}(${P.parameters?.map(T=>`${T.name}`)}) AS ${P.alias}`:P.name?E+=`${P.name}(${P.parameters?.map(T=>`${T.name}`)})`:P.alias?E+=`${P.parameters?.map(T=>`${T.name}`)} AS ${P.alias}`:E+=`${P.parameters?.map(T=>`${T.name}`)}`,E}).join(", ")} `}const S=I=>{if(!I)return!1;const A=I.some(E=>E.parameters?.length||E.parameters?.some(T=>T.name)),P=I.some(E=>E.name);return A||P};function l(I){return{type:r.a.GroupBy,property:{type:r.R.String,name:I}}}function L(I){return{type:r.a.Property,property:{type:r.R.String,name:I}}}function R(I){return{type:r.a.Function,name:I,parameters:[]}}},98360:(re,u,e)=>{"use strict";var r=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.setDragStart=u.setDragProgress=u.setDragEnd=void 0;var O=l(e(87033));function S(A){if(typeof WeakMap!="function")return null;var P=new WeakMap,E=new WeakMap;return(S=function(b){return b?E:P})(A)}function l(A,P){if(!P&&A&&A.__esModule)return A;if(A===null||r(A)!=="object"&&typeof A!="function")return{default:A};var E=S(P);if(E&&E.has(A))return E.get(A);var T={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in A)if(M!=="default"&&Object.prototype.hasOwnProperty.call(A,M)){var D=b?Object.getOwnPropertyDescriptor(A,M):null;D&&(D.get||D.set)?Object.defineProperty(T,M,D):T[M]=A[M]}return T.default=A,E&&E.set(A,T),T}var L=function(P,E){return{type:O.SET_DRAG_PROGRESS,mousePos:P,dragging:E}};u.setDragProgress=L;var R=function(P,E,T){return{type:O.SET_DRAG_START,dragStart:P,dragging:E,mousePos:T}};u.setDragStart=R;var I=function(){return{type:O.SET_DRAG_END}};u.setDragEnd=I},96601:(re,u,e)=>{"use strict";var r=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.setNot=u.setLock=u.setConjunction=void 0;var O=L(e(87033)),S=e(99890);function l(P){if(typeof WeakMap!="function")return null;var E=new WeakMap,T=new WeakMap;return(l=function(M){return M?T:E})(P)}function L(P,E){if(!E&&P&&P.__esModule)return P;if(P===null||r(P)!=="object"&&typeof P!="function")return{default:P};var T=l(E);if(T&&T.has(P))return T.get(P);var b={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in P)if(D!=="default"&&Object.prototype.hasOwnProperty.call(P,D)){var j=M?Object.getOwnPropertyDescriptor(P,D):null;j&&(j.get||j.set)?Object.defineProperty(b,D,j):b[D]=P[D]}return b.default=P,T&&T.set(P,b),b}var R=function(E,T,b){return{type:O.SET_CONJUNCTION,path:(0,S.toImmutableList)(T),conjunction:b}};u.setConjunction=R;var I=function(E,T,b){return{type:O.SET_NOT,path:(0,S.toImmutableList)(T),not:b}};u.setNot=I;var A=function(E,T,b){return{type:O.SET_LOCK,path:(0,S.toImmutableList)(T),lock:b}};u.setLock=A},85513:(re,u,e)=>{"use strict";var r=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.tree=u.rule=u.group=u.drag=void 0;var O=I(e(65819));u.tree=O;var S=I(e(96601));u.group=S;var l=I(e(94986));u.rule=l;var L=I(e(98360));u.drag=L;function R(A){if(typeof WeakMap!="function")return null;var P=new WeakMap,E=new WeakMap;return(R=function(b){return b?E:P})(A)}function I(A,P){if(!P&&A&&A.__esModule)return A;if(A===null||r(A)!=="object"&&typeof A!="function")return{default:A};var E=R(P);if(E&&E.has(A))return E.get(A);var T={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in A)if(M!=="default"&&Object.prototype.hasOwnProperty.call(A,M)){var D=b?Object.getOwnPropertyDescriptor(A,M):null;D&&(D.get||D.set)?Object.defineProperty(T,M,D):T[M]=A[M]}return T.default=A,E&&E.set(A,T),T}},94986:(re,u,e)=>{"use strict";var r=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.setValueSrc=u.setValue=u.setOperatorOption=u.setOperator=u.setField=void 0;var O=L(e(87033)),S=e(99890);function l(T){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(l=function(j){return j?M:b})(T)}function L(T,b){if(!b&&T&&T.__esModule)return T;if(T===null||r(T)!=="object"&&typeof T!="function")return{default:T};var M=l(b);if(M&&M.has(T))return M.get(T);var D={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in T)if(F!=="default"&&Object.prototype.hasOwnProperty.call(T,F)){var $=j?Object.getOwnPropertyDescriptor(T,F):null;$&&($.get||$.set)?Object.defineProperty(D,F,$):D[F]=T[F]}return D.default=T,M&&M.set(T,D),D}var R=function(b,M,D){return{type:O.SET_FIELD,path:(0,S.toImmutableList)(M),field:D,config:b}};u.setField=R;var I=function(b,M,D){return{type:O.SET_OPERATOR,path:(0,S.toImmutableList)(M),operator:D,config:b}};u.setOperator=I;var A=function(b,M,D,j,F,$,V){return{type:O.SET_VALUE,path:(0,S.toImmutableList)(M),delta:D,value:j,valueType:F,asyncListValues:$,config:b,__isInternal:V}};u.setValue=A;var P=function(b,M,D,j){return{type:O.SET_VALUE_SRC,path:(0,S.toImmutableList)(M),delta:D,srcKey:j,config:b}};u.setValueSrc=P;var E=function(b,M,D,j){return{type:O.SET_OPERATOR_OPTION,path:(0,S.toImmutableList)(M),name:D,value:j,config:b}};u.setOperatorOption=E},65819:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.setTree=u.removeRule=u.removeGroup=u.moveItem=u.addRule=u.addGroup=u.addDefaultCaseGroup=u.addCaseGroup=void 0;var S=r(e(11117)),l=e(99890),L=e(78683),R=P(e(87033)),I=r(e(15866));function A(V){if(typeof WeakMap!="function")return null;var K=new WeakMap,w=new WeakMap;return(A=function(Y){return Y?w:K})(V)}function P(V,K){if(!K&&V&&V.__esModule)return V;if(V===null||O(V)!=="object"&&typeof V!="function")return{default:V};var w=A(K);if(w&&w.has(V))return w.get(V);var B={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in V)if(X!=="default"&&Object.prototype.hasOwnProperty.call(V,X)){var Z=Y?Object.getOwnPropertyDescriptor(V,X):null;Z&&(Z.get||Z.set)?Object.defineProperty(B,X,Z):B[X]=V[X]}return B.default=V,w&&w.set(V,B),B}var E=function(K,w){return{type:R.SET_TREE,tree:w,config:K}};u.setTree=E;var T=function(K,w,B){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",X=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return{type:R.ADD_RULE,ruleType:Y,children:X,path:(0,l.toImmutableList)(w),id:(0,S.default)(),properties:(0,L.defaultRuleProperties)(K).merge(B||{}),config:K}};u.addRule=T;var b=function(K,w){return{type:R.REMOVE_RULE,path:(0,l.toImmutableList)(w),config:K}};u.removeRule=b;var M=function(K,w,B){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:R.ADD_CASE_GROUP,path:(0,l.toImmutableList)(w),children:Y,id:(0,S.default)(),properties:(0,L.defaultGroupProperties)(K).merge(B||{}),config:K,meta:{isDefaultCase:!0}}};u.addDefaultCaseGroup=M;var D=function(K,w,B){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:R.ADD_CASE_GROUP,path:(0,l.toImmutableList)(w),children:Y,id:(0,S.default)(),properties:(0,L.defaultGroupProperties)(K).merge(B||{}),config:K}};u.addCaseGroup=D;var j=function(K,w,B){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:R.ADD_GROUP,path:(0,l.toImmutableList)(w),children:Y,id:(0,S.default)(),properties:(0,L.defaultGroupProperties)(K).merge(B||{}),config:K}};u.addGroup=j;var F=function(K,w){return{type:R.REMOVE_GROUP,path:(0,l.toImmutableList)(w),config:K}};u.removeGroup=F;var $=function(K,w,B,Y){return{type:R.MOVE_ITEM,fromPath:(0,l.toImmutableList)(w),toPath:(0,l.toImmutableList)(B),placement:Y,config:K}};u.moveItem=$},10559:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=K(e(27702)),P=r(e(93415)),E=K(e(15866)),T=e(83253),b=r(e(11169)),M=e(50679),D=r(e(11117)),j=e(98572),F,$;function V(X){if(typeof WeakMap!="function")return null;var Z=new WeakMap,z=new WeakMap;return(V=function(C){return C?z:Z})(X)}function K(X,Z){if(!Z&&X&&X.__esModule)return X;if(X===null||O(X)!=="object"&&typeof X!="function")return{default:X};var z=V(Z);if(z&&z.has(X))return z.get(X);var U={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in X)if(d!=="default"&&Object.prototype.hasOwnProperty.call(X,d)){var f=C?Object.getOwnPropertyDescriptor(X,d):null;f&&(f.get||f.set)?Object.defineProperty(U,d,f):U[d]=X[d]}return U.default=X,z&&z.set(X,U),U}function w(X){var Z=B();return function(){var U=(0,I.default)(X),C;if(Z){var d=(0,I.default)(this).constructor;C=Reflect.construct(U,arguments,d)}else C=U.apply(this,arguments);return(0,R.default)(this,C)}}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y=(0,b.default)(F=($=function(X){(0,L.default)(z,X);var Z=w(z);function z(U){var C;return(0,S.default)(this,z),C=Z.call(this,U),C._updPath(U),C}return(0,l.default)(z,[{key:"shouldComponentUpdate",value:function(C,d){var f=this.props,g=(0,j.pureShouldComponentUpdate)(this)(C,d);if(g){var o=[];for(var i in C){var s=C[i]!==f[i];s&&i!="__isInternalValueChange"&&o.push(i)}o.length||(g=!1),o.length==1&&o[0]=="tree"&&C.__isInternalValueChange&&(g=!1)}return g}},{key:"_updPath",value:function(C){var d=C.tree.get("id");this.path=E.default.List.of(d)}},{key:"render",value:function(){var C=this.props.tree,d=C.get("type"),f=d=="switch_group",g=f?null:(0,M.getTotalReordableNodesCountInTree)(C),o=f?null:(0,M.getTotalRulesCountInTree)(C),i=C.get("id");return A.default.createElement(T.Item,{key:i,id:i,path:this.path,type:d,properties:C.get("properties")||new E.Map,config:this.props.config,actions:this.props.actions,children1:C.get("children1")||new E.Map,reordableNodesCnt:g,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),z}(A.Component),$.propTypes={tree:P.default.any.isRequired,config:P.default.object.isRequired,actions:P.default.object.isRequired,onDragStart:P.default.func},$))||F;u.default=Y},37831:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43427)),l=r(e(43717)),L=r(e(24143)),R=r(e(36742)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=V(e(27702)),T=e(23005),b=r(e(49641)),M=r(e(93415)),D=V(e(85513)),j=e(99890),F=e(98572);function $(U){if(typeof WeakMap!="function")return null;var C=new WeakMap,d=new WeakMap;return($=function(g){return g?d:C})(U)}function V(U,C){if(!C&&U&&U.__esModule)return U;if(U===null||O(U)!=="object"&&typeof U!="function")return{default:U};var d=$(C);if(d&&d.has(U))return d.get(U);var f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in U)if(o!=="default"&&Object.prototype.hasOwnProperty.call(U,o)){var i=g?Object.getOwnPropertyDescriptor(U,o):null;i&&(i.get||i.set)?Object.defineProperty(f,o,i):f[o]=U[o]}return f.default=U,d&&d.set(U,f),f}function K(U,C){var d=Object.keys(U);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(U);C&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(U,g).enumerable})),d.push.apply(d,f)}return d}function w(U){for(var C=1;C<arguments.length;C++){var d=arguments[C]!=null?arguments[C]:{};C%2?K(Object(d),!0).forEach(function(f){(0,S.default)(U,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(d)):K(Object(d)).forEach(function(f){Object.defineProperty(U,f,Object.getOwnPropertyDescriptor(d,f))})}return U}function B(U){var C=Y();return function(){var f=(0,P.default)(U),g;if(C){var o=(0,P.default)(this).constructor;g=Reflect.construct(f,arguments,o)}else g=f.apply(this,arguments);return(0,A.default)(this,g)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var X=function(U){(0,I.default)(d,U);var C=B(d);function d(f){var g;return(0,l.default)(this,d),g=C.call(this,f),g.shouldComponentUpdate=(0,F.liteShouldComponentUpdate)((0,R.default)(g),{tree:function(i){return!(i===g.oldValidatedTree&&g.oldValidatedTree===g.validatedTree)}}),(0,F.useOnPropsChanged)((0,R.default)(g)),g._updateActions(f),g.validatedTree=f.getMemoizedTree(f.config,f.tree),g.oldValidatedTree=g.validatedTree,g}return(0,L.default)(d,[{key:"_updateActions",value:function(g){var o=g.config,i=g.dispatch;this.actions=(0,F.bindActionCreators)(w(w(w({},D.tree),D.group),D.rule),o,i)}},{key:"onPropsChanged",value:function(g){var o=g.onChange,i=this.props.config,s=g.tree,c=this.props.tree,y=g.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=s,i!==y&&(this._updateActions(g),this.validatedTree=g.getMemoizedTree(y,s,i));var p=!(0,j.immutableEqual)(this.validatedTree,this.oldValidatedTree);p&&o&&o(this.validatedTree,y,g.__lastAction)}},{key:"render",value:function(){var g=this.props,o=g.config,i=g.renderBuilder,s=g.dispatch,c=g.__isInternalValueChange,y={tree:this.validatedTree,actions:this.actions,config:o,dispatch:s,__isInternalValueChange:c};return i(y)}}]),d}(E.Component);X.propTypes={config:M.default.object.isRequired,onChange:M.default.func,renderBuilder:M.default.func,tree:M.default.any};var Z=(0,T.connect)(function(U){return{tree:U.tree,__isInternalValueChange:U.__isInternalValueChange,__lastAction:U.__lastAction}},null,null,{context:b.default})(X);Z.displayName="ConnectedQuery";var z=Z;u.default=z},65269:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(36742)),R=r(e(77588)),I=r(e(8807)),A=r(e(27148)),P=X(e(27702)),E=r(e(93415)),T=r(e(68081)),b=r(e(49641)),M=e(45645),D=e(23005),j=X(e(85513)),F=e(6384),$=e(99890),V=e(78683),K=e(53931),w=e(98572),B=r(e(37831));function Y(C){if(typeof WeakMap!="function")return null;var d=new WeakMap,f=new WeakMap;return(Y=function(o){return o?f:d})(C)}function X(C,d){if(!d&&C&&C.__esModule)return C;if(C===null||O(C)!=="object"&&typeof C!="function")return{default:C};var f=Y(d);if(f&&f.has(C))return f.get(C);var g={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in C)if(i!=="default"&&Object.prototype.hasOwnProperty.call(C,i)){var s=o?Object.getOwnPropertyDescriptor(C,i):null;s&&(s.get||s.set)?Object.defineProperty(g,i,s):g[i]=C[i]}return g.default=C,f&&f.set(C,g),g}function Z(C){var d=z();return function(){var g=(0,A.default)(C),o;if(d){var i=(0,A.default)(this).constructor;o=Reflect.construct(g,arguments,i)}else o=g.apply(this,arguments);return(0,I.default)(this,o)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(C){(0,R.default)(f,C);var d=Z(f);function f(g,o){var i;(0,S.default)(this,f),i=d.call(this,g,o),i.shouldComponentUpdate=(0,w.liteShouldComponentUpdate)((0,L.default)(i),{value:function(m,v,N){return!1}}),(0,w.useOnPropsChanged)((0,L.default)(i)),i.getMemoizedConfig=(0,F.createConfigMemo)(),i.getMemoizedTree=(0,K.createValidationMemo)();var s=i.getMemoizedConfig(g),c=g.value,y=i.getMemoizedTree(s,c),p=(0,T.default)(s,y,i.getMemoizedTree),a=(0,M.createStore)(p);return i.state={store:a,config:s},i}return(0,l.default)(f,[{key:"onPropsChanged",value:function(o){var i=this,s=this.state.config,c=this.getMemoizedConfig(o),y=s!==c,p=this.state.store.getState().tree,a=!(0,$.immutableEqual)(o.value,this.props.value)&&!(0,$.immutableEqual)(o.value,p),n=a?o.value||(0,V.defaultRoot)(o):p;if(y&&this.setState({config:c}),a||y){var m=this.getMemoizedTree(c,n,s);return Promise.resolve().then(function(){i.state.store.dispatch(j.tree.setTree(c,m))})}}},{key:"render",value:function(){var o=this.props,i=o.renderBuilder,s=o.get_children,c=o.onChange,y=o.settings,p=this.state,a=p.config,n=p.store,m=y.renderProvider;return P.default.createElement(m,{config:a},P.default.createElement(D.Provider,{store:n,context:b.default},P.default.createElement(B.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:c,renderBuilder:i||s})))}}]),f}(P.Component);u.default=U,U.propTypes={conjunctions:E.default.object.isRequired,fields:E.default.object.isRequired,types:E.default.object.isRequired,operators:E.default.object.isRequired,widgets:E.default.object.isRequired,settings:E.default.object.isRequired,onChange:E.default.func,renderBuilder:E.default.func,value:E.default.any}},43900:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(97358)),l=r(e(99592)),L=r(e(43717)),R=r(e(24143)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=j(e(27702)),T=r(e(93415)),b=e(11169),M=["isDraggingTempo","isDraggingMe","dragging"];function D(w){if(typeof WeakMap!="function")return null;var B=new WeakMap,Y=new WeakMap;return(D=function(Z){return Z?Y:B})(w)}function j(w,B){if(!B&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var Y=D(B);if(Y&&Y.has(w))return Y.get(w);var X={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in w)if(z!=="default"&&Object.prototype.hasOwnProperty.call(w,z)){var U=Z?Object.getOwnPropertyDescriptor(w,z):null;U&&(U.get||U.set)?Object.defineProperty(X,z,U):X[z]=w[z]}return X.default=w,Y&&Y.set(w,X),X}function F(w){var B=$();return function(){var X=(0,P.default)(w),Z;if(B){var z=(0,P.default)(this).constructor;Z=Reflect.construct(X,arguments,z)}else Z=X.apply(this,arguments);return(0,A.default)(this,Z)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var V=e(28040),K=function(B){return function(Y){var X;return X=function(Z){(0,I.default)(U,Z);var z=F(U);function U(C){var d;return(0,L.default)(this,U),d=z.call(this,C),d.handleDraggerMouseDown=function(f){var g=d.props.id,o=d.wrapper.current;d.props.onDragStart&&d.props.onDragStart(g,o,f)},d.wrapper=E.default.createRef(),d}return(0,R.default)(U,[{key:"render",value:function(){var d=this.props,f=d.isDraggingTempo,g=d.isDraggingMe,o=d.dragging,i=(0,l.default)(d,M),s=i.isTrueLocked,c={};g&&f&&(b._isReorderingTree||(c={top:o.y,left:o.x,width:o.w}));var y=V(B,"group-or-rule",g&&f?"qb-draggable":null,g&&!f?"qb-placeholder":null,s?"locked":null);return E.default.createElement("div",{className:y,style:c,ref:this.wrapper,"data-id":this.props.id},E.default.createElement(Y,(0,S.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:g,isDraggingTempo:f},i)))}}]),U}(E.PureComponent),X.propTypes={isDraggingTempo:T.default.bool,isDraggingMe:T.default.bool,onDragStart:T.default.func,dragging:T.default.object,isLocked:T.default.bool,isTrueLocked:T.default.bool},X}};u.default=K},76455:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(36742)),R=r(e(77588)),I=r(e(8807)),A=r(e(27148)),P=$(e(27702)),E=r(e(93415)),T=r(e(46729)),b=r(e(49641)),M=e(98572),D=e(23005),j=e(78683);function F(Y){if(typeof WeakMap!="function")return null;var X=new WeakMap,Z=new WeakMap;return(F=function(U){return U?Z:X})(Y)}function $(Y,X){if(!X&&Y&&Y.__esModule)return Y;if(Y===null||O(Y)!=="object"&&typeof Y!="function")return{default:Y};var Z=F(X);if(Z&&Z.has(Y))return Z.get(Y);var z={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in Y)if(C!=="default"&&Object.prototype.hasOwnProperty.call(Y,C)){var d=U?Object.getOwnPropertyDescriptor(Y,C):null;d&&(d.get||d.set)?Object.defineProperty(z,C,d):z[C]=Y[C]}return z.default=Y,Z&&Z.set(Y,z),z}function V(Y){var X=K();return function(){var z=(0,A.default)(Y),U;if(X){var C=(0,A.default)(this).constructor;U=Reflect.construct(z,arguments,C)}else U=z.apply(this,arguments);return(0,I.default)(this,U)}}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(X){var Z;return Z=function(z){(0,R.default)(C,z);var U=V(C);function C(d){var f;return(0,S.default)(this,C),f=U.call(this,d),f._selectedConjunction=function(g){return g=g||f.props,g.conjunction||(0,j.defaultGroupConjunction)(g.config,g.field)},f.setConjunction=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;f.props.actions.setConjunction(f.props.path,g)},f.setNot=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;f.props.actions.setNot(f.props.path,g)},f.setLock=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;f.props.actions.setLock(f.props.path,g)},f.dummyFn=function(){},f.removeSelf=function(){f.props.actions.removeGroup(f.props.path)},f.addGroup=function(){f.props.actions.addGroup(f.props.path)},f.addCaseGroup=function(){f.props.actions.addCaseGroup(f.props.path)},f.addDefaultCaseGroup=function(){f.props.actions.addDefaultCaseGroup(f.props.path)},f.addRule=function(){f.props.actions.addRule(f.props.path)},f.setField=function(g){f.props.actions.setField(f.props.path,g)},f.setOperator=function(g){f.props.actions.setOperator(f.props.path,g)},f.setValue=function(g,o,i){f.props.actions.setValue(f.props.path,g,o,i)},(0,M.useOnPropsChanged)((0,L.default)(f)),f.selectedConjunction=f._selectedConjunction(d),f.conjunctionOptions=f._getConjunctionOptions(d),f.dummyFn.isDummyFn=!0,f}return(0,l.default)(C,[{key:"shouldComponentUpdate",value:function(f,g){var o=this.props,i=this.state,s=(0,M.pureShouldComponentUpdate)(this)(f,g);if(s&&i==g&&o!=f){var c=f.dragging.id||o.dragging.id,y=c==f.id,p=[];for(var a in f){var n=f[a]!=o[a];a=="dragging"&&!y&&(n=!1),n&&p.push(a)}p.length||(s=!1)}return s}},{key:"onPropsChanged",value:function(f){var g=f.config,o=f.id,i=f.conjunction,s=this.props.config,c=this.props.conjunction;(s!=g||c!=i)&&(this.selectedConjunction=this._selectedConjunction(f),this.conjunctionOptions=this._getConjunctionOptions(f))}},{key:"_getConjunctionOptions",value:function(f){var g=this;return(0,T.default)(f.config.conjunctions,function(o,i){return{id:"conjunction-".concat(f.id,"-").concat(i),name:"conjunction[".concat(f.id,"]"),key:i,label:o.label,checked:i===g._selectedConjunction(f)}})}},{key:"render",value:function(){var f=this.props.dragging.id==this.props.id,g=this.props.path.size,o=this.props.config.settings.maxNesting,i=!f&&this.props.isDraggingTempo,s=typeof o>"u"||g<o,c=g==1;return P.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[f?P.default.createElement(X,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:c,allowFurtherNesting:s,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,P.default.createElement(X,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:f,isDraggingTempo:i,onDragStart:this.props.onDragStart,isRoot:c,allowFurtherNesting:s,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:i?this.dummyFn:this.setConjunction,setNot:i?this.dummyFn:this.setNot,setLock:i?this.dummyFn:this.setLock,removeSelf:i?this.dummyFn:this.removeSelf,addGroup:i?this.dummyFn:this.addGroup,addCaseGroup:i?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:i?this.dummyFn:this.addDefaultCaseGroup,addRule:i?this.dummyFn:this.addRule,setField:i?this.dummyFn:this.setField,setOperator:i?this.dummyFn:this.setOperator,setValue:i?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),C}(P.Component),Z.propTypes={config:E.default.object.isRequired,actions:E.default.object.isRequired,path:E.default.any.isRequired,id:E.default.string.isRequired,groupId:E.default.string,not:E.default.bool,conjunction:E.default.string,children1:E.default.any,onDragStart:E.default.func,reordableNodesCnt:E.default.number,field:E.default.string,parentField:E.default.string,isLocked:E.default.bool,isTrueLocked:E.default.bool,dragging:E.default.object,isDraggingTempo:E.default.bool},Z},B=function(X){var Z=(0,D.connect)(function(z){return{dragging:z.dragging}},null,null,{context:b.default})(w(X));return Z.displayName="ConnectedGroupContainer",Z};u.default=B},23422:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=j(e(27702)),P=r(e(93415)),E=r(e(49641)),T=e(6384),b=e(98572),M=e(23005);function D(B){if(typeof WeakMap!="function")return null;var Y=new WeakMap,X=new WeakMap;return(D=function(z){return z?X:Y})(B)}function j(B,Y){if(!Y&&B&&B.__esModule)return B;if(B===null||O(B)!=="object"&&typeof B!="function")return{default:B};var X=D(Y);if(X&&X.has(B))return X.get(B);var Z={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in B)if(U!=="default"&&Object.prototype.hasOwnProperty.call(B,U)){var C=z?Object.getOwnPropertyDescriptor(B,U):null;C&&(C.get||C.set)?Object.defineProperty(Z,U,C):Z[U]=B[U]}return Z.default=B,X&&X.set(B,Z),Z}function F(B){var Y=$();return function(){var Z=(0,I.default)(B),z;if(Y){var U=(0,I.default)(this).constructor;z=Reflect.construct(Z,arguments,U)}else z=Z.apply(this,arguments);return(0,R.default)(this,z)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var V=e(28040),K=function(Y){var X;return X=function(Z){(0,L.default)(U,Z);var z=F(U);function U(C){var d;return(0,S.default)(this,U),d=z.call(this,C),d.dummyFn=function(){},d.removeSelf=function(){d.props.actions.removeRule(d.props.path)},d.setLock=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;d.props.actions.setLock(d.props.path,f)},d.setField=function(f){d.props.actions.setField(d.props.path,f)},d.setOperator=function(f){d.props.actions.setOperator(d.props.path,f)},d.setOperatorOption=function(f,g){d.props.actions.setOperatorOption(d.props.path,f,g)},d.setValue=function(f,g,o,i,s){d.props.actions.setValue(d.props.path,f,g,o,i,s)},d.setValueSrc=function(f,g){d.props.actions.setValueSrc(d.props.path,f,g)},d.dummyFn.isDummyFn=!0,d}return(0,l.default)(U,[{key:"shouldComponentUpdate",value:function(d,f){var g=this.props,o=this.state,i=(0,b.pureShouldComponentUpdate)(this)(d,f);if(i&&o==f&&g!=d){var s=d.dragging.id||g.dragging.id,c=s==d.id,y=[];for(var p in d){var a=d[p]!=g[p];p=="dragging"&&!c&&(a=!1),a&&y.push(p)}y.length||(i=!1)}return i}},{key:"render",value:function(){var d=this.props.dragging.id==this.props.id,f=(0,T.getFieldConfig)(this.props.config,this.props.field),g=this.props.config.settings.showErrorMessage,o=f&&f.type=="!struct",i=!d&&this.props.isDraggingTempo,s=this.props.valueError,c=s&&s.toArray().filter(function(p){return!!p}).shift()||null,y=c!=null&&g;return A.default.createElement("div",{className:V("group-or-rule-container","rule-container",y?"rule-with-error":null),"data-id":this.props.id},[d?A.default.createElement(Y,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,A.default.createElement(Y,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:d,isDraggingTempo:i,onDragStart:this.props.onDragStart,setLock:i?this.dummyFn:this.setLock,removeSelf:i?this.dummyFn:this.removeSelf,setField:i?this.dummyFn:this.setField,setOperator:i?this.dummyFn:this.setOperator,setOperatorOption:i?this.dummyFn:this.setOperatorOption,setValue:i?this.dummyFn:this.setValue,setValueSrc:i?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),U}(A.Component),X.propTypes={id:P.default.string.isRequired,groupId:P.default.string,config:P.default.object.isRequired,path:P.default.any.isRequired,operator:P.default.string,field:P.default.string,actions:P.default.object.isRequired,onDragStart:P.default.func,value:P.default.any,valueSrc:P.default.any,asyncListValues:P.default.array,valueError:P.default.any,operatorOptions:P.default.object,reordableNodesCnt:P.default.number,parentField:P.default.string,isLocked:P.default.bool,isTrueLocked:P.default.bool,dragging:P.default.object,isDraggingTempo:P.default.bool},X},w=function(Y){var X=(0,M.connect)(function(Z){return{dragging:Z.dragging}},null,null,{context:E.default})(K(Y));return X.displayName="ConnectedRuleContainer",X};u.default=w},11169:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=u._isReorderingTree=void 0;var S=r(e(97358)),l=r(e(93502)),L=r(e(43717)),R=r(e(24143)),I=r(e(36742)),A=r(e(77588)),P=r(e(8807)),E=r(e(27148)),T=Y(e(27702)),b=e(23005),M=e(50679),D=e(99890),j=r(e(49641)),F=Y(e(87033)),$=r(e(15322)),V=r(e(93415)),K=Y(e(85513)),w=e(98572);function B(d){if(typeof WeakMap!="function")return null;var f=new WeakMap,g=new WeakMap;return(B=function(i){return i?g:f})(d)}function Y(d,f){if(!f&&d&&d.__esModule)return d;if(d===null||O(d)!=="object"&&typeof d!="function")return{default:d};var g=B(f);if(g&&g.has(d))return g.get(d);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in d)if(s!=="default"&&Object.prototype.hasOwnProperty.call(d,s)){var c=i?Object.getOwnPropertyDescriptor(d,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=d[s]}return o.default=d,g&&g.set(d,o),o}function X(d){var f=Z();return function(){var o=(0,E.default)(d),i;if(f){var s=(0,E.default)(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return(0,P.default)(this,i)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z=!1;u._isReorderingTree=z;var U=function(f){var g,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return g=function(i){(0,A.default)(c,i);var s=X(c);function c(y){var p;return(0,L.default)(this,c),p=s.call(this,y),p._getEventTarget=function(a,n){return a&&a.__mocked_window||document.body||window},p.onDragStart=function(a,n,m){var v=n.closest(".query-builder");p._isUsingLegacyReactDomRender===void 0&&(p._isUsingLegacyReactDomRender=(0,w.isUsingLegacyReactDomRender)(v)),document.body.classList.add("qb-dragging"),v.classList.add("qb-dragging");var N=v.closest(".query-builder-container")||v;N=p._getScrollParent(N)||document.body;var G=N.scrollTop,q=p._getDraggableNodeEl(v),J=p._getPlaceholderNodeEl(v),W=v.querySelectorAll(".group--children"),k=W.length?W[0]:null,H;k&&(H=window.getComputedStyle(k,null).getPropertyValue("padding-left"),H=parseInt(H));var _={id:a,x:n.offsetLeft,y:n.offsetTop,w:n.offsetWidth,h:n.offsetHeight,itemInfo:p.tree.items[a],paddingLeft:H},ae={id:a,x:n.offsetLeft,y:n.offsetTop,scrollTop:G,clientX:m.clientX,clientY:m.clientY,itemInfo:(0,$.default)(p.tree.items[a]),treeEl:v,treeElContainer:N},oe={clientX:m.clientX,clientY:m.clientY},le=p._getEventTarget(m,ae);p.eventTarget=le,le.addEventListener("mousemove",p.onDrag),le.addEventListener("mouseup",p.onDragEnd),p.props.setDragStart(ae,_,oe)},p.onDrag=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,m=Object.assign({},p.props.dragging),v=p.props.dragStart,N=m.paddingLeft,G=v.treeElContainer,q=G.scrollTop;if(m.itemInfo=p.tree.items[m.id],!!m.itemInfo){var J={clientX:a.clientX,clientY:a.clientY},W={clientX:v.clientX,clientY:v.clientY};if(a.__mock_dom){var k=v.treeEl,H=p._getDraggableNodeEl(k),_=p._getPlaceholderNodeEl(k);a.__mock_dom({treeEl:k,dragEl:H,plhEl:_})}if(!v.plX){var ae=v.treeEl,oe=p._getPlaceholderNodeEl(ae);oe&&(v.plX=oe.getBoundingClientRect().left+window.scrollX,v.plY=oe.getBoundingClientRect().top+window.scrollY)}var le=v.x,ue=v.y,me=v.clientX,pe=v.clientY,Ee=v.scrollTop,ge={x:le+(a.clientX-me),y:ue+(a.clientY-pe)+(q-Ee)};m.x=ge.x,m.y=ge.y,m.paddingLeft=N,m.mousePos=J,m.startMousePos=W,p.props.setDragProgress(J,m);var Se=n?p.handleDrag(m,a,o):!1;Se||a.preventDefault&&a.preventDefault()}},p.onDragEnd=function(){var a=p.props.dragStart.treeEl;p.props.setDragEnd(),a.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),p._cacheEls={};var n=p.eventTarget||p._getEventTarget();n.removeEventListener("mousemove",p.onDrag),n.removeEventListener("mouseup",p.onDragEnd)},(0,w.useOnPropsChanged)((0,I.default)(p)),p.onPropsChanged(y),p}return(0,R.default)(c,[{key:"onPropsChanged",value:function(p){this.tree=(0,M.getFlatTree)(p.tree)}},{key:"shouldComponentUpdate",value:function(p,a){var n=this.props,m=this.state,v=(0,w.pureShouldComponentUpdate)(this)(p,a);if(v&&m==a&&n!=p){var N=[];for(var G in p){var q=p[G]!=n[G];q&&G!="dragging"&&G!="mousePos"&&N.push(G)}N.length||(v=!1)}return v}},{key:"componentDidUpdate",value:function(p,a){var n=this.props.dragging,m=this.props.dragStart;if(u._isReorderingTree=z=!1,m&&m.id&&(n.itemInfo=this.tree.items[n.id],n.itemInfo&&(n.itemInfo.index!=m.itemInfo.index||n.itemInfo.parent!=m.itemInfo.parent))){var v=m.treeEl,N=m.treeElContainer,G=this._getPlaceholderNodeEl(v,!0);if(G){var q=G.getBoundingClientRect().left+window.scrollX,J=G.getBoundingClientRect().top+window.scrollY,W=m.plX,k=m.plY,H=N.scrollTop;m.plX=q,m.plY=J,m.itemInfo=(0,$.default)(n.itemInfo),m.y=G.offsetTop,m.x=G.offsetLeft,m.clientY+=J-k,m.clientX+=q-W,N!=document.body&&(m.scrollTop=H),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a==null)return null;this._cacheEls||(this._cacheEls={});var m=this._cacheEls[a];return m&&document.contains(m)&&!n||(m=p.querySelector('.group-or-rule-container[data-id="'+a+'"]'),this._cacheEls[a]=m),m}},{key:"_getDraggableNodeEl",value:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var n=this._cacheEls.draggable;if(n&&document.contains(n)&&!a)return n;var m=p.getElementsByClassName("qb-draggable");return n=m.length?m[0]:null,this._cacheEls.draggable=n,n}},{key:"_getPlaceholderNodeEl",value:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var n=this._cacheEls.placeholder;if(n&&document.contains(n)&&!a)return n;var m=p.getElementsByClassName("qb-placeholder");return n=m.length?m[0]:null,this._cacheEls.placeholder=n,n}},{key:"_isScrollable",value:function(p){var a=window.getComputedStyle(p)["overflow-y"];return(a==="scroll"||a==="auto")&&p.scrollHeight>p.offsetHeight}},{key:"_getScrollParent",value:function(p){return p==null?null:p===document.body||this._isScrollable(p)?p:this._getScrollParent(p.parentNode)}},{key:"handleDrag",value:function(p,a,n){var m=this,v=!0,N=p.itemInfo,G=p.paddingLeft,q=null,J=this.props.dragStart.treeEl,W=p.id,k=this._getDraggableNodeEl(J),H=this._getPlaceholderNodeEl(J),_,ae,oe,le;if(k&&H){if(_=k.getBoundingClientRect(),ae=H.getBoundingClientRect(),!ae.width)return;var ue={hrz:0,vrt:0};_.top<ae.top?ue.vrt=-1:_.bottom>ae.bottom&&(ue.vrt=1),_.left>ae.left?ue.hrz=1:_.left<ae.left&&(ue.hrz=-1),le=J.getBoundingClientRect();var me={x:le.left+(le.right-le.left)/2,y:ue.vrt>=0?_.bottom:_.top},pe;if(a.__mocked_hov_container)pe=a.__mocked_hov_container;else{var Ee=document.elementFromPoint(me.x,me.y-1);if(pe=Ee?Ee.closest(".group-or-rule-container"):null,!pe&&Ee&&Ee.classList.contains("query-builder-container")){var ge,Se=Ee==null||(ge=Ee.firstChild)===null||ge===void 0?void 0:ge.firstChild;Se&&Se.classList.contains("group-or-rule-container")&&(pe=Se)}}if(!pe)D.logger.log("out of tree bounds!");else{var Ae=pe.classList.contains("group-container"),ye=pe.getAttribute("data-id"),De=pe,Fe=!1,We=!1;if(De){oe=De.getBoundingClientRect();var Ke=oe.bottom-oe.top,_e=this.tree.items[ye],He=null,at=null,ke=null,de=null;if(ue.vrt==0)ke=N,at=H,at&&(He=at.getBoundingClientRect());else if(Ae){if(ue.vrt>0){var Ce=pe.getElementsByClassName("group--header"),Le=Ce.length?Ce[0]:null;if(Le){var we=Le.getBoundingClientRect(),Ue=we.bottom-we.top,Ge=_.bottom-we.top>Ue*3/4;Ge&&_e.top>p.itemInfo.top&&(ke=_e,He=we,at=Le,We=!0)}}else if(ue.vrt<0&&_e.lev>=N.lev){var be=oe.bottom-_.top>=2;be&&_e.top<p.itemInfo.top&&(ke=_e,He=oe,at=De,Fe=!0)}if(!We&&!Fe||v){var $e=ue.vrt<0?oe.bottom-_.top>Ke-5:_.bottom-oe.top>Ke-5;$e&&(!We&&!Fe&&(ke=_e,He=oe,at=De),v&&(de=_e))}}else{var rt=ue.vrt<0?oe.bottom-_.top>Ke/2:_.bottom-oe.top>Ke/2;rt&&(ke=_e,He=oe,at=De)}var it=ke&&ke.id==W;if(He){var Qe=_.left-le.left,ut=He.left-le.left,st=ut/G,Je=Math.max(0,Math.round(Qe/G)),vt=[],gt=[];if(!it){if(Ae&&(Fe?vt.push([F.PLACEMENT_APPEND,ke,ke.lev+1]):We&&vt.push([F.PLACEMENT_PREPEND,ke,ke.lev+1]),v&&de)){var It=de.lev==0,Lt=de.type=="case_group"&&N.type!="case_group",lt=de.prev&&this.tree.items[de.prev].caseId,Rt=de.next&&this.tree.items[de.next].caseId;N.caseId==lt&&(lt=null),N.caseId==Rt&&(Rt=null);var bt=lt&&this.tree.items[lt],wt=Rt&&this.tree.items[Rt];ue.vrt>0?It?gt.push([F.PLACEMENT_APPEND,de,de.lev+1]):Lt&&wt?gt.push([F.PLACEMENT_PREPEND,wt,wt.lev+1]):gt.push([F.PLACEMENT_AFTER,de,de.lev]):ue.vrt<0&&(It?gt.push([F.PLACEMENT_PREPEND,de,de.lev+1]):Lt&&bt?gt.push([F.PLACEMENT_APPEND,bt,bt.lev+1]):gt.push([F.PLACEMENT_BEFORE,de,de.lev]))}!Fe&&!We&&(ue.vrt<0?vt.push([F.PLACEMENT_BEFORE,ke,ke.lev]):ue.vrt>0&&vt.push([F.PLACEMENT_AFTER,ke,ke.lev]))}var zt=function(ft){var pt=ft[1],Ze=N.caseId?m.tree.items[N.caseId]:null,Nt=pt.caseId?m.tree.items[pt.caseId]:null;return[].concat((0,l.default)(ft),[Ze,Nt])};vt=vt.map(zt),gt=gt.map(zt),vt=vt.filter(function(xe){var ft=xe[0],pt=xe[1];if((ft==F.PLACEMENT_BEFORE||ft==F.PLACEMENT_AFTER)&&pt.parent==null||pt.collapsed&&(ft==F.PLACEMENT_APPEND||ft==F.PLACEMENT_PREPEND))return!1;var Ze=pt.id==N.id;if(!Ze){for(var Nt=pt;Nt.parent;)if(Nt=m.tree.items[Nt.parent],Nt.id==N.id){Ze=!0;break}}return!Ze}).map(function(xe){var ft=xe[0],pt=xe[1],Ze=xe[2],Nt=xe[3],$t=xe[4],Wt=null;return ft==F.PLACEMENT_APPEND||ft==F.PLACEMENT_PREPEND?Wt=pt:Wt=m.tree.items[pt.parent],Wt&&Wt.parent==null&&(Wt=null),xe[5]=Wt,xe});var ct=null,Et=vt.filter(function(xe){return m.canMove(N,xe[1],xe[0],xe[3],xe[4],xe[5],n)});v&&Et.length==0&&gt.length>0&&(Et=gt.filter(function(xe){return m.canMove(N,xe[1],xe[0],xe[3],xe[4],xe[5],n)}));var Ct=Et.map(function(xe){return xe[2]}),Pt=N.lev,xt=Ct.concat(Pt),Ft=null;xt.indexOf(Je)!=-1?Ft=Je:Je>Math.max.apply(Math,(0,l.default)(xt))?Ft=Math.max.apply(Math,(0,l.default)(xt)):Je<Math.min.apply(Math,(0,l.default)(xt))&&(Ft=Math.min.apply(Math,(0,l.default)(xt))),ct=Et.find(function(xe){return xe[2]==Ft}),!it&&!ct&&Et.length&&(ct=Et[0]),q=ct}}}}return q?(this.move(N,q[1],q[0],q[3]),!0):!1}},{key:"canMove",value:function(p,a,n,m,v,N,G){if(!p||!a||p.id===a.id)return!1;var q=this.props.config.settings,J=q.canRegroup,W=q.canRegroupCases,k=q.maxNesting,H=q.maxNumberOfRules,_=q.canLeaveEmptyCase,ae=N?N.lev+1:a.lev,oe=n==F.PLACEMENT_BEFORE||n==F.PLACEMENT_AFTER,le=n==F.PLACEMENT_PREPEND||n==F.PLACEMENT_APPEND,ue=oe&&a.lev==1||le&&a.lev==0,me=p.parent!=a.parent,pe=le||me,Ee=p.type=="case_group"&&!ue||p.parentType=="rule_group"||a.type=="rule_group"||a.parentType=="rule_group"||p.type!="case_group"&&a.type=="case_group"&&oe||p.type!="case_group"&&a.type=="switch_group"||!W&&p.caseId!=a.caseId,ge=a.isLocked||p.isLocked||N&&N.isLocked;if(k&&ae>k||pe&&(!J||Ee||ge))return!1;if(p.type!="case_group"&&p.caseId!=a.caseId){var Se=m?m._height==2:!1,Ae=v?v.leafsCount+1:0;if(H&&Ae>H||Se&&!_)return!1}if(p.type=="case_group"&&(p.isDefaultCase||a.isDefaultCase||a.type=="switch_group"&&n==F.PLACEMENT_APPEND))return!1;var ye=!0;return G&&(ye=G(p.node.toJS(),a.node.toJS(),n,N?N.node.toJS():null)),ye}},{key:"move",value:function(p,a,n,m){this._isUsingLegacyReactDomRender||(u._isReorderingTree=z=!0),this.props.actions.moveItem(p.path,a.path,n)}},{key:"render",value:function(){return T.default.createElement(f,(0,S.default)({},this.props,{onDragStart:this.onDragStart}))}}]),c}(T.Component),g.propTypes={tree:V.default.any.isRequired,actions:V.default.object.isRequired},g},C=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=(0,b.connect)(function(i){return{dragging:i.dragging,dragStart:i.dragStart,mousePos:i.mousePos}},{setDragStart:K.drag.setDragStart,setDragProgress:K.drag.setDragProgress,setDragEnd:K.drag.setDragEnd},null,{context:j.default})(U(f,g));return o.displayName="ConnectedSortableContainer",o};u.default=C},62365:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(43427)),S=r(e(43717)),l=r(e(24143)),L=r(e(36742)),R=r(e(29801)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=r(e(27702)),T=r(e(93415)),b=r(e(76455)),M=r(e(43900)),D=e(16154),j=e(26506),F=e(98572),$=e(59729),V=r(e(52922)),K,w,B;function Y(f,g){var o=Object.keys(f);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(f);g&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(f,s).enumerable})),o.push.apply(o,i)}return o}function X(f){for(var g=1;g<arguments.length;g++){var o=arguments[g]!=null?arguments[g]:{};g%2?Y(Object(o),!0).forEach(function(i){(0,O.default)(f,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(o)):Y(Object(o)).forEach(function(i){Object.defineProperty(f,i,Object.getOwnPropertyDescriptor(o,i))})}return f}function Z(f){var g=z();return function(){var i=(0,P.default)(f),s;if(g){var c=(0,P.default)(this).constructor;s=Reflect.construct(i,arguments,c)}else s=i.apply(this,arguments);return(0,A.default)(this,s)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=e(28040),C=(K=(0,M.default)("group case_group"),(0,b.default)(w=K(w=(0,$.ConfirmFn)(w=(B=function(f){(0,I.default)(o,f);var g=Z(o);function o(i){var s;return(0,S.default)(this,o),s=g.call(this,i),s.childrenClassName=function(){return"case_group--children"},s.renderFooterWrapper=function(){return null},(0,F.useOnPropsChanged)((0,L.default)(s)),s.onPropsChanged(i),s}return(0,l.default)(o,[{key:"onPropsChanged",value:function(s){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(s){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(s){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:(0,R.default)((0,P.default)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return E.default.createElement("div",{key:"group-header",className:U("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:E.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var s=this.props.config.settings.defaultCaseLabel;return s||""}return E.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,R.default)((0,P.default)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:(0,R.default)((0,P.default)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:(0,R.default)((0,P.default)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var s=this.props,c=s.config,y=s.isLocked,p=s.value,a=s.setValue,n=s.id,m=c.settings.immutableValuesMode,v=E.default.createElement(V.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:p,valueSrc:"value",valueError:null,config:c,setValue:m?$.dummyFn:a,setValueSrc:$.dummyFn,readonly:m||y,id:n,groupId:null});return E.default.createElement($.Col,{className:"case_group--value"},v)}},{key:"renderActions",value:function(){var s=this.props,c=s.config,y=s.addGroup,p=s.addRule,a=s.isLocked,n=s.isTrueLocked,m=s.id;return E.default.createElement(j.GroupActions,{config:c,addGroup:y,addRule:p,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:m})}},{key:"isEmptyCurrentGroup",value:function(){var s=this.props.value,c=s&&s.size?s.get(0):null,y=c!=null&&(Array.isArray(c)?c.length>0:!0);return(0,R.default)((0,P.default)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!y}}]),o}(D.BasicGroup),B.propTypes=X(X({},D.BasicGroup.propTypes),{},{parentReordableNodesCnt:T.default.number,value:T.default.any,setValue:T.default.func}),B))||w)||w)||w),d=C;u.default=d},16154:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.BasicGroup=void 0;var S=r(e(97358)),l=r(e(43427)),L=r(e(43717)),R=r(e(24143)),I=r(e(36742)),A=r(e(77588)),P=r(e(8807)),E=r(e(27148)),T=w(e(27702)),b=r(e(93415)),M=r(e(23241)),D=r(e(76455)),j=r(e(43900)),F=e(83253),$=e(26506),V=e(59729);function K(f){if(typeof WeakMap!="function")return null;var g=new WeakMap,o=new WeakMap;return(K=function(s){return s?o:g})(f)}function w(f,g){if(!g&&f&&f.__esModule)return f;if(f===null||O(f)!=="object"&&typeof f!="function")return{default:f};var o=K(g);if(o&&o.has(f))return o.get(f);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in f)if(c!=="default"&&Object.prototype.hasOwnProperty.call(f,c)){var y=s?Object.getOwnPropertyDescriptor(f,c):null;y&&(y.get||y.set)?Object.defineProperty(i,c,y):i[c]=f[c]}return i.default=f,o&&o.set(f,i),i}function B(f,g){var o=Object.keys(f);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(f);g&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(f,s).enumerable})),o.push.apply(o,i)}return o}function Y(f){for(var g=1;g<arguments.length;g++){var o=arguments[g]!=null?arguments[g]:{};g%2?B(Object(o),!0).forEach(function(i){(0,l.default)(f,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach(function(i){Object.defineProperty(f,i,Object.getOwnPropertyDescriptor(o,i))})}return f}function X(f){var g=Z();return function(){var i=(0,E.default)(f),s;if(g){var c=(0,E.default)(this).constructor;s=Reflect.construct(i,arguments,c)}else s=i.apply(this,arguments);return(0,P.default)(this,s)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z=e(28040),U="topRight",C=function(f){(0,A.default)(o,f);var g=X(o);function o(i){var s;return(0,L.default)(this,o),s=g.call(this,i),s.childrenClassName=function(){return""},s.renderBeforeActions=function(){var c=s.props.config.settings.renderBeforeActions;return c==null?null:typeof c=="function"?T.default.createElement(c,s.props):c},s.renderAfterActions=function(){var c=s.props.config.settings.renderAfterActions;return c==null?null:typeof c=="function"?T.default.createElement(c,s.props):c},s.removeSelf=s.removeSelf.bind((0,I.default)(s)),s.setLock=s.setLock.bind((0,I.default)(s)),s.renderItem=s.renderItem.bind((0,I.default)(s)),s}return(0,R.default)(o,[{key:"isGroupTopPosition",value:function(){return(0,M.default)(this.props.config.settings.groupActionsPosition||U,"top")}},{key:"setLock",value:function(s){this.props.setLock(s)}},{key:"removeSelf",value:function(){var s=this,c=this.props.confirmFn,y=this.props.config.settings,p=y.renderConfirm,a=y.removeGroupConfirmOptions,n=function(){s.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?p(Y(Y({},a),{},{onOk:n,onCancel:null,confirmFn:c})):n()}},{key:"isEmptyCurrentGroup",value:function(){var s=this.props.children1;return!s||s.size==0||s.size==1&&this.isEmpty(s.first())}},{key:"isEmpty",value:function(s){var c=s.get("type")=="group"||s.get("type")=="rule_group";return c?this.isEmptyGroup(s):this.isEmptyRule(s)}},{key:"isEmptyGroup",value:function(s){var c=s.get("children1");return!c||c.size==0||c.size==1&&this.isEmpty(c.first())}},{key:"isEmptyRule",value:function(s){var c=s.get("properties");return!(c.get("field")!==null&&c.get("operator")!==null&&c.get("value").filter(function(y){return y!==void 0}).size>0)}},{key:"render",value:function(){return T.default.createElement(T.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var s=this.props.config;return s.settings.showNot}},{key:"showConjs",value:function(){var s=this.props,c=s.conjunctionOptions,y=s.children1,p=s.config,a=Object.keys(c).length;return a>1||this.showNot()}},{key:"isOneChild",value:function(){var s=this.props.children1;return s?s.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var s=this.props.children1;return s&&T.default.createElement("div",{key:"group-children",className:z("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var s=this.isGroupTopPosition();return T.default.createElement("div",{key:"group-header",className:z("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),s&&this.renderBeforeActions(),s&&this.renderActions(),s&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var s=this.isGroupTopPosition();return!s&&T.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var s=this.props,c=s.config,y=s.addRule,p=s.addGroup,a=s.isLocked,n=s.isTrueLocked,m=s.id;return T.default.createElement($.GroupActions,{config:c,addRule:y,addGroup:p,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:m})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var s=this.props.config.settings.maxNumberOfRules,c=this.props.totalRulesCnt;return s?c<s:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var s=this.props.children1;return s?s.map(this.renderItem).toList():null}},{key:"renderItem",value:function(s){var c=this.props,y=c.config,p=c.actions,a=c.onDragStart,n=c.isLocked,m=s.get("type")=="group"&&s.getIn(["properties","field"])!=null,v=m?"rule_group":s.get("type");return T.default.createElement(F.Item,(0,S.default)({},this.extraPropsForItem(s),{key:s.get("id"),id:s.get("id"),groupId:c.id,path:s.get("path"),type:v,properties:s.get("properties"),config:y,actions:p,children1:s.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(s),totalRulesCnt:this.totalRulesCntForItem(s),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:a,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:n}))}},{key:"extraPropsForItem",value:function(s){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(s){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(s){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var s=this.props,c=s.config,y=s.isRoot,p=s.isLocked,a=this.reordableNodesCnt();return c.settings.canReorder&&!y&&a>1&&!p}},{key:"renderDrag",value:function(){var s=this.props.handleDraggerMouseDown,c=this.showDragIcon()&&T.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:s},T.default.createElement(V.DragIcon,null)," ");return c}},{key:"conjunctionOptions",value:function(){var s=this.props.conjunctionOptions;return s}},{key:"renderConjs",value:function(){var s=this.props,c=s.config,y=s.children1,p=s.id,a=s.selectedConjunction,n=s.setConjunction,m=s.not,v=s.setNot,N=s.isLocked,G=c.settings,q=G.immutableGroupsMode,J=G.renderConjs,W=G.showNot,k=G.notLabel,H=this.conjunctionOptions();if(!this.showConjs()||!y||!y.size)return null;var _={disabled:this.isOneChild(),readonly:q||N,selectedConjunction:a,setConjunction:q?V.dummyFn:n,conjunctionOptions:H,config:c,not:m||!1,id:p,setNot:q?V.dummyFn:v,notLabel:k,showNot:this.showNot(),isLocked:N};return T.default.createElement(J,_)}},{key:"renderHeader",value:function(){return T.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(T.PureComponent);u.BasicGroup=C,C.propTypes={reordableNodesCnt:b.default.number,conjunctionOptions:b.default.object.isRequired,allowFurtherNesting:b.default.bool.isRequired,isRoot:b.default.bool.isRequired,not:b.default.bool,selectedConjunction:b.default.string,config:b.default.object.isRequired,id:b.default.string.isRequired,groupId:b.default.string,path:b.default.any,children1:b.default.any,isDraggingMe:b.default.bool,isDraggingTempo:b.default.bool,isLocked:b.default.bool,isTrueLocked:b.default.bool,handleDraggerMouseDown:b.default.func,onDragStart:b.default.func,addRule:b.default.func.isRequired,addGroup:b.default.func.isRequired,removeSelf:b.default.func.isRequired,setConjunction:b.default.func.isRequired,setNot:b.default.func.isRequired,setLock:b.default.func.isRequired,actions:b.default.object.isRequired};var d=(0,D.default)((0,j.default)("group")((0,V.ConfirmFn)(C)));u.default=d},26506:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.GroupActions=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=E(e(27702));function P(F){if(typeof WeakMap!="function")return null;var $=new WeakMap,V=new WeakMap;return(P=function(w){return w?V:$})(F)}function E(F,$){if(!$&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var V=P($);if(V&&V.has(F))return V.get(F);var K={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var Y=w?Object.getOwnPropertyDescriptor(F,B):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,B,Y):K[B]=F[B]}return K.default=F,V&&V.set(F,K),K}function T(F){var $=b();return function(){var K=(0,I.default)(F),w;if($){var B=(0,I.default)(this).constructor;w=Reflect.construct(K,arguments,B)}else w=K.apply(this,arguments);return(0,R.default)(this,w)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var M={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},D="topRight",j=function(F){(0,L.default)(V,F);var $=T(V);function V(){return(0,S.default)(this,V),$.apply(this,arguments)}return(0,l.default)(V,[{key:"render",value:function(){var w=this.props,B=w.config,Y=w.addRule,X=w.addGroup,Z=w.removeSelf,z=w.setLock,U=w.isLocked,C=w.isTrueLocked,d=w.id,f=w.canAddGroup,g=w.canAddRule,o=w.canDeleteGroup,i=B.settings,s=i.immutableGroupsMode,c=i.addRuleLabel,y=i.addGroupLabel,p=i.delGroupLabel,a=i.groupActionsPosition,n=i.renderButton,m=i.renderSwitch,v=i.renderButtonGroup,N=i.lockLabel,G=i.lockedLabel,q=i.showLock,J=i.canDeleteLocked,W=M[a||D],k=q&&!(U&&!C)&&A.default.createElement(m,{type:"lock",id:d,value:U,setValue:z,label:N,checkedLabel:G,config:B}),H=!s&&g&&!U&&A.default.createElement(n,{type:"addRule",onClick:Y,label:c,readonly:U,config:B}),_=!s&&f&&!U&&A.default.createElement(n,{type:"addGroup",onClick:X,label:y,readonly:U,config:B}),ae=!s&&o&&(!U||U&&J)&&A.default.createElement(n,{type:"delGroup",onClick:Z,label:p,config:B});return A.default.createElement("div",{className:"group--actions ".concat(W)},A.default.createElement(v,{config:B},k,H,_,ae))}}]),V}(A.PureComponent);u.GroupActions=j},83253:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.Item=void 0;var S=r(e(99592)),l=r(e(43717)),L=r(e(24143)),R=r(e(77588)),I=r(e(8807)),A=r(e(27148)),P=r(e(97358)),E=r(e(43427)),T=B(e(27702)),b=r(e(93415)),M=r(e(89679)),D=r(e(16154)),j=r(e(52795)),F=r(e(51790)),$=r(e(63131)),V=r(e(62365)),K=["type"];function w(g){if(typeof WeakMap!="function")return null;var o=new WeakMap,i=new WeakMap;return(w=function(c){return c?i:o})(g)}function B(g,o){if(!o&&g&&g.__esModule)return g;if(g===null||O(g)!=="object"&&typeof g!="function")return{default:g};var i=w(o);if(i&&i.has(g))return i.get(g);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in g)if(y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)){var p=c?Object.getOwnPropertyDescriptor(g,y):null;p&&(p.get||p.set)?Object.defineProperty(s,y,p):s[y]=g[y]}return s.default=g,i&&i.set(g,s),s}function Y(g){var o=X();return function(){var s=(0,A.default)(g),c;if(o){var y=(0,A.default)(this).constructor;c=Reflect.construct(s,arguments,y)}else c=s.apply(this,arguments);return(0,I.default)(this,c)}}function X(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z(g,o){var i=Object.keys(g);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(g);o&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(g,c).enumerable})),i.push.apply(i,s)}return i}function z(g){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?Z(Object(i),!0).forEach(function(s){(0,E.default)(g,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach(function(s){Object.defineProperty(g,s,Object.getOwnPropertyDescriptor(i,s))})}return g}var U=["rule","group","rule_group","switch_group","case_group"],C=function(o){var i=o.properties.toObject(),s=z({},i);return o.isParentLocked&&(s.isLocked=!0),i.isLocked&&(s.isTrueLocked=!0),s},d={rule:function(o){return T.default.createElement(M.default,(0,P.default)({},C(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,config:o.config,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},group:function(o){return T.default.createElement(D.default,(0,P.default)({},C(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group:function(o){return T.default.createElement(j.default,(0,P.default)({},C(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group_ext:function(o){return T.default.createElement(F.default,(0,P.default)({},C(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},switch_group:function(o){return T.default.createElement($.default,(0,P.default)({},C(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},case_group:function(o){return T.default.createElement(V.default,(0,P.default)({},C(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))}},f=function(g){(0,R.default)(i,g);var o=Y(i);function i(){return(0,l.default)(this,i),o.apply(this,arguments)}return(0,L.default)(i,[{key:"render",value:function(){var c=this.props,y=c.type,p=(0,S.default)(c,K),a=p.properties.get("mode"),n=a=="array"?"_ext":"",m=p.config.settings.renderItem,v=d[y+n];return m?m(z(z({},p),{},{type:y,itemComponent:v})):v?v(p):null}}]),i}(T.PureComponent);u.Item=f,f.propTypes={config:b.default.object.isRequired,id:b.default.string.isRequired,groupId:b.default.string,type:b.default.oneOf(U).isRequired,path:b.default.any.isRequired,properties:b.default.any.isRequired,children1:b.default.any,actions:b.default.object.isRequired,reordableNodesCnt:b.default.number,onDragStart:b.default.func,parentField:b.default.string,isDraggingTempo:b.default.bool,isParentLocked:b.default.bool}},89679:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43427)),l=r(e(43717)),L=r(e(24143)),R=r(e(36742)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=U(e(27702)),T=r(e(93415)),b=r(e(23422)),M=r(e(43900)),D=r(e(27914)),j=r(e(85174)),F=r(e(52922)),$=r(e(97098)),V=e(6384),K=e(68710),w=e(98572),B=e(59729),Y,X,Z;function z(c){if(typeof WeakMap!="function")return null;var y=new WeakMap,p=new WeakMap;return(z=function(n){return n?p:y})(c)}function U(c,y){if(!y&&c&&c.__esModule)return c;if(c===null||O(c)!=="object"&&typeof c!="function")return{default:c};var p=z(y);if(p&&p.has(c))return p.get(c);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in c)if(m!=="default"&&Object.prototype.hasOwnProperty.call(c,m)){var v=n?Object.getOwnPropertyDescriptor(c,m):null;v&&(v.get||v.set)?Object.defineProperty(a,m,v):a[m]=c[m]}return a.default=c,p&&p.set(c,a),a}function C(c,y){var p=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);y&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(c,n).enumerable})),p.push.apply(p,a)}return p}function d(c){for(var y=1;y<arguments.length;y++){var p=arguments[y]!=null?arguments[y]:{};y%2?C(Object(p),!0).forEach(function(a){(0,S.default)(c,a,p[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(p)):C(Object(p)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(p,a))})}return c}function f(c){var y=g();return function(){var a=(0,P.default)(c),n;if(y){var m=(0,P.default)(this).constructor;n=Reflect.construct(a,arguments,m)}else n=a.apply(this,arguments);return(0,A.default)(this,n)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var o=e(28040),i=(Y=(0,M.default)("rule"),(0,b.default)(X=Y(X=(0,B.ConfirmFn)(X=(Z=function(c){(0,I.default)(p,c);var y=f(p);function p(a){var n;return(0,l.default)(this,p),n=y.call(this,a),(0,w.useOnPropsChanged)((0,R.default)(n)),n.removeSelf=n.removeSelf.bind((0,R.default)(n)),n.setLock=n.setLock.bind((0,R.default)(n)),n.onPropsChanged(a),n}return(0,L.default)(p,[{key:"onPropsChanged",value:function(n){var m=this.props,v=["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"],N=!this.meta||v.map(function(G){return n[G]!==m[G]}).filter(function(G){return G}).length>0;N&&(this.meta=this.getMeta(n))}},{key:"getMeta",value:function(n){var m=n.selectedField,v=n.selectedOperator,N=n.config,G=n.reordableNodesCnt,q=n.isLocked,J=(0,K.getFieldPathLabels)(m,N),W=(0,V.getFieldConfig)(N,m),k=W&&W.type=="!struct",H=m&&v&&!k,_=(0,V.getOperatorConfig)(N,v,m),ae=_&&_.options!=null,oe=(0,V.getFieldWidgetConfig)(N,m,v)||{},le=oe.hideOperator,ue=N.settings.canReorder&&G>1&&!q,me=m&&!le,pe=m&&le&&oe.operatorInlineLabel,Ee=H,ge=H&&ae;return{selectedFieldPartsLabels:J,selectedFieldWidgetConfig:oe,showDragIcon:ue,showOperator:me,showOperatorLabel:pe,showWidget:Ee,showOperatorOptions:ge}}},{key:"setLock",value:function(n){this.props.setLock(n)}},{key:"removeSelf",value:function(){var n=this,m=this.props.confirmFn,v=this.props.config.settings,N=v.renderConfirm,G=v.removeRuleConfirmOptions,q=function(){n.props.removeSelf()};G&&!this.isEmptyCurrentRule()?N(d(d({},G),{},{onOk:q,onCancel:null,confirmFn:m})):q()}},{key:"isEmptyCurrentRule",value:function(){return!(this.props.selectedField!==null&&this.props.selectedOperator!==null&&this.props.value.filter(function(n){return n!==void 0}).size>0)}},{key:"renderField",value:function(){var n=this.props,m=n.config,v=n.isLocked,N=m.settings.immutableFieldsMode;return E.default.createElement(j.default,{key:"field",classname:"rule--field",config:m,selectedField:this.props.selectedField,setField:N?B.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:N||v,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var n=this.props,m=n.config,v=n.isLocked,N=this.meta,G=N.selectedFieldPartsLabels,q=N.selectedFieldWidgetConfig,J=N.showOperator,W=N.showOperatorLabel,k=m.settings.immutableOpsMode;return E.default.createElement(D.default,{key:"operator",config:m,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:k?B.dummyFn:this.props.setOperator,selectedFieldPartsLabels:G,showOperator:J,showOperatorLabel:W,selectedFieldWidgetConfig:q,readonly:k||v,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var n=this.props,m=n.config,v=n.valueError,N=n.isLocked,G=this.meta.showWidget,q=m.settings.immutableValuesMode;if(!G)return null;var J=E.default.createElement(F.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:v,config:m,setValue:q?B.dummyFn:this.props.setValue,setValueSrc:q?B.dummyFn:this.props.setValueSrc,readonly:q||N,id:this.props.id,groupId:this.props.groupId});return E.default.createElement(B.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},J)}},{key:"renderOperatorOptions",value:function(){var n=this.props.config,m=this.meta.showOperatorOptions,v=n.settings,N=v.immutableOpsMode,G=v.immutableValuesMode;if(!m)return null;var q=E.default.createElement($.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:N?B.dummyFn:this.props.setOperatorOption,config:n,readonly:G});return E.default.createElement(B.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},q)}},{key:"renderBeforeWidget",value:function(){var n=this.props.config,m=n.settings.renderBeforeWidget;return m&&E.default.createElement(B.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof m=="function"?m(this.props):m)}},{key:"renderAfterWidget",value:function(){var n=this.props.config,m=n.settings.renderAfterWidget;return m&&E.default.createElement(B.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof m=="function"?m(this.props):m)}},{key:"renderError",value:function(){var n=this.props,m=n.config,v=n.valueError,N=m.settings,G=N.renderRuleError,q=N.showErrorMessage,J=v&&v.toArray().filter(function(W){return!!W}).shift()||null;return q&&J&&E.default.createElement("div",{className:"rule--error"},G?G({error:J}):J)}},{key:"renderDrag",value:function(){var n=this.meta.showDragIcon;return n&&E.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},E.default.createElement(B.DragIcon,null)," ")}},{key:"renderDel",value:function(){var n=this.props,m=n.config,v=n.isLocked,N=m.settings,G=N.deleteLabel,q=N.immutableGroupsMode,J=N.renderButton,W=N.canDeleteLocked;return!q&&(!v||v&&W)&&E.default.createElement(J,{type:"delRule",onClick:this.removeSelf,label:G,config:m})}},{key:"renderLock",value:function(){var n=this.props,m=n.config,v=n.isLocked,N=n.isTrueLocked,G=n.id,q=m.settings,J=q.lockLabel,W=q.lockedLabel,k=q.showLock,H=q.renderSwitch;return k&&!(v&&!N)&&E.default.createElement(H,{type:"lock",id:G,value:v,setValue:this.setLock,label:J,checkedLabel:W,hideLabel:!0,config:m})}},{key:"render",value:function(){var n=this.meta,m=n.showOperatorOptions,v=n.selectedFieldWidgetConfig,N=this.props,G=N.valueSrc,q=N.value,J=N.config,W=G.first()=="value"&&!m&&q.size==1&&v.fullWidth,k=J.settings.renderButtonGroup,H=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],_=E.default.createElement("div",{key:"rule-body",className:o("rule--body",W&&"can--shrink--value")},H),ae=this.renderError(),oe=this.renderDrag(),le=this.renderLock(),ue=this.renderDel();return E.default.createElement(E.default.Fragment,null,oe,E.default.createElement("div",{className:"rule--body--wrapper"},_,ae),E.default.createElement("div",{className:"rule--header"},E.default.createElement(k,{config:J},le,ue)))}}]),p}(E.PureComponent),Z.propTypes={id:T.default.string.isRequired,groupId:T.default.string,selectedField:T.default.string,selectedOperator:T.default.string,operatorOptions:T.default.object,config:T.default.object.isRequired,value:T.default.any,valueSrc:T.default.any,asyncListValues:T.default.array,isDraggingMe:T.default.bool,isDraggingTempo:T.default.bool,parentField:T.default.string,valueError:T.default.any,isLocked:T.default.bool,isTrueLocked:T.default.bool,handleDraggerMouseDown:T.default.func,setField:T.default.func,setOperator:T.default.func,setOperatorOption:T.default.func,setLock:T.default.func,removeSelf:T.default.func,setValue:T.default.func,setValueSrc:T.default.func,reordableNodesCnt:T.default.number},Z))||X)||X)||X),s=i;u.default=s},52795:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(43427)),S=r(e(43717)),l=r(e(24143)),L=r(e(36742)),R=r(e(29801)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=r(e(27702)),T=r(e(93415)),b=r(e(76455)),M=r(e(43900)),D=e(16154),j=e(45255),F=r(e(85174)),$=e(98572),V=e(59729),K,w,B;function Y(d,f){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(d);f&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(d,i).enumerable})),g.push.apply(g,o)}return g}function X(d){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?Y(Object(g),!0).forEach(function(o){(0,O.default)(d,o,g[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):Y(Object(g)).forEach(function(o){Object.defineProperty(d,o,Object.getOwnPropertyDescriptor(g,o))})}return d}function Z(d){var f=z();return function(){var o=(0,P.default)(d),i;if(f){var s=(0,P.default)(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return(0,A.default)(this,i)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=(K=(0,M.default)("group rule_group"),(0,b.default)(w=K(w=(0,V.ConfirmFn)(w=(B=function(d){(0,I.default)(g,d);var f=Z(g);function g(o){var i;return(0,S.default)(this,g),i=f.call(this,o),i.childrenClassName=function(){return"rule_group--children"},i.renderHeaderWrapper=function(){return null},i.renderFooterWrapper=function(){return null},i.renderConjs=function(){return null},i.canAddGroup=function(){return!1},i.canAddRule=function(){return!0},i.canDeleteGroup=function(){return!1},(0,$.useOnPropsChanged)((0,L.default)(i)),i.onPropsChanged(o),i}return(0,l.default)(g,[{key:"onPropsChanged",value:function(i){}},{key:"reordableNodesCntForItem",value:function(i){if(this.props.isLocked)return 0;var s=this.props.children1;return s.size}},{key:"renderChildrenWrapper",value:function(){return E.default.createElement(E.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,R.default)((0,P.default)(g.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var i=this.props,s=i.config,c=i.selectedField,y=i.setField,p=i.parentField,a=i.id,n=i.groupId,m=i.isLocked,v=s.settings.immutableFieldsMode;return E.default.createElement(F.default,{key:"field",classname:"group--field",config:s,selectedField:c,setField:y,parentField:p,readonly:v||m,id:a,groupId:n})}},{key:"renderActions",value:function(){var i=this.props,s=i.config,c=i.addRule,y=i.isLocked,p=i.isTrueLocked,a=i.id;return E.default.createElement(j.RuleGroupActions,{config:s,addRule:c,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:y,isTrueLocked:p,id:a})}},{key:"extraPropsForItem",value:function(i){return{parentField:this.props.selectedField}}}]),g}(D.BasicGroup),B.propTypes=X(X({},D.BasicGroup.propTypes),{},{selectedField:T.default.string,parentField:T.default.string,setField:T.default.func}),B))||w)||w)||w),C=U;u.default=C},45255:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.RuleGroupActions=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=E(e(27702));function P(D){if(typeof WeakMap!="function")return null;var j=new WeakMap,F=new WeakMap;return(P=function(V){return V?F:j})(D)}function E(D,j){if(!j&&D&&D.__esModule)return D;if(D===null||O(D)!=="object"&&typeof D!="function")return{default:D};var F=P(j);if(F&&F.has(D))return F.get(D);var $={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in D)if(K!=="default"&&Object.prototype.hasOwnProperty.call(D,K)){var w=V?Object.getOwnPropertyDescriptor(D,K):null;w&&(w.get||w.set)?Object.defineProperty($,K,w):$[K]=D[K]}return $.default=D,F&&F.set(D,$),$}function T(D){var j=b();return function(){var $=(0,I.default)(D),V;if(j){var K=(0,I.default)(this).constructor;V=Reflect.construct($,arguments,K)}else V=$.apply(this,arguments);return(0,R.default)(this,V)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var M=function(D){(0,L.default)(F,D);var j=T(F);function F(){return(0,S.default)(this,F),j.apply(this,arguments)}return(0,l.default)(F,[{key:"render",value:function(){var V=this.props,K=V.config,w=V.addRule,B=V.canAddRule,Y=V.canDeleteGroup,X=V.removeSelf,Z=V.setLock,z=V.isLocked,U=V.isTrueLocked,C=V.id,d=K.settings,f=d.immutableGroupsMode,g=d.addRuleLabel,o=d.delGroupLabel,i=d.renderButton,s=d.renderSwitch,c=d.renderButtonGroup,y=d.lockLabel,p=d.lockedLabel,a=d.showLock,n=d.canDeleteLocked,m=a&&!(z&&!U)&&A.default.createElement(s,{type:"lock",id:C,value:z,setValue:Z,label:y,checkedLabel:p,hideLabel:!0,config:K}),v=!f&&B&&!z&&A.default.createElement(i,{type:"addRuleGroup",onClick:w,label:g,readonly:z,config:K}),N=!f&&Y&&(!z||z&&n)&&A.default.createElement(i,{type:"delRuleGroup",onClick:X,label:o,config:K});return A.default.createElement("div",{className:"group--actions"},A.default.createElement(c,{config:K},m,v,N))}}]),F}(A.PureComponent);u.RuleGroupActions=M},51790:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(43427)),S=r(e(43717)),l=r(e(24143)),L=r(e(36742)),R=r(e(29801)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=r(e(27702)),T=r(e(93415)),b=r(e(76455)),M=r(e(43900)),D=e(16154),j=e(26612),F=r(e(85174)),$=r(e(27914)),V=e(98572),K=e(59729),w=e(6384),B=r(e(52922)),Y,X,Z;function z(y,p){var a=Object.keys(y);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(y);p&&(n=n.filter(function(m){return Object.getOwnPropertyDescriptor(y,m).enumerable})),a.push.apply(a,n)}return a}function U(y){for(var p=1;p<arguments.length;p++){var a=arguments[p]!=null?arguments[p]:{};p%2?z(Object(a),!0).forEach(function(n){(0,O.default)(y,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach(function(n){Object.defineProperty(y,n,Object.getOwnPropertyDescriptor(a,n))})}return y}function C(y,p){var a=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!a){if(Array.isArray(y)||(a=d(y))||p&&y&&typeof y.length=="number"){a&&(y=a);var n=0,m=function(){};return{s:m,n:function(){return n>=y.length?{done:!0}:{done:!1,value:y[n++]}},e:function(J){throw J},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,N=!1,G;return{s:function(){a=a.call(y)},n:function(){var J=a.next();return v=J.done,J},e:function(J){N=!0,G=J},f:function(){try{!v&&a.return!=null&&a.return()}finally{if(N)throw G}}}}function d(y,p){if(y){if(typeof y=="string")return f(y,p);var a=Object.prototype.toString.call(y).slice(8,-1);if(a==="Object"&&y.constructor&&(a=y.constructor.name),a==="Map"||a==="Set")return Array.from(y);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(y,p)}}function f(y,p){(p==null||p>y.length)&&(p=y.length);for(var a=0,n=new Array(p);a<p;a++)n[a]=y[a];return n}function g(y){var p=o();return function(){var n=(0,P.default)(y),m;if(p){var v=(0,P.default)(this).constructor;m=Reflect.construct(n,arguments,v)}else m=n.apply(this,arguments);return(0,A.default)(this,m)}}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var i=e(28040),s=(Y=(0,M.default)("group rule_group_ext"),(0,b.default)(X=Y(X=(0,K.ConfirmFn)(X=(Z=function(y){(0,I.default)(a,y);var p=g(a);function a(n){var m;return(0,S.default)(this,a),m=p.call(this,n),m.childrenClassName=function(){return"rule_group_ext--children"},m.renderFooterWrapper=function(){return null},m.canAddGroup=function(){return!1},m.canAddRule=function(){return!0},m.canDeleteGroup=function(){return!0},(0,V.useOnPropsChanged)((0,L.default)(m)),m.onPropsChanged(n),m}return(0,l.default)(a,[{key:"onPropsChanged",value:function(m){}},{key:"renderHeaderWrapper",value:function(){return E.default.createElement("div",{key:"group-header",className:i("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return E.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return E.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var m=this.props,v=m.config,N=m.selectedField,G=m.selectedOperator,q=(0,w.getFieldConfig)(v,N)||{};return q.showNot!=null?q.showNot:v.settings.showNot}},{key:"conjunctionOptions",value:function(){var m=this.props,v=m.config,N=m.selectedField,G=m.selectedOperator,q=(0,w.getFieldConfig)(v,N)||{},J=(0,R.default)((0,P.default)(a.prototype),"conjunctionOptions",this).call(this);if(q.conjunctions){var W={},k=C(q.conjunctions),H;try{for(k.s();!(H=k.n()).done;){var _=H.value;W[_]=J[_]}}catch(ae){k.e(ae)}finally{k.f()}J=W}return J}},{key:"renderField",value:function(){var m=this.props,v=m.config,N=m.selectedField,G=m.setField,q=m.parentField,J=m.id,W=m.groupId,k=m.isLocked,H=v.settings.immutableFieldsMode;return E.default.createElement(F.default,{key:"field",classname:"rule--field",config:v,selectedField:N,setField:G,parentField:q,readonly:H||k,id:J,groupId:W})}},{key:"renderOperator",value:function(){var m=this.props,v=m.config,N=m.selectedField,G=m.selectedOperator,q=m.setField,J=m.setOperator,W=m.isLocked,k=v.settings.immutableFieldsMode,H=(0,w.getFieldWidgetConfig)(v,N,G)||{},_=H.hideOperator,ae=N&&_&&H.operatorInlineLabel,oe=N&&!_;return E.default.createElement($.default,{key:"operator",classname:"group--operator",config:v,selectedField:N,selectedOperator:G,setField:q,setOperator:J,selectedFieldPartsLabels:["group"],showOperator:oe,showOperatorLabel:ae,selectedFieldWidgetConfig:H,readonly:k||W,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var m=this.props,v=m.config,N=m.selectedField,G=m.selectedOperator,q=m.isLocked,J=v.settings.immutableValuesMode,W=N&&G,k=W;if(!k)return null;var H=E.default.createElement(B.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:v,setValue:J?K.dummyFn:this.props.setValue,setValueSrc:K.dummyFn,readonly:J||q,id:this.props.id,groupId:this.props.groupId});return E.default.createElement(K.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},H)}},{key:"renderActions",value:function(){var m=this.props,v=m.config,N=m.addRule,G=m.isLocked,q=m.isTrueLocked,J=m.id;return E.default.createElement(j.RuleGroupExtActions,{config:v,addRule:N,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:G,isTrueLocked:q,id:J})}},{key:"reordableNodesCntForItem",value:function(m){if(this.props.isLocked)return 0;var v=this.props.children1;return v.size}},{key:"extraPropsForItem",value:function(m){return{parentField:this.props.selectedField}}}]),a}(D.BasicGroup),Z.propTypes=U(U({},D.BasicGroup.propTypes),{},{selectedField:T.default.string,selectedOperator:T.default.string,value:T.default.any,parentField:T.default.string,setField:T.default.func,setOperator:T.default.func,setValue:T.default.func}),Z))||X)||X)||X),c=s;u.default=c},26612:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.RuleGroupExtActions=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=E(e(27702));function P(D){if(typeof WeakMap!="function")return null;var j=new WeakMap,F=new WeakMap;return(P=function(V){return V?F:j})(D)}function E(D,j){if(!j&&D&&D.__esModule)return D;if(D===null||O(D)!=="object"&&typeof D!="function")return{default:D};var F=P(j);if(F&&F.has(D))return F.get(D);var $={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in D)if(K!=="default"&&Object.prototype.hasOwnProperty.call(D,K)){var w=V?Object.getOwnPropertyDescriptor(D,K):null;w&&(w.get||w.set)?Object.defineProperty($,K,w):$[K]=D[K]}return $.default=D,F&&F.set(D,$),$}function T(D){var j=b();return function(){var $=(0,I.default)(D),V;if(j){var K=(0,I.default)(this).constructor;V=Reflect.construct($,arguments,K)}else V=$.apply(this,arguments);return(0,R.default)(this,V)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var M=function(D){(0,L.default)(F,D);var j=T(F);function F(){return(0,S.default)(this,F),j.apply(this,arguments)}return(0,l.default)(F,[{key:"render",value:function(){var V=this.props,K=V.config,w=V.addRule,B=V.canAddRule,Y=V.canDeleteGroup,X=V.removeSelf,Z=V.setLock,z=V.isLocked,U=V.isTrueLocked,C=V.id,d=K.settings,f=d.immutableGroupsMode,g=d.addSubRuleLabel,o=d.delGroupLabel,i=d.renderButton,s=d.renderSwitch,c=d.renderButtonGroup,y=d.lockLabel,p=d.lockedLabel,a=d.showLock,n=d.canDeleteLocked,m=a&&!(z&&!U)&&A.default.createElement(s,{type:"lock",id:C,value:z,setValue:Z,label:y,checkedLabel:p,config:K}),v=!f&&B&&!z&&A.default.createElement(i,{type:"addRuleGroupExt",onClick:w,label:g,readonly:z,config:K}),N=!f&&Y&&(!z||z&&n)&&A.default.createElement(i,{type:"delRuleGroup",onClick:X,label:o,config:K});return A.default.createElement("div",{className:"group--actions group--actions--tr"},A.default.createElement(c,{config:K},m,v,N))}}]),F}(A.PureComponent);u.RuleGroupExtActions=M},63131:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(43427)),S=r(e(43717)),l=r(e(24143)),L=r(e(36742)),R=r(e(77588)),I=r(e(8807)),A=r(e(27148)),P=r(e(27702)),E=r(e(93415)),T=r(e(76455)),b=r(e(43900)),M=e(16154),D=e(71289),j=e(98572),F=e(59729),$=e(50679),V,K,w;function B(d,f){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(d);f&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(d,i).enumerable})),g.push.apply(g,o)}return g}function Y(d){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?B(Object(g),!0).forEach(function(o){(0,O.default)(d,o,g[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):B(Object(g)).forEach(function(o){Object.defineProperty(d,o,Object.getOwnPropertyDescriptor(g,o))})}return d}function X(d){var f=Z();return function(){var o=(0,A.default)(d),i;if(f){var s=(0,A.default)(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return(0,I.default)(this,i)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z=e(28040),U=(V=(0,b.default)("group switch_group"),(0,T.default)(K=V(K=(0,F.ConfirmFn)(K=(w=function(d){(0,R.default)(g,d);var f=X(g);function g(o){var i;return(0,S.default)(this,g),i=f.call(this,o),i.childrenClassName=function(){return"switch_group--children"},i.renderFooterWrapper=function(){return null},i.hasDefaultCase=function(){return i.props.children1.size&&i.props.children1.filter(function(s){return s.get("children1")==null}).size>0},(0,j.useOnPropsChanged)((0,L.default)(i)),i.onPropsChanged(o),i}return(0,l.default)(g,[{key:"onPropsChanged",value:function(i){}},{key:"canAddGroup",value:function(){var i=this.props.config.settings.maxNumberOfCases,s=this.props.children1.size;return i?s<i:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var i=this.props.children1.size,s=i;return this.hasDefaultCase()&&s--,s}},{key:"totalRulesCntForItem",value:function(i){return(0,$.getTotalRulesCountInTree)(i)}},{key:"reordableNodesCntForItem",value:function(i){if(this.props.isLocked)return 0;var s=this.props.config.settings,c=s.canLeaveEmptyCase,y=s.canRegroupCases,p=this.props.children1.size,a=p;this.hasDefaultCase()&&a--;var n=(0,$.getTotalReordableNodesCountInTree)(i),m=n;return m==1&&y&&c&&a>1&&(m=111),m}},{key:"renderHeaderWrapper",value:function(){return P.default.createElement("div",{key:"group-header",className:z("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return P.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var i=this.props.config.settings.renderSwitchPrefix;return i?i():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var i=this.props,s=i.config,c=i.addCaseGroup,y=i.addDefaultCaseGroup,p=i.isLocked,a=i.isTrueLocked,n=i.id;return P.default.createElement(D.SwitchGroupActions,{config:s,addCaseGroup:c,addDefaultCaseGroup:y,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:p,isTrueLocked:a,id:n})}}]),g}(M.BasicGroup),w.propTypes=Y({},M.BasicGroup.propTypes),w))||K)||K)||K),C=U;u.default=C},71289:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.SwitchGroupActions=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=E(e(27702));function P(F){if(typeof WeakMap!="function")return null;var $=new WeakMap,V=new WeakMap;return(P=function(w){return w?V:$})(F)}function E(F,$){if(!$&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var V=P($);if(V&&V.has(F))return V.get(F);var K={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var Y=w?Object.getOwnPropertyDescriptor(F,B):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,B,Y):K[B]=F[B]}return K.default=F,V&&V.set(F,K),K}function T(F){var $=b();return function(){var K=(0,I.default)(F),w;if($){var B=(0,I.default)(this).constructor;w=Reflect.construct(K,arguments,B)}else w=K.apply(this,arguments);return(0,R.default)(this,w)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var M={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},D="topRight",j=function(F){(0,L.default)(V,F);var $=T(V);function V(){return(0,S.default)(this,V),$.apply(this,arguments)}return(0,l.default)(V,[{key:"render",value:function(){var w=this.props,B=w.config,Y=w.addCaseGroup,X=w.addDefaultCaseGroup,Z=w.setLock,z=w.isLocked,U=w.isTrueLocked,C=w.id,d=w.canAddGroup,f=w.canAddDefault,g=B.settings,o=g.immutableGroupsMode,i=g.addCaseLabel,s=g.addDefaultCaseLabel,c=g.groupActionsPosition,y=g.renderButton,p=g.renderSwitch,a=g.renderButtonGroup,n=g.lockLabel,m=g.lockedLabel,v=g.showLock,N=M[c||D],G=v&&!(z&&!U)&&A.default.createElement(p,{type:"lock",id:C,value:z,setValue:Z,label:n,checkedLabel:m,config:B}),q=!o&&d&&!z&&A.default.createElement(y,{type:"addCaseGroup",onClick:Y,label:i,readonly:z,config:B}),J=!o&&f&&!z&&A.default.createElement(y,{type:"addDefaultCaseGroup",onClick:X,label:s,readonly:z,config:B});return A.default.createElement("div",{className:"group--actions ".concat(N)},A.default.createElement(a,{config:B},G,q,J))}}]),V}(A.PureComponent);u.SwitchGroupActions=j},67848:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(97358)),l=r(e(43717)),L=r(e(24143)),R=r(e(77588)),I=r(e(8807)),A=r(e(27148)),P=M(e(27702)),E=r(e(93415)),T=r(e(53659));function b($){if(typeof WeakMap!="function")return null;var V=new WeakMap,K=new WeakMap;return(b=function(B){return B?K:V})($)}function M($,V){if(!V&&$&&$.__esModule)return $;if($===null||O($)!=="object"&&typeof $!="function")return{default:$};var K=b(V);if(K&&K.has($))return K.get($);var w={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in $)if(Y!=="default"&&Object.prototype.hasOwnProperty.call($,Y)){var X=B?Object.getOwnPropertyDescriptor($,Y):null;X&&(X.get||X.set)?Object.defineProperty(w,Y,X):w[Y]=$[Y]}return w.default=$,K&&K.set($,w),w}function D($){var V=j();return function(){var w=(0,A.default)($),B;if(V){var Y=(0,A.default)(this).constructor;B=Reflect.construct(w,arguments,Y)}else B=w.apply(this,arguments);return(0,I.default)(this,B)}}function j(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var F=function($){(0,R.default)(K,$);var V=D(K);function K(){var w;(0,l.default)(this,K);for(var B=arguments.length,Y=new Array(B),X=0;X<B;X++)Y[X]=arguments[X];return w=V.call.apply(V,[this].concat(Y)),w.handleChange=function(Z){w.props.setOption("proximity",parseInt(Z))},w}return(0,L.default)(K,[{key:"render",value:function(){var B=this.props,Y=B.defaults,X=B.options,Z=B.config,z=B.optionLabel,U=B.optionPlaceholder,C=B.customProps,d=B.minProximity,f=B.maxProximity,g=B.optionTextBefore,o=B.readonly,i=Z.settings,s=Z.widgets,c=Y?Y.proximity:void 0,y=i.showLabels,p=X.get("proximity",c),a=(0,T.default)(d,f+1).map(function(m){return{title:m,value:m}}),n=s.select.factory;return P.default.createElement("div",{className:"operator--PROXIMITY"},P.default.createElement("div",{className:"operator--options"},y&&P.default.createElement("label",{className:"rule--label"},z),!y&&g&&P.default.createElement("div",{className:"operator--options--sep"},P.default.createElement("span",null,g)),P.default.createElement(n,(0,S.default)({config:Z,value:p,listValues:a,setValue:this.handleChange,readonly:o,placeholder:U},C))),P.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),K}(P.PureComponent);u.default=F,F.propTypes={config:E.default.object.isRequired,setOption:E.default.func.isRequired,options:E.default.any.isRequired,minProximity:E.default.number,maxProximity:E.default.number,optionPlaceholder:E.default.string,optionTextBefore:E.default.string,optionLabel:E.default.string,customProps:E.default.object,readonly:E.default.bool},F.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},45761:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"ProximityOperator",{enumerable:!0,get:function(){return O.default}});var O=r(e(67848))},82189:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43427)),l=r(e(43717)),L=r(e(24143)),R=r(e(36742)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=K(e(27702)),T=r(e(93415)),b=e(6384),M=e(68710),D=e(99890),j=e(98572),F=r(e(13509)),$=r(e(52116));function V(z){if(typeof WeakMap!="function")return null;var U=new WeakMap,C=new WeakMap;return(V=function(f){return f?C:U})(z)}function K(z,U){if(!U&&z&&z.__esModule)return z;if(z===null||O(z)!=="object"&&typeof z!="function")return{default:z};var C=V(U);if(C&&C.has(z))return C.get(z);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in z)if(g!=="default"&&Object.prototype.hasOwnProperty.call(z,g)){var o=f?Object.getOwnPropertyDescriptor(z,g):null;o&&(o.get||o.set)?Object.defineProperty(d,g,o):d[g]=z[g]}return d.default=z,C&&C.set(z,d),d}function w(z,U){var C=Object.keys(z);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(z);U&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(z,f).enumerable})),C.push.apply(C,d)}return C}function B(z){for(var U=1;U<arguments.length;U++){var C=arguments[U]!=null?arguments[U]:{};U%2?w(Object(C),!0).forEach(function(d){(0,S.default)(z,d,C[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(C)):w(Object(C)).forEach(function(d){Object.defineProperty(z,d,Object.getOwnPropertyDescriptor(C,d))})}return z}function Y(z){var U=X();return function(){var d=(0,P.default)(z),f;if(U){var g=(0,P.default)(this).constructor;f=Reflect.construct(d,arguments,g)}else f=d.apply(this,arguments);return(0,A.default)(this,f)}}function X(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z=function(z){(0,I.default)(C,z);var U=Y(C);function C(d){var f;return(0,l.default)(this,C),f=U.call(this,d),(0,j.useOnPropsChanged)((0,R.default)(f)),f.onPropsChanged(d),f}return(0,L.default)(C,[{key:"onPropsChanged",value:function(f){var g=this.props,o=["selectedField","config","parentField"],i=!this.meta||o.map(function(s){return f[s]!==g[s]}).filter(function(s){return s}).length>0;i&&(this.meta=this.getMeta(f))}},{key:"getMeta",value:function(f){var g=f.selectedField,o=f.config,i=f.parentField,s=g,c=o.settings,y=c.maxLabelsLength,p=c.fieldSeparatorDisplay,a=c.fieldPlaceholder,n=c.fieldSeparator,m=!!g,v=m?null:(0,D.truncateString)(a,y),N=m?(0,b.getFieldConfig)(o,s):null,G=N||{},q=(0,M.getFieldPath)(s,o),J=(0,M.getFieldPath)(s,o,!0),W=this.getFieldLabel(N,s,o),k=(0,M.getFieldPathLabels)(s,o),H=k?k.join(p):null;(H==W||i)&&(H=null);var _=G.label2,ae=typeof i=="string"?i.split(n):i,oe=i?(0,b.getFieldConfig)(o,i):null,le=i?oe&&oe.subfields:o.fields,ue=this.buildOptions(ae,o,le,ae);return{placeholder:v,items:ue,parentField:i,selectedKey:s,selectedKeys:q,selectedPath:J,selectedLabel:W,selectedOpts:G,selectedAltLabel:_,selectedFullLabel:H}}},{key:"getFieldLabel",value:function(f,g,o){if(!g)return null;var i=o.settings.fieldSeparator,s=o.settings.maxLabelsLength,c=Array.isArray(g)?g:g.split(i),y=f&&f.label||(0,F.default)(c);return y=(0,D.truncateString)(y,s),y}},{key:"buildOptions",value:function(f,g,o){var i=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!o)return null;var y=g.settings,p=y.fieldSeparator,a=y.fieldSeparatorDisplay,n=s?s.join(p)+p:"";return(0,$.default)(o).map(function(m){var v=o[m],N=i.getFieldLabel(v,m,g),G=(0,M.getFieldPathLabels)(n+m,g),q=G.join(a);(q==N||f)&&(q=null);var J=v.label2,W=v.tooltip,k=(s||[]).concat(m),H=v.disabled;if(!v.hideForSelect)return v.type=="!struct"?{disabled:H,key:m,path:n+m,label:N,fullLabel:q,altLabel:J,tooltip:W,items:i.buildOptions(f,g,v.subfields,k,N)}:{disabled:H,key:m,path:n+m,label:N,fullLabel:q,altLabel:J,tooltip:W,grouplabel:c}}).filter(function(m){return!!m})}},{key:"render",value:function(){var f=this.props,g=f.config,o=f.customProps,i=f.setField,s=f.readonly,c=f.id,y=f.groupId,p=g.settings.renderField,a=B({id:c,groupId:y,config:g,customProps:o,readonly:s,setField:i},this.meta);return p(a)}}]),C}(E.PureComponent);u.default=Z,Z.propTypes={id:T.default.string,groupId:T.default.string,config:T.default.object.isRequired,selectedField:T.default.string,parentField:T.default.string,customProps:T.default.object,readonly:T.default.bool,setField:T.default.func.isRequired}},85174:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=b(e(27702)),P=r(e(82189)),E=e(59729);function T(F){if(typeof WeakMap!="function")return null;var $=new WeakMap,V=new WeakMap;return(T=function(w){return w?V:$})(F)}function b(F,$){if(!$&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var V=T($);if(V&&V.has(F))return V.get(F);var K={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var Y=w?Object.getOwnPropertyDescriptor(F,B):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,B,Y):K[B]=F[B]}return K.default=F,V&&V.set(F,K),K}function M(F){var $=D();return function(){var K=(0,I.default)(F),w;if($){var B=(0,I.default)(this).constructor;w=Reflect.construct(K,arguments,B)}else w=K.apply(this,arguments);return(0,R.default)(this,w)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=function(F){(0,L.default)(V,F);var $=M(V);function V(){return(0,S.default)(this,V),$.apply(this,arguments)}return(0,l.default)(V,[{key:"render",value:function(){var w=this.props,B=w.config,Y=w.selectedField,X=w.setField,Z=w.parentField,z=w.classname,U=w.readonly,C=w.id,d=w.groupId;return A.default.createElement(E.Col,{className:z},B.settings.showLabels&&A.default.createElement("label",{className:"rule--label"},B.settings.fieldLabel),A.default.createElement(P.default,{config:B,selectedField:Y,parentField:Z,setField:X,customProps:B.settings.customFieldSelectProps,readonly:U,id:C,groupId:d}))}}]),V}(A.PureComponent);u.default=j},71031:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43427)),l=r(e(74208)),L=r(e(43717)),R=r(e(24143)),I=r(e(36742)),A=r(e(77588)),P=r(e(8807)),E=r(e(27148)),T=B(e(27702)),b=r(e(93415)),M=e(6384),D=e(68710),j=e(99890),F=e(98572),$=r(e(13509)),V=r(e(52116)),K=r(e(15322));function w(C){if(typeof WeakMap!="function")return null;var d=new WeakMap,f=new WeakMap;return(w=function(o){return o?f:d})(C)}function B(C,d){if(!d&&C&&C.__esModule)return C;if(C===null||O(C)!=="object"&&typeof C!="function")return{default:C};var f=w(d);if(f&&f.has(C))return f.get(C);var g={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in C)if(i!=="default"&&Object.prototype.hasOwnProperty.call(C,i)){var s=o?Object.getOwnPropertyDescriptor(C,i):null;s&&(s.get||s.set)?Object.defineProperty(g,i,s):g[i]=C[i]}return g.default=C,f&&f.set(C,g),g}function Y(C,d){var f=Object.keys(C);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(C);d&&(g=g.filter(function(o){return Object.getOwnPropertyDescriptor(C,o).enumerable})),f.push.apply(f,g)}return f}function X(C){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?Y(Object(f),!0).forEach(function(g){(0,S.default)(C,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(f)):Y(Object(f)).forEach(function(g){Object.defineProperty(C,g,Object.getOwnPropertyDescriptor(f,g))})}return C}function Z(C){var d=z();return function(){var g=(0,E.default)(C),o;if(d){var i=(0,E.default)(this).constructor;o=Reflect.construct(g,arguments,i)}else o=g.apply(this,arguments);return(0,P.default)(this,o)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(C){(0,A.default)(f,C);var d=Z(f);function f(g){var o;return(0,L.default)(this,f),o=d.call(this,g),(0,F.useOnPropsChanged)((0,I.default)(o)),o.onPropsChanged(g),o}return(0,R.default)(f,[{key:"onPropsChanged",value:function(o){var i=this.props,s=["config","field","operator","isFuncArg"],c=["config","field","value"],y=!this.items||s.map(function(a){return o[a]!==i[a]}).filter(function(a){return a}).length>0,p=!this.meta||c.map(function(a){return o[a]!==i[a]}).filter(function(a){return a}).length>0;p&&(this.meta=this.getMeta(o)),y&&(this.items=this.getItems(o))}},{key:"getItems",value:function(o){var i=o.config,s=o.field,c=o.operator,y=o.parentFuncs,p=o.fieldDefinition,a=o.isFuncArg,n=i.settings.canUseFuncForField,m=this.filterFuncs(i,i.funcs,s,c,n,y,a,p),v=this.buildOptions(i,m);return v}},{key:"getMeta",value:function(o){var i=o.config,s=o.field,c=o.value,y=i.settings,p=y.funcPlaceholder,a=y.fieldSeparatorDisplay,n=c,m=!!c,v=(0,M.getFieldConfig)(i,s),N=v.widgets.field,G=N&&N.widgetProps||{},q=m?null:p,J=m?(0,M.getFuncConfig)(i,n):null,W=J||{},k=(0,D.getFieldPath)(n,i),H=(0,D.getFieldPath)(n,i,!0),_=this.getFuncLabel(J,n,i),ae=(0,D.getFuncPathLabels)(n,i),oe=ae?ae.join(a):null;return oe==_&&(oe=null),{placeholder:q,selectedKey:n,selectedKeys:k,selectedPath:H,selectedLabel:_,selectedOpts:W,selectedFullLabel:oe}}},{key:"filterFuncs",value:function(o,i,s,c,y,p,a,n){i=(0,K.default)(i);var m=o.settings.fieldSeparator,v=(0,M.getFieldConfig)(o,s),N,G=v,q=(0,D.getWidgetForFieldOp)(o,s,c,"value");if(a&&n)G=n,N=n.type;else if(q){var J=o.widgets[q],W=J.type;N=W}else N=v.type;function k(H,_){for(var ae in H){var oe=H[ae].subfields,le=(_||[]).concat(ae),ue=le.join(m),me=(0,M.getFuncConfig)(o,ue);if(me.type=="!struct")k(oe,le)==0&&delete H[ae];else{var pe=me.returnType==N;G.funcs&&(pe=pe&&G.funcs.includes(ue)),y&&(pe=pe&&y(s,v,ue,me,c)),!me.allowSelfNesting&&p&&p.map(function(Ee){var ge=(0,l.default)(Ee,2),Se=ge[0],Ae=ge[1];return Se}).includes(ue)&&(pe=!1),pe||delete H[ae]}}return(0,V.default)(H).length}return k(i,[]),i}},{key:"buildOptions",value:function(o,i){var s=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!i)return null;var p=o.settings,a=p.fieldSeparator,n=p.fieldSeparatorDisplay,m=c?c.join(a)+a:"";return(0,V.default)(i).map(function(v){var N=i[v],G=s.getFuncLabel(N,v,o),q=(0,D.getFuncPathLabels)(v,o),J=q.join(n);J==G&&(J=null);var W=N.tooltip,k=(c||[]).concat(v);return N.type=="!struct"?{key:v,path:m+v,label:G,fullLabel:J,tooltip:W,items:s.buildOptions(o,N.subfields,k,G)}:{key:v,path:m+v,label:G,fullLabel:J,tooltip:W,grouplabel:y}})}},{key:"getFuncLabel",value:function(o,i,s){if(!i)return null;var c=s.settings.fieldSeparator,y=s.settings.maxLabelsLength,p=Array.isArray(i)?i:i.split(c),a=o.label||(0,$.default)(p);return a=(0,j.truncateString)(a,y),a}},{key:"render",value:function(){var o=this.props,i=o.config,s=o.customProps,c=o.setValue,y=o.readonly,p=o.id,a=o.groupId,n=i.settings.renderFunc,m=X({config:i,customProps:s,readonly:y,setField:c,items:this.items,id:p,groupId:a},this.meta);return n(m)}}]),f}(T.PureComponent);u.default=U,U.propTypes={id:b.default.string,groupId:b.default.string,config:b.default.object.isRequired,field:b.default.string.isRequired,operator:b.default.string,customProps:b.default.object,value:b.default.string,setValue:b.default.func.isRequired,readonly:b.default.bool,parentFuncs:b.default.array,fieldDefinition:b.default.object,isFuncArg:b.default.bool}},45942:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(97358)),l=r(e(93502)),L=r(e(43717)),R=r(e(24143)),I=r(e(36742)),A=r(e(77588)),P=r(e(8807)),E=r(e(27148)),T=w(e(27702)),b=r(e(93415)),M=r(e(71031)),D=e(6384),j=r(e(52922)),F=e(59729),$=e(46202),V=e(98572);function K(z){if(typeof WeakMap!="function")return null;var U=new WeakMap,C=new WeakMap;return(K=function(f){return f?C:U})(z)}function w(z,U){if(!U&&z&&z.__esModule)return z;if(z===null||O(z)!=="object"&&typeof z!="function")return{default:z};var C=K(U);if(C&&C.has(z))return C.get(z);var d={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in z)if(g!=="default"&&Object.prototype.hasOwnProperty.call(z,g)){var o=f?Object.getOwnPropertyDescriptor(z,g):null;o&&(o.get||o.set)?Object.defineProperty(d,g,o):d[g]=z[g]}return d.default=z,C&&C.set(z,d),d}function B(z){var U=Y();return function(){var d=(0,E.default)(z),f;if(U){var g=(0,E.default)(this).constructor;f=Reflect.construct(d,arguments,g)}else f=d.apply(this,arguments);return(0,P.default)(this,f)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var X=function(z){(0,A.default)(C,z);var U=B(C);function C(d){var f;return(0,L.default)(this,C),f=U.call(this,d),f.setFunc=function(g){f.props.setValue((0,$.setFunc)(f.props.value,g,f.props.config))},f.setArgValue=function(g,o){var i=f.props.config,s=f.meta.funcDefinition,c=s.args,y=c[g];f.props.setValue((0,$.setArgValue)(f.props.value,g,o,y,i))},f.setArgValueSrc=function(g,o){var i=f.props.config,s=f.meta.funcDefinition,c=s.args,y=c[g];f.props.setValue((0,$.setArgValueSrc)(f.props.value,g,o,y,i))},f.renderFuncSelect=function(){var g=f.props,o=g.config,i=g.field,s=g.operator,c=g.customProps,y=g.value,p=g.readonly,a=g.parentFuncs,n=g.id,m=g.groupId,v=g.isFuncArg,N=g.fieldDefinition,G=y?y.get("func"):null,q={value:G,setValue:f.setFunc,config:o,field:i,operator:s,customProps:c,readonly:p,parentFuncs:a,isFuncArg:v,fieldDefinition:N,id:n,groupId:m},J=o.settings,W=J.showLabels,k=J.funcLabel,H=W?T.default.createElement("label",{className:"rule--label"},k):null;return T.default.createElement(F.Col,{key:"func",className:"rule--func"},H,T.default.createElement(M.default,q))},f.renderArgLabel=function(g,o){var i=o.valueSources,s=o.type,c=o.showPrefix,y=o.label,p=f.props.config,a=i&&i.length==1&&i[0]=="const",n=!p.settings.showLabels&&(s=="boolean"||a)&&c;return n?T.default.createElement(F.Col,{className:"rule--func--arg-label"},y||g):null},f.renderArgLabelSep=function(g,o){var i=o.valueSources,s=o.type,c=o.showPrefix,y=f.props.config,p=i&&i.length==1&&i[0]=="const",a=!y.settings.showLabels&&(s=="boolean"||p)&&c;return a?T.default.createElement(F.Col,{className:"rule--func--arg-label-sep"},":"):null},f.renderArgVal=function(g,o,i){var s=f.props,c=s.config,y=s.field,p=s.operator,a=s.value,n=s.readonly,m=s.parentFuncs,v=s.id,N=s.groupId,G=a?a.getIn(["args",o]):null,q=G?G.get("value"):void 0,J=i.valueSources.length==1?i.valueSources[0]:void 0,W=G?G.get("valueSrc")||J||"value":J,k={config:c,fieldFunc:g,fieldArg:o,leftField:y,operator:null,value:q,valueSrc:W,setValue:f.setArgValue,setValueSrc:f.setArgValueSrc,funcKey:g,argKey:o,argDefinition:i,readonly:n,parentFuncs:m,id:v,groupId:N};return T.default.createElement(F.Col,{className:"rule--func--arg-value"},T.default.createElement(Z,k))},f.renderArgSep=function(g,o,i,s){var c=s.renderSeps;return i?T.default.createElement(F.Col,{className:"rule--func--arg-sep"},c?c[i-1]:", "):null},f.renderBracketBefore=function(g){var o=g.renderBrackets;return T.default.createElement(F.Col,{key:"before_args",className:"rule--func--bracket-before"},o?o[0]:"(")},f.renderBracketAfter=function(g){var o=g.renderBrackets;return T.default.createElement(F.Col,{key:"after_args",className:"rule--func--bracket-after"},o?o[1]:")")},f.renderFuncArgs=function(){var g=f.meta,o=g.funcDefinition,i=g.funcKey;if(!i)return null;var s=o.args;return s?T.default.createElement(T.default.Fragment,null,f.renderBracketBefore(o),T.default.createElement(F.Col,{key:"args",className:"rule--func--args"},Object.keys(s).map(function(c,y){return T.default.createElement(F.Col,{key:"arg-".concat(c,"-").concat(y),className:"rule--func--arg"},f.renderArgSep(c,s[c],y,o),f.renderArgLabel(c,s[c]),f.renderArgLabelSep(c,s[c]),f.renderArgVal(i,c,s[c]))})),f.renderBracketAfter(o)):null},(0,V.useOnPropsChanged)((0,I.default)(f)),f.onPropsChanged(d),f}return(0,R.default)(C,[{key:"onPropsChanged",value:function(f){var g=this.props,o=["config","field","operator","value"],i=!this.meta||o.map(function(s){return f[s]!==g[s]}).filter(function(s){return s}).length>0;i&&(this.meta=this.getMeta(f))}},{key:"getMeta",value:function(f){var g=f.config,o=f.field,i=f.operator,s=f.value,c=s?s.get("func"):null,y=c?(0,D.getFuncConfig)(g,c):null;return{funcDefinition:y,funcKey:c}}},{key:"render",value:function(){return T.default.createElement(F.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),C}(T.PureComponent);u.default=X,X.propTypes={id:b.default.string,groupId:b.default.string,config:b.default.object.isRequired,field:b.default.string.isRequired,operator:b.default.string,customProps:b.default.object,value:b.default.object,setValue:b.default.func.isRequired,readonly:b.default.bool,parentFuncs:b.default.array,fieldDefinition:b.default.object,isFuncArg:b.default.bool};var Z=function(z){(0,A.default)(C,z);var U=B(C);function C(){var d;(0,L.default)(this,C);for(var f=arguments.length,g=new Array(f),o=0;o<f;o++)g[o]=arguments[o];return d=U.call.apply(U,[this].concat(g)),d.setValue=function(i,s,c){var y=d.props,p=y.setValue,a=y.argKey;p(a,s)},d.setValueSrc=function(i,s,c){var y=d.props,p=y.setValueSrc,a=y.argKey;p(a,s)},d}return(0,R.default)(C,[{key:"render",value:function(){var f=this.props,g=f.funcKey,o=f.argKey,i=f.parentFuncs;return T.default.createElement(j.default,(0,S.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,l.default)(i||[]),[[g,o]])}))}}]),C}(T.PureComponent);Z.propTypes={funcKey:b.default.string.isRequired,argKey:b.default.string.isRequired,setValue:b.default.func.isRequired,setValueSrc:b.default.func.isRequired,readonly:b.default.bool,parentFuncs:b.default.array,id:b.default.string,groupId:b.default.string}},72739:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43427)),l=r(e(43717)),L=r(e(24143)),R=r(e(36742)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=V(e(27702)),T=r(e(93415)),b=e(6384),M=r(e(52116)),D=r(e(77955)),j=r(e(46729)),F=e(98572);function $(Z){if(typeof WeakMap!="function")return null;var z=new WeakMap,U=new WeakMap;return($=function(d){return d?U:z})(Z)}function V(Z,z){if(!z&&Z&&Z.__esModule)return Z;if(Z===null||O(Z)!=="object"&&typeof Z!="function")return{default:Z};var U=$(z);if(U&&U.has(Z))return U.get(Z);var C={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in Z)if(f!=="default"&&Object.prototype.hasOwnProperty.call(Z,f)){var g=d?Object.getOwnPropertyDescriptor(Z,f):null;g&&(g.get||g.set)?Object.defineProperty(C,f,g):C[f]=Z[f]}return C.default=Z,U&&U.set(Z,C),C}function K(Z,z){var U=Object.keys(Z);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(Z);z&&(C=C.filter(function(d){return Object.getOwnPropertyDescriptor(Z,d).enumerable})),U.push.apply(U,C)}return U}function w(Z){for(var z=1;z<arguments.length;z++){var U=arguments[z]!=null?arguments[z]:{};z%2?K(Object(U),!0).forEach(function(C){(0,S.default)(Z,C,U[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(U)):K(Object(U)).forEach(function(C){Object.defineProperty(Z,C,Object.getOwnPropertyDescriptor(U,C))})}return Z}function B(Z){var z=Y();return function(){var C=(0,P.default)(Z),d;if(z){var f=(0,P.default)(this).constructor;d=Reflect.construct(C,arguments,f)}else d=C.apply(this,arguments);return(0,A.default)(this,d)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var X=function(Z){(0,I.default)(U,Z);var z=B(U);function U(C){var d;return(0,l.default)(this,U),d=z.call(this,C),(0,F.useOnPropsChanged)((0,R.default)(d)),d.onPropsChanged(C),d}return(0,L.default)(U,[{key:"onPropsChanged",value:function(d){var f=this.props,g=["config","selectedField","selectedOperator"],o=!this.meta||g.map(function(i){return d[i]!==f[i]}).filter(function(i){return i}).length>0;o&&(this.meta=this.getMeta(d))}},{key:"getMeta",value:function(d){var f=d.config,g=d.selectedField,o=d.selectedOperator,i=(0,b.getFieldConfig)(f,g),s=i?.operators,c=(0,j.default)((0,D.default)(f.operators,function(J,W){return s?.indexOf(W)!==-1}),function(J,W){return(0,b.getOperatorConfig)(f,W,g)}),y=this.buildOptions(f,c,s),p=!!o,a=p?c[o]:null,n=a||{},m=this.props.config.settings.operatorPlaceholder,v=o,N=p?[v]:null,G=N,q=n.label;return{placeholder:m,items:y,selectedKey:v,selectedKeys:N,selectedPath:G,selectedLabel:q,selectedOpts:n,fieldConfig:i}}},{key:"buildOptions",value:function(d,f,g){return!f||!g?null:(0,M.default)(f).sort(function(o,i){return g.indexOf(o)-g.indexOf(i)}).map(function(o){var i=f[o],s=i.label;return{key:o,path:o,label:s}})}},{key:"render",value:function(){var d=this.props,f=d.config,g=d.customProps,o=d.setOperator,i=d.readonly,s=d.id,c=d.groupId,y=f.settings.renderOperator,p=w({id:s,groupId:c,config:f,customProps:g,readonly:i,setField:o},this.meta);return p.items?y(p):null}}]),U}(E.PureComponent);u.default=X,X.propTypes={id:T.default.string,groupId:T.default.string,config:T.default.object.isRequired,selectedField:T.default.string,selectedOperator:T.default.string,readonly:T.default.bool,setOperator:T.default.func.isRequired}},97098:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(99592)),l=r(e(43717)),L=r(e(24143)),R=r(e(77588)),I=r(e(8807)),A=r(e(27148)),P=D(e(27702)),E=r(e(93415)),T=e(6384),b=["factory"];function M(V){if(typeof WeakMap!="function")return null;var K=new WeakMap,w=new WeakMap;return(M=function(Y){return Y?w:K})(V)}function D(V,K){if(!K&&V&&V.__esModule)return V;if(V===null||O(V)!=="object"&&typeof V!="function")return{default:V};var w=M(K);if(w&&w.has(V))return w.get(V);var B={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in V)if(X!=="default"&&Object.prototype.hasOwnProperty.call(V,X)){var Z=Y?Object.getOwnPropertyDescriptor(V,X):null;Z&&(Z.get||Z.set)?Object.defineProperty(B,X,Z):B[X]=V[X]}return B.default=V,w&&w.set(V,B),B}function j(V){var K=F();return function(){var B=(0,A.default)(V),Y;if(K){var X=(0,A.default)(this).constructor;Y=Reflect.construct(B,arguments,X)}else Y=B.apply(this,arguments);return(0,I.default)(this,Y)}}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(V){(0,R.default)(w,V);var K=j(w);function w(){return(0,l.default)(this,w),K.apply(this,arguments)}return(0,L.default)(w,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var Y=(0,T.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof Y.options>"u")return null;var X=Y.options,Z=X.factory,z=(0,S.default)(X,b),U=Object.assign({},z,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),C=Z(U),d=this.props.selectedOperator;return P.default.createElement("div",{className:"rule--operator rule--operator--".concat(d.toUpperCase())},C)}}]),w}(P.PureComponent);u.default=$,$.propTypes={config:E.default.object.isRequired,operatorOptions:E.default.any.isRequired,selectedField:E.default.string.isRequired,selectedOperator:E.default.string.isRequired,readonly:E.default.bool,setOperatorOption:E.default.func.isRequired}},27914:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43717)),l=r(e(24143)),L=r(e(77588)),R=r(e(8807)),I=r(e(27148)),A=b(e(27702)),P=r(e(72739)),E=e(59729);function T(F){if(typeof WeakMap!="function")return null;var $=new WeakMap,V=new WeakMap;return(T=function(w){return w?V:$})(F)}function b(F,$){if(!$&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var V=T($);if(V&&V.has(F))return V.get(F);var K={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var Y=w?Object.getOwnPropertyDescriptor(F,B):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,B,Y):K[B]=F[B]}return K.default=F,V&&V.set(F,K),K}function M(F){var $=D();return function(){var K=(0,I.default)(F),w;if($){var B=(0,I.default)(this).constructor;w=Reflect.construct(K,arguments,B)}else w=K.apply(this,arguments);return(0,R.default)(this,w)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=function(F){(0,L.default)(V,F);var $=M(V);function V(){return(0,S.default)(this,V),$.apply(this,arguments)}return(0,l.default)(V,[{key:"render",value:function(){var w=this.props,B=w.config,Y=w.selectedField,X=w.selectedOperator,Z=w.setOperator,z=w.selectedFieldPartsLabels,U=w.showOperator,C=w.showOperatorLabel,d=w.selectedFieldWidgetConfig,f=w.readonly,g=w.id,o=w.groupId,i=U&&A.default.createElement(E.Col,{key:"operators-for-"+(z||[]).join("_"),className:"rule--operator"},B.settings.showLabels&&A.default.createElement("label",{className:"rule--label"},B.settings.operatorLabel),A.default.createElement(P.default,{key:"operator",config:B,selectedField:Y,selectedOperator:X,setOperator:Z,readonly:f,id:g,groupId:o})),s=C&&A.default.createElement(E.Col,{key:"operators-for-"+(z||[]).join("_"),className:"rule--operator"},A.default.createElement("div",{className:"rule--operator"},B.settings.showLabels?A.default.createElement("label",{className:"rule--label"},"\xA0"):null,A.default.createElement("span",null,d.operatorInlineLabel)));return[i,s]}}]),V}(A.PureComponent);u.default=j},64114:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(43427)),l=r(e(43717)),L=r(e(24143)),R=r(e(36742)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=w(e(27702)),T=r(e(93415)),b=e(6384),M=e(68710),D=e(99890),j=e(98572),F=r(e(13509)),$=r(e(52116)),V=r(e(15322));function K(U){if(typeof WeakMap!="function")return null;var C=new WeakMap,d=new WeakMap;return(K=function(g){return g?d:C})(U)}function w(U,C){if(!C&&U&&U.__esModule)return U;if(U===null||O(U)!=="object"&&typeof U!="function")return{default:U};var d=K(C);if(d&&d.has(U))return d.get(U);var f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in U)if(o!=="default"&&Object.prototype.hasOwnProperty.call(U,o)){var i=g?Object.getOwnPropertyDescriptor(U,o):null;i&&(i.get||i.set)?Object.defineProperty(f,o,i):f[o]=U[o]}return f.default=U,d&&d.set(U,f),f}function B(U,C){var d=Object.keys(U);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(U);C&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(U,g).enumerable})),d.push.apply(d,f)}return d}function Y(U){for(var C=1;C<arguments.length;C++){var d=arguments[C]!=null?arguments[C]:{};C%2?B(Object(d),!0).forEach(function(f){(0,S.default)(U,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(d)):B(Object(d)).forEach(function(f){Object.defineProperty(U,f,Object.getOwnPropertyDescriptor(d,f))})}return U}function X(U){var C=Z();return function(){var f=(0,P.default)(U),g;if(C){var o=(0,P.default)(this).constructor;g=Reflect.construct(f,arguments,o)}else g=f.apply(this,arguments);return(0,A.default)(this,g)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z=function(U){(0,I.default)(d,U);var C=X(d);function d(f){var g;return(0,l.default)(this,d),g=C.call(this,f),(0,j.useOnPropsChanged)((0,R.default)(g)),g.onPropsChanged(f),g}return(0,L.default)(d,[{key:"onPropsChanged",value:function(g){var o=this.props,i=["config","field","operator","isFuncArg","parentField"],s=["config","field","operator","value","placeholder","isFuncArg","parentField"],c=!this.items||i.map(function(p){return g[p]!==o[p]}).filter(function(p){return p}).length>0,y=!this.meta||s.map(function(p){return g[p]!==o[p]}).filter(function(p){return p}).length>0;c&&(this.items=this.getItems(g)),y&&(this.meta=this.getMeta(g))}},{key:"getItems",value:function(g){var o=g.config,i=g.field,s=g.operator,c=g.parentField,y=g.isFuncArg,p=g.fieldDefinition,a=o.settings.canCompareFieldWithField,n=o.settings.fieldSeparator,m=typeof c=="string"?c.split(n):c,v=c?(0,b.getFieldConfig)(o,c):null,N=c?v&&v.subfields:o.fields,G=this.filterFields(o,N,i,c,m,s,a,y,p),q=this.buildOptions(m,o,G,m);return q}},{key:"getMeta",value:function(g){var o=g.config,i=g.field,s=g.operator,c=g.value,y=g.placeholder,p=g.isFuncArg,a=g.parentField,n=o.settings,m=n.fieldPlaceholder,v=n.fieldSeparatorDisplay,N=c,G=!!c,q=(0,b.getFieldConfig)(o,i),J=q.widgets.field,W=J&&J.widgetProps||{},k=G?null:p&&y||W.valuePlaceholder||m,H=G?(0,b.getFieldConfig)(o,N):null,_=H||{},ae=(0,M.getFieldPath)(N,o),oe=(0,M.getFieldPath)(N,o,!0),le=this.getFieldLabel(H,N,o),ue=(0,M.getFieldPathLabels)(N,o),me=ue?ue.join(v):null;(me==le||a)&&(me=null);var pe=_.label2;return{placeholder:k,selectedKey:N,selectedKeys:ae,selectedPath:oe,selectedLabel:le,selectedOpts:_,selectedAltLabel:pe,selectedFullLabel:me}}},{key:"filterFields",value:function(g,o,i,s,c,y,p,a,n){o=(0,V.default)(o);var m=g.settings.fieldSeparator,v=(0,b.getFieldConfig)(g,i),N,G=(0,M.getWidgetForFieldOp)(g,i,y,"value");if(a&&n)N=n.type;else if(G){var q=g.widgets[G],J=q.type;N=J}else N=v.type;function W(k,H){for(var _ in k){var ae=k[_].subfields,oe=(H||[]).concat(_),le=oe.join(m),ue=(0,b.getFieldConfig)(g,le);if(!ue)delete k[_];else if(ue.type=="!struct"||ue.type=="!group")W(ae,oe)==0&&delete k[_];else{var me=ue.type==N&&(a?!0:le!=i),pe=p||g.settings.canCompareFieldWithField;pe&&(me=me&&pe(i,v,le,ue,y)),me||delete k[_]}}return(0,$.default)(k).length}return W(o,c||[]),o}},{key:"buildOptions",value:function(g,o,i){var s=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!i)return null;var p=o.settings,a=p.fieldSeparator,n=p.fieldSeparatorDisplay,m=c?c.join(a)+a:"";return(0,$.default)(i).map(function(v){var N=i[v],G=s.getFieldLabel(N,v,o),q=(0,M.getFieldPathLabels)(v,o),J=q.join(n);(J==G||g)&&(J=null);var W=N.label2,k=N.tooltip,H=(c||[]).concat(v);if(!N.hideForCompare)return N.type=="!struct"||N.type=="!group"?{key:v,path:m+v,label:G,fullLabel:J,altLabel:W,tooltip:k,items:s.buildOptions(g,o,N.subfields,H,G)}:{key:v,path:m+v,label:G,fullLabel:J,altLabel:W,tooltip:k,grouplabel:y}}).filter(function(v){return!!v})}},{key:"getFieldLabel",value:function(g,o,i){if(!o)return null;var s=i.settings.fieldSeparator,c=i.settings.maxLabelsLength,y=Array.isArray(o)?o:o.split(s),p=g.label||(0,F.default)(y);return p=(0,D.truncateString)(p,c),p}},{key:"render",value:function(){var g=this.props,o=g.config,i=g.customProps,s=g.setValue,c=g.readonly,y=g.id,p=g.groupId,a=o.settings.renderField,n=Y({config:o,customProps:i,setField:s,readonly:c,items:this.items,id:y,groupId:p},this.meta);return a(n)}}]),d}(E.PureComponent);u.default=z,z.propTypes={id:T.default.string,groupId:T.default.string,setValue:T.default.func.isRequired,config:T.default.object.isRequired,field:T.default.string.isRequired,value:T.default.string,operator:T.default.string,customProps:T.default.object,readonly:T.default.bool,parentField:T.default.string,fieldDefinition:T.default.object,isFuncArg:T.default.bool}},52922:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(97358)),l=r(e(43717)),L=r(e(24143)),R=r(e(36742)),I=r(e(77588)),A=r(e(8807)),P=r(e(27148)),E=Y(e(27702)),T=r(e(93415)),b=r(e(53659)),M=e(6384),D=e(68710),j=e(99890),F=e(98572),$=r(e(75123)),V=r(e(15866)),K=r(e(80249)),w=e(59729);function B(C){if(typeof WeakMap!="function")return null;var d=new WeakMap,f=new WeakMap;return(B=function(o){return o?f:d})(C)}function Y(C,d){if(!d&&C&&C.__esModule)return C;if(C===null||O(C)!=="object"&&typeof C!="function")return{default:C};var f=B(d);if(f&&f.has(C))return f.get(C);var g={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in C)if(i!=="default"&&Object.prototype.hasOwnProperty.call(C,i)){var s=o?Object.getOwnPropertyDescriptor(C,i):null;s&&(s.get||s.set)?Object.defineProperty(g,i,s):g[i]=C[i]}return g.default=C,f&&f.set(C,g),g}function X(C){var d=Z();return function(){var g=(0,P.default)(C),o;if(d){var i=(0,P.default)(this).constructor;o=Reflect.construct(g,arguments,i)}else o=g.apply(this,arguments);return(0,A.default)(this,o)}}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z={cardinality:1},U=function(C){(0,I.default)(f,C);var d=X(f);function f(g){var o;return(0,l.default)(this,f),o=d.call(this,g),o._setValue=function(i,s,c,y,p,a){if(i&&Array.isArray(y)){var n=[o.props.value.get(0),o.props.value.get(1)];n[0]!=y[0]&&o.props.setValue(0,y[0],c,p,a),n[1]!=y[1]&&o.props.setValue(1,y[1],c,p,a)}else o.props.setValue(s,y,c,p,a)},o._onChangeValueSrc=function(i,s){o.props.setValueSrc(i,s)},o.renderWidget=function(i,s,c){var y=c.config,p=c.isFuncArg,a=c.leftField,n=c.operator,m=c.value,v=c.valueError,N=c.readonly,G=c.parentField,q=c.parentFuncs,J=c.id,W=c.groupId,k=y.settings,H=s.widgets,_=s.iValues,ae=s.aField,oe=p?_:m,le=p?a:ae,ue=H[i],me=ue.valueSrc,pe=ue.valueLabel,Ee=k.showLabels?E.default.createElement("label",{className:"rule--label"},pe.label):null;return E.default.createElement("div",{key:"widget-"+le+"-"+i,className:"widget--widget"},me=="func"?null:Ee,E.default.createElement(K.default,(0,S.default)({id:J,groupId:W,valueSrc:me,delta:i,value:oe,valueError:v,isFuncArg:p},(0,$.default)(s,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,$.default)(H[i],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:y,field:le,parentField:G,parentFuncs:q,operator:n,readonly:N})))},o.renderValueSources=function(i,s,c){var y=c.config,p=c.isFuncArg,a=c.leftField,n=c.operator,m=c.readonly,v=y.settings,N=s.valueSources,G=s.widgets,q=s.aField,J=p?a:q,W=G[i],k=W.valueSrc,H=W.setValueSrcHandler,_=v.valueSourcesInfo,ae=v.renderValueSources,oe=N.map(function(ue){return[ue,{label:_[ue].label}]}),le=v.showLabels?E.default.createElement("label",{className:"rule--label"},"\xA0"):null;return N.length>1&&!m&&E.default.createElement("div",{key:"valuesrc-"+J+"-"+i,className:"widget--valuesrc"},le,E.default.createElement(ae,{key:"valuesrc-"+i,delta:i,valueSources:oe,valueSrc:k,config:y,field:J,operator:n,setValueSrc:H,readonly:m,title:v.valueSourcesPopupTitle}))},o.renderSep=function(i,s,c){var y=c.config,p=s.widgets,a=y.settings,n=p[i].sepText,m=a.showLabels?E.default.createElement("label",{className:"rule--label"},"\xA0"):null;return n&&E.default.createElement("div",{key:"widget-separators-"+i,className:"widget--sep"},m,E.default.createElement("span",null,n))},o.renderWidgetDelta=function(i){var s=o.renderSep(i,o.meta,o.props),c=o.renderValueSources(i,o.meta,o.props),y=o.renderWidget(i,o.meta,o.props);return[s,c,y]},(0,F.useOnPropsChanged)((0,R.default)(o)),o.onPropsChanged(g),o}return(0,L.default)(f,[{key:"onPropsChanged",value:function(o){var i=this.props,s=["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"],c=!this.meta||s.map(function(y){return o[y]!==i[y]||y=="isFuncArg"&&o.isFuncArg&&o.value!==i.value}).filter(function(y){return y}).length>0;c&&(this.meta=this.getMeta(o))}},{key:"getMeta",value:function(o){var i=this,s=o.config,c=o.field,y=o.fieldFunc,p=o.fieldArg,a=o.operator,n=o.valueSrc,m=o.value,v=o.isForRuleGruop,N=o.isCaseValue,G=o.isFuncArg,q=o.leftField,J=o.asyncListValues,W=G?{func:y,arg:p}:c,k=n,H=m;(G||v||N)&&(k=V.default.List([n]),H=V.default.List([m]));var _=(0,M.getFieldConfig)(s,W),ae=(0,D.getWidgetForFieldOp)(s,W,a),oe=(0,D.getWidgetsForFieldOp)(s,W,a),le=G?z:(0,M.getOperatorConfig)(s,a,W);if((_==null||le==null)&&!N)return null;var ue=le?.isSpecialRange,me=ue&&(k.get(0)=="field"||k.get(1)=="field"),pe=ue&&!me,Ee=pe?1:(0,j.defaultValue)(le?.cardinality,1);if(Ee===0)return null;var ge=(0,D.getValueSourcesForFieldOp)(s,W,a,_,G?q:null),Se=(0,b.default)(0,Ee).map(function(Ae){var ye,De=k.get(Ae)||null,Fe=(0,D.getWidgetForFieldOp)(s,W,a,De),We=(0,M.getFieldWidgetConfig)(s,W,a,Fe,De);me&&(Fe=We.singleWidget,We=(0,M.getFieldWidgetConfig)(s,W,a,Fe,De));var Ke=(ye=We)===null||ye===void 0?void 0:ye.type,_e=(0,D.getValueLabel)(s,W,a,Ae,De,pe),He=(0,D.getValueLabel)(s,W,a,Ae,null,pe),at=le!=null&&le.textSeparators?le?.textSeparators[Ae]:null,ke=i._onChangeValueSrc.bind(i,Ae),de=null,Ce=null;ue&&(de=[(0,D.getValueLabel)(s,W,a,0),(0,D.getValueLabel)(s,W,a,1)],de={placeholder:[de[0].placeholder,de[1].placeholder],label:[de[0].label,de[1].label]},Ce=le?.textSeparators);var Le=i._setValue.bind(i,ue,Ae,Ke);return{valueSrc:De,valueLabel:_e,widget:Fe,sepText:at,setValueSrcHandler:ke,widgetDefinition:We,widgetValueLabel:He,valueLabels:de,textSeparators:Ce,setValueHandler:Le}});return{defaultWidget:ae,fieldDefinition:_,operatorDefinition:le,isSpecialRange:pe,cardinality:Ee,valueSources:ge,widgets:Se,iValues:H,aField:W,asyncListValues:J}}},{key:"render",value:function(){if(!this.meta)return null;var o=this.meta,i=o.defaultWidget,s=o.cardinality;if(!i)return null;var c=i;return E.default.createElement(w.Col,{className:"rule--widget rule--widget--".concat(c.toUpperCase()),key:"widget-col-"+c},(0,b.default)(0,s).map(this.renderWidgetDelta))}}]),f}(E.PureComponent);u.default=U,U.propTypes={config:T.default.object.isRequired,value:T.default.any,valueSrc:T.default.any,valueError:T.default.any,field:T.default.string,operator:T.default.string,readonly:T.default.bool,asyncListValues:T.default.array,id:T.default.string,groupId:T.default.string,setValue:T.default.func,setValueSrc:T.default.func,isFuncArg:T.default.bool,fieldFunc:T.default.string,fieldArg:T.default.string,leftField:T.default.string,isForRuleGruop:T.default.bool,parentField:T.default.string,parentFuncs:T.default.array,isCaseValue:T.default.bool}},80249:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(99592)),S=r(e(27702)),l=e(99890),L=["factory"],R=function(A){var P=A.delta,E=A.isFuncArg,T=A.valueSrc,b=A.value,M=A.valueError,D=A.asyncListValues,j=A.isSpecialRange,F=A.fieldDefinition,$=A.widget,V=A.widgetDefinition,K=A.widgetValueLabel,w=A.valueLabels,B=A.textSeparators,Y=A.setValueHandler,X=A.config,Z=A.field,z=A.operator,U=A.readonly,C=A.parentField,d=A.parentFuncs,f=A.id,g=A.groupId,o=V.factory,i=(0,O.default)(V,L),s=E&&F.valueSources&&F.valueSources.length==1&&F.valueSources[0]=="const",c=F.defaultValue;if(!o)return"?";var y=j?[b.get(0),b.get(1)]:b?b.get(P):void 0,p=M&&(j?[M.get(0),M.get(1)]:M.get(P))||null;j&&y[0]===void 0&&y[1]===void 0&&(y=void 0);var a=F||{},n=a.fieldSettings,m=Object.assign({},i,n,{config:X,field:Z,parentField:C,parentFuncs:d,fieldDefinition:F,operator:z,delta:P,isSpecialRange:j,isFuncArg:E,value:y,valueError:p,label:K.label,placeholder:K.placeholder,placeholders:w?w.placeholder:null,textSeparators:B,setValue:Y,readonly:U,asyncListValues:D,id:f,groupId:g});return $=="field",s&&c?typeof c=="boolean"?c?m.labelYes||"YES":m.labelNo||"NO":n.listValues?Array.isArray(c)?c.map(function(v){return(0,l.getTitleInListValues)(n.listValues,v)||v}).join(", "):(0,l.getTitleInListValues)(n.listValues,c)||c:""+c:o(m)};u.default=R},59729:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.dummyFn=u.DragIcon=u.ConfirmFn=u.Col=void 0;var O=r(e(97358)),S=r(e(99592)),l=r(e(27702)),L=["children"],R=function(T){var b=T.children,M=(0,S.default)(T,L);return l.default.createElement("div",M,b)};u.Col=R;var I=function(){};u.dummyFn=I;var A=function(){return l.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},l.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};u.DragIcon=A;var P=function(T){return function(b){var M=b.config.settings.useConfirm,D=M?M():null;return l.default.createElement(T,(0,O.default)({},b,{confirmFn:D}))}};u.ConfirmFn=P},5806:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0});var O={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(u,"FuncWidget",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(u,"ValueFieldWidget",{enumerable:!0,get:function(){return S.default}});var S=r(e(64114)),l=r(e(45942)),L=e(44085);Object.keys(L).forEach(function(R){R==="default"||R==="__esModule"||Object.prototype.hasOwnProperty.call(O,R)||R in u&&u[R]===L[R]||Object.defineProperty(u,R,{enumerable:!0,get:function(){return L[R]}})})},40455:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(27702)),S=function(L){var R=L.type,I=L.label,A=L.onClick,P=L.readonly,E=L.config,T={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},b=I||T[R];return O.default.createElement("button",{onClick:A,type:"button",disabled:P},b)};u.default=S},12695:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(27702)),S=function(L){var R=L.children,I=L.config;return O.default.createElement(O.default.Fragment,null,R)};u.default=S},60452:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(27702)),S=function(L){var R=L.id,I=L.not,A=L.setNot,P=L.conjunctionOptions,E=L.setConjunction,T=L.disabled,b=L.readonly,M=L.config,D=L.showNot,j=L.notLabel,F=Object.keys(P).length,$=T,V=M.settings.forceShowConj,K=V||F>1&&!$,w=function(){return Object.keys(P).map(function(z){var U=P[z],C=U.id,d=U.name,f=U.label,g=U.checked,o=E.isDummyFn?"__dummy":"";return(b||T)&&!g?null:[O.default.createElement("input",{key:C+o,type:"radio",id:C+o,name:d+o,checked:g,disabled:b||T,value:z,onChange:Y}),O.default.createElement("label",{key:C+o+"label",htmlFor:C+o},f)]})},B=function(){var z="not";return[O.default.createElement("input",{key:R+z,type:"checkbox",id:R+z,checked:I,disabled:b,onChange:X}),O.default.createElement("label",{key:R+z+"label",htmlFor:R+z},j||"NOT")]},Y=function(z){return E(z.target.value)},X=function(z){return A(z.target.checked)};return[D&&B(),K&&w()]};u.default=S},36513:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(27702)),S=function(L){var R=L.items,I=L.setField,A=L.selectedKey,P=L.readonly,E=function M(D){return D.map(function(j){var F=j.items,$=j.path,V=j.label,K=j.disabled;return F?O.default.createElement("optgroup",{disabled:K,key:$,label:V},M(F)):O.default.createElement("option",{disabled:K,key:$,value:$},V)})},T=function(D){return I(D.target.value)},b=A!=null;return O.default.createElement("select",{onChange:T,value:b?A:"",disabled:P},!b&&O.default.createElement("option",{disabled:!0,value:""}),E(R))};u.default=S},92972:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(27702)),S=function(L){var R=L.value,I=L.setValue,A=L.label,P=L.id,E=L.config,T=L.type,b=function(j){return I(j.target.checked)},M=T;return[O.default.createElement("input",{key:P+M,type:"checkbox",id:P+M,checked:!!R,onChange:b}),O.default.createElement("label",{key:P+M+"label",htmlFor:P+M},A)]};u.default=S},5681:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(74208)),S=r(e(27702)),l=function(R){var I=R.config,A=R.valueSources,P=R.valueSrc,E=R.title,T=R.setValueSrc,b=R.readonly,M=function(F){return F.map(function($){var V=(0,O.default)($,2),K=V[0],w=V[1];return S.default.createElement("option",{key:K,value:K},w.label)})},D=function(F){return T(F.target.value)};return S.default.createElement("select",{onChange:D,value:P,disabled:b},M(A))};u.default=l},23127:(re,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e=function(O){var S=O.onOk,l=O.okText,L=O.cancelText,R=O.title;confirm(R)&&S()};u.default=e},44085:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"VanillaBooleanWidget",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(u,"VanillaButton",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(u,"VanillaButtonGroup",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(u,"VanillaConjs",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(u,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(u,"VanillaDateWidget",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(u,"VanillaFieldSelect",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(u,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(u,"VanillaNumberWidget",{enumerable:!0,get:function(){return T.default}}),u.VanillaProvider=void 0,Object.defineProperty(u,"VanillaSelectWidget",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(u,"VanillaSliderWidget",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(u,"VanillaSwitch",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(u,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(u,"VanillaTextWidget",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(u,"VanillaTimeWidget",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(u,"VanillaValueSources",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(u,"vanillaConfirm",{enumerable:!0,get:function(){return K.default}});var O=r(e(27702)),S=r(e(50894)),l=r(e(96495)),L=r(e(33650)),R=r(e(18767)),I=r(e(50286)),A=r(e(82315)),P=r(e(16293)),E=r(e(46999)),T=r(e(67461)),b=r(e(71126)),M=r(e(36513)),D=r(e(60452)),j=r(e(40455)),F=r(e(12695)),$=r(e(5681)),V=r(e(92972)),K=r(e(23127)),w=function(Y){var X=Y.config,Z=Y.children;return Z};u.VanillaProvider=w},50894:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=r(e(11117)),L=function(I){var A=I.value,P=I.setValue,E=I.config,T=I.labelYes,b=I.labelNo,M=I.readonly,D=I.customProps,j=D===void 0?{}:D,F=j.radioYes||{},$=j.radioNo||{},V=function(X){return P(X.target.checked)},K=function(X){return P(X.target.value=="true")},w=(0,l.default)(),B=(0,l.default)();return S.default.createElement(S.default.Fragment,null,S.default.createElement("input",(0,O.default)({key:w,type:"radio",id:w,value:!0,checked:!!A,disabled:M,onChange:K},F)),S.default.createElement("label",{style:{display:"inline"},key:w+"label",htmlFor:w},T),S.default.createElement("input",(0,O.default)({key:B,type:"radio",id:B,value:!1,checked:!A,disabled:M,onChange:K},$)),S.default.createElement("label",{style:{display:"inline"},key:B+"label",htmlFor:B},b))};u.default=L},18767:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=r(e(79913)),L=function(I){var A=I.value,P=I.setValue,E=I.config,T=I.valueFormat,b=I.readonly,M=I.customProps,D=function(F){var $=F.target.value;$==""&&($=void 0),P($)};return S.default.createElement("input",(0,O.default)({type:"date",value:A||"",disabled:b,onChange:D},M))};u.default=L},82315:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=r(e(79913)),L=function(I){var A=I.value,P=I.setValue,E=I.config,T=I.valueFormat,b=I.use12Hours,M=I.readonly,D=I.customProps,j=function(V){var K=V.target.value;K==""?K=void 0:K=(0,l.default)(new Date(K)).format(T),P(K)},F=A;return A?F=(0,l.default)(A).format("YYYY-MM-DDTHH:mm"):F="",S.default.createElement("input",(0,O.default)({type:"datetime-local",value:F,disabled:M,onChange:j},D))};u.default=L},16293:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=e(99890),L=r(e(58517)),R=function(A){var P=A.listValues,E=A.value,T=A.setValue,b=A.allowCustomValues,M=A.readonly,D=A.customProps,j=function(){return(0,l.mapListValues)(P,function(K){var w=K.title,B=K.value;return S.default.createElement("option",{key:B,value:B},w)})},F=function(K){for(var w=[],B=K.options,Y=0;Y<B.length;Y++){var X=B[Y];X.selected&&w.push(X.value)}return w.length||(w=void 0),w},$=function(K){return T(F(K.target))};return S.default.createElement("select",(0,O.default)({multiple:!0,onChange:$,value:E,disabled:M},(0,L.default)(D,["showSearch","input","showCheckboxes"])),j())};u.default=R},67461:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=function(R){var I=R.value,A=R.setValue,P=R.config,E=R.readonly,T=R.min,b=R.max,M=R.step,D=R.placeholder,j=R.customProps,F=function(K){var w=K.target.value;w===""||w===null?w=void 0:w=Number(w),A(w)},$=I??"";return S.default.createElement("input",(0,O.default)({type:"number",value:$,placeholder:D,disabled:E,min:T,max:b,step:M,onChange:F},j))};u.default=l},46999:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=e(99890),L=r(e(58517)),R=function(A){var P=A.listValues,E=A.value,T=A.setValue,b=A.allowCustomValues,M=A.readonly,D=A.customProps,j=function(){return(0,l.mapListValues)(P,function(K){var w=K.title,B=K.value;return S.default.createElement("option",{key:B,value:B},w)})},F=function(K){return T(K.target.value)},$=E!=null;return S.default.createElement("select",(0,O.default)({onChange:F,value:$?E:"",disabled:M},(0,L.default)(D,["showSearch","input"])),!$&&S.default.createElement("option",{disabled:!0,value:""}),j())};u.default=R},71126:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=function(R){var I=R.value,A=R.setValue,P=R.config,E=R.readonly,T=R.min,b=R.max,M=R.step,D=R.placeholder,j=R.customProps,F=j===void 0?{}:j,$=F.input||{},V=F.slider||F,K=function(Y){var X=Y.target.value;X===""||X===null?X=void 0:X=Number(X),A(X)},w=I??"";return[S.default.createElement("input",(0,O.default)({key:"number",type:"number",value:w,placeholder:D,disabled:E,min:T,max:b,step:M,onChange:K},$)),S.default.createElement("input",(0,O.default)({key:"range",type:"range",value:w,disabled:E,min:T,max:b,step:M,onChange:K},V))]};u.default=l},96495:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=function(R){var I=R.value,A=R.setValue,P=R.config,E=R.readonly,T=R.placeholder,b=R.maxLength,M=R.customProps,D=function($){var V=$.target.value;V===""&&(V=void 0),A(V)},j=I||"";return S.default.createElement("input",(0,O.default)({type:"text",value:j,placeholder:T,disabled:E,onChange:D,maxLength:b},M))};u.default=l},33650:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=function(R){var I=R.value,A=R.setValue,P=R.config,E=R.readonly,T=R.placeholder,b=R.maxLength,M=R.maxRows,D=R.fullWidth,j=R.customProps,F=function(K){var w=K.target.value;w===""&&(w=void 0),A(w)},$=I||"";return S.default.createElement("textarea",(0,O.default)({value:$,placeholder:T,disabled:E,onChange:F,maxLength:b,style:{width:D?"100%":void 0}},j))};u.default=l},50286:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(97358)),S=r(e(27702)),l=function(R){var I=R.value,A=R.setValue,P=R.config,E=R.valueFormat,T=R.use12Hours,b=R.readonly,M=R.customProps,D=function(F){var $=F.target.value;$==""&&($=void 0),A($)};return S.default.createElement("input",(0,O.default)({type:"time",value:I||"",disabled:b,onChange:D},M))};u.default=l},20725:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.stringifyForDisplay=u.mongoFormatOp2=u.mongoFormatOp1=u.default=void 0;var S=r(e(43427)),l=r(e(27702)),L=b(e(5806)),R=b(e(45761)),I=e(96108),A=e(99890),P=r(e(79913)),E=e(31923);function T(a){if(typeof WeakMap!="function")return null;var n=new WeakMap,m=new WeakMap;return(T=function(N){return N?m:n})(a)}function b(a,n){if(!n&&a&&a.__esModule)return a;if(a===null||O(a)!=="object"&&typeof a!="function")return{default:a};var m=T(n);if(m&&m.has(a))return m.get(a);var v={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in a)if(G!=="default"&&Object.prototype.hasOwnProperty.call(a,G)){var q=N?Object.getOwnPropertyDescriptor(a,G):null;q&&(q.get||q.set)?Object.defineProperty(v,G,q):v[G]=a[G]}return v.default=a,m&&m.set(a,v),v}function M(a,n){var m=Object.keys(a);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(a);n&&(v=v.filter(function(N){return Object.getOwnPropertyDescriptor(a,N).enumerable})),m.push.apply(m,v)}return m}function D(a){for(var n=1;n<arguments.length;n++){var m=arguments[n]!=null?arguments[n]:{};n%2?M(Object(m),!0).forEach(function(v){(0,S.default)(a,v,m[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):M(Object(m)).forEach(function(v){Object.defineProperty(a,v,Object.getOwnPropertyDescriptor(m,v))})}return a}var j=L.VanillaBooleanWidget,F=L.VanillaTextWidget,$=L.VanillaTextAreaWidget,V=L.VanillaDateWidget,K=L.VanillaTimeWidget,w=L.VanillaDateTimeWidget,B=L.VanillaMultiSelectWidget,Y=L.VanillaSelectWidget,X=L.VanillaNumberWidget,Z=L.VanillaSliderWidget,z=L.ValueFieldWidget,U=L.FuncWidget,C=R.ProximityOperator,d={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(n,m,v,N){return n.size>1?(v?"NOT ":"")+"("+n.join(" "+(N?"AND":"&&")+" ")+")":(v?"NOT (":"")+n.first()+(v?")":"")},sqlFormatConj:function(n,m,v){return n.size>1?(v?"NOT ":"")+"("+n.join(" AND ")+")":(v?"NOT (":"")+n.first()+(v?")":"")},spelFormatConj:function(n,m,v,N){return v&&(N=!1),n.size>1?(v?"!":"")+(N?"":"(")+n.join(" && ")+(N?"":")"):(v?"!(":"")+n.first()+(v?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(n,m,v,N){return n.size>1?(v?"NOT ":"")+"("+n.join(" "+(N?"OR":"||")+" ")+")":(v?"NOT (":"")+n.first()+(v?")":"")},sqlFormatConj:function(n,m,v){return n.size>1?(v?"NOT ":"")+"("+n.join(" OR ")+")":(v?"NOT (":"")+n.first()+(v?")":"")},spelFormatConj:function(n,m,v,N){return v&&(N=!1),n.size>1?(v?"!":"")+(N?"":"(")+n.join(" || ")+(N?"":")"):(v?"!(":"")+n.first()+(v?")":"")}}},f=function(n,m,v,N,G,q,J,W,k,H,_,ae){var oe=typeof N=="string"&&!N.startsWith("$")?"$"+N:N,le=m(q,ae);if(le!==void 0)return v?!J&&(!n||n=="$eq")?(0,S.default)({},N,{$ne:le}):J?{$not:(0,S.default)({},n,[oe,le])}:(0,S.default)({},N,{$not:(0,S.default)({},n,le)}):!J&&(!n||n=="$eq")?(0,S.default)({},N,le):J?(0,S.default)({},n,[oe,le]):(0,S.default)({},N,(0,S.default)({},n,le))};u.mongoFormatOp1=f;var g=function(n,m,v,N,G,q,J,W,k,H,_){var ae=typeof v=="string"&&!v.startsWith("$")?"$"+v:v;if(m){var oe;return q?{$not:{$and:[(0,S.default)({},n[0],[ae,G[0]]),(0,S.default)({},n[1],[ae,G[1]])]}}:(0,S.default)({},v,{$not:(oe={},(0,S.default)(oe,n[0],G[0]),(0,S.default)(oe,n[1],G[1]),oe)})}else{var le;return q?{$and:[(0,S.default)({},n[0],[ae,G[0]]),(0,S.default)({},n[1],[ae,G[1]])]}:(0,S.default)({},v,(le={},(0,S.default)(le,n[0],G[0]),(0,S.default)(le,n[1],G[1]),le))}};u.mongoFormatOp2=g;var o={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(n,m,v,N,G,q,J,W,k){var H=W?"=":q.label;return G=="boolean"&&W?v=="No"?"NOT ".concat(n):"".concat(n):"".concat(n," ").concat(H," ").concat(v)},mongoFormatOp:f.bind(null,"$eq",function(a){return a},!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(n,m,v,N,G,q,J,W,k){return G=="boolean"&&W?v=="No"?"".concat(n):"NOT ".concat(n):"".concat(n," ").concat(q.label," ").concat(v)},mongoFormatOp:f.bind(null,"$ne",function(a){return a},!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:f.bind(null,"$lt",function(a){return a},!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:f.bind(null,"$lte",function(a){return a},!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:f.bind(null,"$gt",function(a){return a},!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:f.bind(null,"$gte",function(a){return a},!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:f.bind(null,"$regex",function(a){return typeof a=="string"?(0,A.escapeRegExp)(a):void 0},!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:f.bind(null,"$regex",function(a){return typeof a=="string"?(0,A.escapeRegExp)(a):void 0},!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:f.bind(null,"$regex",function(a){return typeof a=="string"?"^"+(0,A.escapeRegExp)(a):void 0},!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:f.bind(null,"$regex",function(a){return typeof a=="string"?(0,A.escapeRegExp)(a)+"$":void 0},!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(n,m,v,N,G,q,J,W){var k=v.first(),H=v.get(1);return W?"".concat(n," BETWEEN ").concat(k," AND ").concat(H):"".concat(n," >= ").concat(k," && ").concat(n," <= ").concat(H)},spelFormatOp:function(n,m,v,N,G,q,J,W){var k=v[0],H=v[1];return"".concat(n," >= ").concat(k," && ").concat(n," <= ").concat(H)},mongoFormatOp:g.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null},elasticSearchQueryType:function(n){return n==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(n,m,v,N,G,q,J,W){var k=v.first(),H=v.get(1);return W?"".concat(n," NOT BETWEEN ").concat(k," AND ").concat(H):"(".concat(n," < ").concat(k," || ").concat(n," > ").concat(H,")")},spelFormatOp:function(n,m,v,N,G,q,J,W){var k=v[0],H=v[1];return"(".concat(n," < ").concat(k," || ").concat(n," > ").concat(H,")")},mongoFormatOp:g.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(n,m,v,N,G,q,J,W){return W?"".concat(n," IS EMPTY"):"!".concat(n)},sqlFormatOp:function(n,m,v,N,G,q,J,W){var k=(0,I.sqlEmptyValue)(W);return"COALESCE(".concat(n,", ").concat(k,") = ").concat(k)},spelFormatOp:function(n,m,v,N,G,q,J,W){return"".concat(n," <= ''")},mongoFormatOp:f.bind(null,"$in",function(a,n){return[(0,I.mongoEmptyValue)(n),null]},!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(n,m,v,N,G,q,J,W){return W?"".concat(n," IS NOT EMPTY"):"!!".concat(n)},sqlFormatOp:function(n,m,v,N,G,q,J,W){var k=(0,I.sqlEmptyValue)(W);return"COALESCE(".concat(n,", ").concat(k,") <> ").concat(k)},spelFormatOp:function(n,m,v,N,G,q,J,W){return"".concat(n," > ''")},mongoFormatOp:f.bind(null,"$nin",function(a,n){return[(0,I.mongoEmptyValue)(n),null]},!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(n,m,v,N,G,q,J,W){return W?"".concat(n," IS NULL"):"!".concat(n)},spelFormatOp:function(n,m,v,N,G,q,J,W){return"".concat(n," == null")},mongoFormatOp:f.bind(null,"$eq",function(a){return null},!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(n,m,v,N,G,q,J,W){return W?"".concat(n," IS NOT NULL"):"!!".concat(n)},spelFormatOp:function(n,m,v,N,G,q,J,W){return"".concat(n," != null")},mongoFormatOp:f.bind(null,"$ne",function(a){return null},!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(n,m,v,N,G,q,J,W){var k=W?"=":"==";return"".concat(n," ").concat(k," ").concat(v)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:f.bind(null,"$eq",function(a){return a},!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,m,v,N,G,q,J,W){return"".concat(n," != ").concat(v)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:f.bind(null,"$ne",function(a){return a},!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(n,m,v,N,G,q,J,W){return N=="value"?"".concat(n," IN (").concat(v.join(", "),")"):"".concat(n," IN (").concat(v,")")},sqlFormatOp:function(n,m,v,N,G,q,J,W){if(N=="value")return"".concat(n," IN (").concat(v.join(", "),")")},spelOp:"$contains",mongoFormatOp:f.bind(null,"$in",function(a){return a},!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(n,m,v,N,G,q,J,W){return N=="value"?"".concat(n," NOT IN (").concat(v.join(", "),")"):"".concat(n," NOT IN (").concat(v,")")},sqlFormatOp:function(n,m,v,N,G,q,J,W){if(N=="value")return"".concat(n," NOT IN (").concat(v.join(", "),")")},mongoFormatOp:f.bind(null,"$nin",function(a){return a},!1),reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(n,m,v,N,G,q,J,W){return N=="value"?"".concat(n," CONTAINS [").concat(v.join(", "),"]"):"".concat(n," CONTAINS ").concat(v)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(n,m,v){return{some:[n,{in:[{var:""},v]}]}},spelOp:"CollectionUtils.containsAny()",elasticSearchQueryType:"term",mongoFormatOp:f.bind(null,"$in",function(a){return a},!1)},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(n,m,v,N,G,q,J,W){return N=="value"?"".concat(n," NOT CONTAINS [").concat(v.join(", "),"]"):"".concat(n," NOT CONTAINS ").concat(v)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(n,m,v,N,G,q,J,W){var k=W?"=":"==";return N=="value"?"".concat(n," ").concat(k," [").concat(v.join(", "),"]"):"".concat(n," ").concat(k," ").concat(v)},sqlFormatOp:function(n,m,v,N,G,q,J,W){if(N=="value")return"".concat(n," = '").concat(v.map(function(k){return I.SqlString.trim(k)}).join(","),"'")},spelOp:".equals",mongoFormatOp:f.bind(null,"$eq",function(a){return a},!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(n,m,v){return{all:[n,{in:[{var:""},v]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,m,v,N,G,q,J,W){return N=="value"?"".concat(n," != [").concat(v.join(", "),"]"):"".concat(n," != ").concat(v)},sqlFormatOp:function(n,m,v,N,G,q,J,W){if(N=="value")return"".concat(n," != '").concat(v.map(function(k){return I.SqlString.trim(k)}).join(","),"'")},mongoFormatOp:f.bind(null,"$ne",function(a){return a},!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(n,m,v,N,G,q,J,W){var k=v.first(),H=v.get(1),_=J.get("proximity");return"".concat(n," ").concat(k," NEAR/").concat(_," ").concat(H)},sqlFormatOp:function(n,m,v,N,G,q,J,W){var k=v.first(),H=v.get(1),_=I.SqlString.trim(k),ae=I.SqlString.trim(H),oe=J.get("proximity");return"CONTAINS(".concat(n,", 'NEAR((").concat(_,", ").concat(ae,"), ").concat(oe,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(n){return l.default.createElement(C,n)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(n){return"".concat(n," > 0")},mongoFormatOp:f.bind(null,"$gt",function(a){return 0},!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(n,m,v){return"".concat(n," == ").concat(v)},mongoFormatOp:f.bind(null,"$eq",function(a){return a},!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(n){return"".concat(n," == 0")},mongoFormatOp:f.bind(null,"$eq",function(a){return 0},!1)}},i=function(n){return n==null?"NULL":n.toString()};u.stringifyForDisplay=i;var s={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(n){return l.default.createElement(F,n)},formatValue:function(n,m,v,N){return N?i(n):JSON.stringify(n)},spelFormatValue:function(n,m,v,N,G){if(G.spelOp=="matches"&&N!="regex"){var q;return N=="starts_with"?q="(?s)^".concat((0,A.escapeRegExp)(n),".*"):N=="ends_with"?q="(?s).*".concat((0,A.escapeRegExp)(n),"$"):q="(?s).*".concat((0,A.escapeRegExp)(n),".*"),(0,I.spelEscape)(q)}else return(0,I.spelEscape)(n)},sqlFormatValue:function(n,m,v,N,G){return G.sqlOp=="LIKE"||G.sqlOp=="NOT LIKE"?I.SqlString.escapeLike(n,N!="starts_with",N!="ends_with"):I.SqlString.escape(n)},toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(n){return l.default.createElement($,n)},formatValue:function(n,m,v,N){return N?i(n):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){return G.sqlOp=="LIKE"||G.sqlOp=="NOT LIKE"?I.SqlString.escapeLike(n,N!="starts_with",N!="ends_with"):I.SqlString.escape(n)},spelFormatValue:function(n){return(0,I.spelEscape)(n)},toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return l.default.createElement(X,n)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(n,m,v,N){return N?i(n):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){return I.SqlString.escape(n)},spelFormatValue:function(n,m,v){var N=v.step&&!Number.isInteger(v.step);return(0,I.spelEscape)(n,N)},toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return l.default.createElement(Z,n)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(n,m,v,N){return N?i(n):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){return I.SqlString.escape(n)},spelFormatValue:function(n){return(0,I.spelEscape)(n)},toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(n){return l.default.createElement(Y,n)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(n,m,v,N){var G=(0,A.getTitleInListValues)(m.fieldSettings.listValues||m.asyncListValues,n);return N?i(G):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){return I.SqlString.escape(n)},spelFormatValue:function(n){return(0,I.spelEscape)(n)},toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(n){return l.default.createElement(B,n)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(n,m,v,N){var G=n.map(function(q){return(0,A.getTitleInListValues)(m.fieldSettings.listValues||m.asyncListValues,q)});return N?G.map(i):n.map(JSON.stringify)},sqlFormatValue:function(n,m,v,N,G){return n.map(function(q){return I.SqlString.escape(q)})},spelFormatValue:function(n,m,v,N,G){var q=G.spelOp&&G.spelOp[0]=="$",J=(0,I.spelEscape)(n);return q&&(J=(0,I.spelFixList)(J)),J},toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(n){return l.default.createElement(V,n)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(n,m,v,N){var G=(0,P.default)(n,v.valueFormat);return N?G.format(v.dateFormat):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){var q=(0,P.default)(n,v.valueFormat);return I.SqlString.escape(q.format("YYYY-MM-DD"))},spelFormatValue:function(n,m,v,N,G){var q=(0,P.default)(n,v.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(q.format("YYYY-MM-DD"),"')")},jsonLogic:function(n,m,v){return(0,P.default)(n,v.valueFormat).toDate()},toJS:function(n,m){var v=(0,P.default)(n,m.valueFormat);return v.isValid()?v.toDate():void 0},mongoFormatValue:function(n,m,v){var N=(0,P.default)(n,v.valueFormat);return N.isValid()?N.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(n){return l.default.createElement(K,n)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(n,m,v,N){var G=(0,P.default)(n,v.valueFormat);return N?G.format(v.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){var q=(0,P.default)(n,v.valueFormat);return I.SqlString.escape(q.format("HH:mm:ss"))},spelFormatValue:function(n,m,v,N,G){var q=(0,P.default)(n,v.valueFormat);return"T(java.time.LocalTime).parse('".concat(q.format("HH:mm:ss"),"')")},jsonLogic:function(n,m,v){var N=(0,P.default)(n,v.valueFormat);return N.get("hour")*60*60+N.get("minute")*60+N.get("second")},toJS:function(n,m){var v=(0,P.default)(n,m.valueFormat);return v.isValid()?v.get("hour")*60*60+v.get("minute")*60+v.get("second"):void 0},mongoFormatValue:function(n,m,v){var N=(0,P.default)(n,v.valueFormat);return N.get("hour")*60*60+N.get("minute")*60+N.get("second")},elasticSearchFormatValue:function(n,m,v,N){return{script:{script:{source:"doc[".concat(N,"][0].getHour() >== params.min && doc[").concat(N,"][0].getHour() <== params.max"),params:{min:m[0],max:m[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(n){return l.default.createElement(w,n)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(n,m,v,N){var G=(0,P.default)(n,v.valueFormat);return N?G.format(v.dateFormat+" "+v.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,m,v,N,G){var q=(0,P.default)(n,v.valueFormat);return I.SqlString.escape(q.toDate())},spelFormatValue:function(n,m,v,N,G){var q=(0,P.default)(n,v.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(q.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(n,m,v){return(0,P.default)(n,v.valueFormat).toDate()},toJS:function(n,m){var v=(0,P.default)(n,m.valueFormat);return v.isValid()?v.toDate():void 0},mongoFormatValue:function(n,m,v){var N=(0,P.default)(n,v.valueFormat);return N.isValid()?N.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(n){return l.default.createElement(j,n)},labelYes:"Yes",labelNo:"No",formatValue:function(n,m,v,N){return N?n?"Yes":"No":JSON.stringify(!!n)},sqlFormatValue:function(n,m,v,N,G){return I.SqlString.escape(n)},spelFormatValue:function(n,m,v,N,G){return(0,I.spelEscape)(n)},defaultValue:!1,toJS:function(n,m){return n},mongoFormatValue:function(n,m,v){return n}},field:{valueSrc:"field",factory:function(n){return l.default.createElement(z,n)},formatValue:function(n,m,v,N,G,q,J){return N&&J.label||n},sqlFormatValue:function(n,m,v,N,G,q){return n},spelFormatValue:function(n,m,v,N,G){return n},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(n){return l.default.createElement(U,n)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(n){return(0,I.spelEscape)(n===""?null:n)},spelImportValue:function(n){return[n.value,[]]},factory:function(n){var m=n.value,v=n.setValue;return l.default.createElement("input",{type:"text",value:m||"",onChange:function(G){return v(G.target.value)}})}}},c={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},y=D(D({},E.settings),{},{formatField:function(n,m,v,N,G,q){return q?v:n},formatSpelField:function(n,m,v,N,G,q){var J=N.map(function(W,k){var H=W.key,_=W.parent;return k==0?_=="[map]"?"#this[".concat((0,I.spelEscape)(H),"]"):(_=="[class]",H):_=="map"||_=="[map]"?"[".concat((0,I.spelEscape)(H),"]"):(_=="class"||_=="[class]",".".concat(H))}).join("");return G.isSpelVariable&&(J="#"+J),J},sqlFormatReverse:function(n){if(n!=null)return"NOT("+n+")"},spelFormatReverse:function(n){if(n!=null)return"!("+n+")"},formatReverse:function(n,m,v,N,G,q){if(n!=null)return q?"NOT ("+n+")":"!("+n+")"},formatAggr:function(n,m,v,N,G,q,J,W,k,H){var _=J.labelForFormat,ae=J.cardinality;if(ae==0){var oe=n?" HAVE ".concat(n):"";return"".concat(_," OF ").concat(m).concat(oe)}else if(ae==null||ae==1){var le=n?" WHERE ".concat(n):"";return"COUNT OF ".concat(m).concat(le," ").concat(_," ").concat(N)}else if(ae==2){var ue=n?" WHERE ".concat(n):"",me=N.first(),pe=N.get(1);return"COUNT OF ".concat(m).concat(ue," ").concat(_," ").concat(me," AND ").concat(pe)}},canCompareFieldWithField:function(n,m,v,N){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5}),p={conjunctions:d,operators:o,widgets:s,types:c,settings:y};u.default=p},31923:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.settings=void 0;var S=R(e(5806)),l=r(e(27702));function L(F){if(typeof WeakMap!="function")return null;var $=new WeakMap,V=new WeakMap;return(L=function(w){return w?V:$})(F)}function R(F,$){if(!$&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var V=L($);if(V&&V.has(F))return V.get(F);var K={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in F)if(B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)){var Y=w?Object.getOwnPropertyDescriptor(F,B):null;Y&&(Y.get||Y.set)?Object.defineProperty(K,B,Y):K[B]=F[B]}return K.default=F,V&&V.set(F,K),K}var I=S.VanillaFieldSelect,A=S.VanillaConjs,P=S.VanillaButton,E=S.VanillaButtonGroup,T=S.VanillaProvider,b=S.VanillaValueSources,M=S.vanillaConfirm,D=S.VanillaSwitch,j={formatField:function($,V,K,w,B,Y){return Y?K:$},renderField:function($){return l.default.createElement(I,$)},renderOperator:function($){return l.default.createElement(I,$)},renderFunc:function($){return l.default.createElement(I,$)},renderConjs:function($){return l.default.createElement(A,$)},renderSwitch:function($){return l.default.createElement(D,$)},renderButton:function($){return l.default.createElement(P,$)},renderButtonGroup:function($){return l.default.createElement(E,$)},renderProvider:function($){return l.default.createElement(T,$)},renderValueSources:function($){return l.default.createElement(b,$)},renderConfirm:M,renderSwitchPrefix:function(){return l.default.createElement(l.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};u.settings=j},60580:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.UPPER=u.RELATIVE_DATETIME=u.NOW=u.LOWER=u.LINEAR_REGRESSION=void 0;var O=r(e(79913)),S={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};u.NOW=S;var l={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(P){var E=P.date,T=P.op,b=P.val,M=P.dim;return{date_add:[E,b*(T=="minus"?-1:1),M]}},jsonLogicImport:function(P){var E=P.date_add[0],T=Math.abs(P.date_add[1]),b=P.date_add[1]>=0?"plus":"minus",M=P.date_add[2];return[E,b,T,M]},jsonLogicCustomOps:{date_add:function(P,E,T){return(0,O.default)(P).add(E,T).toDate()}},sqlFormatFunc:function(P){var E=P.date,T=P.op,b=P.val,M=P.dim;return"DATE_ADD(".concat(E,", INTERVAL ").concat(parseInt(b)*(T=="minus"?-1:1)," ").concat(M.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(P){var E=P.date,T=P.op,b=P.val,M=P.dim;return b?"".concat(E," ").concat(T=="minus"?"-":"+"," ").concat(b," ").concat(M):E},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};u.RELATIVE_DATETIME=l;var L={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(P){return P.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};u.LOWER=L;var R={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(P){return P.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};u.UPPER=R;var I={label:"Linear regression",returnType:"number",formatFunc:function(P,E){var T=P.coef,b=P.bias,M=P.val;return"(".concat(T," * ").concat(M," + ").concat(b,")")},sqlFormatFunc:function(P){var E=P.coef,T=P.bias,b=P.val;return"(".concat(E," * ").concat(b," + ").concat(T,")")},spelFormatFunc:function(P){var E=P.coef,T=P.bias,b=P.val;return"(".concat(E," * ").concat(b," + ").concat(T,")")},mongoFormatFunc:function(P){var E=P.coef,T=P.bias,b=P.val;return{$sum:[{$multiply:[E,b]},T]}},jsonLogic:function(P){var E=P.coef,T=P.bias,b=P.val;return{"+":[{"*":[E,b]},T]}},jsonLogicImport:function(P){var E=P["+"][0]["*"][0],T=P["+"][0]["*"][1],b=P["+"][1];return[E,T,b]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};u.LINEAR_REGRESSION=I},87033:(re,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SET_VALUE_SRC=u.SET_VALUE=u.SET_TREE=u.SET_OPERATOR_OPTION=u.SET_OPERATOR=u.SET_NOT=u.SET_LOCK=u.SET_FIELD=u.SET_DRAG_START=u.SET_DRAG_PROGRESS=u.SET_DRAG_END=u.SET_CONJUNCTION=u.REMOVE_RULE=u.REMOVE_GROUP=u.PLACEMENT_PREPEND=u.PLACEMENT_BEFORE=u.PLACEMENT_APPEND=u.PLACEMENT_AFTER=u.MOVE_ITEM=u.ADD_RULE=u.ADD_GROUP=u.ADD_CASE_GROUP=void 0;var e="ADD_GROUP";u.ADD_GROUP=e;var r="ADD_CASE_GROUP";u.ADD_CASE_GROUP=r;var O="REMOVE_GROUP";u.REMOVE_GROUP=O;var S="SET_CONJUNCTION";u.SET_CONJUNCTION=S;var l="SET_NOT";u.SET_NOT=l;var L="ADD_RULE";u.ADD_RULE=L;var R="REMOVE_RULE";u.REMOVE_RULE=R;var I="SET_FIELD";u.SET_FIELD=I;var A="SET_OPERATOR";u.SET_OPERATOR=A;var P="SET_VALUE";u.SET_VALUE=P;var E="SET_VALUE_SRC";u.SET_VALUE_SRC=E;var T="SET_OPERATOR_OPTION";u.SET_OPERATOR_OPTION=T;var b="SET_LOCK";u.SET_LOCK=b;var M="SET_TREE";u.SET_TREE=M;var D="MOVE_ITEM";u.MOVE_ITEM=D;var j="after";u.PLACEMENT_AFTER=j;var F="before";u.PLACEMENT_BEFORE=F;var $="append";u.PLACEMENT_APPEND=$;var V="prepend";u.PLACEMENT_PREPEND=V;var K="SET_DRAG_PROGRESS";u.SET_DRAG_PROGRESS=K;var w="SET_DRAG_START";u.SET_DRAG_START=w;var B="SET_DRAG_END";u.SET_DRAG_END=B},88109:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.elasticSearchFormat=$;var O=r(e(43427)),S=e(68710),l=e(78683);function L(V,K){var w=Object.keys(V);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(V);K&&(B=B.filter(function(Y){return Object.getOwnPropertyDescriptor(V,Y).enumerable})),w.push.apply(w,B)}return w}function R(V){for(var K=1;K<arguments.length;K++){var w=arguments[K]!=null?arguments[K]:{};K%2?L(Object(w),!0).forEach(function(B){(0,O.default)(V,B,w[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(w)):L(Object(w)).forEach(function(B){Object.defineProperty(V,B,Object.getOwnPropertyDescriptor(w,B))})}return V}function I(V){if(V==null)return null;var K=V.split(",").map(Number);return{top_left:{lat:K[0],lon:K[1]},bottom_right:{lat:K[2],lon:K[3]}}}function A(V,K){if(V.length>1)return{gte:"".concat(V[0]),lte:"".concat(V[1])};var w=V[0];switch(K){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(w,"||/d"),lte:"".concat(w,"||+1d")};case"less_or_equal":return{lte:"".concat(w)};case"greater_or_equal":return{gte:"".concat(w)};case"less":return{lt:"".concat(w)};case"greater":return{gt:"".concat(w)};default:return}}function P(V){return{value:"*"+V+"*"}}function E(V,K){switch(V){case"AND":return K?"must_not":"must";case"OR":return K?"should_not":"should";case"NOT":return K?"must":"must_not";default:return}}function T(V,K,w){if(V==="boolean")return K;switch(w){case"term":case"wildcard":return"".concat(K,".keyword");case"geo_bounding_box":case"range":case"match":return K;default:return console.error("Can't determine query field for query type ".concat(w)),null}}function b(V){return{value:V}}function M(V,K){return V}function D(V,K,w,B,Y){var X=M(B,Y);switch(V){case"filter":return{script:Y.operators[w].elasticSearchScript(B,K)};case"exists":return{field:B};case"match":return(0,O.default)({},X,K[0]);case"term":return(0,O.default)({},B,K[0]);case"geo_bounding_box":return(0,O.default)({},B,I(K[0]));case"range":return(0,O.default)({},B,A(K,w));case"wildcard":return(0,O.default)({},B,P(K[0]));case"regexp":return(0,O.default)({},B,b(K[0]));default:return}}function j(V,K,w,B,Y){if(!(!V||!w||K==null)){var X=w,Z=B.operators[X];if(Z){var z=Z,U=z.elasticSearchQueryType,C=!1;if(!U&&Z.reversedOp){C=!0,X=Z.reversedOp,Z=B.operators[X];var d=Z;U=d.elasticSearchQueryType}var f=(0,S.getWidgetForFieldOp)(B,V,X,Y),g=B.widgets[f];if(g){var o=g.elasticSearchFormatValue,i;if(typeof U=="function"?i=U(f):i=U,!!i){var s;return typeof o=="function"?s=o(i,K,X,V,B):s=D(i,K,X,V,B),C?{bool:{must_not:(0,O.default)({},i,R({},s))}}:(0,O.default)({},i,R({},s))}}}}}function F(V,K,w,B,Y){if(!(!V||!V.size)){var X=V.valueSeq().toArray(),Z=E(K,w),z=X.map(function(C){return B(C,Y)}).filter(function(C){return C!==void 0});if(z.length){var U=z.flat(1/0);return{bool:(0,O.default)({},Z,U)}}}}function $(V,K){if(V){var w=V.get("type"),B=V.get("properties")||new Map;if(w==="rule"&&B.get("field")){var Y,X,Z=B.get("operator"),z=B.get("field"),U=B.get("value").toJS(),C=(Y=B.get("valueType"))===null||Y===void 0?void 0:Y.get(0),d=(X=B.get("valueSrc"))===null||X===void 0?void 0:X.get(0);return d==="func"?void 0:U&&Array.isArray(U[0])?U[0].map(function(i){return j(z,[i],Z,K,d)}):j(z,U,Z,K,d)}if(w==="group"||w==="rule_group"){var f=B.get("not"),g=B.get("conjunction");g||(g=(0,l.defaultConjunction)(K));var o=V.get("children1");return F(o,g,f,$,K)}}}},89419:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var r=e(82572);Object.keys(r).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===r[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return r[A]}})});var O=e(2227);Object.keys(O).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===O[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return O[A]}})});var S=e(15216);Object.keys(S).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===S[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return S[A]}})});var l=e(96256);Object.keys(l).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===l[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return l[A]}})});var L=e(81052);Object.keys(L).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===L[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return L[A]}})});var R=e(28370);Object.keys(R).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===R[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return R[A]}})});var I=e(88109);Object.keys(I).forEach(function(A){A==="default"||A==="__esModule"||A in u&&u[A]===I[A]||Object.defineProperty(u,A,{enumerable:!0,get:function(){return I[A]}})})},2227:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.jsonLogicFormat=void 0;var O=r(e(93502)),S=r(e(43427)),l=e(99890),L=e(6384),R=e(68710),I=e(78683),A=e(46202),P=e(15866),E=r(e(58517)),T=r(e(75123));function b(C,d){var f=Object.keys(C);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(C);d&&(g=g.filter(function(o){return Object.getOwnPropertyDescriptor(C,o).enumerable})),f.push.apply(f,g)}return f}function M(C){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?b(Object(f),!0).forEach(function(g){(0,S.default)(C,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(f)):b(Object(f)).forEach(function(g){Object.defineProperty(C,g,Object.getOwnPropertyDescriptor(f,g))})}return C}function D(C,d){var f=typeof Symbol<"u"&&C[Symbol.iterator]||C["@@iterator"];if(!f){if(Array.isArray(C)||(f=j(C))||d&&C&&typeof C.length=="number"){f&&(C=f);var g=0,o=function(){};return{s:o,n:function(){return g>=C.length?{done:!0}:{done:!1,value:C[g++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,c;return{s:function(){f=f.call(C)},n:function(){var p=f.next();return i=p.done,p},e:function(p){s=!0,c=p},f:function(){try{!i&&f.return!=null&&f.return()}finally{if(s)throw c}}}}function j(C,d){if(C){if(typeof C=="string")return F(C,d);var f=Object.prototype.toString.call(C).slice(8,-1);if(f==="Object"&&C.constructor&&(f=C.constructor.name),f==="Map"||f==="Set")return Array.from(C);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return F(C,d)}}function F(C,d){(d==null||d>C.length)&&(d=C.length);for(var f=0,g=new Array(d);f<d;f++)g[f]=C[f];return g}var $=function(d,f){var g={usedFields:[],errors:[]},o=V(d,f,g,!0),i=g.errors,s=g.usedFields,c=f.settings.fieldSeparator,y={},p=D(s),a;try{for(p.s();!(a=p.n()).done;)for(var n=a.value,m=(0,L.getFieldConfig)(f,n)||{},v=n.split(c),N=y,G=0;G<v.length;G++){var q=v[G],J=(0,L.getFieldConfig)(f,v.slice(0,G+1))||{};G!=v.length-1?J.type=="!group"&&J.mode!="struct"?(N[q]||(N[q]=[{}]),N=N[q][0]):(N[q]||(N[q]={}),N=N[q]):N[q]||(N[q]=null)}}catch(W){p.e(W)}finally{p.f()}return{errors:i,logic:o,data:y}};u.jsonLogicFormat=$;var V=function(d,f,g,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(d){var s=d.get("type"),c=d.get("properties")||new P.Map,y=c.get("isLocked"),p=f.settings.jsonLogic.lockedOp,a;return s==="group"||s==="rule_group"?a=K(d,f,g,o,i):s==="rule"&&(a=w(d,f,g,i)),y&&a&&p&&(a=(0,S.default)({},p,a)),a}},K=function(d,f,g,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,s=d.get("type"),c=d.get("properties")||new P.Map,y=c.get("mode"),p=d.get("children1"),a=c.get("field");if(p){var n=c.get("conjunction");n||(n=(0,I.defaultConjunction)(f));var m=f.conjunctions[n],v=m.jsonLogicConj||n.toLowerCase(),N=c.get("not");if(v!="and"&&v!="or"){g.errors.push("Conjunction ".concat(v," is not supported"));return}var G=s==="rule_group"&&!o,q=G&&y!="struct"?a:i,J=c.get("operator"),W=J&&(0,L.getOperatorConfig)(f,J,a)||null,k=B(f,c,g,J,i),H=G&&(!J||W.cardinality==0),_=p.map(function(pe){return V(pe,f,g,!1,q)}).filter(function(pe){return typeof pe<"u"});if(G&&y!="struct"&&!H){if(k==null)return}else if(!_.size)return;var ae={};if(_.size==1&&!o?ae=_.first():ae[v]=_.toList().toJS(),N&&(ae={"!":ae}),G&&y!="struct"){var oe=Z(g,f,a,i);if(H){var le=J||"some";ae=(0,S.default)({},le,[oe,ae])}else{var ue=_.size?{filter:[oe,ae]}:oe,me={reduce:[ue,{"+":[1,{var:"accumulator"}]},0]};ae=U(f,c,me,k,J)}}return ae}},w=function(d,f,g){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=d.get("properties")||new P.Map,s=i.get("field"),c=i.get("operator"),y=i.get("operatorOptions");if(y=y?y.toJS():null,y&&!Object.keys(y).length&&(y=null),!(s==null||c==null)){var p=(0,L.getFieldConfig)(f,s)||{},a=(0,L.getOperatorConfig)(f,c,s)||{},n=a.reversedOp,m=(0,L.getOperatorConfig)(f,n,s)||{},v=!1;if(!a.jsonLogic&&!m.jsonLogic){g.errors.push("Operator ".concat(c," is not supported"));return}if(!a.jsonLogic&&m.jsonLogic){v=!0;var N=[n,c];c=N[0],n=N[1];var G=[m,a];a=G[0],m=G[1]}var q=B(f,i,g,c,o);if(q!==void 0){var J=Z(g,f,s,o);return U(f,i,J,q,c,y,p,v)}}},B=function(d,f,g,o,i){var s=f.get("field"),c=f.get("valueSrc"),y=f.get("valueType"),p=(0,L.getFieldConfig)(d,s)||{},a=(0,L.getOperatorConfig)(d,o,s)||{},n=(0,l.defaultValue)(a.cardinality,1),m=f.get("value"),v=f.get("asyncListValues");if(m!=null){var N=[],G=[],q=g.usedFields,J=m.map(function(k,H){var _=c?c.get(H):null,ae=y?y.get(H):null,oe=(0,A.completeValue)(k,_,d),le=(0,R.getWidgetForFieldOp)(d,s,o,_),ue=(0,E.default)((0,L.getFieldWidgetConfig)(d,s,o,le,_),["factory"]),me=Y(g,d,oe,_,ae,ue,p,o,a,i,v);return me!==void 0&&(N.push(_),G.push(ae)),me}),W=J.filter(function(k){return k===void 0}).size>0;if(J.size<n||W){g.usedFields=q;return}return n>1?J.toArray():n==1?J.first():null}},Y=function(d,f,g,o,i,s,c,y,p){var a=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,n=arguments.length>10?arguments[10]:void 0;if(g!==void 0){var m;if(o=="field")m=Z(d,f,g,a);else if(o=="func")m=X(d,f,g,a);else if(typeof s.jsonLogic=="function"){var v=s.jsonLogic,N=[g,M(M({},(0,T.default)(c,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,E.default)(s,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];y&&(N.push(y),N.push(p)),m=v.apply(void 0,N)}else m=g;return m}},X=function(d,f,g){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=g.get("func"),s=g.get("args"),c=(0,L.getFuncConfig)(f,i);if(!c.jsonLogic){d.errors.push("Func ".concat(i," is not supported"));return}var y={};for(var p in c.args){var a=c.args[p],n=(0,L.getFieldConfig)(f,a),m=s?s.get(p):void 0,v=m?m.get("value"):void 0,N=m?m.get("valueSrc"):void 0,G=Y(d,f,v,N,a.type,n,a,null,null,o);if(v!=null&&G===void 0){d.errors.push("Can't format value of arg ".concat(p," for func ").concat(i));return}G!==void 0&&(y[p]=G)}var q=Object.values(y),J;if(typeof c.jsonLogic=="function"){var W=c.jsonLogic,k=[y];J=W.apply(void 0,k)}else{var H=c.jsonLogic||i,_=!!c.jsonLogicIsMethod;if(_){var ae=q[0],oe=q.slice(1);oe.length?J={method:[ae,H,oe]}:J={method:[ae,H]}}else J=(0,S.default)({},H,q)}return J},Z=function(d,f,g){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=f.settings,s=i.fieldSeparator,c=i.jsonLogic,y;if(g){Array.isArray(g)&&(g=g.join(s));var p=(0,L.getFieldConfig)(f,g)||{},a=g;if(p.fieldName&&(a=p.fieldName),o){var n=(0,L.getFieldConfig)(f,o)||{},m=o;n.fieldName&&(m=n.fieldName),a.indexOf(m+s)==0?a=a.slice((m+s).length):d.errors.push("Can't cut group ".concat(m," from field ").concat(a))}var v=p.jsonLogicVar||(p.type=="!group"?c.groupVarKey:"var");y=(0,S.default)({},v,a),d.usedFields.indexOf(g)==-1&&d.usedFields.push(g)}return y},z=function(d,f,g,o){var i=d,s=(0,l.defaultValue)(f.cardinality,1),c=(0,l.defaultValue)(f._jsonLogicIsRevArgs,!1);typeof f.jsonLogic=="string"&&(i=f.jsonLogic);var y=["<","<=",">",">="],p=["==","!="],a=function(m,v,N,G,q){return s==0&&p.includes(i)?(0,S.default)({},i,[g,null]):s==0?(0,S.default)({},i,g):s==1&&c?(0,S.default)({},i,[o,g]):s==1?(0,S.default)({},i,[g,o]):s==2&&y.includes(i)?(0,S.default)({},i,[o[0],g,o[1]]):(0,S.default)({},i,[g].concat((0,O.default)(o)))};return a},U=function(d,f,g,o,i){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,p=f.get("field"),a=(0,L.getOperatorConfig)(d,i,p)||{},n=typeof a.jsonLogic=="function"?a.jsonLogic:z(i,a,g,o),m=[g,i,o,(0,E.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),s,c],v=n.apply(void 0,m);return y&&(v={"!":v}),v}},15216:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.mongodbFormat=u._mongodbFormat=void 0;var O=r(e(74208)),S=r(e(43427)),l=r(e(93502)),L=r(e(55629)),R=e(99890),I=e(6384),A=e(68710),P=e(78683),E=e(46202),T=r(e(58517)),b=r(e(75123)),M=e(15866),D=e(31923);function j(C,d){var f=Object.keys(C);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(C);d&&(g=g.filter(function(o){return Object.getOwnPropertyDescriptor(C,o).enumerable})),f.push.apply(f,g)}return f}function F(C){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?j(Object(f),!0).forEach(function(g){(0,S.default)(C,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(f)):j(Object(f)).forEach(function(g){Object.defineProperty(C,g,Object.getOwnPropertyDescriptor(f,g))})}return C}var $=function(d){return(0,L.default)(d)=="object"&&d!==null&&!Array.isArray(d)},V=function(d,f){return K(d,f,!1)};u.mongodbFormat=V;var K=function(d,f){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o={errors:[]},i=w([],d,f,o);return g?[i,o.errors]:(o.errors.length&&console.warn("Errors while exporting to MongoDb:",o.errors),i)};u._mongodbFormat=K;var w=function(d,f,g,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(f){var p=f.get("type");if(p==="group"||p==="rule_group")return B(d,f,g,o,i,s,c,y);if(p==="rule")return Y(d,f,g,o,i,s,c,y)}},B=function(d,f,g,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,p=f.get("type"),a=f.get("properties")||new M.Map,n=f.get("children1"),m=g.settings.canShortMongoQuery;if(n){var v=d.filter(function(ye){return ye.get("type")=="rule_group"}).length>0,N=d.filter(function(ye){return ye.get("type")=="rule_group"}).map(function(ye){return ye.get("properties").get("field")}).slice(-1).pop(),G=v&&N,q=p==="rule_group"?a.get("field"):null,J=Z(q,g,o,G),W=(0,I.getFieldConfig)(g,q)||{},k=W.mode,H=q&&k=="array",_=i?!a.get("not"):a.get("not"),ae=n.map(function(ye){return w([].concat((0,l.default)(d),[f]),ye,g,o,_,!0,k=="array"?function(De){return"$$el.".concat(De)}:void 0)}).filter(function(ye){return typeof ye<"u"});if(!(!H&&!ae.size)){var oe=a.get("conjunction");oe||(oe=(0,P.defaultConjunction)(g));var le=g.conjunctions[oe],ue=le.reversedConj;_&&ue&&(oe=ue,le=g.conjunctions[oe]);var me=le.mongoConj,pe;if(ae.size==1)pe=ae.first();else if(ae.size>1){var Ee=ae.toList().toJS(),ge=m&&me=="$and";ge&&(pe=Ee.reduce(function(ye,De){if(ye){for(var Fe in De){if(Fe[0]=="$"){ye=void 0;break}if(ye[Fe]==null)ye[Fe]=De[Fe];else{var We=ye[Fe],Ke=De[Fe];$(We)||(We={$eq:We}),$(Ke)||(Ke={$eq:Ke});var _e=Object.keys(We)[0],He=Object.keys(Ke)[0];if(_e==He){ye=void 0;break}ye[Fe]=Object.assign({},We,Ke)}}return ye}},{})),pe||(pe=(0,S.default)({},me,Ee))}if(q)if(k=="array"){var Se={$size:J},Ae=pe?{$size:{$filter:{input:"$"+J,as:"el",cond:pe}}}:Se;pe=w(d,f.set("type","rule"),g,o,!1,!1,function(ye){return Ae},Se),pe={$expr:pe}}else pe=(0,S.default)({},J,{$elemMatch:pe});return pe}}},Y=function(d,f,g,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,p=f.get("properties")||new M.Map,a=d.filter(function(at){return at.get("type")=="rule_group"}).length>0,n=d.filter(function(at){return at.get("type")=="rule_group"}).map(function(at){return at.get("properties").get("field")}).slice(-1).pop(),m=a&&n,v=p.get("operator"),N=p.get("operatorOptions"),G=p.get("field"),q=p.get("value"),J=p.get("valueSrc"),W=p.get("valueType"),k=p.get("asyncListValues");if(!(G==null||v==null||q===void 0)){var H=(0,I.getFieldConfig)(g,G)||{},_=(0,I.getOperatorConfig)(g,v,G)||{},ae=_.reversedOp,oe=(0,I.getOperatorConfig)(g,ae,G)||{},le=(0,R.defaultValue)(_.cardinality,1),ue=i;if(ue&&ae){var me=[ae,v];v=me[0],ae=me[1];var pe=[oe,_];_=pe[0],oe=pe[1],ue=!1}var Ee=Z(G,g,o,m),ge=[],Se=[],Ae=!1,ye=q.map(function(at,ke){var de=J?J.get(ke):null,Ce=W?W.get(ke):null,Le=(0,E.completeValue)(at,de,g),we=(0,A.getWidgetForFieldOp)(g,G,v,de),Ue=(0,T.default)((0,I.getFieldWidgetConfig)(g,G,v,we,de),["factory"]),Ge=X(o,g,Le,de,Ce,Ue,H,m,v,_,k),be=(0,O.default)(Ge,2),$e=be[0],rt=be[1];return $e!==void 0&&(Ae=Ae||rt,ge.push(de),Se.push(Ce)),$e});c&&(Ae=!0);var De=Ae&&s,Fe=ye.filter(function(at){return at===void 0}).size>0;if(!(ye.size<le||Fe)){var We=le>1?ye.toArray():le==1?ye.first():null,Ke=_.mongoFormatOp;if(!Ke){o.errors.push("Operator ".concat(v," is not supported"));return}var _e=[c?c(Ee):Ee,v,y!==void 0&&We==null?y:We,Ae,ge.length>1?ge:ge[0],Se.length>1?Se:Se[0],(0,T.default)(_,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),N,H],He=Ke.apply(void 0,_e);return De&&(He={$expr:He}),ue&&(He={$not:He}),He}}},X=function(d,f,g,o,i,s,c,y,p,a,n){if(g===void 0)return[void 0,!1];var m,v=!1;if(o=="field"){var N=z(d,f,g,y),G=(0,O.default)(N,2);m=G[0],v=G[1]}else if(o=="func"){var q=U(d,f,g,y),J=(0,O.default)(q,2);m=J[0],v=J[1]}else if(typeof s.mongoFormatValue=="function"){var W=s.mongoFormatValue,k=[g,F(F({},(0,b.default)(c,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,T.default)(s,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];p&&(k.push(p),k.push(a)),m=W.apply(void 0,k)}else m=g;return[m,v]},Z=function(d,f,g,o){if(d){var i=(0,I.getFieldConfig)(f,d)||{},s=f.settings.fieldSeparator,c=Array.isArray(d)?d:d.split(s),y=Array.isArray(d)?d.join(s):d;if(i.fieldName&&(y=i.fieldName),o){var p=(0,I.getFieldConfig)(f,o)||{},a=o;p.fieldName&&(a=p.fieldName),y.indexOf(a+".")==0?y=y.slice((a+".").length):g.errors.push("Can't cut group ".concat(a," from field ").concat(y))}return y}},z=function(d,f,g,o){var i=f.settings.fieldSeparator,s,c=!0;if(g){var y=(0,I.getFieldConfig)(f,g)||{},p=Array.isArray(g)?g:g.split(i),a=(0,A.getFieldPath)(g,f),n=(0,A.getFieldPathLabels)(g,f),m=n?n.join(i):null,v=f.settings.formatField||D.settings.formatField,N=Z(g,f,d,o),G=v(N,p,m,y,f,!1);s="$"+G}return[s,c]},U=function(d,f,g,o){var i=!0,s,c=g.get("func"),y=g.get("args"),p=(0,I.getFuncConfig)(f,c),a=p.mongoFunc||c,n=p.mongoArgsAsObject,m={},v=0,N=void 0;for(var G in p.args){var q=p.args[G],J=(0,I.getFieldConfig)(f,q),W=y?y.get(G):void 0,k=W?W.get("value"):void 0,H=W?W.get("valueSrc"):void 0,_=W?W.get("asyncListValues"):void 0,ae=(0,A.getWidgetForFieldOp)(f,J,null,H),oe=(0,T.default)((0,I.getFieldWidgetConfig)(f,J,null,ae,H),["factory"]),le=X(d,f,k,H,q.type,oe,J,o,null,null,_),ue=(0,O.default)(le,2),me=ue[0],pe=ue[1];if(k!=null&&me===void 0)return d.errors.push("Can't format value of arg ".concat(G," for func ").concat(c)),[void 0,!1];v++,me!==void 0&&(m[G]=me,N=me)}if(typeof p.mongoFormatFunc=="function"){var Ee=p.mongoFormatFunc,ge=[m];s=Ee.apply(void 0,ge)}else{if(p.mongoFormatFunc===null)return d.errors.push("Functon ".concat(a," is not supported")),[void 0,!1];n?s=(0,S.default)({},a,m):v==1&&N!==void 0?s=(0,S.default)({},a,N):s=(0,S.default)({},a,Object.values(m))}return[s,i]}},82572:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.queryBuilderFormat=void 0;var O=r(e(43427)),S=e(99890),l=e(6384),L=e(78683),R=e(68710),I=e(46202),A=e(15866);function P(j,F){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(j);F&&(V=V.filter(function(K){return Object.getOwnPropertyDescriptor(j,K).enumerable})),$.push.apply($,V)}return $}function E(j){for(var F=1;F<arguments.length;F++){var $=arguments[F]!=null?arguments[F]:{};F%2?P(Object($),!0).forEach(function(V){(0,O.default)(j,V,$[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):P(Object($)).forEach(function(V){Object.defineProperty(j,V,Object.getOwnPropertyDescriptor($,V))})}return j}var T=function(F,$){var V={usedFields:[]},K=b(F,$,V);if(K)return E(E({},K),V)};u.queryBuilderFormat=T;var b=function(F,$,V){if(F){var K=F.get("type"),w=F.get("children1");if((K==="group"||K==="rule_group")&&w&&w.size)return M(F,$,V);if(K==="rule")return D(F,$,V)}},M=function(F,$,V){var K=F.get("properties")||new A.Map,w=F.get("children1"),B=F.get("id"),Y=w.map(function(U){return b(U,$,V)}).filter(function(U){return typeof U<"u"});if(Y.size){var X=K.get("conjunction");X||(X=(0,L.defaultConjunction)($));var Z=K.get("not"),z={id:B,rules:Y.toList(),condition:X.toUpperCase(),not:Z};return z}},D=function(F,$,V){var K=F.get("properties")||new A.Map,w=F.get("id"),B=K.get("operator"),Y=K.get("operatorOptions"),X=K.get("field"),Z=K.get("value"),z=K.get("valueSrc"),U=K.get("valueType"),C=Z.filter(function(v){return v===void 0}).size>0;if(!(X==null||B==null||C)){var d=(0,l.getFieldConfig)($,X)||{},f=(0,l.getOperatorConfig)($,B,X)||{},g=d.type||"undefined",o=(0,S.defaultValue)(f.cardinality,1),i=$.types[d.type]||{},s=(0,R.formatFieldName)(X,$,V);if(!(Z.size<o)){V.usedFields.indexOf(X)==-1&&V.usedFields.push(X),Z=Z.toArray(),z=z.toArray(),U=U.toArray();for(var c=[],y=0;y<Z.length;y++){var p={type:U[y],value:Z[y]};if(c.push(p),z[y]=="field"){var a=Z[y];V.usedFields.indexOf(a)==-1&&V.usedFields.push(a)}}var n=Y?Y.toJS():null;n&&!Object.keys(n).length&&(n=null);var m={id:w,fieldName:s,type:g,input:i.mainWidget,operator:B};return n&&(m.operatorOptions=n),m.values=c,m}}}},28370:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.queryString=void 0;var O=r(e(43427)),S=r(e(74208)),l=r(e(93502)),L=e(6384),R=e(68710),I=r(e(58517)),A=r(e(75123)),P=e(99890),E=e(78683),T=e(31923),b=e(46202),M=e(15866);function D(z,U){var C=Object.keys(z);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(z);U&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(z,f).enumerable})),C.push.apply(C,d)}return C}function j(z){for(var U=1;U<arguments.length;U++){var C=arguments[U]!=null?arguments[U]:{};U%2?D(Object(C),!0).forEach(function(d){(0,O.default)(z,d,C[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(C)):D(Object(C)).forEach(function(d){Object.defineProperty(z,d,Object.getOwnPropertyDescriptor(C,d))})}return z}var F=function(U,C){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f={errors:[]},g=$(U,C,f,d,null);return f.errors.length&&console.warn("Errors while exporting to string:",f.errors),g};u.queryString=F;var $=function(U,C,d){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(U){var o=U.get("type"),i=U.get("children1");if(o==="group"||o==="rule_group")return V(U,C,d,f,g);if(o==="rule")return B(U,C,d,f,g)}},V=function(U,C,d){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=U.get("type"),i=U.get("properties")||new M.Map,s=i.get("mode"),c=U.get("children1");if(c){var y=o==="rule_group",p=y&&s=="array"?i.get("field"):null,a=y&&s=="array",n=i.get("not"),m=c.map(function(_){return $(_,C,d,f,p)}).filter(function(_){return typeof _<"u"});if(!(!a&&!m.size)){var v=i.get("conjunction");v||(v=(0,E.defaultConjunction)(C));var N=C.conjunctions[v],G=m.size?N.formatConj(m,v,n,f):null,q;if(p){var J=B(U,C,d,f,g,!0);if(J){var W,k=J.pop(),H=[G].concat((0,l.default)(J));q=(W=C.settings).formatAggr.apply(W,(0,l.default)(H)),k&&(q=C.settings.formatReverse(q,null,null,null,null,f))}}else q=G;return q}}},K=function(U,C,d,f,g,o){var i=C.get("field"),s=C.get("valueSrc"),c=C.get("valueType"),y=(0,L.getFieldConfig)(U,i)||{},p=f||C.get("operator"),a=(0,L.getOperatorConfig)(U,p,i)||{},n=(0,P.defaultValue)(a.cardinality,1),m=C.get("value"),v=C.get("asyncListValues"),N=[],G=[],q;if(m!=null){var J=m.map(function(k,H){var _=s?s.get(H):null,ae=c?c.get(H):null,oe=(0,b.completeValue)(k,_,U),le=(0,R.getWidgetForFieldOp)(U,i,p,_),ue=(0,I.default)((0,L.getFieldWidgetConfig)(U,i,p,le,_),["factory"]),me=Y(U,d,oe,_,ae,ue,y,p,a,g,o,v);return me!==void 0&&(N.push(_),G.push(ae)),me}),W=J.filter(function(k){return k===void 0}).size>0;W||J.size<n||(q=n==1?J.first():J)}return[q,N.length>1?N:N[0],G.length>1?G:G[0]]},w=function(U,C){var d=C.labelForFormat||U,f=(0,P.defaultValue)(C.cardinality,1),g;return f==0?g=function(i,s,c,y,p,a,n,m){return"".concat(i," ").concat(d)}:f==1?g=function(i,s,c,y,p,a,n,m){return"".concat(i," ").concat(d," ").concat(c)}:f==2&&(g=function(i,s,c,y,p,a,n,m){var v=c.first(),N=c.get(1);return"".concat(i," ").concat(d," ").concat(v," AND ").concat(N)}),g},B=function(U,C,d){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,i=U.get("properties")||new M.Map,s=i.get("field"),c=i.get("operator"),y=i.get("operatorOptions");if(!(s==null||c==null)){var p=(0,L.getFieldConfig)(C,s)||{},a=(0,L.getOperatorConfig)(C,c,s)||{},n=a.reversedOp,m=(0,L.getOperatorConfig)(C,n,s)||{},v=!1,N=a.formatOp;if(!N&&n&&(N=m.formatOp,N)){v=!0;var G=[n,c];c=G[0],n=G[1];var q=[m,a];a=q[0],m=q[1]}if(N||(N=w(c,a)),!!N){var J=X(C,d,s,f,g),W=K(C,i,d,c,f,g),k=(0,S.default)(W,3),H=k[0],_=k[1],ae=k[2];if(H!==void 0){var oe=[J,c,H,_,ae,(0,I.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),y,f,p,v];if(o)return oe;var le=N.apply(void 0,oe);return v&&(le=C.settings.formatReverse(le,c,n,a,m,f)),le}}}},Y=function(U,C,d,f,g,o,i,s,c,y){var p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,a=arguments.length>11?arguments[11]:void 0;if(d!==void 0){var n;if(f=="field")n=X(U,C,d,y,p);else if(f=="func")n=Z(U,C,d,y,p);else if(typeof o.formatValue=="function"){var m=o.formatValue,v=[d,j(j({},(0,A.default)(i,["fieldSettings","listValues"])),{},{asyncListValues:a}),(0,I.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),y];if(s&&(v.push(s),v.push(c)),f=="field"){var N=(0,L.getFieldConfig)(U,d)||{};v.push(N)}n=m.apply(void 0,v)}else n=d;return n}},X=function(U,C,d,f){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=U.settings,s=i.fieldSeparator,c=i.fieldSeparatorDisplay,y=null;if(d){var p=(0,L.getFieldConfig)(U,d)||{},a=Array.isArray(d)?d:d.split(s),n=(0,R.getFieldPath)(d,U),m=(0,R.getFieldPathLabels)(d,U,o?g:null),v=m?m.join(c):null,N=p.label2||v,G=U.settings.formatField||T.settings.formatField,q=(0,R.formatFieldName)(d,U,C,o?g:null);y=G(q,a,N,p,U,f)}return y},Z=function(U,C,d,f){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=d.get("func"),i=d.get("args"),s=(0,L.getFuncConfig)(U,o),c=f&&s.label||o,y={},p={};for(var a in s.args){var n=s.args[a],m=(0,L.getFieldConfig)(U,n),v=i?i.get(a):void 0,N=v?v.get("value"):void 0,G=v?v.get("valueSrc"):void 0,q=v?v.get("asyncListValues"):void 0,J=Y(U,C,N,G,n.type,m,n,null,null,f,g,q),W=f&&n.label||a;J!==void 0&&(y[a]=J,p[W]=J)}var k=null;if(typeof s.formatFunc=="function"){var H=s.formatFunc,_=[y,f];k=H.apply(void 0,_)}else{var ae=Object.entries(p).map(function(oe){var le=(0,S.default)(oe,2),ue=le[0],me=le[1];return f?"".concat(ue,": ").concat(me):"".concat(me)}).join(", ");k="".concat(c,"(").concat(ae,")")}return k}},81052:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.spelFormat=u._spelFormat=void 0;var O=r(e(77495)),S=r(e(43427)),l=r(e(74208)),L=e(6384),R=e(68710),I=r(e(58517)),A=r(e(75123)),P=e(99890),E=e(78683),T=e(31923),b=e(46202),M=e(15866),D=e(96108);function j(o,i){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(y){return Object.getOwnPropertyDescriptor(o,y).enumerable})),s.push.apply(s,c)}return s}function F(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?j(Object(s),!0).forEach(function(c){(0,S.default)(o,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(s,c))})}return o}var $=function(i,s){return V(i,s,!1)};u.spelFormat=$;var V=function(i,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y={errors:[]},p=K(i,s,y,null);return c?[p,y.errors]:(y.errors.length&&console.warn("Errors while exporting to SpEL:",y.errors),p)};u._spelFormat=V;var K=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(i){var p=i.get("type");if(p==="group"||p==="rule_group")return Y(i,s,c,y);if(p==="rule")return U(i,s,c,y);if(p=="switch_group")return B(i,s,c,y);if(p=="case_group")return w(i,s,c,y)}},w=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=i.get("type");if(p!="case_group"){c.errors.push("Unexpected child of type ".concat(p," inside switch"));return}var a=i.get("properties")||new M.Map,n=C(s,a,c,null,y,"!case_value"),m=(0,l.default)(n,3),v=m[0],N=m[1],G=m[2],q=Y(i,s,c,y);return[q,v]},B=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=i.get("properties")||new M.Map,a=i.get("children1");if(a){var n=a.map(function(H){return w(H,s,c,null)}).filter(function(H){return typeof H<"u"}).toArray();if(n.length){if(n.length==1&&!n[0][0])return n[0][1];for(var m=[],v=0;v<n.length;v++)v!=n.length-1&&!n[v][0]?c.errors.push("No condition for case ".concat(v)):(m.push(n[v]),v==n.length-1&&n[v][0]&&m.push([void 0,null]));for(var N="",G="",q=0;q<m.length;q++){var J=(0,l.default)(m[q],2),W=J[0],k=J[1];k==null&&(k="null"),W==null&&(W="true"),q!=m.length-1?(N+="(".concat(W," ? ").concat(k," : "),G+=")"):N+="".concat(k)}return N+G}}},Y=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=i.get("type"),a=i.get("properties")||new M.Map,n=a.get("mode"),m=i.get("children1"),v=a.get("field");if(m){var N=a.get("conjunction");N||(N=(0,E.defaultConjunction)(s));var G=s.conjunctions[N],q=a.get("not"),J=p==="rule_group",W=J&&n!="struct",k=W?v:y,H=(0,L.getFieldConfig)(s,k)||{},_=H.isSpelArray,ae=a.get("operator");!ae&&(!n||n=="some")&&(ae="some");var oe=z(s,ae,v),le=oe!=ae,ue=ae&&(0,L.getOperatorConfig)(s,oe,v)||null,me=J&&(!oe||ue.cardinality==0),pe=C(s,a,c,oe,y,null),Ee=(0,l.default)(pe,3),ge=Ee[0],Se=Ee[1],Ae=Ee[2],ye=m.map(function(de){return K(de,s,c,k)}).filter(function(de){return typeof de<"u"});if(W&&!me){if(ge==null)return}else if(!ye.size)return;var De=J,Fe=ye.size?G.spelFormatConj(ye,N,q,De):null,We;if(W){var Ke=f(c,s,v,y),_e=_?".length":".size()",He="".concat(Ke).concat(_e),at=Fe?"".concat(Ke,".?[").concat(Fe,"]").concat(_e):He,ke=me?He:ge;We=Z(c,s,a,at,ke,oe,Se,Ae,le)}else We=Fe;return We}},X=function(i,s){var c=s.spelOp;if(c){var y=c[0]=="$",p=c[0]=="."||y,a=c.substring(c.length-2)=="()",n=p?c.slice(1):a?c.substring(0,c.length-2):c,m,v=(0,P.defaultValue)(s.cardinality,1);return v==0?m=function(G,q,J,W,k,H,_,ae){return p?"".concat(G,".").concat(n,"()"):"".concat(G," ").concat(n)}:v==1&&(m=function(G,q,J,W,k,H,_,ae){return y?"".concat(J,".").concat(n,"(").concat(G,")"):a?"".concat(n,"(").concat(G,", ").concat(J,")"):p?"".concat(G,".").concat(n,"(").concat(J,")"):"".concat(G," ").concat(n," ").concat(J)}),m}},Z=function(i,s,c,y,p,a,n,m){var v=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,N=c.get("field"),G=(0,L.getOperatorConfig)(s,a,N)||{},q=(0,L.getFieldConfig)(s,N)||{},J=c.get("operatorOptions"),W=G.spelFormatOp||X(a,G);if(!W){i.errors.push("Operator ".concat(a," is not supported"));return}var k=[y,a,p,n,m,(0,I.default)(G,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),J,q],H;return H=W.apply(void 0,k),v&&(H=s.settings.spelFormatReverse(H)),H===void 0&&i.errors.push("Operator ".concat(a," is not supported for value source ").concat(n)),H},z=function(i,s,c){if(s){var y=(0,L.getOperatorConfig)(i,s,c)||{},p=y.reversedOp,a=(0,L.getOperatorConfig)(i,p,c)||{},n=!1,m=y.spelOp||y.spelFormatOp,v=a.spelOp||a.spelFormatOp;if(!(!m&&!v)){if(!m&&v){n=!0;var N=[p,s];s=N[0],p=N[1];var G=[a,y];y=G[0],a=G[1]}return s}}},U=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=i.get("properties")||new M.Map,a=p.get("field"),n=p.get("operator");if(!(a==null||n==null)){var m=z(s,n,a);if(!m){c.errors.push("Operator ".concat(n," is not supported"));return}var v=m!=n,N=C(s,p,c,m,y,null),G=(0,l.default)(N,3),q=G[0],J=G[1],W=G[2];if(q!==void 0){var k=f(c,s,a,y),H=Z(c,s,p,k,q,m,J,W,v);return H}}},C=function(i,s,c,y,p){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,n=s.get("field"),m=s.get("valueSrc"),v=s.get("valueType");(a=="!case_value"||v&&v.get(0)=="case_value")&&(n="!case_value");var N=(0,L.getFieldConfig)(i,n)||{},G=(0,L.getOperatorConfig)(i,y,n)||{},q=(0,P.defaultValue)(G.cardinality,1),J=s.get("value"),W=s.get("asyncListValues"),k=[],H=[],_;if(J!=null){var ae=J.map(function(le,ue){var me=m?m.get(ue):null,pe=v?v.get(ue):null,Ee=(0,b.completeValue)(le,me,i),ge=(0,R.getWidgetForFieldOp)(i,n,y,me),Se=(0,I.default)((0,L.getFieldWidgetConfig)(i,n,y,ge,me),["factory"]),Ae=d(c,i,Ee,me,pe,Se,N,y,G,p,W);return Ae!==void 0&&(k.push(me),H.push(pe)),Ae}),oe=ae.filter(function(le){return le===void 0}).size>0;ae.size<q||oe||(_=q>1?ae.toArray():q==1?ae.first():null)}return[_,k.length>1?k:k[0],H.length>1?H:H[0]]},d=function(i,s,c,y,p,a,n,m,v){var N=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,G=arguments.length>10?arguments[10]:void 0;if(c!==void 0){var q;if(y=="field")q=f(i,s,c,N);else if(y=="func")q=g(i,s,c,N);else if(typeof a.spelFormatValue=="function"){var J=a.spelFormatValue,W=[c,F(F({},(0,A.default)(n,["fieldSettings","listValues"])),{},{asyncListValues:G}),(0,I.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(m&&(W.push(m),W.push(v)),y=="field"){var k=(0,L.getFieldConfig)(s,c)||{};W.push(k)}q=J.apply(void 0,W)}else q=(0,D.spelEscape)(c);return q}},f=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(c){var p=s.settings.fieldSeparator,a=(0,L.getFieldConfig)(s,c)||{},n=Array.isArray(c)?c:c.split(p),m=(0,R.getFieldPath)(c,s,y),v=(0,R.getFieldPartsConfigs)(c,s,y),N=s.settings.formatSpelField,G=(0,R.formatFieldName)(c,s,i);if(y){var q=(0,L.getFieldConfig)(s,y)||{},J=y;q.fieldName&&(J=q.fieldName),G.indexOf(J+p)==0?G=G.slice((J+p).length):i.errors.push("Can't cut group ".concat(J," from field ").concat(G))}var W=v.map(function(H){var _=(0,l.default)(H,3),ae=_[0],oe=_[1],le=_[2],ue;le&&(le.type=="!struct"||le.type=="!group"&&le.mode=="struct"?ue=oe.isSpelMap?"map":"class":le.type=="!group"?ue=oe.isSpelItemMap?"[map]":"[class]":ue="class");var me=oe?.isSpelVariable;return{key:ae,parent:ue,isSpelVariable:me}}),k=N(G,y,n,W,a,s);return k}},g=function(i,s,c){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=c.get("func"),a=c.get("args"),n=(0,L.getFuncConfig)(s,p),m=n.spelFunc||p,v={};for(var N in n.args){var G=n.args[N],q=(0,L.getFieldConfig)(s,G),J=a?a.get(N):void 0,W=J?J.get("value"):void 0,k=J?J.get("valueSrc"):void 0,H=J?J.get("asyncListValues"):void 0,_=d(i,s,W,k,G.type,q,G,null,null,y,H);if(W!=null&&_===void 0){i.errors.push("Can't format value of arg ".concat(N," for func ").concat(p));return}_!==void 0&&(v[N]=_)}var ae;if(typeof n.spelFormatFunc=="function"){var oe=n.spelFormatFunc,le=[v];ae=oe.apply(void 0,le)}else{var ue=Object.entries(v).map(function(ge){var Se=(0,l.default)(ge,2),Ae=Se[0],ye=Se[1];return ye});if(m[0]=="."&&ue.length){var me=(0,O.default)(ue),pe=me[0],Ee=me.slice(1);ae="".concat(pe).concat(m,"(").concat(Ee.join(", "),")")}else ae="".concat(m,"(").concat(ue.join(", "),")")}return ae}},96256:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.sqlFormat=u._sqlFormat=void 0;var O=r(e(74208)),S=r(e(43427)),l=e(6384),L=e(68710),R=r(e(58517)),I=r(e(75123)),A=e(99890),P=e(78683),E=e(31923),T=e(46202),b=e(15866),M=e(96108);function D(z,U){var C=Object.keys(z);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(z);U&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(z,f).enumerable})),C.push.apply(C,d)}return C}function j(z){for(var U=1;U<arguments.length;U++){var C=arguments[U]!=null?arguments[U]:{};U%2?D(Object(C),!0).forEach(function(d){(0,S.default)(z,d,C[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(C)):D(Object(C)).forEach(function(d){Object.defineProperty(z,d,Object.getOwnPropertyDescriptor(C,d))})}return z}var F=function(U,C){return $(U,C,!1)};u.sqlFormat=F;var $=function(U,C){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f={errors:[]},g=V(U,C,f);return d?[g,f.errors]:(f.errors.length&&console.warn("Errors while exporting to SQL:",f.errors),g)};u._sqlFormat=$;var V=function(U,C,d){if(U){var f=U.get("type"),g=U.get("children1");if((f==="group"||f==="rule_group")&&g&&g.size)return K(U,C,d);if(f==="rule")return B(U,C,d)}},K=function(U,C,d){var f=U.get("type"),g=U.get("properties")||new b.Map,o=U.get("children1"),i=f==="rule_group"?g.get("field"):null,s=(0,l.getFieldConfig)(C,i)||{};s.mode=="array"&&d.errors.push("Aggregation is not supported for ".concat(i));var c=g.get("not"),y=o.map(function(n){return V(n,C,d)}).filter(function(n){return typeof n<"u"});if(y.size){var p=g.get("conjunction");p||(p=(0,P.defaultConjunction)(C));var a=C.conjunctions[p];return a.sqlFormatConj(y,p,c)}},w=function(U,C){var d=C.sqlOp||U,f=(0,A.defaultValue)(C.cardinality,1),g;return f==0?g=function(i,s,c,y,p,a,n,m){return"".concat(i," ").concat(d)}:f==1?g=function(i,s,c,y,p,a,n,m){return"".concat(i," ").concat(d," ").concat(c)}:f==2&&(g=function(i,s,c,y,p,a,n,m){var v=c.first(),N=c.get(1);return"".concat(i," ").concat(d," ").concat(v," AND ").concat(N)}),g},B=function(U,C,d){var f=U.get("properties")||new b.Map,g=f.get("field"),o=f.get("operator"),i=f.get("operatorOptions"),s=f.get("valueSrc"),c=f.get("valueType"),y=f.get("value"),p=f.get("asyncListValues");if(!(g==null||o==null)){var a=(0,l.getFieldConfig)(C,g)||{},n=(0,l.getOperatorConfig)(C,o,g)||{},m=n.reversedOp,v=(0,l.getOperatorConfig)(C,m,g)||{},N=(0,A.defaultValue)(n.cardinality,1),G=!1,q=n.sqlOp||n.sqlFormatOp,J=v.sqlOp||v.sqlFormatOp;if(!q&&!J){d.errors.push("Operator ".concat(o," is not supported"));return}if(!J&&J){G=!0;var W=[m,o];o=W[0],m=W[1];var k=[v,n];n=k[0],v=k[1]}var H=[],_=[],ae=y.map(function(ge,Se){var Ae=s?s.get(Se):null,ye=c?c.get(Se):null,De=(0,T.completeValue)(ge,Ae,C),Fe=(0,L.getWidgetForFieldOp)(C,g,o,Ae),We=(0,R.default)((0,l.getFieldWidgetConfig)(C,g,o,Fe,Ae),["factory"]),Ke=Y(d,C,De,Ae,ye,We,a,o,n,p);return Ke!==void 0&&(H.push(Ae),_.push(ye)),Ke}),oe=ae.filter(function(ge){return ge===void 0}).size>0;if(!(oe||ae.size<N)){var le=N==1?ae.first():ae,ue=n.sqlFormatOp||w(o,n);if(!ue){d.errors.push("Operator ".concat(o," is not supported"));return}var me=X(d,C,g),pe=[me,o,le,H.length>1?H:H[0],_.length>1?_:_[0],(0,R.default)(n,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),i,a],Ee;if(Ee=ue.apply(void 0,pe),G&&(Ee=C.settings.sqlFormatReverse(Ee)),Ee===void 0){d.errors.push("Operator ".concat(o," is not supported for value source ").concat(H.join(", ")));return}return Ee}}},Y=function(U,C,d,f,g,o,i,s,c,y){if(d!==void 0){var p;if(f=="field")p=X(U,C,d);else if(f=="func")p=Z(U,C,d);else if(typeof o.sqlFormatValue=="function"){var a=o.sqlFormatValue,n=[d,j(j({},(0,I.default)(i,["fieldSettings","listValues"])),{},{asyncListValues:y}),(0,R.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(s&&(n.push(s),n.push(c)),f=="field"){var m=(0,l.getFieldConfig)(C,d)||{};n.push(m)}p=a.apply(void 0,n)}else Array.isArray(d)?p=d.map(function(v){return M.SqlString.escape(v)}):p=M.SqlString.escape(d);return p}},X=function(U,C,d){if(d){var f=C.settings.fieldSeparator,g=(0,l.getFieldConfig)(C,d)||{},o=Array.isArray(d)?d:d.split(f),i=(0,L.getFieldPath)(d,C),s=(0,L.getFieldPathLabels)(d,C),c=s?s.join(f):null,y=C.settings.formatField||E.settings.formatField,p=(0,L.formatFieldName)(d,C,U),a=y(p,o,c,g,C);return a}},Z=function(U,C,d){var f=d.get("func"),g=d.get("args"),o=(0,l.getFuncConfig)(C,f),i=o.sqlFunc||f,s={};for(var c in o.args){var y=o.args[c],p=(0,l.getFieldConfig)(C,y),a=g?g.get(c):void 0,n=a?a.get("value"):void 0,m=a?a.get("valueSrc"):void 0,v=a?a.get("asyncListValues"):void 0,N=Y(U,C,n,m,y.type,p,y,null,null,v);if(n!=null&&N===void 0){U.errors.push("Can't format value of arg ".concat(c," for func ").concat(f));return}N!==void 0&&(s[c]=N)}var G;if(typeof o.sqlFormatFunc=="function"){var q=o.sqlFormatFunc,J=[s];G=q.apply(void 0,J)}else{var W=Object.entries(s).map(function(k){var H=(0,O.default)(k,2),_=H[0],ae=H[1];return ae}).join(", ");G="".concat(i,"(").concat(W,")")}return G}},8813:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var r=e(81837);Object.keys(r).forEach(function(l){l==="default"||l==="__esModule"||l in u&&u[l]===r[l]||Object.defineProperty(u,l,{enumerable:!0,get:function(){return r[l]}})});var O=e(99702);Object.keys(O).forEach(function(l){l==="default"||l==="__esModule"||l in u&&u[l]===O[l]||Object.defineProperty(u,l,{enumerable:!0,get:function(){return O[l]}})});var S=e(21893);Object.keys(S).forEach(function(l){l==="default"||l==="__esModule"||l in u&&u[l]===S[l]||Object.defineProperty(u,l,{enumerable:!0,get:function(){return S[l]}})})},99702:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.loadFromJsonLogic=u._loadFromJsonLogic=void 0;var O=r(e(93502)),S=r(e(77495)),l=r(e(43427)),L=r(e(74208)),R=r(e(11117)),I=e(99890),A=e(6384),P=e(68710),E=e(81837),T=e(78683),b=r(e(79913));function M(o,i){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(y){return Object.getOwnPropertyDescriptor(o,y).enumerable})),s.push.apply(s,c)}return s}function D(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?M(Object(s),!0).forEach(function(c){(0,l.default)(o,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(s,c))})}return o}var j=function(i){return Array.from(new Set(i))},F=function(i){return i.reduce(function(s,c){var y=(0,L.default)(c,2),p=y[0],a=y[1];return D(D({},s),{},(0,l.default)({},p,a))},{})},$=function(i,s){return V(i,s,!1)};u.loadFromJsonLogic=$;var V=function(i,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y={errors:[]},p=(0,A.extendConfig)(s),a=K(p),n=i?w(i,a,p,"rule",y):void 0;n&&n.type!="group"&&(n=C(n,p));var m=n?(0,E.loadTree)(n):void 0;return c?[m,y.errors]:(y.errors.length&&console.warn("Errors while importing from JsonLogic:",y.errors),m)};u._loadFromJsonLogic=V;var K=function(i){var s={};for(var c in i.operators){var y=i.operators[c];if(typeof y.jsonLogic=="string"){var p=(y._jsonLogicIsRevArgs?"#":"")+y.jsonLogic+"/"+(0,I.defaultValue)(y.cardinality,1);s[p]||(s[p]=[]),s[p].push(c)}else if(typeof y.jsonLogic2=="string"){var a=y.jsonLogic2+"/"+(0,I.defaultValue)(y.cardinality,1);s[a]||(s[a]=[]),s[a].push(c)}}var n={};for(var m in i.conjunctions){var v=i.conjunctions[m],N=v.jsonLogicConj||m.toLowerCase();n[N]=m}var G={};for(var q in i.funcs){var J=i.funcs[q],W=void 0;J.jsonLogicIsMethod?W="#"+J.jsonLogic:typeof J.jsonLogic=="string"&&(W=J.jsonLogic),W&&(G[W]||(G[W]=[]),G[W].push(q))}var k=i.settings.jsonLogic,H=k.groupVarKey,_=k.altVarKey;return{operators:s,conjunctions:n,funcs:G,varKeys:["var",H,_]}},w=function o(i,s,c,y,p){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,n=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,v=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,N=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,G,q;(0,I.isJsonLogic)(i)&&(G=Object.keys(i)[0],q=i[G],Array.isArray(q)||(q=[q]));var J,W=p.errors.length,k=c.settings.jsonLogic.lockedOp,H=G=="!"&&q.length==1&&q[0]&&(0,I.isJsonLogic)(q[0])&&s.varKeys.includes(Object.keys(q[0])[0]),_=G=="!"&&!H,ae=k&&G==k;ae?J=o(q[0],s,c,y,p,a,n,m,v,!0):_?J=o(q[0],s,c,y,p,!a,n,m,v):y=="val"?J=Y(G,q,s,c,a,p,v)||X(G,q,s,c,a,n,p,v)||B(i,n,m,c,p):y=="rule"&&(J=Z(G,q,s,c,a,p,v,!1)||g(G,q,s,c,a,p,v));var oe=p.errors.length;return G!="!"&&J===void 0&&oe==W&&p.errors.push("Can't parse logic ".concat(JSON.stringify(i))),ae&&(J.properties.isLocked=!0),J},B=function(i,s,c,y,p){if(i!==void 0){var a=y.widgets[c||s.mainWidget];if(!a){p.errors.push("No widget for type ".concat(s.type));return}if((0,I.isJsonLogic)(i)){p.errors.push("Unexpected logic in value: ".concat(JSON.stringify(i)));return}if(s&&s.type=="time"&&typeof i=="number"){var n=Math.floor(i/60/60)%24,m=Math.floor(i/60)%60,v=i%60,N=a.valueFormat;if(N){var G=new Date(i);G.setMilliseconds(0),G.setHours(n),G.setMinutes(m),G.setSeconds(v),i=(0,b.default)(G).format(N)}else i="".concat(n,":").concat(m,":").concat(v)}if(s&&["date","datetime"].includes(s.type)&&i&&!(i instanceof Date))try{var q=new Date(i);q instanceof Date&&q.toISOString()===i&&(i=q)}catch{p.errors.push("Can't convert value ".concat(i," as Date")),i=void 0}if(i instanceof Date&&s){var J=a.valueFormat;J&&(i=(0,b.default)(i).format(J))}var W;if(i&&s.fieldSettings&&s.fieldSettings.asyncFetch){var k=Array.isArray(i)?i:[i];W=k}return{valueSrc:"value",value:i,valueType:a.type,asyncListValues:W}}},Y=function(i,s,c,y,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,m=y.settings.fieldSeparator;if(c.varKeys.includes(i)&&typeof s[0]=="string"){var v=s[0];n&&(v=[n,v].join(m)),v=(0,A.normalizeField)(y,v);var N=(0,A.getFieldConfig)(y,v);if(!N){a.errors.push("No config for field ".concat(v));return}return{valueSrc:"field",value:v,valueType:N.type}}},X=function(i,s,c,y,p,a,n){var m=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(i){var v,N,G,q=i=="method";if(q){var J,W,k=(0,S.default)(s);J=k[0],v=k[1],W=k.slice(2),N=[J].concat((0,O.default)(W))}else v=i,N=s;var H=(q?"#":"")+v,_=(c.funcs[H]||[]).filter(function(ye){return a?y.funcs[ye].returnType==a.type:!0});if(_.length)G=_[0];else for(var ae=(0,l.default)({},i,s),oe=0,le=Object.entries(y.funcs||{});oe<le.length;oe++){var ue=(0,L.default)(le[oe],2),me=ue[0],pe=ue[1];if(pe.jsonLogicImport&&pe.returnType==a.type){var Ee=void 0;try{Ee=pe.jsonLogicImport(ae)}catch{}Ee&&(G=me,N=Ee)}}if(G&&G){var ge=y.funcs[G],Se=Object.keys(ge.args||{}),Ae=N.reduce(function(ye,De,Fe){var We=Se[Fe],Ke=ge.args[We],_e=w(De,c,y,"val",n,!1,Ke,null,m);if(_e===void 0&&(_e=Ke.defaultValue,_e===void 0)){n.errors.push("No value for arg ".concat(We," of func ").concat(G));return}return D(D({},ye),{},(0,l.default)({},We,_e))},{});return{valueSrc:"func",value:{func:G,args:Ae},valueType:ge.returnType}}}},Z=function(i,s,c,y,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,m=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,v=c.conjunctions[i],N=y.settings.fieldSeparator,G=n?(0,A.getFieldConfig)(y,n):null,q=G?.type=="!group";if(v){var J="group",W=s.map(function(Ee){return w(Ee,c,y,"rule",a,!1,null,null,n)}).filter(function(Ee){return Ee!==void 0}).reduce(function(Ee,ge){return D(D({},Ee),{},(0,l.default)({},ge.id,ge))},{}),k=Object.values(W).map(function(Ee){var ge;return Ee==null||(ge=Ee.properties)===null||ge===void 0?void 0:ge.field}).filter(function(Ee){return Ee&&Ee.includes(N)}),H=Object.fromEntries(j(k).map(function(Ee){var ge=Ee.split(N),Se=Object.fromEntries(ge.slice(0,-1).map(function(Ae,ye,De){return[].concat((0,O.default)(De.slice(0,ye)),[Ae])}).map(function(Ae){return[Ae.join(N),(0,A.getFieldConfig)(y,Ae)]}).filter(function(Ae){var ye=(0,L.default)(Ae,2),De=ye[0],Fe=ye[1];return Fe.type=="!group"}));return[Ee,Object.keys(Se)]})),_=Object.values(W).map(function(Ee){var ge;return Ee==null||(ge=Ee.properties)===null||ge===void 0?void 0:ge.field}).map(function(Ee){return H[Ee]}).filter(function(Ee){return Ee&&Ee.length}),ae=j(Object.values(H).flat()),oe=z(ae),le={conjunction:v,not:p},ue=(0,R.default)(),me={},pe={};return Object.entries(W).map(function(Ee){var ge=(0,L.default)(Ee,2),Se=ge[0],Ae=ge[1];if(Ae.type=="group"||Ae.type=="rule_group")me[Se]=Ae;else{var ye,De=Ae==null||(ye=Ae.properties)===null||ye===void 0?void 0:ye.field,Fe=H[De],We=Fe?.at(-1);if(!We)me[Se]=Ae;else{var Ke=me,_e=n?n.split(N):[],He=(0,I.shallowEqual)(_e,We.split(N).slice(0,_e.length));He||(_e=[]);var at=We.split(N).slice(_e.length).map(function(ke,de,Ce){return[].concat((0,O.default)(_e),(0,O.default)(Ce.slice(0,de)),[ke]).join(N)}).map(function(ke){return(0,A.normalizeField)(y,ke)}).map(function(ke){return{f:ke,fc:(0,A.getFieldConfig)(y,ke)||{}}}).filter(function(ke){var de=ke.fc;return de.type!="!struct"});at.map(function(ke,de){var Ce=ke.f,Le=ke.fc,we=pe[Ce];we||(we=(0,R.default)(),pe[Ce]=we,Ke[we]={type:"rule_group",id:we,children1:{},properties:{conjunction:v,not:!1,field:Ce,mode:Le.mode}}),Ke=Ke[we].children1}),Ke[Se]=Ae}}}),{type:J,id:ue,children1:me,properties:le}}},z=function(i){for(var s=(0,O.default)(i).sort(function(p,a){return p.length-a.length}),c=0;c<s.length;c++)for(var y=c+1;y<s.length;y++)s[y].indexOf(s[c])==0&&(s.splice(y,1),y--);return s},U=function(i,s,c,y,p){if(i)return{type:"rule_group",id:(0,R.default)(),children1:(0,l.default)({},i.id,i),properties:{conjunction:p||(0,T.defaultGroupConjunction)(y,c),not:!1,field:s}}},C=function(i,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,R.default)(),children1:(0,l.default)({},i.id,i),properties:{conjunction:(0,T.defaultConjunction)(s),not:c}}},d=function(i,s,c,y,p,a,n){var m=[],v=f(i,s,c,y,p,a,m,!1)||f(i,s,c,y,p,a,m,!0);if(!v){n.errors.push(m.join("; ")||"Unknown op ".concat(i,"/").concat(s));return}return v},f=function(i,s,c,y,p,a,n,m){var v=(i=="all"||i=="some")&&(0,I.isJsonLogic)(c[1])&&Object.keys(c[1])[0]=="in",N=!v&&a.settings.groupOperators.includes(i),G=["==","!="],q=N?0:s-1;(N||G.includes(i)&&q==1&&c[1]===null)&&(q=0);var J=i+"/"+q,W=a.settings.fieldSeparator,k=p.operators[(m?"#":"")+J];if(k){var H,_=[],ae=["<","<=",">",">="];if(ae.includes(i)&&s==3)H=c[1],_=[c[0],c[2]];else if(m)H=c[1],_=[c[0]];else{var oe=(0,S.default)(c);H=oe[0],_=oe.slice(1)}if(!(0,I.isJsonLogic)(H)){n.push("Incorrect operands for ".concat(i,": ").concat(JSON.stringify(c)));return}var le=Object.keys(H)[0],ue=Object.values(H)[0],me,pe,Ee;if(p.varKeys.includes(le)&&typeof ue=="string"&&(me=ue),N&&(Ee=!0,pe=_[0],_=[]),le=="reduce"&&Array.isArray(ue)&&ue.length==3){var ge=ue,Se=(0,L.default)(ge,3),Ae=Se[0],ye=Se[1],De=Se[2];if((0,I.isJsonLogic)(Ae)&&De==0&&(0,I.isJsonLogic)(ye)&&Array.isArray(ye["+"])&&ye["+"][0]==1&&(0,I.isJsonLogic)(ye["+"][1])&&ye["+"][1].var=="accumulator")if(le=Object.keys(Ae)[0],ue=Object.values(Ae)[0],le=="filter"){var Fe=ue,We=(0,L.default)(Fe,2),Ke=We[0],_e=We[1];(0,I.isJsonLogic)(Ke)&&(le=Object.keys(Ke)[0],ue=Object.values(Ke)[0],p.varKeys.includes(le)&&typeof ue=="string"&&(me=ue,pe=_e,Ee=!0))}else p.varKeys.includes(le)&&typeof ue=="string"&&(me=ue,Ee=!0)}if(!me){n.push("Unknown field ".concat(JSON.stringify(H)));return}y&&(me=[y,me].join(W)),me=(0,A.normalizeField)(a,me);var He=(0,A.getFieldConfig)(a,me);if(!He){n.push("No config for field ".concat(me));return}var at=k[0];if(k.length>1&&He&&He.operators){if(k=k.filter(function(ke){return He.operators.includes(ke)}),k.length==0){n.push("No corresponding ops for field ".concat(me));return}at=k[0]}return{field:me,fieldConfig:He,opKey:at,args:_,having:pe}}},g=function o(i,s,c,y,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(i){var m=s.length;if((i=="all"||i=="some")&&(0,I.isJsonLogic)(s[1])){var v=Object.keys(s[1])[0];v=="in"&&(s=[s[0],s[1][v][1]],i=i+"-"+v)}var N=d(i,m,s,n,c,y,a);if(N){var G=N.field,q=N.fieldConfig,J=N.opKey,W=N.args,k=N.having,H=y.operators[J],_=q.showNot!==void 0?q.showNot:y.settings.showNot,ae=!0,oe,le;if(q.type=="!group"&&k){oe=Object.keys(k)[0],le=k[oe],Array.isArray(le)||(le=[le]);var ue=oe=="!"&&le.length==1&&le[0]&&(0,I.isJsonLogic)(le[0])&&c.varKeys.includes(Object.keys(le[0])[0]);oe=="!"&&!ue&&(p=!p,k=k["!"],oe=Object.keys(k)[0],le=k[oe],Array.isArray(le)||(le=[le]))}p&&ae&&H.reversedOp&&(p=!1,J=H.reversedOp,H=y.operators[J]);var me=(0,P.getWidgetForFieldOp)(y,G,J),pe=W.map(function(De){return w(De,c,y,"val",a,!1,q,me,n)});if(!pe.filter(function(De){return De===void 0}).length){var Ee;if(q.type=="!group"&&k){if(c.conjunctions[oe]!==void 0)Ee=Z(oe,le,c,y,p,a,G,!0),p=!1;else{var ge,Se=o(oe,le,c,y,p&&ae,a,G);p&&ae&&!(Se!=null&&(ge=Se.properties)!==null&&ge!==void 0&&ge.not)&&(p=!1),Ee=U(Se,G,q,y,c.conjunctions.and)}if(!Ee)return;Ee.type="rule_group",p&&Object.assign(Ee.properties,{not:p}),Object.assign(Ee.properties,{field:G,mode:q.mode,operator:J}),q.mode=="array"&&Object.assign(Ee.properties,{value:pe.map(function(De){return De.value}),valueSrc:pe.map(function(De){return De.valueSrc}),valueType:pe.map(function(De){return De.valueType})})}else if(q.type=="!group"&&!k)Ee={type:"rule_group",id:(0,R.default)(),children1:{},properties:{conjunction:(0,T.defaultGroupConjunction)(y,q),not:p,mode:q.mode,field:G,operator:J}},q.mode=="array"&&Object.assign(Ee.properties,{value:pe.map(function(De){return De.value}),valueSrc:pe.map(function(De){return De.valueSrc}),valueType:pe.map(function(De){return De.valueType})});else{var Ae=pe.map(function(De){return De.asyncListValues}).filter(function(De){return De!=null}),ye=Ae.length?Ae[0]:void 0;Ee={type:"rule",id:(0,R.default)(),properties:{field:G,operator:J,value:pe.map(function(De){return De.value}),valueSrc:pe.map(function(De){return De.valueSrc}),valueType:pe.map(function(De){return De.valueType}),asyncListValues:ye}},p&&(Ee=C(Ee,y,p))}return Ee}}}}},21893:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.loadFromSpel=u._loadFromSpel=void 0;var O=r(e(74208)),S=r(e(55629)),l=r(e(43427)),L=r(e(93502)),R=e(50590),I=r(e(11117)),A=e(6384),P=e(68710),E=e(81837),T=e(78683),b=e(99890),M=r(e(79913));function D(s,c){var y=Object.keys(s);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(s);c&&(p=p.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),y.push.apply(y,p)}return y}function j(s){for(var c=1;c<arguments.length;c++){var y=arguments[c]!=null?arguments[c]:{};c%2?D(Object(y),!0).forEach(function(p){(0,l.default)(s,p,y[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(y)):D(Object(y)).forEach(function(p){Object.defineProperty(s,p,Object.getOwnPropertyDescriptor(y,p))})}return s}var F=function(c,y){return $(c,y,!0)};u.loadFromSpel=F;var $=function(c,y){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a={errors:[]},n=(0,A.extendConfig)(y),m=w(n),v,N,G=void 0;try{var q=R.SpelExpressionEvaluator.compile(c);v=q._compiledExpression}catch(W){a.errors.push(W)}v&&(b.logger.debug("compiledExpression:",v),N=V(v,a),b.logger.debug("convertedObj:",N,a),G=U(N,m,n,a),G&&G.type!="group"&&G.type!="switch_group"&&(G=i(G,n,N.not)),b.logger.debug("jsTree:",G));var J=G?(0,E.loadTree)(G):void 0;return p?[J,a.errors]:(a.errors.length&&console.warn("Errors while importing from SpEL:",a.errors),J)};u._loadFromSpel=$;var V=function s(c,y){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=c.getType(),n=c.getChildren().map(function(ye){return s(ye,y,c)});if((a=="op-or"||a=="op-and")&&(n=n.reduce(function(ye,De){var Fe=De.type==a&&!De.not,We=Fe?De.children:[De];return[].concat((0,L.default)(ye),(0,L.default)(We))},[])),a=="op-not")return n.length!=1&&y.errors.push("Operator NOT should have 1 child, but got ".concat(n.length,"}")),j(j({},n[0]),{},{not:!n[0].not});if(a=="compound"){n=n.filter(function(ye){var De=ye.type=="selection"&&ye.children.length==1&&ye.children[0].type=="boolean"&&ye.children[0].val==!0;return!De});var m=n.find(function(ye){return ye.type=="selection"});m&&m.children.length!=1&&y.errors.push("Selection should have 1 child, but got ".concat(m.children.length));var v=m?m.children[0]:null,N=n[n.length-1],G=N.type=="method"&&N.val.methodName=="size"||N.type=="!func"&&N.methodName=="size",q=N.type=="property"&&N.val=="length",J=n.filter(function(ye){return ye!==m&&ye!==N}),W={type:"compound",children:J};if(G||q)return{type:"!aggr",filter:v,source:W};if(n=n.filter(function(ye){var De=ye.type=="variable"&&ye.val=="this",Fe=ye.type=="variable"&&ye.val=="root";return!(De||Fe)}),n=n.map(function(ye){return ye.type=="indexer"&&ye.children.length==1?{type:"indexer",val:ye.children[0].val,itype:ye.children[0].type}:ye}),N.type=="method"){var k=n.filter(function(ye){return ye!==N});return{type:"!func",obj:k,methodName:N.val.methodName,args:N.val.args}}if(N.type=="!func"){var H=n.filter(function(ye){return ye!==N});return j(j({},N),{},{obj:H})}}var _;try{c.getRaw?_=c.getRaw():c.getValue.length==0&&(_=c.getValue())}catch(ye){b.logger.error("[spel2js] Error in getValue()",ye)}if(a=="ternary"&&(_=K(n)),(0,S.default)(_)==="object"&&_!==null&&(_.methodName||_.functionName)&&(_.args=_.args.map(function(ye){return s(ye,y,c)})),a=="list"&&(_=_.map(function(ye){return s(ye,y,c)}),!p&&_.length==1))return _[0];if(a=="constructorref"){var ae=n.find(function(ye){return ye.type=="qualifiedidentifier"}),oe=ae?.val;if(!oe){y.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(n)));return}var le=n.filter(function(ye){return ye.type!="qualifiedidentifier"});return{type:"!new",cls:oe,args:le}}if(a=="typeref"){var ue=n.find(function(ye){return ye.type=="qualifiedidentifier"}),me=ue?.val;if(!me){y.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(n)));return}var pe=n.filter(function(ye){return ye.type!="qualifiedidentifier"});return{type:"!type",cls:me}}if(a=="function"||a=="method"){var Ee=_,ge=Ee.functionName,Se=Ee.methodName,Ae=Ee.args;return{type:"!func",methodName:ge||Se,isVar:a=="function",args:Ae}}return{type:a,children:n,val:_}},K=function(c){var y=[];function p(a){var n=(0,O.default)(a,3),m=n[0],v=n[1],N=n[2];y.push([m,v]),N?.type=="ternary"?p(N.children):y.push([void 0,N])}return p(c),y},w=function(c){var y={},p=function(H){var _=c.operators[H];if(_.spelOps)_.spelOps.forEach(function(oe){var le=oe;y[le]||(y[le]=[]),y[le].push(H)});else if(_.spelOp){var ae=_.spelOp;y[ae]||(y[ae]=[]),y[ae].push(H)}else b.logger.log("[spel] No spelOp for operator ".concat(H))};for(var a in c.operators)p(a);var n={};for(var m in c.conjunctions){var v=c.conjunctions[m],N=v.spelConj||m.toLowerCase();n[N]=m}var G={};for(var q in c.funcs){var J=c.funcs[q],W=void 0;typeof J.spelFunc=="string"&&(W=J.spelFunc),W&&(G[W]||(G[W]=[]),G[W].push(q))}return{operators:y,conjunctions:n,funcs:G}},B=function(c,y){var p=!1,a=c.map(function(n){if(n.type=="variable"||n.type=="property"||n.type=="indexer"&&n.itype=="string")return n.val;p=!0,y.errors.push("Unexpected item in compound: ".concat(JSON.stringify(n)))});return p?void 0:a},Y=function s(c,y,p,a,n){if(c!=null){var m=p.settings.fieldSeparator,v={number:"number",string:"text",boolean:"boolean",null:"null"},N=n!=null&&n._groupField?[n?._groupField]:[];if(c.type=="compound"){var G,q,J=B(c.children,a);if(!J)return;var W=[].concat(N,(0,L.default)(J)),k=((G=c.children)===null||G===void 0||(q=G[0])===null||q===void 0?void 0:q.type)=="variable";return{valueSrc:"field",isVariable:k,value:W.join(m)}}else if(c.type=="variable"||c.type=="property"){var H=[].concat(N,[c.val]),_=c.type=="variable";return{valueSrc:"field",isVariable:_,value:H.join(m)}}else if(v[c.type]){var ae=c.val,oe=v[c.type];return n!=null&&n.isUnary&&(ae=-ae),{valueSrc:"value",valueType:oe,value:ae}}else if(c.type=="list"){var le,ue=c.val.map(function(Pt){return s(Pt,y,p,a,c)}),me=ue.length?(le=ue[0])===null||le===void 0?void 0:le.valueType:null,pe=ue.map(function(Pt){return Pt?.value}),Ee="multiselect";return{valueSrc:"value",valueType:Ee,value:pe}}else if(c.type=="!func"){var ge,Se=c.obj,Ae=c.methodName,ye=c.args,De=c.isVar,Fe=(ge={},(0,l.default)(ge,".contains","like"),(0,l.default)(ge,".startsWith","starts_with"),(0,l.default)(ge,".endsWith","ends_with"),(0,l.default)(ge,"$contains","select_any_in"),(0,l.default)(ge,".equals","multiselect_equals"),(0,l.default)(ge,"CollectionUtils.containsAny()","multiselect_contains"),ge),We=ye.map(function(Pt){return s(Pt,y,p,a,j(j({},c),{},{_groupField:n?._groupField}))});if(Ae=="contains"&&Se&&Se[0].type=="list"){var Ke=Se.map(function(Pt){return s(Pt,y,p,a,c)});if(!(We.length==1&&We[0].valueSrc=="field")){a.errors.push("Expected arg to method ".concat(Ae," to be field but got: ").concat(JSON.stringify(We)));return}var _e=We[0].value;if(!(Ke.length==1&&Ke[0].valueType=="multiselect")){a.errors.push("Expected object of method ".concat(Ae," to be inline list but got: ").concat(JSON.stringify(Ke)));return}var He=Fe["$"+Ae],at=Ke[0];return X(p,a,_e,He,[at])}else if(Se&&Se[0].type=="property"&&Fe[Se[0].val+"."+Ae+"()"]){var ke=Fe[Se[0].val+"."+Ae+"()"],de=We[0].value,Ce=We.slice(1);return X(p,a,de,ke,Ce)}else if(Fe["."+Ae]){var Le=Fe["."+Ae],we=B(Se,a);if(we&&We.length==1){var Ue=[].concat(N,(0,L.default)(we)),Ge=Ue.join(m);return X(p,a,Ge,Le,We)}}else if(Ae=="parse"&&Se&&Se[0].type=="!new"&&Se[0].cls.at(-1)=="SimpleDateFormat"){var be=Se[0].args.map(function(Pt){return s(Pt,y,p,a,j(j({},c),{},{_groupField:n?._groupField}))});if(!(be.length==1&&be[0].valueType=="text")){a.errors.push("Expected args of ".concat(Se[0].cls.join("."),".").concat(Ae," to be 1 string but got: ").concat(JSON.stringify(be)));return}if(!(We.length==1&&We[0].valueType=="text")){a.errors.push("Expected args of ".concat(Se[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(We)));return}var $e=be[0].value,rt=We[0].value,it=$e.includes(" ")?"datetime":"date",Qe=null,ut=it,st=(0,A.getFieldConfig)(p,Qe),Je=p.widgets[ut||st?.mainWidget],vt=Je.valueFormat,gt=(0,M.default)(rt,M.default.ISO_8601),It=gt.isValid()?gt.format(vt):void 0;return{valueSrc:"value",valueType:it,value:It}}else if(Ae=="parse"&&Se&&Se[0].type=="!type"&&Se[0].cls.at(-1)=="LocalTime"){if(!(We.length==1&&We[0].valueType=="text")){a.errors.push("Expected args of ".concat(Se[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(We)));return}var Lt=We[0].value,lt="time",Rt=null,bt=lt,wt=(0,A.getFieldConfig)(p,Rt),zt=p.widgets[bt||wt?.mainWidget],ct=zt.valueFormat,Et=(0,M.default)(Lt,"HH:mm:ss"),Ct=Et.isValid()?Et.format(ct):void 0;return{valueSrc:"value",valueType:lt,value:Ct}}else a.errors.push("Unsupported method ".concat(Ae))}else{if(c.type=="op-plus"&&n?.type=="ternary")return f(c,y,p,a);a.errors.push("Can't convert arg of type ".concat(c.type))}}},X=function(c,y,p,a,n){if(!n.filter(function(W){return W===void 0}).length){var m=(0,A.getFieldConfig)(c,p);if(!m){y.errors.push("No config for field ".concat(p));return}var v=(0,P.getWidgetForFieldOp)(c,p,a),N=c.widgets[v||m.mainWidget],G=n.map(function(W){return W.asyncListValues}).filter(function(W){return W!=null}),q=G.length?G[0]:void 0,J={type:"rule",id:(0,I.default)(),properties:{field:p,operator:a,value:n.map(function(W){return W.value}),valueSrc:n.map(function(W){return W.valueSrc}),valueType:n.map(function(W){return W.valueSrc=="value"&&(N?.type||m?.type)||W.valueType}),asyncListValues:q}};return J}},Z=function(c,y,p,a,n){var m=c.groupFilter,v=c.groupFieldValue;if(v.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(v));var N=v.value,G=X(a,n,N,y,p);if(G){var q=(0,A.getFieldConfig)(a,N),J=q?.mode,W=j(j({},m||{}),{},{type:"rule_group",properties:j(j(j({},G.properties),m?.properties||{}),{},{mode:J})});return W.id||(W.id=(0,I.default)()),W}},z=function(c,y,p,a,n,m){var v=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(c.type==y.type)if(c.type=="!aggr"){var N=[c.source,y.source].map(function(ae){return Y(ae,a,n,m,j(j({},p),{},{_groupField:v?._groupField}))}),G=(0,O.default)(N,2),q=G[0],J=G[1];return q.value==J.value}else{var W=[c,y].map(function(ae){return Y(ae,a,n,m,j(j({},p),{},{_groupField:v?._groupField}))}),k=(0,O.default)(W,2),H=k[0],_=k[1];return H.value==_.value}return!1},U=function s(c,y,p,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(c){var m;if(c.type.indexOf("op-")==0){var v=c.type.slice(3),N=(v=="minus"||v=="plus")&&c.children.length==1;if(N)return c.isUnary=!0,s(c.children[0],y,p,a,c);var G=v=="and"&&c.children.length==2&&c.children[0].type=="op-ge"&&c.children[1].type=="op-le",q=v=="or"&&c.children.length==2&&c.children[0].type=="op-lt"&&c.children[1].type=="op-gt",J=G||q;if(J){var W=(0,O.default)(c.children[0].children,2),k=W[0],H=W[1],_=(0,O.default)(c.children[1].children,2),ae=_[0],oe=_[1],le=H.type=="number"&&oe.type=="number",ue=z(k,ae,c,y,p,a,n);if(le&&ue){var me=H.val,pe=oe.val,Ee={type:"op-between",children:[k,H,oe]};return s(Ee,y,p,a,n)}}var ge=y.operators[v],Se;v=="eq"&&c.children[1].type=="null"?Se="is_null":v=="ne"&&c.children[1].type=="null"?Se="is_not_null":v=="le"&&c.children[1].type=="string"&&c.children[1].val==""?(Se="is_empty",ge=["is_empty"]):v=="gt"&&c.children[1].type=="string"&&c.children[1].val==""?(Se="is_not_empty",ge=["is_not_empty"]):v=="between"&&(Se="between",ge=["between"]);var Ae=function(){return c.children.map(function($e){return s($e,y,p,a,j(j({},c),{},{_groupField:n?._groupField}))})};if(v=="and"||v=="or"){var ye={},De=Ae();De.forEach(function(be){if(be){var $e=(0,I.default)();be.id=$e,be.type!=null?ye[$e]=be:a.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(be)))}}),m={type:"group",id:(0,I.default)(),children1:ye,properties:{conjunction:y.conjunctions[v],not:c.not}}}else if(ge){var Fe=Ae(),We=Fe[0],Ke=Fe.slice(1);if(Se=ge[0],We)if(We.groupFieldValue){We.groupFieldValue.valueSrc!="field"&&a.errors.push("Expected group field ".concat(JSON.stringify(We)));var _e=We.groupFieldValue.value,He=Ke[0];He&&He.groupFieldValue&&He.groupFieldValue.valueSrc=="field"&&He.groupFieldValue.value==_e?(Se="all",Ke=[]):Se=="equal"&&He.valueSrc=="value"&&He.valueType=="number"&&He.value==0?(Se="none",Ke=[]):Se=="greater"&&He.valueSrc=="value"&&He.valueType=="number"&&He.value==0&&(Se="some",Ke=[]),m=Z(We,Se,Ke,p,a)}else{We.valueSrc!="field"&&a.errors.push("Expected field ".concat(JSON.stringify(We)));var at=We.value;if(ge.length>1){b.logger.warn("[spel] Spel operator ".concat(v," can be mapped to ").concat(ge));var ke=ge.map(function(be){return{op:be,widget:(0,P.getWidgetForFieldOp)(p,at,be)}});if(v=="eq"||v=="ne"){var de=ke.find(function(be){var $e=be.op,rt=be.widget;return rt&&rt!="field"});Se=de.op}}m=X(p,a,at,Se,Ke)}}else n||(m=C(c,y,p,a)),m||a.errors.push("Can't convert op ".concat(v))}else if(c.type=="!aggr"){var Ce,Le=s(c.source,y,p,a,j(j({},c),{},{_groupField:n?._groupField})),we=s(c.filter,y,p,a,j(j({},c),{},{_groupField:Le?.value}));((Ce=we)===null||Ce===void 0?void 0:Ce.type)=="rule"&&(we=i(we,p)),m={groupFilter:we,groupFieldValue:Le},n||(m=void 0,a.errors.push("Unexpected !aggr in root"))}else if(c.type=="ternary"){var Ue={};c.val.forEach(function(be){var $e=(0,O.default)(be,2),rt=$e[0],it=$e[1],Qe=d(rt,it,y,p,a,c);Qe&&(Ue[Qe.id]=Qe)}),m={type:"switch_group",id:(0,I.default)(),children1:Ue,properties:{}}}else if(m=Y(c,y,p,a,n),m&&!m.type&&!n){var Ge=C(c,y,p,a);Ge?m=Ge:(m=void 0,a.errors.push("Can't convert rule of type ".concat(c.type,", it looks like var/literal")))}return m}},C=function(c,y,p,a){var n={},m=null,v=d(m,c,y,p,a);v&&(n[v.id]=v);var N={type:"switch_group",id:(0,I.default)(),children1:n,properties:{}};return N},d=function(c,y,p,a,n){var m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,v=g(a,n,p,y,m),N;return c?(N=U(c,p,a,n,m),N&&N.type?(N.type!="group"&&(N=i(N,a)),N.type="case_group"):(n.errors.push("Unexpected case: ".concat(JSON.stringify(N))),N=void 0)):N={id:(0,I.default)(),type:"case_group",properties:{}},N&&(N.properties=j(j({},N.properties),v)),N},f=function(c,y,p,a){var n=[];function m(v){v.map(function(N){if(N.type=="op-plus")m(N.children);else{var G=Y(N,y,p,a,c);G?n.push(G):a.errors.push("Can't convert ".concat(N.type," in concatenation"))}})}return m(c.children),{valueSrc:"value",valueType:"case_value",value:n}},g=function(c,y,p,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,m={},v;a?.type=="op-plus"?v=f(a,p,c,y):v=Y(a,p,c,y,n);var N=c.widgets.case_value,G=N?.spelImportValue;if(G){var q=G(v),J=(0,O.default)(q,2),W=J[0],k=J[1];k.map(function(H){return y.errors.push(H)}),W&&(m={value:[W],valueSrc:["value"],valueType:["case_value"]})}else y.errors.push("No fucntion to import case value");return m},o=function(c,y,p,a,n){if(c)return{type:"rule_group",id:(0,I.default)(),children1:(0,l.default)({},c.id,c),properties:{conjunction:n||(0,T.defaultGroupConjunction)(a,p),not:!1,field:y}}},i=function(c,y){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,I.default)(),children1:(0,l.default)({},c.id,c),properties:{conjunction:(0,T.defaultConjunction)(y),not:p||!1}}}},81837:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.isImmutableTree=u.getTree=u.checkTree=void 0,Object.defineProperty(u,"isJsonLogic",{enumerable:!0,get:function(){return A.isJsonLogic}}),u.loadTree=u.isValidTree=u.isTree=void 0;var S=r(e(55629)),l=E(e(15866)),L=e(53931),R=e(6384),I=e(50679),A=e(99890);function P(V){if(typeof WeakMap!="function")return null;var K=new WeakMap,w=new WeakMap;return(P=function(Y){return Y?w:K})(V)}function E(V,K){if(!K&&V&&V.__esModule)return V;if(V===null||O(V)!=="object"&&typeof V!="function")return{default:V};var w=P(K);if(w&&w.has(V))return w.get(V);var B={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in V)if(X!=="default"&&Object.prototype.hasOwnProperty.call(V,X)){var Z=Y?Object.getOwnPropertyDescriptor(V,X):null;Z&&(Z.get||Z.set)?Object.defineProperty(B,X,Z):B[X]=V[X]}return B.default=V,w&&w.set(V,B),B}var T=function(K){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(K){var Y=K;return Y=Y.toJS(),w&&(Y=(0,I.getLightTree)(Y,B)),Y}};u.getTree=T;var b=function(K){if(j(K))return K;if(F(K))return $(K);if(typeof K=="string"&&K.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof K=="string")return $(JSON.parse(K));throw"Can't load tree!"};u.loadTree=b;var M=function(K,w){if(K){var B=(0,R.extendConfig)(w);return(0,L.validateTree)(K,null,B,B)}};u.checkTree=M;var D=function(K){return(0,I.getTreeBadFields)(K).length==0};u.isValidTree=D;var j=function(K){return l.Map.isMap(K)};u.isImmutableTree=j;var F=function(K){return(0,S.default)(K)=="object"&&(K.type=="group"||K.type=="switch_group")};u.isTree=F;function $(V){return(0,l.fromJS)(V,function(K,w){var B;if(K=="properties"){B=w.toOrderedMap();for(var Y=0;Y<2;Y++){var X;((X=B.get("value"))===null||X===void 0?void 0:X.get(Y))===null&&(B=B.setIn(["value",Y],void 0))}}else if(K=="value"&&w.get(0)&&w.get(0).toJS!==void 0){var Z=w.get(0).toJS();Z.func?B=w.toOrderedMap():B=l.default.List.of(Z)}else K=="asyncListValues"?B=w.toJS():K=="children1"&&l.default.Iterable.isIndexed(w)?B=new l.default.OrderedMap(w.map(function(z){return[z.get("id"),z]})):B=l.default.Iterable.isIndexed(w)?w.toList():w.toOrderedMap();return B})}},94313:(re,u,e)=>{"use strict";var r,O=e(86593),S=e(55629);r={value:!0},Object.defineProperty(u,"I4",{enumerable:!0,get:function(){return M.default}}),r=void 0,Object.defineProperty(u,"Ib",{enumerable:!0,get:function(){return R.default}}),r=r=r=void 0,Object.defineProperty(u,"AE",{enumerable:!0,get:function(){return L.default}}),r=u.cQ=void 0;var l=O(e(43427)),L=O(e(65269)),R=O(e(10559)),I=j(e(89419));r=I;var A=j(e(8813));r=A;var P=j(e(5806));r=P;var E=j(e(45761));r=E;var T=j(e(50603)),b=j(e(60580));r=b;var M=O(e(20725));function D(K){if(typeof WeakMap!="function")return null;var w=new WeakMap,B=new WeakMap;return(D=function(X){return X?B:w})(K)}function j(K,w){if(!w&&K&&K.__esModule)return K;if(K===null||S(K)!=="object"&&typeof K!="function")return{default:K};var B=D(w);if(B&&B.has(K))return B.get(K);var Y={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in K)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(K,Z)){var z=X?Object.getOwnPropertyDescriptor(K,Z):null;z&&(z.get||z.set)?Object.defineProperty(Y,Z,z):Y[Z]=K[Z]}return Y.default=K,B&&B.set(K,Y),Y}function F(K,w){var B=Object.keys(K);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(K);w&&(Y=Y.filter(function(X){return Object.getOwnPropertyDescriptor(K,X).enumerable})),B.push.apply(B,Y)}return B}function $(K){for(var w=1;w<arguments.length;w++){var B=arguments[w]!=null?arguments[w]:{};w%2?F(Object(B),!0).forEach(function(Y){(0,l.default)(K,Y,B[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(B)):F(Object(B)).forEach(function(Y){Object.defineProperty(K,Y,Object.getOwnPropertyDescriptor(B,Y))})}return K}var V=$($($({},T),I),A);u.cQ=V},49641:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var O=r(e(27702)),S=O.default.createContext();u.default=S},68081:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var S=r(e(74208)),l=r(e(43427)),L=r(e(15866)),R=e(50679),I=e(78683),A=$(e(87033)),P=r(e(11117)),E=e(6384),T=e(68710),b=e(99890),M=e(53931),D=r(e(58517)),j=r(e(46729));function F(J){if(typeof WeakMap!="function")return null;var W=new WeakMap,k=new WeakMap;return(F=function(_){return _?k:W})(J)}function $(J,W){if(!W&&J&&J.__esModule)return J;if(J===null||O(J)!=="object"&&typeof J!="function")return{default:J};var k=F(W);if(k&&k.has(J))return k.get(J);var H={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in J)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(J,ae)){var oe=_?Object.getOwnPropertyDescriptor(J,ae):null;oe&&(oe.get||oe.set)?Object.defineProperty(H,ae,oe):H[ae]=J[ae]}return H.default=J,k&&k.set(J,H),H}function V(J,W){var k=typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(!k){if(Array.isArray(J)||(k=K(J))||W&&J&&typeof J.length=="number"){k&&(J=k);var H=0,_=function(){};return{s:_,n:function(){return H>=J.length?{done:!0}:{done:!1,value:J[H++]}},e:function(me){throw me},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,oe=!1,le;return{s:function(){k=k.call(J)},n:function(){var me=k.next();return ae=me.done,me},e:function(me){oe=!0,le=me},f:function(){try{!ae&&k.return!=null&&k.return()}finally{if(oe)throw le}}}}function K(J,W){if(J){if(typeof J=="string")return w(J,W);var k=Object.prototype.toString.call(J).slice(8,-1);if(k==="Object"&&J.constructor&&(k=J.constructor.name),k==="Map"||k==="Set")return Array.from(J);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return w(J,W)}}function w(J,W){(W==null||W>J.length)&&(W=J.length);for(var k=0,H=new Array(W);k<W;k++)H[k]=J[k];return H}function B(J,W){var k=Object.keys(J);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(J);W&&(H=H.filter(function(_){return Object.getOwnPropertyDescriptor(J,_).enumerable})),k.push.apply(k,H)}return k}function Y(J){for(var W=1;W<arguments.length;W++){var k=arguments[W]!=null?arguments[W]:{};W%2?B(Object(k),!0).forEach(function(H){(0,l.default)(J,H,k[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(k)):B(Object(k)).forEach(function(H){Object.defineProperty(J,H,Object.getOwnPropertyDescriptor(k,H))})}return J}var X=function(W,k,H,_,ae,oe){var le=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,ue=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},me=oe.settings.shouldCreateEmptyGroup,pe=k.push(_),Ee=!me,ge=!!(ue!=null&&ue.isDefaultCase),Se=W;return W=g(W,k,H,_,(0,I.defaultGroupProperties)(oe).merge(ae||{}),oe,le),W!==Se&&(!le&&!ge&&(W=W.setIn((0,R.expandTreePath)(pe,"children1"),new L.default.OrderedMap),Ee&&(W=g(W,pe,"rule",(0,P.default)(),(0,I.defaultRuleProperties)(oe),oe))),W=(0,R.fixPathsInTree)(W)),W},Z=function(W,k,H){W=o(W,k);var _=H.settings.canLeaveEmptyGroup,ae=k.slice(0,-1),oe=!(0,R.hasChildren)(W,ae);return oe&&!_&&(W=(0,R.fixEmptyGroupsInTree)(W),(0,R.isEmptyTree)(W)&&!_&&(W=g(W,new L.default.List,"rule",(0,P.default)(),(0,I.defaultRuleProperties)(H),H))),W=(0,R.fixPathsInTree)(W),W},z=function(W,k,H){W=o(W,k);var _=H.settings.canLeaveEmptyGroup,ae=k.pop(),oe=W.getIn((0,R.expandTreePath)(ae)),le=oe.getIn(["properties","field"]),ue=oe.getIn(["properties","operator"]),me=oe.getIn(["properties","value",0]),pe=le?(0,E.getFieldConfig)(H,le):null,Ee=ue?(0,E.getOperatorConfig)(H,ue,le):null,ge=le&&ue&&Ee.cardinality!=0,Se=oe.get("type")=="rule_group",Ae=!(0,R.hasChildren)(W,ae),ye=Se?ge&&pe.initialEmptyWhere:_;return Ae&&!ye&&(Se&&(W=W.deleteIn((0,R.expandTreePath)(ae))),W=(0,R.fixEmptyGroupsInTree)(W),(0,R.isEmptyTree)(W)&&!_&&(W=g(W,new L.default.List,"rule",(0,P.default)(),(0,I.defaultRuleProperties)(H),H))),W=(0,R.fixPathsInTree)(W),W},U=function(W,k,H){return W.setIn((0,R.expandTreePath)(k,"properties","not"),H)},C=function(W,k,H){return(0,R.removeIsLockedInTree)(W.setIn((0,R.expandTreePath)(k,"properties","isLocked"),H))},d=function(W,k,H){return W.setIn((0,R.expandTreePath)(k,"properties","conjunction"),H)},f=function J(W,k,H){H&&Array.isArray(H)&&(k.children1=new L.default.OrderedMap(H.reduce(function(_,ae){var oe=(0,P.default)(),le=Y(Y({},ae),{},{properties:(0,I.defaultItemProperties)(W,ae).merge(ae.properties||{}),id:oe});return J(W,le,le.children1),Y(Y({},_),{},(0,l.default)({},oe,new L.default.Map(le)))},{})))},g=function(W,k,H,_,ae,oe){var le=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(H=="switch_group")throw new Error("Can't add switch_group programmatically");var ue=oe.settings,me=ue.maxNumberOfCases,pe=ue.maxNumberOfRules,Ee=ue.maxNesting,ge=W.get("type"),Se=ge=="switch_group",Ae=W.getIn((0,R.expandTreePath)(k)),ye=Se?W.getIn((0,R.expandTreePath)(k.take(2))):null,De=(0,R.expandTreePath)(k,"children1"),Fe=W.getIn(De),We=!!Fe&&Fe.size,Ke=We?Fe.size:null,_e,He;H=="case_group"?(_e=Ke,He=me):H=="group"?(_e=k.size,He=Ee):Ae?.get("type")=="rule_group"||(_e=Se?(0,R.getTotalRulesCountInTree)(ye):(0,R.getTotalRulesCountInTree)(W),He=pe);var at=He&&_e?_e<He:!0,ke={type:H,id:_,properties:ae};f(oe,ke,le);var de=H=="case_group"&&We&&Fe.last().get("children1")==null;if(at){var Ce=new L.default.OrderedMap((0,l.default)({},_,new L.default.Map(ke)));if(!We)W=W.setIn(De,Ce);else if(de){var Le,we=Fe.last(),Ue=new L.default.OrderedMap((Le={},(0,l.default)(Le,_,new L.default.Map(ke)),(0,l.default)(Le,we.get("id"),we),Le));W=W.deleteIn((0,R.expandTreePath)(De,"children1",we.get("id"))),W=W.mergeIn(De,Ue)}else W=W.mergeIn(De,Ce);W=(0,R.fixPathsInTree)(W)}return W},o=function(W,k){return W=W.deleteIn((0,R.expandTreePath)(k)),W=(0,R.fixPathsInTree)(W),W},i=function(W,k,H,_,ae){var oe=(0,R.getItemByPath)(W,k),le=k.pop(),ue=k.size>1?(0,R.getItemByPath)(W,le):null,me=ue?ue.get("children1"):null,pe=(0,R.getItemByPath)(W,H),Ee=_==A.PLACEMENT_APPEND||_==A.PLACEMENT_PREPEND?H:H.pop(),ge=_==A.PLACEMENT_APPEND||_==A.PLACEMENT_PREPEND?pe:H.size>1?(0,R.getItemByPath)(W,Ee):null,Se=ge?ge.get("children1"):null;if(!ue||!ge||!oe)return W;var Ae=ue.get("id")==ge.get("id"),ye=Ee.size<le.size&&(0,b.deepEqual)(Ee.toArray(),le.toArray().slice(0,Ee.size)),De=Ee.size>le.size&&(0,b.deepEqual)(le.toArray(),Ee.toArray().slice(0,le.size)),Fe=null,We=null;ye?Fe=L.default.List(le.toArray().slice(Ee.size)):De&&(We=L.default.List(Ee.toArray().slice(le.size)));var Ke=Se,_e=me;return De||(_e=_e.delete(oe.get("id"))),Ae?Ke=_e:ye&&(Ke=Ke.updateIn((0,R.expandTreeSubpath)(Fe,"children1"),function(He){return _e})),_==A.PLACEMENT_BEFORE||_==A.PLACEMENT_AFTER?Ke=L.default.OrderedMap().withMutations(function(He){var at=V(Ke.entries()),ke;try{for(at.s();!(ke=at.n()).done;){var de=(0,S.default)(ke.value,2),Ce=de[0],Le=de[1];Ce==pe.get("id")&&_==A.PLACEMENT_BEFORE&&He.set(oe.get("id"),oe),He.set(Ce,Le),Ce==pe.get("id")&&_==A.PLACEMENT_AFTER&&He.set(oe.get("id"),oe)}}catch(we){at.e(we)}finally{at.f()}}):_==A.PLACEMENT_APPEND?Ke=Ke.merge((0,l.default)({},oe.get("id"),oe)):_==A.PLACEMENT_PREPEND&&(Ke=L.default.OrderedMap((0,l.default)({},oe.get("id"),oe)).merge(Ke)),De&&(_e=_e.updateIn((0,R.expandTreeSubpath)(We,"children1"),function(He){return Ke}),_e=_e.delete(oe.get("id"))),!Ae&&!ye&&(W=W.updateIn((0,R.expandTreePath)(le,"children1"),function(He){return _e})),De||(W=W.updateIn((0,R.expandTreePath)(Ee,"children1"),function(He){return Ke})),W=(0,R.fixPathsInTree)(W),W},s=function(W,k,H,_){if(!H)return o(W,k);var ae=_.settings,oe=ae.fieldSeparator,le=ae.setOpOnChangeField,ue=ae.showErrorMessage;Array.isArray(H)&&(H=H.join(oe));var me=W.getIn((0,R.expandTreePath)(k,"type")),pe=W.getIn((0,R.expandTreePath)(k,"properties")),Ee=me=="rule_group",ge=(0,E.getFieldConfig)(_,H),Se=ge.type=="!group",Ae=Se&&ge.mode=="array",ye=Ee!=Se,De=pe.get("operator"),Fe=pe.get("operatorOptions"),We=pe.get("field"),Ke=pe.get("value"),_e=pe.get("valueSrc",new L.default.List),He=pe.get("valueType",new L.default.List),at=ge&&ge.operators.indexOf(De)!==-1?De:null,ke=null,de=(0,T.getOperatorsForField)(_,H);if(de&&de.length==1)ke=de[0];else if(de&&de.length>1){var Ce=V(le||[]),Le;try{for(Ce.s();!(Le=Ce.n()).done;){var we=Le.value;if(we=="keep"&&!ye?ke=at:we=="default"?ke=(0,I.defaultOperator)(_,H,!1):we=="first"&&(ke=(0,T.getFirstOperator)(_,H)),ke)break}}catch(ut){Ce.e(ut)}finally{Ce.f()}}if(!Se&&!ge.operators)return console.warn("Type ".concat(ge.type," is not supported")),W;if(Ee&&!Se&&(W=W.setIn((0,R.expandTreePath)(k,"type"),"rule"),W=W.deleteIn((0,R.expandTreePath)(k,"children1")),W=W.setIn((0,R.expandTreePath)(k,"properties"),new L.default.OrderedMap)),Se){W=W.setIn((0,R.expandTreePath)(k,"type"),"rule_group");var Ue=(0,T.getNewValueForFieldOp)(_,_,pe,H,ke,"field",!0),Ge=Ue.canReuseValue,be=Ue.newValue,$e=Ue.newValueSrc,rt=Ue.newValueType,it=Ue.operatorCardinality,Qe=(0,I.defaultGroupProperties)(_,ge).merge({field:H,mode:ge.mode});return Ae&&(Qe=Qe.merge({operator:ke,value:be,valueSrc:$e,valueType:rt})),W=W.setIn((0,R.expandTreePath)(k,"children1"),new L.default.OrderedMap),W=W.setIn((0,R.expandTreePath)(k,"properties"),Qe),ge.initialEmptyWhere&&it==1||(W=g(W,k,"rule",(0,P.default)(),(0,I.defaultRuleProperties)(_,H),_)),W=(0,R.fixPathsInTree)(W),W}return W.updateIn((0,R.expandTreePath)(k,"properties"),function(ut){return ut.withMutations(function(st){var Je=(0,T.getNewValueForFieldOp)(_,_,st,H,ke,"field",!0),vt=Je.canReuseValue,gt=Je.newValue,It=Je.newValueSrc,Lt=Je.newValueType,lt=Je.newValueError;ue&&(st=st.set("valueError",lt));var Rt=vt?Fe:(0,I.defaultOperatorOptions)(_,ke,H);return st.set("field",H).set("operator",ke).set("operatorOptions",Rt).set("value",gt).set("valueSrc",It).set("valueType",Lt).delete("asyncListValues")})})},c=function(W,k,H,_){var ae=_.settings.showErrorMessage,oe=W.getIn((0,R.expandTreePath)(k,"properties")),le=W.getIn((0,R.expandTreePath)(k,"children1")),ue=oe.get("field"),me=(0,E.getFieldConfig)(_,ue),pe=me.type=="!group",Ee=(0,E.getOperatorConfig)(_,H,ue),ge=Ee?(0,b.defaultValue)(Ee.cardinality,1):null;return W=W.updateIn((0,R.expandTreePath)(k,"properties"),function(Se){return Se.withMutations(function(Ae){var ye=Ae.get("field"),De=Ae.get("operatorOptions"),Fe=Ae.get("value",new L.default.List),We=Ae.get("valueSrc",new L.default.List),Ke=Ae.get("operator"),_e=(0,T.getNewValueForFieldOp)(_,_,Ae,ye,H,"operator",!0),He=_e.canReuseValue,at=_e.newValue,ke=_e.newValueSrc,de=_e.newValueType,Ce=_e.newValueError;ae&&(Ae=Ae.set("valueError",Ce));var Le=He?De:(0,I.defaultOperatorOptions)(_,H,ye);return He||(Ae=Ae.delete("asyncListValues")),Ae.set("operator",H).set("operatorOptions",Le).set("value",at).set("valueSrc",ke).set("valueType",de)})}),pe&&ge==0&&le.size==0&&(W=g(W,k,"rule",(0,P.default)(),(0,I.defaultRuleProperties)(_,ue),_)),W},y=function(W,k,H,_,ae,oe,le,ue){var me=oe.settings,pe=me.fieldSeparator,Ee=me.showErrorMessage,ge,Se=W.getIn((0,R.expandTreePath)(k,"properties","valueSrc",H+""))||null;Se==="field"&&Array.isArray(_)&&(_=_.join(pe));var Ae=W.getIn((0,R.expandTreePath)(k,"properties","field"))||null,ye=W.getIn((0,R.expandTreePath)(k,"properties","operator"))||null,De=(0,E.getOperatorConfig)(oe,ye,Ae),Fe=ye?(0,b.defaultValue)(De.cardinality,1):null,We=!1,Ke=ae||m(_,Se,oe),_e=!1,He=(0,M.validateValue)(oe,Ae,Ae,ye,_,Ke,Se,le,_e,We),at=(0,S.default)(He,2),ke=at[0],de=at[1],Ce=!ke;if(de!==_&&(_=de),Ee){var Le=(0,T.getWidgetForFieldOp)(oe,Ae,ye,Se),we=(0,E.getFieldWidgetConfig)(oe,Ae,ye,Le,Se),Ue=Array.from({length:Fe},function(Je,vt){return W.getIn((0,R.expandTreePath)(k,"properties","valueSrc",vt+""))||null});if(De&&De.validateValues&&Ue.filter(function(Je){return Je=="value"||Je==null}).length==Fe){var Ge=Array.from({length:Fe},function(Je,vt){return vt==H?_:W.getIn((0,R.expandTreePath)(k,"properties","value",vt+""))||null}),be=we&&we.toJS?Ge.map(function(Je){return we.toJS(Je,we)}):Ge,$e=De.validateValues(be);W=W.setIn((0,R.expandTreePath)(k,"properties","valueError",Fe),$e)}}var rt=W.getIn((0,R.expandTreePath)(k,"properties","value"));rt||(W=W.setIn((0,R.expandTreePath)(k,"properties","value"),new L.default.List(new Array(Fe))).setIn((0,R.expandTreePath)(k,"properties","valueType"),new L.default.List(new Array(Fe))).setIn((0,R.expandTreePath)(k,"properties","valueError"),new L.default.List(new Array(Fe))));var it=W.getIn((0,R.expandTreePath)(k,"properties","value",H+"")),Qe=W.getIn((0,R.expandTreePath)(k,"properties","valueError",H)),ut=it==null,st=!!Qe;return(Ce||Ee)&&(W=W.deleteIn((0,R.expandTreePath)(k,"properties","asyncListValues")),typeof _>"u"?(W=W.setIn((0,R.expandTreePath)(k,"properties","value",H+""),void 0),W=W.setIn((0,R.expandTreePath)(k,"properties","valueType",H+""),null)):(le&&(W=W.setIn((0,R.expandTreePath)(k,"properties","asyncListValues"),le)),W=W.setIn((0,R.expandTreePath)(k,"properties","value",H+""),_),W=W.setIn((0,R.expandTreePath)(k,"properties","valueType",H+""),Ke),ge=ue&&!ut&&!st)),Ee&&(W=W.setIn((0,R.expandTreePath)(k,"properties","valueError",H),ke)),ue&&(Ce&&st||!Ce&&!st)&&(W=W.setIn((0,R.expandTreePath)(k,"properties","valueError",H),ke),ge=!1),{tree:W,isInternalValueChange:ge}},p=function(W,k,H,_,ae){var oe=ae.settings.showErrorMessage,le=W.getIn((0,R.expandTreePath)(k,"properties","field"))||null,ue=W.getIn((0,R.expandTreePath)(k,"properties","operator"))||null;if(W=W.setIn((0,R.expandTreePath)(k,"properties","value",H+""),void 0),W=W.setIn((0,R.expandTreePath)(k,"properties","valueType",H+""),null),W=W.deleteIn((0,R.expandTreePath)(k,"properties","asyncListValues")),oe){W=W.setIn((0,R.expandTreePath)(k,"properties","valueError",H),null);var me=(0,E.getOperatorConfig)(ae,ue,le),pe=ue?(0,b.defaultValue)(me.cardinality,1):null;me.validateValues&&(W=W.setIn((0,R.expandTreePath)(k,"properties","valueError",pe),null))}if(typeof _>"u"?W=W.setIn((0,R.expandTreePath)(k,"properties","valueSrc",H+""),null):W=W.setIn((0,R.expandTreePath)(k,"properties","valueSrc",H+""),_),_){var Ee=W.getIn((0,R.expandTreePath)(k,"properties")),ge=(0,T.getNewValueForFieldOp)(ae,ae,Ee,le,ue,"valueSrc",!0),Se=ge.canReuseValue,Ae=ge.newValue,ye=ge.newValueSrc,De=ge.newValueType,Fe=ge.newValueError;!Se&&ye.get(H)==_&&(W=W.setIn((0,R.expandTreePath)(k,"properties","value",H+""),Ae.get(H)),W=W.setIn((0,R.expandTreePath)(k,"properties","valueType",H+""),De.get(H)))}return W},a=function(W,k,H,_){return W.setIn((0,R.expandTreePath)(k,"properties","operatorOptions",H),_)},n=function(W,k){var H=k.settings.canLeaveEmptyGroup;return H||(W=(0,R.fixEmptyGroupsInTree)(W)),W},m=function(W,k,H){var _=null;if(W){if(k==="field"){var ae=(0,E.getFieldConfig)(H,W);ae&&(_=ae.type)}else if(k==="func"){var oe=W.get("func");if(oe){var le=(0,E.getFuncConfig)(H,oe);le&&(_=le.returnType)}}}return _},v=function(W,k){var H=W.getIn((0,R.expandTreePath)(k,"properties","field"))||null;return H},N={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},G=function(W,k){var H=["config","asyncListValues","__isInternal"],_=[A.SET_TREE,A.SET_DRAG_START,A.SET_DRAG_PROGRESS,A.SET_DRAG_END],ae=(0,j.default)((0,D.default)(W,H),b.applyToJS),oe=W.path&&v(k.tree,W.path)||W.field;return oe&&(ae.affectedField=oe),(_.includes(W.type)||W.type.indexOf("@@redux")==0)&&(ae=null),ae},q=function(W,k,H){var _=(0,I.defaultRoot)(W),ae=k||_,oe=Y({tree:ae},N);return function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe,ue=arguments.length>1?arguments[1]:void 0,me={__isInternalValueChange:void 0,__lastAction:void 0},pe={},Ee=G(ue,le);switch(ue.type){case A.SET_TREE:{var ge=H(ue.config,ue.tree);pe.tree=ge;break}case A.ADD_CASE_GROUP:{pe.tree=X(le.tree,ue.path,"case_group",ue.id,ue.properties,ue.config,ue.children,ue.meta);break}case A.ADD_GROUP:{pe.tree=X(le.tree,ue.path,"group",ue.id,ue.properties,ue.config,ue.children,ue.meta);break}case A.REMOVE_GROUP:{pe.tree=Z(le.tree,ue.path,ue.config);break}case A.ADD_RULE:{pe.tree=g(le.tree,ue.path,ue.ruleType,ue.id,ue.properties,ue.config,ue.children);break}case A.REMOVE_RULE:{pe.tree=z(le.tree,ue.path,ue.config);break}case A.SET_CONJUNCTION:{pe.tree=d(le.tree,ue.path,ue.conjunction);break}case A.SET_NOT:{pe.tree=U(le.tree,ue.path,ue.not);break}case A.SET_FIELD:{pe.tree=s(le.tree,ue.path,ue.field,ue.config);break}case A.SET_LOCK:{pe.tree=C(le.tree,ue.path,ue.lock);break}case A.SET_OPERATOR:{pe.tree=c(le.tree,ue.path,ue.operator,ue.config);break}case A.SET_VALUE:{var Se=y(le.tree,ue.path,ue.delta,ue.value,ue.valueType,ue.config,ue.asyncListValues,ue.__isInternal),Ae=Se.tree,ye=Se.isInternalValueChange;pe.__isInternalValueChange=ye,pe.tree=Ae;break}case A.SET_VALUE_SRC:{pe.tree=p(le.tree,ue.path,ue.delta,ue.srcKey,ue.config);break}case A.SET_OPERATOR_OPTION:{pe.tree=a(le.tree,ue.path,ue.name,ue.value);break}case A.MOVE_ITEM:{pe.tree=i(le.tree,ue.fromPath,ue.toPath,ue.placement,ue.config);break}case A.SET_DRAG_START:{pe.dragStart=ue.dragStart,pe.dragging=ue.dragging,pe.mousePos=ue.mousePos;break}case A.SET_DRAG_PROGRESS:{pe.mousePos=ue.mousePos,pe.dragging=ue.dragging;break}case A.SET_DRAG_END:{pe.tree=n(le.tree,W),pe=Y(Y({},pe),N);break}default:break}return Ee&&(pe.__lastAction=Ee),Y(Y(Y({},le),me),pe)}};u.default=q},18004:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.simulateAsyncFetch=u.mergeListValues=u.listValueToOption=u.getListValue=void 0;var O=r(e(18562)),S=r(e(93502)),l=r(e(83139)),L=e(99890),R=function(T){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var D=(0,l.default)(O.default.mark(function j(F,$,V){var K,w,B,Y,X,Z,z,U;return O.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return K=V.pageSize!=null?V.pageSize:b,w=(0,L.listValuesToArray)(T).filter(function(f){var g=f.title;return F==null?!0:g.toUpperCase().indexOf(F.toUpperCase())!=-1}),B=K?Math.ceil(w.length/K):0,Y=$||0,X=K?Math.ceil(Y/K):null,Z=K?w.slice(Y,Y+K):w,z=K?Y+Z.length:null,U=K?z<w.length:!1,console.debug("simulateAsyncFetch",{search:F,offset:$,values:Z,hasMore:U,filtered:w}),d.next=11,(0,L.sleep)(M);case 11:return d.abrupt("return",{values:Z,hasMore:U});case 12:case"end":return d.stop()}},j)}));return function(j,F,$){return D.apply(this,arguments)}}()};u.simulateAsyncFetch=R;var I=function(T,b){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!b)return T;var D=T||[],j=b.filter(function($){return D.find(function(V){return V.value==$.value})==null}),F=M?[].concat((0,S.default)(j),(0,S.default)(D)):[].concat((0,S.default)(D),(0,S.default)(j));return F};u.mergeListValues=I;var A=function(T){if(T==null)return null;var b=T.title,M=T.value,D=T.disabled,j=T.groupTitle,F=T.renderTitle,$={title:b,value:M};return D&&($.disabled=D),j&&($.groupTitle=j),F&&($.renderTitle=F),$};u.listValueToOption=A;var P=function(T,b){return(0,L.mapListValues)(b,function(M){return M.value===T?M:null}).filter(function(M){return M!==null}).shift()};u.getListValue=P},6384:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.normalizeField=u.getOperatorConfig=u.getFuncConfig=u.getFuncArgConfig=u.getFieldWidgetConfig=u.getFieldRawConfig=u.getFieldConfig=u.extendConfig=u.createConfigMemo=void 0;var O=r(e(93502)),S=r(e(43427)),l=r(e(55629)),L=r(e(71470)),R=r(e(11117)),I=r(e(81723)),A=e(31923),P=r(e(79913)),E=e(99890),T=e(68710),b=r(e(15322)),M=r(e(75123));function D(p,a){var n=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);a&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),n.push.apply(n,m)}return n}function j(p){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?D(Object(n),!0).forEach(function(m){(0,S.default)(p,m,n[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(n,m))})}return p}function F(p,a){var n=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!n){if(Array.isArray(p)||(n=$(p))||a&&p&&typeof p.length=="number"){n&&(p=n);var m=0,v=function(){};return{s:v,n:function(){return m>=p.length?{done:!0}:{done:!1,value:p[m++]}},e:function(W){throw W},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N=!0,G=!1,q;return{s:function(){n=n.call(p)},n:function(){var W=n.next();return N=W.done,W},e:function(W){G=!0,q=W},f:function(){try{!N&&n.return!=null&&n.return()}finally{if(G)throw q}}}}function $(p,a){if(p){if(typeof p=="string")return V(p,a);var n=Object.prototype.toString.call(p).slice(8,-1);if(n==="Object"&&p.constructor&&(n=p.constructor.name),n==="Map"||n==="Set")return Array.from(p);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(p,a)}}function V(p,a){(a==null||a>p.length)&&(a=p.length);for(var n=0,m=new Array(a);n<a;n++)m[n]=p[n];return m}var K=["conjunctions","fields","types","operators","widgets","settings","funcs"],w=function(a){return(0,M.default)(a,K)},B=function(){var a=new Map,n=2,m=0,v=function(J){var W=Y(J,++m);return a.size+1>n&&a.delete(a.keys()[0]),a.set(J,W),W},N=function(J){var W=F(a.keys()),k;try{var H=function(){var pe=k.value,Ee=K.map(function(ge){return pe[ge]===J[ge]}).filter(function(ge){return!ge}).length===0;if(Ee)return{v:a.get(pe)}};for(W.s();!(k=W.n()).done;){var _=H();if((0,l.default)(_)==="object")return _.v}}catch(me){W.e(me)}finally{W.f()}var ae=F(a.values()),oe;try{var le=function(){var pe=oe.value,Ee=K.map(function(ge){return pe[ge]===J[ge]}).filter(function(ge){return!ge}).length===0;if(Ee)return{v:pe}};for(ae.s();!(oe=ae.n()).done;){var ue=le();if((0,l.default)(ue)==="object")return ue.v}}catch(me){ae.e(me)}finally{ae.f()}return null},G=function(J){return N(J)||v(J)};return function(q){return G(w(q))}};u.createConfigMemo=B;var Y=function(a,n){return a.__configId||(a=j({},a),a.settings=(0,L.default)({},A.settings,a.settings),a._fieldsCntByType={},a._funcsCntByType={},a.types=(0,b.default)(a.types),X(a.types,a),a.fields=(0,b.default)(a.fields),a.__fieldNames={},z(a.fields,a),a.funcs=(0,b.default)(a.funcs),U(a.funcs,a),P.default.locale(a.settings.locale.moment),Object.defineProperty(a,"__configId",{enumerable:!1,writable:!1,value:n||(0,R.default)()})),a};u.extendConfig=Y;function X(p,a){for(var n in p){var m=p[n];Z(n,m,a)}}function Z(p,a,n){var m=null,v=null;a.mainWidget=a.mainWidget||Object.keys(a.widgets).filter(function(H){return H!="field"&&H!="func"})[0];for(var N in a.widgets){var G=a.widgets[N];if(G.operators){var q=G.operators;a.excludeOperators&&(q=q.filter(function(H){return!a.excludeOperators.includes(H)})),m=(0,E.mergeArraysSmart)(m,q)}G.defaultOperator&&(v=G.defaultOperator),N==a.mainWidget&&(G=(0,L.default)({},{widgetProps:a.mainWidgetProps||{}},G)),a.widgets[N]=G}a.valueSources||(a.valueSources=Object.keys(n.settings.valueSourcesInfo));var J=F(a.valueSources),W;try{for(J.s();!(W=J.n()).done;){var k=W.value;k!="value"&&!a.widgets[k]&&(a.widgets[k]={})}}catch(H){J.e(H)}finally{J.f()}!a.operators&&m&&(a.operators=Array.from(new Set(m))),!a.defaultOperator&&v&&(a.defaultOperator=v)}function z(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var m in p)C(p[m],a,[].concat((0,O.default)(n),[m])),p[m].subfields&&z(p[m].subfields,a,[].concat((0,O.default)(n),[m]))}function U(p,a){if(p)for(var n in p){var m=p[n];m.returnType&&(a._funcsCntByType[m.returnType]||(a._funcsCntByType[m.returnType]=0),a._funcsCntByType[m.returnType]++);for(var v in m.args)C(m.args[v],a,null,!0);if(m.args){var N=Object.keys(m.args),G=!0,q=F(N.reverse()),J;try{for(q.s();!(J=q.n()).done;){var W=J.value,k=m.args[W];!G&&k.isOptional&&delete k.isOptional,k.isOptional||(G=!1)}}catch(H){q.e(H)}finally{q.f()}}m.subfields&&U(m.subfields,a)}}function C(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=null,N=null,G=a.types[p.type],q=p.excludeOperators||[];if(p.type!="!struct"&&p.type!="!group"){var J=["listValues","allowCustomValues","validateValue"];p.fieldSettings||(p.fieldSettings={});for(var W=0,k=J;W<k.length;W++){var H=k[W];p[H]&&(p.fieldSettings[H]=p[H],delete p[H])}if(p.fieldSettings.listValues&&(p.fieldSettings.listValues=(0,E.normalizeListValues)(p.fieldSettings.listValues,p.type,p.fieldSettings)),!G){p.disabled=!0;return}m||(a._fieldsCntByType[p.type]||(a._fieldsCntByType[p.type]=0),a._fieldsCntByType[p.type]++),p.widgets||(p.widgets={}),m&&(p._isFuncArg=!0),p.mainWidget=p.mainWidget||G.mainWidget,p.valueSources=p.valueSources||G.valueSources;var _=G.excludeOperators||[];for(var ae in G.widgets){var oe=p.widgets[ae]||{},le=G.widgets[ae]||{};m||function(){var me=[].concat((0,O.default)(q),(0,O.default)(_)),pe=p.preferWidgets&&(ae=="field"||p.preferWidgets.includes(ae))||me.length>0;if(oe.operators){var Ee=oe.operators.filter(function(Se){return!me.includes(Se)});v=[].concat((0,O.default)(v||[]),(0,O.default)(Ee))}else if(pe&&le.operators){var ge=le.operators.filter(function(Se){return!me.includes(Se)});v=[].concat((0,O.default)(v||[]),(0,O.default)(ge))}oe.defaultOperator&&(N=oe.defaultOperator)}(),ae==p.mainWidget&&(oe=(0,L.default)({},{widgetProps:p.mainWidgetProps||{}},oe)),p.widgets[ae]=oe}m||(!p.operators&&v&&(p.operators=Array.from(new Set(v))),!p.defaultOperator&&N&&(p.defaultOperator=N))}var ue=f(a,n);ue&&(p.fieldName=ue),n&&p.fieldName&&(a.__fieldNames[p.fieldName]=n)}var d=function(a,n){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!n)return null;if(n=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:a.widgets.case_value}};var N=a.settings.fieldSeparator,G=Array.isArray(n)?n:n.split(N),q=a[m];if(!q)return null;for(var J=q,W=null,k=[],H=0;H<G.length;H++){var _=G[H];k.push(_);var ae=k.join(N);W=J[ae],H<G.length-1&&(W&&W[v]?(J=W[v],k=[]):W=null)}return W};u.getFieldRawConfig=d;var f=function(a,n){if(!n)return null;for(var m=a.settings.fieldSeparator,v=(0,O.default)(n),N=[],G,q;(G=v.pop())!==void 0&&v.length>0;)if(N.unshift(G),q=d(a,v),q.fieldName)return[q.fieldName].concat(N).join(m);return null},g=function(a,n){var m=a.settings.fieldSeparator,v=Array.isArray(n)?n.join(m):n;return a.__fieldNames[v]?a.__fieldNames[v].join(m):v};u.normalizeField=g;var o=function(a,n){if(!n)return null;var m=d(a,n,"funcs","subfields");return m||null};u.getFuncConfig=o;var i=function(a,n,m){var v=o(a,n);if(!v)return null;var N=v.args&&v.args[m]||null;if(!N)return null;var G=a.types[N.type]||{},q=(0,I.default)({},G,N||{},function(J,W,k,H,_,ae){if(Array.isArray(J))return W});return q};u.getFuncArgConfig=i;var s=function(a,n){if(!n)return null;if((0,l.default)(n)=="object"&&!n.func&&n.type)return n;if((0,l.default)(n)=="object"&&n.func&&n.arg)return i(a,n.func,n.arg);var m=d(a,n);if(!m)return null;var v=a.types[m.type]||{},N=(0,I.default)({},v,m||{},function(G,q,J,W,k,H){if(Array.isArray(G))return q});return N};u.getFieldConfig=s;var c=function(a,n){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!n)return null;var v=a.operators[n];if(m){var N=s(a,m),G=(0,T.getWidgetForFieldOp)(a,m,n),q=a.widgets[G]||{},J=(N&&N.widgets?N.widgets[G]:{})||{},W=(q.opProps||{})[n],k=(J.opProps||{})[n],H=(0,L.default)({},v,W,k);return H}else return v};u.getOperatorConfig=c;var y=function(a,n,m){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n||!(m||v)&&N!="const"&&n!="!case_value")return null;var G=s(a,n);v||(v=(0,T.getWidgetForFieldOp)(a,n,m,N));var q=a.widgets[v]||{},J=(G&&G.widgets?G.widgets[v]:{})||{},W=J.widgetProps||{},k=(N=="value"||!N)&&G&&G.fieldSettings||{},H=(0,L.default)({},q,W,k);return H};u.getFieldWidgetConfig=y},78683:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.defaultRuleProperties=u.defaultRule=u.defaultRoot=u.defaultOperatorOptions=u.defaultOperator=u.defaultItemProperties=u.defaultGroupProperties=u.defaultGroupConjunction=u.defaultField=u.defaultConjunction=void 0;var O=r(e(43427)),S=r(e(15866)),l=r(e(11117)),L=e(6384),R=e(68710);function I(K,w){var B=Object.keys(K);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(K);w&&(Y=Y.filter(function(X){return Object.getOwnPropertyDescriptor(K,X).enumerable})),B.push.apply(B,Y)}return B}function A(K){for(var w=1;w<arguments.length;w++){var B=arguments[w]!=null?arguments[w]:{};w%2?I(Object(B),!0).forEach(function(Y){(0,O.default)(K,Y,B[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(B)):I(Object(B)).forEach(function(Y){Object.defineProperty(K,Y,Object.getOwnPropertyDescriptor(B,Y))})}return K}var P=function(w){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return typeof w.settings.defaultField=="function"?w.settings.defaultField(Y):w.settings.defaultField||(B?(0,R.getFirstField)(w,Y):null)};u.defaultField=P;var E=function(w,B){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,X=(0,L.getFieldConfig)(w,B),Z=X&&X.operators||[],z=X&&X.defaultOperator;Z.includes(z)||(z=null),!z&&Y&&(z=(0,R.getFirstOperator)(w,B));var U=typeof w.settings.defaultOperator=="function"?w.settings.defaultOperator(B,X):z;return U};u.defaultOperator=E;var T=function(w,B,Y){var X=B?(0,L.getOperatorConfig)(w,B,Y):null;return X&&X.options?new S.default.Map(X.options&&X.options.defaults||{}):null};u.defaultOperatorOptions=T;var b=function(w){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,X=null,Z=null,z=w.settings,U=z.setDefaultFieldAndOp,C=z.showErrorMessage;if(Y){var d,f;X=Y==null||(d=Y.properties)===null||d===void 0?void 0:d.field,Z=Y==null||(f=Y.properties)===null||f===void 0?void 0:f.operator}else U&&(X=P(w,!0,B),Z=E(w,X));var g=new S.default.Map({field:X,operator:Z,value:new S.default.List,valueSrc:new S.default.List,operatorOptions:T(w,Z,X)});if(C&&(g=g.set("valueError",new S.default.List)),X&&Z){var o=(0,R.getNewValueForFieldOp)(w,w,g,X,Z,"operator",!1),i=o.newValue,s=o.newValueSrc,c=o.newValueType,y=o.newValueError;g=g.set("value",i).set("valueSrc",s).set("valueType",c),C&&(g=g.set("valueError",y))}return g};u.defaultRuleProperties=b;var M=function(w){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;B=(0,L.getFieldConfig)(w,B);var Y=B&&B.conjunctions||Object.keys(w.conjunctions);return Y.length==1?Y[0]:w.settings.defaultGroupConjunction||w.settings.defaultConjunction||Y[0]};u.defaultGroupConjunction=M;var D=function(w){return w.settings.defaultConjunction||Object.keys(w.conjunctions)[0]};u.defaultConjunction=D;var j=function(w){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new S.default.Map({conjunction:M(w,B),not:!1})};u.defaultGroupProperties=j;var F=function(w,B){var Y;return B&&B.type=="group"?j(w,B==null||(Y=B.properties)===null||Y===void 0?void 0:Y.field):b(w,null,B)};u.defaultItemProperties=F;var $=function(w,B){return(0,O.default)({},w,new S.default.Map({type:"rule",id:w,properties:b(B)}))};u.defaultRule=$;var V=function(w){return new S.default.Map({type:"group",id:(0,l.default)(),children1:new S.default.OrderedMap(A({},$((0,l.default)(),w))),properties:j(w)})};u.defaultRoot=V},96108:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.sqlEmptyValue=u.spelImportConcat=u.spelFormatConcat=u.spelFixList=u.spelEscape=u.mongoEmptyValue=u.SqlString=void 0;var O=r(e(55629)),S=e(72344);u.SqlString=S,S.trim=function(b){return b.charAt(0)=="'"?b.substring(1,b.length-1):b},S.escapeLike=function(b){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,j=S.escape(b);return j=S.trim(j),j=j.replace(/[%_]/g,"\\$&"),j=(M?"%":"")+j+(D?"%":""),j="'"+j+"'",j};var l=function(M){var D="''",j=M?.type;return j=="date"?D="'0000-00-00'":j=="datetime"?D="'0000-00-00 00:00'":j=="time"?D="'00:00'":j=="number"&&(D="0"),D};u.sqlEmptyValue=l;var L=function(M){var D="",j=M?.type;return j=="number"&&(D=0),D};u.mongoEmptyValue=L;var R=function(M){return"'"+M.replace(/'/g,"''")+"'"},I=function(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j,F,$=["int","float"];M.map(function(w){if(w!=null){if(typeof w=="string")F="String";else if(typeof w=="number")F=Number.isInteger(w)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(w," in array"));if(!j)j=F;else if(j!=F)if($.includes(j)&&$.includes(F))j="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(j," and ").concat(F))}}),j||(j="String");var V;j=="float"?V=M.map(function(w){return P(w,!0)}):V=M.map(function(w){return P(w)});var K;return D?K="new ".concat(j,"[]{").concat(V.join(", "),"}"):K="{".concat(V.join(", "),"}"),K},A=function(M){return"".concat(M,".?[true]")};u.spelFixList=A;var P=function(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(M==null)return"null";switch((0,O.default)(M)){case"boolean":return M?"true":"false";case"number":return!Number.isFinite(M)||isNaN(M)?void 0:M+(!Number.isInteger(M)||D?"f":"");case"object":if(Array.isArray(M))return I(M,j);throw new Error("spelEscape: Object is not supported");default:return R(M)}};u.spelEscape=P;var E=function(M){return M&&Array.isArray(M)&&M.length?M.map(function(D){if(D.type=="const")return P(D.value);if(D.type=="property")return""+D.value;if(D.type=="variable")return"#"+D.value}).filter(function(D){return D!=null}).join(" + "):"null"};u.spelFormatConcat=E;var T=function(M){if(M==null)return[void 0,[]];var D=[],j=M.valueType=="case_value"?M.value:[M],F=j.map(function($){if($.valueSrc=="value")return $.value===null?void 0:{type:"const",value:$.value};if($.valueSrc=="field")return{type:$.isVariable?"variable":"property",value:$.value};D.push("Unsupported valueSrc ".concat($.valueSrc," in concatenation"))}).filter(function($){return $!=null});return[F,D]};u.spelImportConcat=T},46202:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.setFunc=u.setArgValueSrc=u.setArgValue=u.completeValue=u.completeFuncValue=void 0;var O=r(e(55629)),S=e(6384),l=e(68710),L=r(e(15866));function R($,V){var K=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!K){if(Array.isArray($)||(K=I($))||V&&$&&typeof $.length=="number"){K&&($=K);var w=0,B=function(){};return{s:B,n:function(){return w>=$.length?{done:!0}:{done:!1,value:$[w++]}},e:function(U){throw U},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y=!0,X=!1,Z;return{s:function(){K=K.call($)},n:function(){var U=K.next();return Y=U.done,U},e:function(U){X=!0,Z=U},f:function(){try{!Y&&K.return!=null&&K.return()}finally{if(X)throw Z}}}}function I($,V){if($){if(typeof $=="string")return A($,V);var K=Object.prototype.toString.call($).slice(8,-1);if(K==="Object"&&$.constructor&&(K=$.constructor.name),K==="Map"||K==="Set")return Array.from($);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return A($,V)}}function A($,V){(V==null||V>$.length)&&(V=$.length);for(var K=0,w=new Array(V);K<V;K++)w[K]=$[K];return w}var P=function(V){return(0,O.default)(V)=="object"&&V!==null&&!Array.isArray(V)},E=function(V,K,w){return K=="func"?T(V,w):V};u.completeValue=E;var T=function(V,K){var w=function(Y){if(Y){var X=Y.get("func"),Z=X&&(0,S.getFuncConfig)(K,X);if(Z){var z=Y,U=!1;for(var C in Z.args){var d=Z.args[C],f=d.valueSources,g=d.isOptional,o=d.defaultValue,i=(0,l.filterValueSourcesForField)(K,f,d),s=z.get("args"),c=i.length==1?i[0]:void 0,y=s?s.get(C):void 0,p=y?y.get("value"):void 0,a=(y?y.get("valueSrc"):void 0)||c;if(p!==void 0){var n=E(p,a,K);if(n===void 0||(n!==p&&(z=z.setIn(["args",C,"value"],n)),U))return}else if(o!==void 0&&!P(o))z=z.setIn(["args",C,"value"],D(d)),z=z.setIn(["args",C,"valueSrc"],"value");else if(g)U=!0;else return}return z}}};return w(V)};u.completeFuncValue=T;var b=function(V,K){var w=[],B=[],Y=function X(Z){var z=Z&&Z.get("args");if(z){var U=R(z.values()),C;try{for(U.s();!(C=U.n()).done;){var d=C.value;if(d.get("valueSrc")=="field"){var f=d.get("value");if(f){var g=K?(0,S.getFieldConfig)(K,f):void 0;K&&!g?B.push(f):w.push(f)}}else d.get("valueSrc")=="func"&&X(d.get("value"))}}catch(o){U.e(o)}finally{U.f()}}};return Y(V),[w,B]},M=function(V,K,w){var B=w.settings.fieldSeparator;V=V||new L.default.Map,Array.isArray(K)&&(K=K.join(B)),V=V.set("func",K),V=V.set("args",new L.default.Map);var Y=K&&(0,S.getFuncConfig)(w,K);if(Y)for(var X in Y.args){var Z=Y.args[X],z=Z.valueSources,U=Z.defaultValue,C=(0,l.filterValueSourcesForField)(w,z,Z),d=C.length?C[0]:void 0,f=U?P(U)&&U.func?"func":"value":void 0,g=f||d;U!==void 0&&(V=V.setIn(["args",X,"value"],D(Z))),g&&(V=V.setIn(["args",X,"valueSrc"],g))}return V};u.setFunc=M;var D=function(V){var K=V.defaultValue;return P(K)&&!L.default.Map.isMap(K)&&K.func?L.default.fromJS(K,function(w,B){return L.default.Iterable.isIndexed(B)?B.toList():B.toOrderedMap()}):K},j=function(V,K,w,B,Y){if(V&&V.get("func")){V=V.setIn(["args",K,"value"],w);var X=B.valueSources,Z=(0,l.filterValueSourcesForField)(Y,X,B),z=Z.length==1?Z[0]:void 0;z&&(V=V.setIn(["args",K,"valueSrc"],z))}return V};u.setArgValue=j;var F=function(V,K,w,B,Y){return V&&V.get("func")&&(V=V.setIn(["args",K],new L.default.Map({valueSrc:w}))),V};u.setArgValueSrc=F},50603:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.TreeUtils=u.ExportUtils=u.DefaultUtils=u.ConfigUtils=void 0,Object.defineProperty(u,"getSwitchValues",{enumerable:!0,get:function(){return A.getSwitchValues}}),Object.defineProperty(u,"simulateAsyncFetch",{enumerable:!0,get:function(){return l.simulateAsyncFetch}}),Object.defineProperty(u,"uuid",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(u,"validateTree",{enumerable:!0,get:function(){return S.validateTree}});var S=e(53931),l=e(18004),L=r(e(11117)),R=T(e(6384));u.ConfigUtils=R;var I=T(e(78683));u.DefaultUtils=I;var A=T(e(50679));u.TreeUtils=A;var P=T(e(96108));u.ExportUtils=P;function E(b){if(typeof WeakMap!="function")return null;var M=new WeakMap,D=new WeakMap;return(E=function(F){return F?D:M})(b)}function T(b,M){if(!M&&b&&b.__esModule)return b;if(b===null||O(b)!=="object"&&typeof b!="function")return{default:b};var D=E(M);if(D&&D.has(b))return D.get(b);var j={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in b)if($!=="default"&&Object.prototype.hasOwnProperty.call(b,$)){var V=F?Object.getOwnPropertyDescriptor(b,$):null;V&&(V.get||V.set)?Object.defineProperty(j,$,V):j[$]=b[$]}return j.default=b,D&&D.set(b,j),j}},98572:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.useOnPropsChanged=u.pureShouldComponentUpdate=u.liteShouldComponentUpdate=u.isUsingLegacyReactDomRender=u.bindActionCreators=void 0;var O=r(e(27702)),S=r(e(46729)),l=e(99890),L=function(D){if(D._reactRootContainer)return"root";if(Object.getOwnPropertyNames(D).filter(function(j){return j.startsWith("__reactContainer")}).length>0)return"container"},R=function M(D){if(D){var j=L(D);return j!==void 0?j:M(D.parentNode)}},I=function(D){return R(D)==="root"};u.isUsingLegacyReactDomRender=I;var A=function(D,j){return function(F,$){var V=D.props,K=D.state,w=F!=V||$!=K;if(w&&K==$&&V!=F){var B=[];for(var Y in F){var X=F[Y]!=V[Y];X&&(j[Y]=="ignore"?X=!1:j[Y]=="shallow_deep"?X=!(0,l.shallowEqual)(F[Y],V[Y],!0):j[Y]=="shallow"?X=!(0,l.shallowEqual)(F[Y],V[Y]):typeof j[Y]=="function"&&(X=j[Y](F[Y],V[Y],$))),X&&B.push(Y)}B.length||(w=!1)}return w}};u.liteShouldComponentUpdate=A;var P=function(D){return function(j,F){return!(0,l.shallowEqual)(D.props,j)||!(0,l.shallowEqual)(D.state,F)}};u.pureShouldComponentUpdate=P;var E=function(){var D=O.default.version.split(".").map(parseInt.bind(null,10));return D[0]==16&&D[1]>=3||D[0]>16},T=function(D){E?D.UNSAFE_componentWillReceiveProps=function(j){D.onPropsChanged(j)}:D.componentWillReceiveProps=function(j){D.onPropsChanged(j)}};u.useOnPropsChanged=T;var b=function(D,j,F){return(0,S.default)(D,function($){return function(){for(var V=arguments.length,K=new Array(V),w=0;w<V;w++)K[w]=arguments[w];return F($.apply(void 0,[j].concat(K)))}})};u.bindActionCreators=b},68710:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.getWidgetsForFieldOp=u.getWidgetForFieldOp=u.getValueSourcesForFieldOp=u.getValueLabel=u.getOperatorsForField=u.getNewValueForFieldOp=u.getFuncPathLabels=u.getFirstOperator=u.getFirstField=u.getFieldPathLabels=u.getFieldPath=u.getFieldPartsConfigs=u.formatFieldName=u.filterValueSourcesForField=void 0;var O=r(e(55629)),S=r(e(93502)),l=r(e(74208)),L=e(6384),R=e(99890),I=r(e(15866)),A=e(53931),P=r(e(13509)),E=["select","multiselect","treeselect","treemultiselect"],T=function(C){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2?arguments[2]:void 0,g=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;d||(d=C);var y=f.get("field"),p=f.get("operator"),a=f.get("value"),n=f.get("valueSrc",new I.default.List),m=f.get("valueType",new I.default.List),v=f.get("asyncListValues"),N=C.settings,G=N.convertableWidgets,q=N.clearValueOnChangeField,J=N.clearValueOnChangeOp,W=N.showErrorMessage,k=(0,L.getOperatorConfig)(C,o,g),H=o?(0,R.defaultValue)(k.cardinality,1):null,_=(0,L.getFieldConfig)(d,y),ae=(0,L.getFieldConfig)(C,g),oe=y&&p&&o&&a!=null&&(!i||i=="field"&&!q||i=="operator"&&!J)&&_&&ae&&_.type==ae.type;oe&&E.includes(_.type)&&i=="field"&&(oe=!1);for(var le=0;le<H;le++){var ue=n.get(le)||null,me=Z(d,y,p,ue),pe=Z(C,g,o,ue),Ee=ue=="value"?me:Z(d,y,p,"value"),ge=ue=="value"?pe:Z(C,g,o,"value"),Se=ge==Ee||(G[Ee]||[]).includes(ge);Se||(oe=!1)}p!=o&&[p,o].includes("proximity")&&(oe=!1);var Ae=(0,L.getFieldWidgetConfig)(C,g,o,null,n.first()),ye=X(C,g,o),De={},Fe=Array.from({length:H},function(){return null});if(oe)for(var We=function(Ue){var Ge=a.get(Ue),be=m.get(Ue)||null,$e=n.get(Ue)||null,rt=ye.find(function(lt){return lt==$e})!=null;!rt&&Ue>0&&$e==null&&(rt=!0);var it=v,Qe=(0,A.validateValue)(C,g,g,o,Ge,be,$e,it,s,c),ut=(0,l.default)(Qe,2),st=ut[0],Je=ut[1],vt=!st,gt=Je!==Ge,It=!rt||!vt&&(i=="field"||!W&&!gt),Lt=!!st&&W&&!It&&!gt;if(Lt&&(Fe[Ue]=st),gt&&(De[Ue]=Je),It)return oe=!1,"break"},Ke=0;Ke<H;Ke++){var _e=We(Ke);if(_e==="break")break}var He=null,at=null,ke=null,de=null;if(He=new I.default.List(Array.from({length:H},function(we,Ue){var Ge=void 0;if(oe)Ue<a.size&&(Ge=a.get(Ue),De[Ue]!==void 0&&(Ge=De[Ue]));else if(H==1){var be;Ge=(0,R.getFirstDefined)([ae?.defaultValue,ae==null||(be=ae.fieldSettings)===null||be===void 0?void 0:be.defaultValue,Ae?.defaultValue])}return Ge})),at=new I.default.List(Array.from({length:H},function(we,Ue){var Ge=null;return oe?Ue<n.size&&(Ge=n.get(Ue)):(ye.length==1||ye.length>1)&&(Ge=ye[0]),Ge})),W){if(k&&k.validateValues&&at.toJS().filter(function(we){return we=="value"||we==null}).length==H){var Ce=Ae&&Ae.toJS?He.toJS().map(function(we){return Ae.toJS(we,Ae)}):He.toJS(),Le=k.validateValues(Ce);W&&Fe.push(Le)}de=new I.default.List(Fe)}return ke=new I.default.List(Array.from({length:H},function(we,Ue){var Ge=null;return oe?Ue<m.size&&(Ge=m.get(Ue)):H==1&&Ae&&Ae.type!==void 0?Ge=Ae.type:H==1&&ae&&ae.type!==void 0&&(Ge=ae.type=="!group"?"number":ae.type),Ge})),{canReuseValue:oe,newValue:He,newValueSrc:at,newValueType:ke,newValueError:de,operatorCardinality:H}};u.getNewValueForFieldOp=T;var b=function(C){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=C.settings.fieldSeparator,g=typeof d=="string"?d.split(f):d,o=d?(0,L.getFieldRawConfig)(C,d):C,i=o,s=null,c=[];do{var y=i===C?C.fields:i.subfields;if(!y||!Object.keys(y).length){i=s=null;break}s=Object.keys(y)[0],c.push(s),i=y[s]}while(i.type=="!struct"||i.type=="!group");return(g||[]).concat(c).join(f)};u.getFirstField=b;var M=function(C,d){var f=(0,L.getFieldConfig)(C,d),g=f?f.operators:[];return g};u.getOperatorsForField=M;var D=function(C,d){var f=M(C,d);return f?f[0]:null};u.getFirstOperator=D;var j=function(C,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!C)return null;var g=d.settings.fieldSeparator,o=Array.isArray(C)?C:C.split(g);return f?o:o.map(function(i,s,c){return c.slice(0,s+1)}).map(function(i){return i.join(g)})};u.getFieldPath=j;var F=function(C,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return $(C,d,f,"funcs","subfields")};u.getFuncPathLabels=F;var $=function(C,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!C)return null;var i=d.settings.fieldSeparator,s=Array.isArray(C)?C:C.split(i),c=f?Array.isArray(f)?f:f.split(i):[];return s.slice(c.length).map(function(y,p,a){return a.slice(0,p+1)}).map(function(y){return[].concat((0,S.default)(c),(0,S.default)(y)).join(i)}).map(function(y){var p=(0,L.getFieldRawConfig)(d,y,g,o);return p&&p.label||p&&(0,P.default)(y.split(i))}).filter(function(y){return y!=null})};u.getFieldPathLabels=$;var V=function(C,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!C)return null;var g=f&&(0,L.getFieldRawConfig)(d,f)||null,o=d.settings.fieldSeparator,i=Array.isArray(C)?C:C.split(o),s=f?Array.isArray(f)?f:f.split(o):[];return i.slice(s.length).map(function(c,y,p){return p.slice(0,y+1)}).map(function(c){return{part:[].concat((0,S.default)(s),(0,S.default)(c)).join(o),key:c[c.length-1]}}).map(function(c){var y=c.part,p=c.key,a=(0,L.getFieldRawConfig)(d,y);return{key:p,cnf:a}}).map(function(c,y,p){var a=c.key,n=c.cnf,m=y>0?p[y-1].cnf:g;return[a,n,m]})};u.getFieldPartsConfigs=V;var K=function(C,d,f,g){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,s=d&&(0,O.default)(d)=="object"&&!!d.func&&!!d.arg,c=C.settings.showLabels,y=(0,L.getFieldConfig)(C,d),p=(0,L.getFieldWidgetConfig)(C,d,f,null,o)||{},a=(0,L.getOperatorConfig)(C,f,d)||{},n=i?1:a.cardinality,m=null;if(n>1){var v=p.valueLabels||a.valueLabels;v&&(m=v[g]),m&&(0,O.default)(m)!="object"&&(m={label:m,placeholder:m}),m||(m={label:C.settings.valueLabel+" "+(g+1),placeholder:C.settings.valuePlaceholder+" "+(g+1)})}else{var N=p.valueLabel,G=p.valuePlaceholder;s&&(N||(N=y.label||d.arg),!G&&!c&&(G=y.label||d.arg)),m={label:N||C.settings.valueLabel,placeholder:G||C.settings.valuePlaceholder}}return m};u.getValueLabel=K;function w(U,C){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,g=[],o=[];if(!C)return{widgets:g,valueSrcs:o};var i=(0,O.default)(C)=="object"&&(!!C.func&&!!C.arg||C._isFuncArg),s=(0,L.getFieldConfig)(U,C),c=d?U.operators[d]:null;if(s&&s.widgets){var y=function(m){var v=s.widgets[m],N=U.widgets[m].valueSrc||"value",G=!0;if(m=="field"&&(G=G&&Y(U,["field"],s).length>0),m=="func"&&(G=G&&Y(U,["func"],s).length>0),f=="value"&&!v.operators&&!i&&C!="!case_value"&&(G=!1),v.operators&&d&&(G=G&&v.operators.indexOf(d)!=-1),f&&f!=N&&f!="const"&&(G=!1),c&&c.cardinality==0&&N!="value"&&(G=!1),G){g.push(m);var q=s.valueSources&&s.valueSources.indexOf(N)!=-1;c&&c.valueSources&&c.valueSources.indexOf(N)==-1&&(q=!1),q&&!o.find(function(J){return J==N})&&o.push(N)}};for(var p in s.widgets)y(p)}var a=function(m){var v=0;return s.preferWidgets?s.preferWidgets.includes(m)&&(v+=10-s.preferWidgets.indexOf(m)):m==s.mainWidget&&(v+=100),m=="field"&&(v-=1),m=="func"&&(v-=2),v};return g.sort(function(n,m){return a(m)-a(n)}),{widgets:g,valueSrcs:o}}var B=function(C,d,f){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=w(C,d,f,g),i=o.widgets;return i};u.getWidgetsForFieldOp=B;var Y=function(C,d,f){return f?d.filter(function(g){var o=!0;if(g=="field"&&C._fieldsCntByType){var i=f._isFuncArg?0:1;o=o&&C._fieldsCntByType[f.type]>i}return g=="func"&&(C._funcsCntByType&&(o=o&&!!C._funcsCntByType[f.type]),f.funcs&&(o=o&&f.funcs.length>0)),o}):d};u.filterValueSourcesForField=Y;var X=function(C,d,f){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,i=w(C,d,f,null),s=i.valueSrcs,c=Y(C,s,g);return c};u.getValueSourcesForFieldOp=X;var Z=function(C,d,f){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=w(C,d,f,g),i=o.widgets,s=null;return i.length&&(s=i[0]),s};u.getWidgetForFieldOp=Z;var z=function(C,d,f){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(C){var o=(0,L.getFieldConfig)(d,C)||{},i=d.settings.fieldSeparator,s=Array.isArray(C)?C:C.split(i),c=Array.isArray(C)?C.join(i):C;if(o.tableName){var y=(0,S.default)(s);y[0]=o.tableName,c=y.join(i)}if(o.fieldName&&(c=o.fieldName),g){var p=(0,L.getFieldConfig)(d,g)||{},a=g;p.fieldName&&(a=p.fieldName),c.indexOf(a+i)==0?c=c.slice((a+i).length):f.errors.push("Can't cut group ".concat(a," from field ").concat(c))}return c}};u.formatFieldName=z},99890:(re,u,e)=>{"use strict";var r=e(86593),O=e(55629);Object.defineProperty(u,"__esModule",{value:!0}),u.applyToJS=m,u.mapListValues=u.logger=u.listValuesToArray=u.isJsonLogic=u.isImmutable=u.immutableEqual=u.getValueInListValues=u.getTitleInListValues=u.getLogger=u.getItemInListValues=u.getFirstDefined=u.flatizeTreeData=u.escapeRegExp=u.eqSet=u.eqArrSet=u.defaultValue=u.defaultTreeDataMap=u.deepEqual=void 0,u.mergeArraysSmart=N,u.shallowEqual=u.removePrefixPath=u.normalizeListValues=void 0,u.sleep=a,u.toImmutableList=v,u.truncateString=void 0;var S=r(e(74208)),l=r(e(93502)),L=r(e(55629)),R=A(e(15866));function I(k){if(typeof WeakMap!="function")return null;var H=new WeakMap,_=new WeakMap;return(I=function(oe){return oe?_:H})(k)}function A(k,H){if(!H&&k&&k.__esModule)return k;if(k===null||O(k)!=="object"&&typeof k!="function")return{default:k};var _=I(H);if(_&&_.has(k))return _.get(k);var ae={},oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in k)if(le!=="default"&&Object.prototype.hasOwnProperty.call(k,le)){var ue=oe?Object.getOwnPropertyDescriptor(k,le):null;ue&&(ue.get||ue.set)?Object.defineProperty(ae,le,ue):ae[le]=k[le]}return ae.default=k,_&&_.set(k,ae),ae}function P(k,H){var _=typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(!_){if(Array.isArray(k)||(_=E(k))||H&&k&&typeof k.length=="number"){_&&(k=_);var ae=0,oe=function(){};return{s:oe,n:function(){return ae>=k.length?{done:!0}:{done:!1,value:k[ae++]}},e:function(Ee){throw Ee},f:oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le=!0,ue=!1,me;return{s:function(){_=_.call(k)},n:function(){var Ee=_.next();return le=Ee.done,Ee},e:function(Ee){ue=!0,me=Ee},f:function(){try{!le&&_.return!=null&&_.return()}finally{if(ue)throw me}}}}function E(k,H){if(k){if(typeof k=="string")return T(k,H);var _=Object.prototype.toString.call(k).slice(8,-1);if(_==="Object"&&k.constructor&&(_=k.constructor.name),_==="Map"||_==="Set")return Array.from(k);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return T(k,H)}}function T(k,H){(H==null||H>k.length)&&(H=k.length);for(var _=0,ae=new Array(H);_<H;_++)ae[_]=k[_];return ae}var b=function(H,_){return typeof H>"u"?_:H};u.defaultValue=b;var M=function(H,_,ae){if(!_||H.length<=_)return H;var oe=H.substr(0,_-1);return(ae?oe.substr(0,oe.lastIndexOf(" ")):oe)+"..."};u.truncateString=M;var D=function(H,_){return H===_?!0:H.equals(_)};u.immutableEqual=D;var j=function(H,_){return H===_?!0:R.Map.isMap(H)?H.equals(_):JSON.stringify(H)==JSON.stringify(_)};u.deepEqual=j;var F=function(H,_){if(H.size!==_.size)return!1;var ae=P(H),oe;try{for(ae.s();!(oe=ae.n()).done;){var le=oe.value;if(!_.has(le))return!1}}catch(ue){ae.e(ue)}finally{ae.f()}return!0};u.eqSet=F;var $=function(H,_){return F(new Set(H),new Set(_))};u.eqArrSet=$;var V=function(H,_){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return H===_?!0:Array.isArray(H)?K(H,_,ae):R.Map.isMap(H)?H.equals(_):(0,L.default)(H)=="object"?w(H,_,ae):H===_};u.shallowEqual=V;function K(k,H){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(k===H)return!0;if(!k||!H)return!1;var ae=k.length;if(H.length!==ae)return!1;for(var oe=0;oe<ae;oe++){var le=_?V(k[oe],H[oe],_):k[oe]===H[oe];if(!le)return!1}return!0}function w(k,H){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(k===H)return!0;if(!k||!H)return!1;var ae=Object.keys(k),oe=Object.keys(H),le=ae.length;if(oe.length!==le)return!1;for(var ue=0;ue<le;ue++){var me=ae[ue],pe=_?V(k[me],H[me],_):k[me]===H[me];if(!pe)return!1}return!0}var B=function(H){return H.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};u.escapeRegExp=B;var Y=function(H){return(0,L.default)(H)=="object"&&H!==null},X=function(H,_){return Y(H)?H:{value:H,title:_!==void 0?_:H}},Z=function(H){if(!Y(H))return H;if(Array.isArray(H))return H.map(function(le){return X(le)});var _=[];for(var ae in H){var oe=H[ae];_.push(X(ae,oe))}return _};u.listValuesToArray=Z;var z=function(H,_){if(Array.isArray(H)){var ae=H.map(function(oe){return X(oe)});return ae.find(function(oe){return oe.value===_})||ae.find(function(oe){return"".concat(oe.value)===_})}else return H[_]!==void 0?X(_,H[_]):void 0};u.getItemInListValues=z;var U=function(H,_){if(H==null)return _;var ae=z(H,_);return ae!==void 0?ae.title:_};u.getTitleInListValues=U;var C=function(H,_){if(H==null)return _;var ae=z(H,_);return ae!==void 0?ae.value:_};u.getValueInListValues=C;var d=function(H,_){var ae=[];if(Array.isArray(H)){var oe=P(H),le;try{for(oe.s();!(le=oe.n()).done;){var ue=le.value,me=_(X(ue));me!=null&&ae.push(me)}}catch(ge){oe.e(ge)}finally{oe.f()}}else for(var pe in H){var Ee=_(X(pe,H[pe]));Ee!=null&&ae.push(Ee)}return ae};u.mapListValues=d;var f={id:"value",pId:"parent",rootPId:void 0};u.defaultTreeDataMap=f;var g=function(H){var _=f,ae,oe,le=function me(pe,Ee,ge){if(pe.children){ge==1&&(pe[_.pId]=_.rootPId);var Se=pe.children.length,Ae=P(pe.children),ye;try{for(Ae.s();!(ye=Ae.n()).done;){var De=ye.value;De[_.pId]=pe[_.id],ae++,Ee.splice(ae,0,De),oe++,me(De,Ee,ge+1)}}catch(Fe){Ae.e(Fe)}finally{Ae.f()}delete pe.children,Se==0&&(Ee.splice(ae,1),ae--,oe--)}};if(Array.isArray(H))for(oe=H.length,ae=0;ae<oe;ae++){var ue=H[ae];Y(ue)&&(ue[_.pId]!==void 0&&ue[_.pId]!=_.rootPId||le(ue,H,1))}return H};u.flatizeTreeData=g;var o=function k(H,_){var ae=f,oe=z(H,_),le=oe?oe[ae.pId]:void 0,ue=le?H.find(function(me){return me[ae.id]===le}):void 0;return ue?[ue.value].concat((0,l.default)(k(H,ue.value))):[]},i=function(H,_){var ae=f,oe=z(H,_);return oe?H.filter(function(le){return le[ae.pId]===oe[ae.id]}).map(function(le){return le.value}):[]},s=function(H,_,ae){var oe=P(H),le;try{for(oe.s();!(le=oe.n()).done;){var ue=le.value;if(ue.path=o(H,ue.value),_.treeSelectOnlyLeafs!=!1){var me=i(H,ue.value);ae||(ue.selectable=me.length==0)}}}catch(pe){oe.e(pe)}finally{oe.f()}return H},c=function(H,_,ae){var oe=["treeselect","treemultiselect"].includes(_),le=["multiselect","treemultiselect"].includes(_);return oe&&(H=Z(H),H=g(H),H=s(H,ae,le)),H};u.normalizeListValues=c;var y=function(H,_){if(!H)return H;for(var ae=!0,oe=0;oe<_.length;oe++){var le=_[oe];if(!(H[oe]!==void 0&&le==H[oe])){ae=!1;break}}return ae?H.slice(_.length):H};u.removePrefixPath=y;var p=function(H){return(0,L.default)(H)==="object"&&H!==null&&!Array.isArray(H)&&Object.keys(H).length===1};u.isJsonLogic=p;function a(k){return new Promise(function(H){setTimeout(H,k)})}var n=function(H){return(0,L.default)(H)==="object"&&H!==null&&typeof H.toJS=="function"};u.isImmutable=n;function m(k){return n(k)?k.toJS():k}function v(k){return n(k)?k:new R.default.List(k)}function N(k,H){return k||(k=[]),H||(H=[]),H.map(function(_){return[_,k.indexOf(_)]}).map(function(_,ae,oe){var le=(0,S.default)(_,2),ue=le[0],me=le[1];if(me==-1){var pe=oe.slice(ae+1),Ee=oe.slice(0,ae),ge=Ee.reverse().find(function(Ae){var ye=(0,S.default)(Ae,2),De=ye[0],Fe=ye[1];return Fe!=-1}),Se=pe.find(function(Ae){var ye=(0,S.default)(Ae,2),De=ye[0],Fe=ye[1];return Fe!=-1});return Se?[ue,"before",Se[0]]:ge?[ue,"after",ge[0]]:[ue,"append",null]}else return null}).filter(function(_){return _!==null}).reduce(function(_,ae){var oe=(0,S.default)(ae,3),le=oe[0],ue=oe[1],me=oe[2],pe=_.indexOf(me);return _.indexOf(le)==-1&&(pe>-1?_.splice(pe+(ue=="after"?1:0),0,le):_.splice(ue=="append"?1/0:0,0,le)),_},k.slice())}var G=function(){return typeof process<"u"&&process.env&&!1},q=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,_=H??G();return _?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};u.getLogger=q;var J=function(){for(var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_,ae=0;ae<H.length;ae++){var oe=H[ae];if(oe!==void 0){_=oe;break}}return _};u.getFirstDefined=J;var W=q();u.logger=W},50679:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.removePathsInTree=u.removeIsLockedInTree=u.isEmptyTree=u.hasChildren=u.getTreeBadFields=u.getTotalRulesCountInTree=u.getTotalReordableNodesCountInTree=u.getSwitchValues=u.getLightTree=u.getItemByPath=u.getFlatTree=u.fixPathsInTree=u.fixEmptyGroupsInTree=u.expandTreeSubpath=u.expandTreePath=void 0;var O=r(e(93502)),S=r(e(43427)),l=r(e(15866)),L=function(B){for(var Y=arguments.length,X=new Array(Y>1?Y-1:0),Z=1;Z<Y;Z++)X[Z-1]=arguments[Z];return B.interpose("children1").withMutations(function(z){return z.skip(1),z.push.apply(z,X),z})};u.expandTreePath=L;var R=function(B){for(var Y=arguments.length,X=new Array(Y>1?Y-1:0),Z=1;Z<Y;Z++)X[Z-1]=arguments[Z];return B.interpose("children1").withMutations(function(z){return z.push.apply(z,X),z})};u.expandTreeSubpath=R;var I=function(B,Y){var X=new l.default.OrderedMap((0,S.default)({},B.get("id"),B)),Z=B;return Y.forEach(function(z){Z=X.get(z),X=Z.get("children1")}),Z};u.getItemByPath=I;var A=function(B){var Y=B;function X(Z,z){var U=z.push(Z.get("id"));Z.get("path")&&(Y=Y.removeIn(L(U,"path")));var C=Z.get("children1");C&&C.map(function(d,f){X(d,U)})}return X(B,new l.default.List),Y};u.removePathsInTree=A;var P=function(B){var Y=B;function X(Z,z){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=z.push(Z.get("id")),d=Z.getIn(["properties","isLocked"]);U&&d&&(Y=Y.deleteIn(L(C,"properties","isLocked")));var f=Z.get("children1");f&&f.map(function(g,o){X(g,C,d||U)})}return X(B,new l.default.List),Y};u.removeIsLockedInTree=P;var E=function(B){var Y=B;function X(Z,z,U,C){if(Z){var d=Z.get("path"),f=Z.get("id"),g=f||C,o=z.push(g);(!d||!d.equals(o))&&(Y=Y.setIn(L(o,"path"),o)),f||(Y=Y.setIn(L(o,"id"),g));var i=Z.get("children1");i&&(i.constructor.name=="Map"&&(Y=Y.setIn(L(o,"children1"),new l.default.OrderedMap(i))),i.map(function(s,c){X(s,o,U+1,c)}))}}return X(B,new l.default.List,0),Y};u.fixPathsInTree=E;var T=function(B){var Y=B;function X(Z,z,U,C){if(!Z)return!1;var d=Z.get("id")||C,f=z.push(d),g=Z.get("children1");if(g){var o=g.map(function(i,s){return X(i,f,U+1,s)}).reduce(function(i,s){return i&&s},!0);if((g.size==0||o)&&U>0)return Y=Y.deleteIn(L(f)),!0}return!1}return X(B,new l.default.List,0),Y};u.fixEmptyGroupsInTree=T;var b=function(B){var Y=[],X={},Z=0;function z(g,o,i,s,c,y,p,a,n){var m=g.get("type"),v=g.get("collapsed"),N=g.get("id"),G=g.get("children1"),q=g.getIn(["properties","isLocked"]),J=G?G.map(function(me,pe){return pe}):null,W=m=="rule_group",k=!c&&(!G||W),H=Y.length,_=Z;if(Y.push(N),i||(Z+=1),p.height=(p.height||0)+1,X[N]={type:m,parent:o.length?o[o.length-1]:null,parentType:a,caseId:m=="case_group"?N:n,isDefaultCase:m=="case_group"&&!G,path:o.concat(N),lev:y,leaf:!G,index:H,id:N,children:J,leafsCount:0,_top:H,_height:oe-H,top:i?null:_,height:ue,bottom:(i?null:_)+ue,collapsed:v,node:g,isLocked:q||s},G){var ae={};G.map(function(me,pe){z(me,o.concat(N),i||v,s||q,c||W,y+1,ae,m,m=="case_group"?N:n)}),v||(p.height=(p.height||0)+(ae.height||0))}n&&k&&X[n].leafsCount++;var oe=Y.length,le=Z,ue=p.height;Object.assign(X[N],{_height:oe-H,height:ue,bottom:(i?null:_)+ue})}z(B,[],!1,!1,!1,0,{},null,null);for(var U=0;U<Y.length;U++){var C=U>0?Y[U-1]:null,d=U<Y.length-1?Y[U+1]:null,f=X[Y[U]];f.prev=C,f.next=d}return{flat:Y,items:X}};u.getFlatTree=b;var M=function(B){if(!B)return-1;var Y=0;function X(Z,z,U){var C,d,f;typeof Z.get=="function"?(C=Z.get("id"),d=Z.get("children1"),f=Z.get("type")):(C=Z.id,d=Z.children1,f=Z.type);var g=f=="rule_group";Y++,d&&!g&&d.map(function(o,i){X(o,z.concat(C),U+1)})}return X(B,[],0),Y-1};u.getTotalReordableNodesCountInTree=M;var D=function(B){if(!B)return-1;var Y=0;function X(Z,z,U){var C,d,f;typeof Z.get=="function"?(C=Z.get("id"),d=Z.get("children1"),f=Z.get("type")):(C=Z.id,d=Z.children1,f=Z.type),f=="rule"||f=="rule_group"?Y++:d&&d.map(function(g,o){X(g,z.concat(C),U+1)})}return X(B,[],0),Y};u.getTotalRulesCountInTree=D;var j=function(B){var Y=[];function X(Z,z,U){var C=Z.get("id"),d=Z.get("children1"),f=Z.getIn(["properties","valueError"]),g=Z.getIn(["properties","field"]);f&&f.size>0&&f.filter(function(o){return o!=null}).size>0&&Y.push(g),d&&d.map(function(o,i){X(o,z.concat(C),U+1)})}return B&&X(B,[],0),Array.from(new Set(Y))};u.getTreeBadFields=j;var F=function(B){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,X=B;function Z(z,U){z.path&&delete z.path,!Y&&U&&delete z.id;var C=z.properties;C&&C.operatorOptions==null&&delete C.operatorOptions;var d=z.children1;if(d){for(var f in d)Z(d[f],f);Y&&(z.children1=Object.values(d))}}return Z(B,null),X};u.getLightTree=F;var $=function(B){var Y=[],X=B.get("children1");return X&&X.map(function(Z){var z=Z.getIn(["properties","value"]),U;z&&z.size==1?(U=z.get(0),Array.isArray(U)&&U.length==0&&(U=null)):U=null,Y=[].concat((0,O.default)(Y),[U])}),Y};u.getSwitchValues=$;var V=function(B){return!B.get("children1")||B.get("children1").size==0};u.isEmptyTree=V;var K=function(B,Y){return B.getIn(L(Y,"children1")).size>0};u.hasChildren=K},11117:(re,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e=0,r=function(){var S=(new Date().getTime().toString(16)+"FF").substr(0,11),l="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(L){var R=L==="s"?Math.floor(Math.random()*16):e++&15,I=L==="x"?R:R&3|8;return I.toString(16)});return l+S};u.default=r},53931:(re,u,e)=>{"use strict";var r=e(86593);Object.defineProperty(u,"__esModule",{value:!0}),u.validateValue=u.validateTree=u.validateAndFixTree=u.createValidationMemo=void 0;var O=r(e(93502)),S=r(e(74208)),l=r(e(55629)),L=e(6384),R=e(68710),I=e(99890),A=e(78683),P=e(50679),E=r(e(58517)),T=e(15866),b=function(U){return(0,l.default)(U)=="object"&&U!==null&&Array.isArray(U)?"array":(0,l.default)(U)},M=function(U,C){return b(U)==C||C=="number"&&!isNaN(U)},D=function(){var U,C,d;return function(f,g,o){return g?(f.__configId===d&&((0,I.immutableEqual)(g,U)||(0,I.immutableEqual)(g,C))||(d=f.__configId,U=g,C=j(g,null,f,o||f)),C):null}};u.createValidationMemo=D;var j=function(U,C,d,f){var g=F(U,C,d,f);return g=(0,P.fixPathsInTree)(g),g};u.validateAndFixTree=j;var F=function(U,C,d,f,g,o){g===void 0&&(g=d.settings.removeEmptyGroupsOnLoad),o===void 0&&(o=d.settings.removeIncompleteRulesOnLoad);var i={config:d,oldConfig:f,removeEmptyGroups:g,removeIncompleteRules:o};return $(U,[],null,{},i)};u.validateTree=F;function $(z,U,C,d,f){var g=z.get("type"),o=z.get("children1");return(g==="group"||g==="rule_group"||g=="case_group"||g=="switch_group")&&o&&o.size?V(z,U,C,d,f):g==="rule"?K(z,U,C,d,f):z}function V(z,U,C,d,f){var g=f.removeEmptyGroups,o=z.get("id"),i=z.get("children1"),s=i;!o&&C&&(o=C,z=z.set("id",o),d.sanitized=!0);var c={};i=i.map(function(p,a){return $(p,U.concat(o),a,c,f)}),g&&(i=i.filter(function(p){return p!=null}));var y=c.sanitized||s.size!=i.size;return!i.size&&g&&U.length&&(y=!0,z=void 0),y&&(d.sanitized=!0),y&&z&&(z=z.set("children1",i)),z}function K(z,U,C,d,f){var g=f.removeIncompleteRules,o=f.config,i=f.oldConfig,s=o.settings.showErrorMessage,c=z.get("id"),y=z.get("properties"),p=y.get("field")||null,a=y.get("operator")||null,n=y.get("operatorOptions"),m=y.get("valueSrc"),v=y.get("value"),N=y.get("valueError"),G={field:p,operator:a,operatorOptions:n?n.toJS():{},valueSrc:m?m.toJS():null,value:v?v.toJS():null,valueError:N?N.toJS():null},q=p&&a&&v&&!v.includes(void 0);!c&&C&&(c=C,z=z.set("id",c),d.sanitized=!0);var J=p?(0,L.getFieldConfig)(o,p):null;p&&!J&&(I.logger.warn("No config for field ".concat(p)),p=null),p==null&&(y=["operator","operatorOptions","valueSrc","value"].reduce(function(Se,Ae){return Se.delete(Ae)},y),a=null),(a=="range_between"||a=="range_not_between")&&(a=a=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(y.get("operator")," to ").concat(a)),y=y.set("operator",a));var W=a?(0,L.getOperatorConfig)(o,a,p):null;a&&!W&&(console.warn("No config for operator ".concat(a)),a=null);var k=p?(0,R.getOperatorsForField)(o,p):[];k?a&&k.indexOf(a)==-1&&(a=="is_empty"||a=="is_not_empty"?(a=a=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(y.get("operator")," to ").concat(a," for ").concat(p)),y=y.set("operator",a)):(console.warn("Operator ".concat(a," is not supported for field ").concat(p)),a=null)):(console.warn("Type of field ".concat(p," is not supported")),a=null),a==null&&(y=y.delete("operatorOptions"),y=y.delete("valueSrc"),y=y.delete("value")),n=y.get("operatorOptions");var H=a?(0,I.defaultValue)(W.cardinality,1):null;!a||n&&!W.options?(n=null,y=y.delete("operatorOptions")):a&&!n&&W.options&&(n=(0,A.defaultOperatorOptions)(o,a,p),y=y.set("operatorOptions",n)),m=y.get("valueSrc"),v=y.get("value");var _=!s,ae=!0,oe=(0,R.getNewValueForFieldOp)(o,i,y,p,a,null,_,ae),le=oe.newValue,ue=oe.newValueSrc,me=oe.newValueError;v=le,m=ue,N=me,y=y.set("value",v),y=y.set("valueSrc",m),s&&(y=y.set("valueError",N));var pe={field:p,operator:a,operatorOptions:n?n.toJS():{},valueSrc:m?m.toJS():null,value:v?v.toJS():null,valueError:N?N.toJS():null},Ee=!(0,I.deepEqual)(G,pe),ge=p&&a&&v&&!v.includes(void 0);return Ee&&(d.sanitized=!0),!ge&&g?z=void 0:Ee&&(z=z.set("properties",y)),z}var w=function(U,C,d,f,g,o,i,s){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,a=null,n=g;if(g!=null){if(i=="field"){var m=X(C,d,g,i,o,s,U,f,y,c),v=(0,S.default)(m,2);a=v[0],n=v[1]}else if(i=="func"){var N=Z(C,d,g,i,o,s,U,f,y,c),G=(0,S.default)(N,2);a=G[0],n=G[1]}else if(i=="value"||!i){var q=Y(C,d,g,i,o,s,U,f,y,c),J=(0,S.default)(q,2);a=J[0],n=J[1]}if(!a){var W=(0,L.getFieldConfig)(U,d),k=(0,R.getWidgetForFieldOp)(U,d,f,i),H=f?(0,L.getOperatorConfig)(U,f,d):null,_=(0,E.default)((0,L.getFieldWidgetConfig)(U,d,f,k,i),["factory"]),ae=i=="field"?(0,L.getFieldConfig)(U,g):null,oe=_,le=_.validateValue;if(typeof le=="function"){var ue=[n,oe,f,H];i=="field"&&ue.push(ae);var me=le.apply(void 0,ue);typeof me=="boolean"?me==!1&&(a="Invalid value"):a=me}}}return p&&a&&console.warn("[RAQB validate]","Field ".concat(d,": ").concat(a)),[a,n]};u.validateValue=w;var B=function(U,C,d,f,g){var o=T.List.isList(U)?U.toJS():U instanceof Array?(0,O.default)(U):void 0;if(o){var i=o.reduce(function(m,v){var N=(0,S.default)(m,2),G=N[0],q=N[1],J=(0,I.getItemInListValues)(C,v);return J==null?[G,[].concat((0,O.default)(q),[v])]:[[].concat((0,O.default)(G),[J.value]),q]},[[],[]]),s=(0,S.default)(i,2),c=s[0],y=s[1],p=y.length>1,a=y.length?"".concat(p?"Values":"Value"," ").concat(y.join(", ")," ").concat(p?"are":"is"," not in list of values"):null;return g!==void 0?d=g:d=d||f,[a,d?c:U]}else{var n=(0,I.getItemInListValues)(C,U);return n==null?["Value ".concat(U," is not in list of values"),U]:(U=n.value,[null,U])}},Y=function(U,C,d,f,g,o,i){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(C){var p=(0,L.getFieldConfig)(i,C),a=(0,R.getWidgetForFieldOp)(i,C,s,f),n=i.widgets[a],m=n.type,v=n.jsType,N=p.fieldSettings;if(g!=m)return["Value should have type ".concat(m,", but got value of type ").concat(g),d];if(v&&!M(d,v)&&!N.listValues)return["Value should have JS type ".concat(v,", but got value of type ").concat((0,l.default)(d)),d];if(N){var G=o||N.listValues;if(G&&!N.allowCustomValues)return B(d,G,y,c,i.settings.removeInvalidMultiSelectValuesOnLoad);if(N.min!=null&&d<N.min)return["Value ".concat(d," < min ").concat(N.min),y?N.min:d];if(N.max!=null&&d>N.max)return["Value ".concat(d," > max ").concat(N.max),y?N.max:d]}}return[null,d]},X=function(U,C,d,f,g,o,i){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=i.settings.fieldSeparator,a=(0,l.default)(C)=="object"&&C?._isFuncArg,n=Array.isArray(U)?U.join(p):U,m=Array.isArray(d)?d.join(p):d,v=(0,L.getFieldConfig)(i,d);return v?m==n&&!a?["Can't compare field ".concat(U," with itself"),d]:g&&g!=v.type?["Field ".concat(d," is of type ").concat(v.type,", but expected ").concat(g),d]:[null,d]:["Unknown field ".concat(d),d]},Z=function(U,C,d,f,g,o,i){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=d;if(d){var a=d.get("func");if(a){var n=(0,L.getFuncConfig)(i,a);if(n){if(g&&n.returnType!=g)return["Function ".concat(a," should return value of type ").concat(n.returnType,", but got ").concat(g),d];for(var m in n.args){var v=n.args[m],N=p.get("args"),G=N?N.get(m):void 0,q=(0,L.getFieldConfig)(i,v),J=G?G.get("value"):void 0,W=G?G.get("valueSrc"):void 0;if(J!==void 0){var k=w(i,U,q,s,J,v.type,W,o,y,c,!1),H=(0,S.default)(k,2),_=H[0],ae=H[1];if(_!==null)if(y)p=p.deleteIn(["args",m]),v.defaultValue!==void 0&&(p=p.setIn(["args",m,"value"],v.defaultValue),p=p.setIn(["args",m,"valueSrc"],"value"));else return["Invalid value of arg ".concat(m," for func ").concat(a,": ").concat(_),d];else ae!==J&&(p=p.setIn(["args",m,"value"],ae))}else if(c&&v.defaultValue===void 0&&!y)return["Value of arg ".concat(m," for func ").concat(a," is required"),d]}}else return["Unknown function ".concat(a),d]}}return[null,p]}},23005:(re,u,e)=>{"use strict";e.r(u),e.d(u,{Provider:()=>D,ReactReduxContext:()=>S,batch:()=>ke.unstable_batchedUpdates,connect:()=>Se,connectAdvanced:()=>g,createDispatchHook:()=>Fe,createSelectorHook:()=>He,createStoreHook:()=>ye,shallowEqual:()=>i,useDispatch:()=>We,useSelector:()=>at,useStore:()=>De});var r=e(27702),O=e(93415),S=r.createContext(null);const l=null;function L(de){de()}var R=L,I=function(Ce){return R=Ce},A=function(){return R};function P(){var de=A(),Ce=null,Le=null;return{clear:function(){Ce=null,Le=null},notify:function(){de(function(){for(var Ue=Ce;Ue;)Ue.callback(),Ue=Ue.next})},get:function(){for(var Ue=[],Ge=Ce;Ge;)Ue.push(Ge),Ge=Ge.next;return Ue},subscribe:function(Ue){var Ge=!0,be=Le={callback:Ue,next:null,prev:Le};return be.prev?be.prev.next=be:Ce=be,function(){!Ge||Ce===null||(Ge=!1,be.next?be.next.prev=be.prev:Le=be.prev,be.prev?be.prev.next=be.next:Ce=be.next)}}}}var E={notify:function(){},get:function(){return[]}};function T(de,Ce){var Le,we=E;function Ue(ut){return rt(),we.subscribe(ut)}function Ge(){we.notify()}function be(){Qe.onStateChange&&Qe.onStateChange()}function $e(){return!!Le}function rt(){Le||(Le=Ce?Ce.addNestedSub(be):de.subscribe(be),we=P())}function it(){Le&&(Le(),Le=void 0,we.clear(),we=E)}var Qe={addNestedSub:Ue,notifyNestedSubs:Ge,handleChangeWrapper:be,isSubscribed:$e,trySubscribe:rt,tryUnsubscribe:it,getListeners:function(){return we}};return Qe}var b=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?r.useLayoutEffect:r.useEffect;function M(de){var Ce=de.store,Le=de.context,we=de.children,Ue=(0,r.useMemo)(function(){var $e=T(Ce);return{store:Ce,subscription:$e}},[Ce]),Ge=(0,r.useMemo)(function(){return Ce.getState()},[Ce]);b(function(){var $e=Ue.subscription;return $e.onStateChange=$e.notifyNestedSubs,$e.trySubscribe(),Ge!==Ce.getState()&&$e.notifyNestedSubs(),function(){$e.tryUnsubscribe(),$e.onStateChange=null}},[Ue,Ge]);var be=Le||S;return r.createElement(be.Provider,{value:Ue},we)}const D=M;var j=e(94285),F=e(46340),$=e(43313),V=e.n($),K=e(15713),w=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],B=["reactReduxForwardedRef"],Y=[],X=[null,null],Z=function(Ce){try{return JSON.stringify(Ce)}catch{return String(Ce)}};function z(de,Ce){var Le=de[1];return[Ce.payload,Le+1]}function U(de,Ce,Le){b(function(){return de.apply(void 0,Ce)},Le)}function C(de,Ce,Le,we,Ue,Ge,be){de.current=we,Ce.current=Ue,Le.current=!1,Ge.current&&(Ge.current=null,be())}function d(de,Ce,Le,we,Ue,Ge,be,$e,rt,it){if(de){var Qe=!1,ut=null,st=function(){if(!Qe){var gt=Ce.getState(),It,Lt;try{It=we(gt,Ue.current)}catch(lt){Lt=lt,ut=lt}Lt||(ut=null),It===Ge.current?be.current||rt():(Ge.current=It,$e.current=It,be.current=!0,it({type:"STORE_UPDATED",payload:{error:Lt}}))}};Le.onStateChange=st,Le.trySubscribe(),st();var Je=function(){if(Qe=!0,Le.tryUnsubscribe(),Le.onStateChange=null,ut)throw ut};return Je}}var f=function(){return[null,0]};function g(de,Ce){Ce===void 0&&(Ce={});var Le=Ce,we=Le.getDisplayName,Ue=we===void 0?function(zt){return"ConnectAdvanced("+zt+")"}:we,Ge=Le.methodName,be=Ge===void 0?"connectAdvanced":Ge,$e=Le.renderCountProp,rt=$e===void 0?void 0:$e,it=Le.shouldHandleStateChanges,Qe=it===void 0?!0:it,ut=Le.storeKey,st=ut===void 0?"store":ut,Je=Le.withRef,vt=Je===void 0?!1:Je,gt=Le.forwardRef,It=gt===void 0?!1:gt,Lt=Le.context,lt=Lt===void 0?S:Lt,Rt=(0,F.Z)(Le,w);if(!1)var bt;var wt=lt;return function(ct){var Et=ct.displayName||ct.name||"Component",Ct=Ue(Et),Pt=(0,j.Z)({},Rt,{getDisplayName:Ue,methodName:be,renderCountProp:rt,shouldHandleStateChanges:Qe,storeKey:st,displayName:Ct,wrappedComponentName:Et,WrappedComponent:ct}),xt=Rt.pure;function Ft(Nt){return de(Nt.dispatch,Pt)}var xe=xt?r.useMemo:function(Nt){return Nt()};function ft(Nt){var $t=(0,r.useMemo)(function(){var Zt=Nt.reactReduxForwardedRef,ir=(0,F.Z)(Nt,B);return[Nt.context,Zt,ir]},[Nt]),Wt=$t[0],Xt=$t[1],qe=$t[2],kt=(0,r.useMemo)(function(){return Wt&&Wt.Consumer&&(0,K.isContextConsumer)(r.createElement(Wt.Consumer,null))?Wt:wt},[Wt,wt]),ce=(0,r.useContext)(kt),Te=!!Nt.store&&!!Nt.store.getState&&!!Nt.store.dispatch,je=!!ce&&!!ce.store,ot=Te?Nt.store:ce.store,Dt=(0,r.useMemo)(function(){return Ft(ot)},[ot]),Kt=(0,r.useMemo)(function(){if(!Qe)return X;var Zt=T(ot,Te?null:ce.subscription),ir=Zt.notifyNestedSubs.bind(Zt);return[Zt,ir]},[ot,Te,ce]),rr=Kt[0],Tr=Kt[1],dr=(0,r.useMemo)(function(){return Te?ce:(0,j.Z)({},ce,{subscription:rr})},[Te,ce,rr]),Lr=(0,r.useReducer)(z,Y,f),Mr=Lr[0],pr=Mr[0],vr=Lr[1];if(pr&&pr.error)throw pr.error;var nr=(0,r.useRef)(),gr=(0,r.useRef)(qe),ar=(0,r.useRef)(),Sr=(0,r.useRef)(!1),hr=xe(function(){return ar.current&&qe===gr.current?ar.current:Dt(ot.getState(),qe)},[ot,pr,qe]);U(C,[gr,nr,Sr,qe,hr,ar,Tr]),U(d,[Qe,ot,rr,Dt,gr,nr,Sr,ar,Tr,vr],[ot,rr,Dt]);var mr=(0,r.useMemo)(function(){return r.createElement(ct,(0,j.Z)({},hr,{ref:Xt}))},[Xt,ct,hr]),br=(0,r.useMemo)(function(){return Qe?r.createElement(kt.Provider,{value:dr},mr):mr},[kt,mr,dr]);return br}var pt=xt?r.memo(ft):ft;if(pt.WrappedComponent=ct,pt.displayName=ft.displayName=Ct,It){var Ze=r.forwardRef(function($t,Wt){return r.createElement(pt,(0,j.Z)({},$t,{reactReduxForwardedRef:Wt}))});return Ze.displayName=Ct,Ze.WrappedComponent=ct,V()(Ze,ct)}return V()(pt,ct)}}function o(de,Ce){return de===Ce?de!==0||Ce!==0||1/de===1/Ce:de!==de&&Ce!==Ce}function i(de,Ce){if(o(de,Ce))return!0;if(typeof de!="object"||de===null||typeof Ce!="object"||Ce===null)return!1;var Le=Object.keys(de),we=Object.keys(Ce);if(Le.length!==we.length)return!1;for(var Ue=0;Ue<Le.length;Ue++)if(!Object.prototype.hasOwnProperty.call(Ce,Le[Ue])||!o(de[Le[Ue]],Ce[Le[Ue]]))return!1;return!0}function s(de,Ce){var Le={},we=function(be){var $e=de[be];typeof $e=="function"&&(Le[be]=function(){return Ce($e.apply(void 0,arguments))})};for(var Ue in de)we(Ue);return Le}function c(de){return function(Le,we){var Ue=de(Le,we);function Ge(){return Ue}return Ge.dependsOnOwnProps=!1,Ge}}function y(de){return de.dependsOnOwnProps!==null&&de.dependsOnOwnProps!==void 0?!!de.dependsOnOwnProps:de.length!==1}function p(de,Ce){return function(we,Ue){var Ge=Ue.displayName,be=function(rt,it){return be.dependsOnOwnProps?be.mapToProps(rt,it):be.mapToProps(rt)};return be.dependsOnOwnProps=!0,be.mapToProps=function(rt,it){be.mapToProps=de,be.dependsOnOwnProps=y(de);var Qe=be(rt,it);return typeof Qe=="function"&&(be.mapToProps=Qe,be.dependsOnOwnProps=y(Qe),Qe=be(rt,it)),Qe},be}}function a(de){return typeof de=="function"?p(de,"mapDispatchToProps"):void 0}function n(de){return de?void 0:c(function(Ce){return{dispatch:Ce}})}function m(de){return de&&typeof de=="object"?c(function(Ce){return s(de,Ce)}):void 0}const v=[a,n,m];function N(de){return typeof de=="function"?p(de,"mapStateToProps"):void 0}function G(de){return de?void 0:c(function(){return{}})}const q=[N,G];function J(de,Ce,Le){return(0,j.Z)({},Le,de,Ce)}function W(de){return function(Le,we){var Ue=we.displayName,Ge=we.pure,be=we.areMergedPropsEqual,$e=!1,rt;return function(Qe,ut,st){var Je=de(Qe,ut,st);return $e?(!Ge||!be(Je,rt))&&(rt=Je):($e=!0,rt=Je),rt}}}function k(de){return typeof de=="function"?W(de):void 0}function H(de){return de?void 0:function(){return J}}const _=[k,H];var ae=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function oe(de,Ce,Le,we){return function(Ge,be){return Le(de(Ge,be),Ce(we,be),be)}}function le(de,Ce,Le,we,Ue){var Ge=Ue.areStatesEqual,be=Ue.areOwnPropsEqual,$e=Ue.areStatePropsEqual,rt=!1,it,Qe,ut,st,Je;function vt(Rt,bt){return it=Rt,Qe=bt,ut=de(it,Qe),st=Ce(we,Qe),Je=Le(ut,st,Qe),rt=!0,Je}function gt(){return ut=de(it,Qe),Ce.dependsOnOwnProps&&(st=Ce(we,Qe)),Je=Le(ut,st,Qe),Je}function It(){return de.dependsOnOwnProps&&(ut=de(it,Qe)),Ce.dependsOnOwnProps&&(st=Ce(we,Qe)),Je=Le(ut,st,Qe),Je}function Lt(){var Rt=de(it,Qe),bt=!$e(Rt,ut);return ut=Rt,bt&&(Je=Le(ut,st,Qe)),Je}function lt(Rt,bt){var wt=!be(bt,Qe),zt=!Ge(Rt,it);return it=Rt,Qe=bt,wt&&zt?gt():wt?It():zt?Lt():Je}return function(bt,wt){return rt?lt(bt,wt):vt(bt,wt)}}function ue(de,Ce){var Le=Ce.initMapStateToProps,we=Ce.initMapDispatchToProps,Ue=Ce.initMergeProps,Ge=(0,F.Z)(Ce,ae),be=Le(de,Ge),$e=we(de,Ge),rt=Ue(de,Ge),it=Ge.pure?le:oe;return it(be,$e,rt,de,Ge)}var me=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function pe(de,Ce,Le){for(var we=Ce.length-1;we>=0;we--){var Ue=Ce[we](de);if(Ue)return Ue}return function(Ge,be){throw new Error("Invalid value of type "+typeof de+" for "+Le+" argument when connecting component "+be.wrappedComponentName+".")}}function Ee(de,Ce){return de===Ce}function ge(de){var Ce=de===void 0?{}:de,Le=Ce.connectHOC,we=Le===void 0?g:Le,Ue=Ce.mapStateToPropsFactories,Ge=Ue===void 0?q:Ue,be=Ce.mapDispatchToPropsFactories,$e=be===void 0?v:be,rt=Ce.mergePropsFactories,it=rt===void 0?_:rt,Qe=Ce.selectorFactory,ut=Qe===void 0?ue:Qe;return function(Je,vt,gt,It){It===void 0&&(It={});var Lt=It,lt=Lt.pure,Rt=lt===void 0?!0:lt,bt=Lt.areStatesEqual,wt=bt===void 0?Ee:bt,zt=Lt.areOwnPropsEqual,ct=zt===void 0?i:zt,Et=Lt.areStatePropsEqual,Ct=Et===void 0?i:Et,Pt=Lt.areMergedPropsEqual,xt=Pt===void 0?i:Pt,Ft=(0,F.Z)(Lt,me),xe=pe(Je,Ge,"mapStateToProps"),ft=pe(vt,$e,"mapDispatchToProps"),pt=pe(gt,it,"mergeProps");return we(ut,(0,j.Z)({methodName:"connect",getDisplayName:function(Nt){return"Connect("+Nt+")"},shouldHandleStateChanges:!!Je,initMapStateToProps:xe,initMapDispatchToProps:ft,initMergeProps:pt,pure:Rt,areStatesEqual:wt,areOwnPropsEqual:ct,areStatePropsEqual:Ct,areMergedPropsEqual:xt},Ft))}}const Se=ge();function Ae(){var de=(0,r.useContext)(S);return de}function ye(de){de===void 0&&(de=S);var Ce=de===S?Ae:function(){return(0,r.useContext)(de)};return function(){var we=Ce(),Ue=we.store;return Ue}}var De=ye();function Fe(de){de===void 0&&(de=S);var Ce=de===S?De:ye(de);return function(){var we=Ce();return we.dispatch}}var We=Fe(),Ke=function(Ce,Le){return Ce===Le};function _e(de,Ce,Le,we){var Ue=(0,r.useReducer)(function(vt){return vt+1},0),Ge=Ue[1],be=(0,r.useMemo)(function(){return T(Le,we)},[Le,we]),$e=(0,r.useRef)(),rt=(0,r.useRef)(),it=(0,r.useRef)(),Qe=(0,r.useRef)(),ut=Le.getState(),st;try{if(de!==rt.current||ut!==it.current||$e.current){var Je=de(ut);Qe.current===void 0||!Ce(Je,Qe.current)?st=Je:st=Qe.current}else st=Qe.current}catch(vt){throw $e.current&&(vt.message+=`
The error may be correlated with this previous error:
`+$e.current.stack+`

`),vt}return b(function(){rt.current=de,it.current=ut,Qe.current=st,$e.current=void 0}),b(function(){function vt(){try{var gt=Le.getState();if(gt===it.current)return;var It=rt.current(gt);if(Ce(It,Qe.current))return;Qe.current=It,it.current=gt}catch(Lt){$e.current=Lt}Ge()}return be.onStateChange=vt,be.trySubscribe(),vt(),function(){return be.tryUnsubscribe()}},[Le,be]),st}function He(de){de===void 0&&(de=S);var Ce=de===S?Ae:function(){return(0,r.useContext)(de)};return function(we,Ue){Ue===void 0&&(Ue=Ke);var Ge=Ce(),be=Ge.store,$e=Ge.subscription,rt=_e(we,Ue,be,$e);return(0,r.useDebugValue)(rt),rt}}var at=He(),ke=e(27473);I(ke.unstable_batchedUpdates)},80601:(re,u,e)=>{"use strict";var r;r={value:!0};var O=e(48314),S=e(27702),l=O.__importDefault(e(58281));function L(R,I){I===void 0&&(I=[]);var A=l.default(R,I,{loading:!0}),P=A[0],E=A[1];return S.useEffect(function(){E()},[E]),P}u.Z=L},15322:(re,u,e)=>{var r=e(89818).Buffer,O=function(){"use strict";function S(M,D){return D!=null&&M instanceof D}var l;try{l=Map}catch{l=function(){}}var L;try{L=Set}catch{L=function(){}}var R;try{R=Promise}catch{R=function(){}}function I(M,D,j,F,$){typeof D=="object"&&(j=D.depth,F=D.prototype,$=D.includeNonEnumerable,D=D.circular);var V=[],K=[],w=typeof r<"u";typeof D>"u"&&(D=!0),typeof j>"u"&&(j=1/0);function B(Y,X){if(Y===null)return null;if(X===0)return Y;var Z,z;if(typeof Y!="object")return Y;if(S(Y,l))Z=new l;else if(S(Y,L))Z=new L;else if(S(Y,R))Z=new R(function(c,y){Y.then(function(p){c(B(p,X-1))},function(p){y(B(p,X-1))})});else if(I.__isArray(Y))Z=[];else if(I.__isRegExp(Y))Z=new RegExp(Y.source,b(Y)),Y.lastIndex&&(Z.lastIndex=Y.lastIndex);else if(I.__isDate(Y))Z=new Date(Y.getTime());else{if(w&&r.isBuffer(Y))return r.allocUnsafe?Z=r.allocUnsafe(Y.length):Z=new r(Y.length),Y.copy(Z),Z;S(Y,Error)?Z=Object.create(Y):typeof F>"u"?(z=Object.getPrototypeOf(Y),Z=Object.create(z)):(Z=Object.create(F),z=F)}if(D){var U=V.indexOf(Y);if(U!=-1)return K[U];V.push(Y),K.push(Z)}S(Y,l)&&Y.forEach(function(c,y){var p=B(y,X-1),a=B(c,X-1);Z.set(p,a)}),S(Y,L)&&Y.forEach(function(c){var y=B(c,X-1);Z.add(y)});for(var C in Y){var d;z&&(d=Object.getOwnPropertyDescriptor(z,C)),!(d&&d.set==null)&&(Z[C]=B(Y[C],X-1))}if(Object.getOwnPropertySymbols)for(var f=Object.getOwnPropertySymbols(Y),C=0;C<f.length;C++){var g=f[C],o=Object.getOwnPropertyDescriptor(Y,g);o&&!o.enumerable&&!$||(Z[g]=B(Y[g],X-1),o.enumerable||Object.defineProperty(Z,g,{enumerable:!1}))}if($)for(var i=Object.getOwnPropertyNames(Y),C=0;C<i.length;C++){var s=i[C],o=Object.getOwnPropertyDescriptor(Y,s);o&&o.enumerable||(Z[s]=B(Y[s],X-1),Object.defineProperty(Z,s,{enumerable:!1}))}return Z}return B(M,j)}I.clonePrototype=function(D){if(D===null)return null;var j=function(){};return j.prototype=D,new j};function A(M){return Object.prototype.toString.call(M)}I.__objToStr=A;function P(M){return typeof M=="object"&&A(M)==="[object Date]"}I.__isDate=P;function E(M){return typeof M=="object"&&A(M)==="[object Array]"}I.__isArray=E;function T(M){return typeof M=="object"&&A(M)==="[object RegExp]"}I.__isRegExp=T;function b(M){var D="";return M.global&&(D+="g"),M.ignoreCase&&(D+="i"),M.multiline&&(D+="m"),D}return I.__getRegExpFlags=b,I}();re.exports&&(re.exports=O)},15866:function(re){(function(u,e){re.exports=e()})(this,function(){"use strict";var u=Array.prototype.slice;function e(t,h){h&&(t.prototype=Object.create(h.prototype)),t.prototype.constructor=t}function r(t){return L(t)?t:k(t)}e(O,r);function O(t){return R(t)?t:H(t)}e(S,r);function S(t){return I(t)?t:_(t)}e(l,r);function l(t){return L(t)&&!A(t)?t:ae(t)}function L(t){return!!(t&&t[E])}function R(t){return!!(t&&t[T])}function I(t){return!!(t&&t[b])}function A(t){return R(t)||I(t)}function P(t){return!!(t&&t[M])}r.isIterable=L,r.isKeyed=R,r.isIndexed=I,r.isAssociative=A,r.isOrdered=P,r.Keyed=O,r.Indexed=S,r.Set=l;var E="@@__IMMUTABLE_ITERABLE__@@",T="@@__IMMUTABLE_KEYED__@@",b="@@__IMMUTABLE_INDEXED__@@",M="@@__IMMUTABLE_ORDERED__@@",D="delete",j=5,F=1<<j,$=F-1,V={},K={value:!1},w={value:!1};function B(t){return t.value=!1,t}function Y(t){t&&(t.value=!0)}function X(){}function Z(t,h){h=h||0;for(var x=Math.max(0,t.length-h),Q=new Array(x),ee=0;ee<x;ee++)Q[ee]=t[ee+h];return Q}function z(t){return t.size===void 0&&(t.size=t.__iterate(C)),t.size}function U(t,h){if(typeof h!="number"){var x=h>>>0;if(""+x!==h||x===4294967295)return NaN;h=x}return h<0?z(t)+h:h}function C(){return!0}function d(t,h,x){return(t===0||x!==void 0&&t<=-x)&&(h===void 0||x!==void 0&&h>=x)}function f(t,h){return o(t,h,0)}function g(t,h){return o(t,h,h)}function o(t,h,x){return t===void 0?x:t<0?Math.max(0,h+t):h===void 0?t:Math.min(h,t)}var i=0,s=1,c=2,y=typeof Symbol=="function"&&Symbol.iterator,p="@@iterator",a=y||p;function n(t){this.next=t}n.prototype.toString=function(){return"[Iterator]"},n.KEYS=i,n.VALUES=s,n.ENTRIES=c,n.prototype.inspect=n.prototype.toSource=function(){return this.toString()},n.prototype[a]=function(){return this};function m(t,h,x,Q){var ee=t===0?h:t===1?x:[h,x];return Q?Q.value=ee:Q={value:ee,done:!1},Q}function v(){return{value:void 0,done:!0}}function N(t){return!!J(t)}function G(t){return t&&typeof t.next=="function"}function q(t){var h=J(t);return h&&h.call(t)}function J(t){var h=t&&(y&&t[y]||t[p]);if(typeof h=="function")return h}function W(t){return t&&typeof t.length=="number"}e(k,r);function k(t){return t==null?Se():L(t)?t.toSeq():De(t)}k.of=function(){return k(arguments)},k.prototype.toSeq=function(){return this},k.prototype.toString=function(){return this.__toString("Seq {","}")},k.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},k.prototype.__iterate=function(t,h){return We(this,t,h,!0)},k.prototype.__iterator=function(t,h){return Ke(this,t,h,!0)},e(H,k);function H(t){return t==null?Se().toKeyedSeq():L(t)?R(t)?t.toSeq():t.fromEntrySeq():Ae(t)}H.prototype.toKeyedSeq=function(){return this},e(_,k);function _(t){return t==null?Se():L(t)?R(t)?t.entrySeq():t.toIndexedSeq():ye(t)}_.of=function(){return _(arguments)},_.prototype.toIndexedSeq=function(){return this},_.prototype.toString=function(){return this.__toString("Seq [","]")},_.prototype.__iterate=function(t,h){return We(this,t,h,!1)},_.prototype.__iterator=function(t,h){return Ke(this,t,h,!1)},e(ae,k);function ae(t){return(t==null?Se():L(t)?R(t)?t.entrySeq():t:ye(t)).toSetSeq()}ae.of=function(){return ae(arguments)},ae.prototype.toSetSeq=function(){return this},k.isSeq=Ee,k.Keyed=H,k.Set=ae,k.Indexed=_;var oe="@@__IMMUTABLE_SEQ__@@";k.prototype[oe]=!0,e(le,_);function le(t){this._array=t,this.size=t.length}le.prototype.get=function(t,h){return this.has(t)?this._array[U(this,t)]:h},le.prototype.__iterate=function(t,h){for(var x=this._array,Q=x.length-1,ee=0;ee<=Q;ee++)if(t(x[h?Q-ee:ee],ee,this)===!1)return ee+1;return ee},le.prototype.__iterator=function(t,h){var x=this._array,Q=x.length-1,ee=0;return new n(function(){return ee>Q?v():m(t,ee,x[h?Q-ee++:ee++])})},e(ue,H);function ue(t){var h=Object.keys(t);this._object=t,this._keys=h,this.size=h.length}ue.prototype.get=function(t,h){return h!==void 0&&!this.has(t)?h:this._object[t]},ue.prototype.has=function(t){return this._object.hasOwnProperty(t)},ue.prototype.__iterate=function(t,h){for(var x=this._object,Q=this._keys,ee=Q.length-1,se=0;se<=ee;se++){var fe=Q[h?ee-se:se];if(t(x[fe],fe,this)===!1)return se+1}return se},ue.prototype.__iterator=function(t,h){var x=this._object,Q=this._keys,ee=Q.length-1,se=0;return new n(function(){var fe=Q[h?ee-se:se];return se++>ee?v():m(t,fe,x[fe])})},ue.prototype[M]=!0,e(me,_);function me(t){this._iterable=t,this.size=t.length||t.size}me.prototype.__iterateUncached=function(t,h){if(h)return this.cacheResult().__iterate(t,h);var x=this._iterable,Q=q(x),ee=0;if(G(Q))for(var se;!(se=Q.next()).done&&t(se.value,ee++,this)!==!1;);return ee},me.prototype.__iteratorUncached=function(t,h){if(h)return this.cacheResult().__iterator(t,h);var x=this._iterable,Q=q(x);if(!G(Q))return new n(v);var ee=0;return new n(function(){var se=Q.next();return se.done?se:m(t,ee++,se.value)})},e(pe,_);function pe(t){this._iterator=t,this._iteratorCache=[]}pe.prototype.__iterateUncached=function(t,h){if(h)return this.cacheResult().__iterate(t,h);for(var x=this._iterator,Q=this._iteratorCache,ee=0;ee<Q.length;)if(t(Q[ee],ee++,this)===!1)return ee;for(var se;!(se=x.next()).done;){var fe=se.value;if(Q[ee]=fe,t(fe,ee++,this)===!1)break}return ee},pe.prototype.__iteratorUncached=function(t,h){if(h)return this.cacheResult().__iterator(t,h);var x=this._iterator,Q=this._iteratorCache,ee=0;return new n(function(){if(ee>=Q.length){var se=x.next();if(se.done)return se;Q[ee]=se.value}return m(t,ee,Q[ee++])})};function Ee(t){return!!(t&&t[oe])}var ge;function Se(){return ge||(ge=new le([]))}function Ae(t){var h=Array.isArray(t)?new le(t).fromEntrySeq():G(t)?new pe(t).fromEntrySeq():N(t)?new me(t).fromEntrySeq():typeof t=="object"?new ue(t):void 0;if(!h)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return h}function ye(t){var h=Fe(t);if(!h)throw new TypeError("Expected Array or iterable object of values: "+t);return h}function De(t){var h=Fe(t)||typeof t=="object"&&new ue(t);if(!h)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return h}function Fe(t){return W(t)?new le(t):G(t)?new pe(t):N(t)?new me(t):void 0}function We(t,h,x,Q){var ee=t._cache;if(ee){for(var se=ee.length-1,fe=0;fe<=se;fe++){var he=ee[x?se-fe:fe];if(h(he[1],Q?he[0]:fe,t)===!1)return fe+1}return fe}return t.__iterateUncached(h,x)}function Ke(t,h,x,Q){var ee=t._cache;if(ee){var se=ee.length-1,fe=0;return new n(function(){var he=ee[x?se-fe:fe];return fe++>se?v():m(h,Q?he[0]:fe-1,he[1])})}return t.__iteratorUncached(h,x)}function _e(t,h){return h?He(h,t,"",{"":t}):at(t)}function He(t,h,x,Q){return Array.isArray(h)?t.call(Q,x,_(h).map(function(ee,se){return He(t,ee,se,h)})):ke(h)?t.call(Q,x,H(h).map(function(ee,se){return He(t,ee,se,h)})):h}function at(t){return Array.isArray(t)?_(t).map(at).toList():ke(t)?H(t).map(at).toMap():t}function ke(t){return t&&(t.constructor===Object||t.constructor===void 0)}function de(t,h){if(t===h||t!==t&&h!==h)return!0;if(!t||!h)return!1;if(typeof t.valueOf=="function"&&typeof h.valueOf=="function"){if(t=t.valueOf(),h=h.valueOf(),t===h||t!==t&&h!==h)return!0;if(!t||!h)return!1}return!!(typeof t.equals=="function"&&typeof h.equals=="function"&&t.equals(h))}function Ce(t,h){if(t===h)return!0;if(!L(h)||t.size!==void 0&&h.size!==void 0&&t.size!==h.size||t.__hash!==void 0&&h.__hash!==void 0&&t.__hash!==h.__hash||R(t)!==R(h)||I(t)!==I(h)||P(t)!==P(h))return!1;if(t.size===0&&h.size===0)return!0;var x=!A(t);if(P(t)){var Q=t.entries();return h.every(function(Pe,Ie){var Me=Q.next().value;return Me&&de(Me[1],Pe)&&(x||de(Me[0],Ie))})&&Q.next().done}var ee=!1;if(t.size===void 0)if(h.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{ee=!0;var se=t;t=h,h=se}var fe=!0,he=h.__iterate(function(Pe,Ie){if(x?!t.has(Pe):ee?!de(Pe,t.get(Ie,V)):!de(t.get(Ie,V),Pe))return fe=!1,!1});return fe&&t.size===he}e(Le,_);function Le(t,h){if(!(this instanceof Le))return new Le(t,h);if(this._value=t,this.size=h===void 0?1/0:Math.max(0,h),this.size===0){if(we)return we;we=this}}Le.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Le.prototype.get=function(t,h){return this.has(t)?this._value:h},Le.prototype.includes=function(t){return de(this._value,t)},Le.prototype.slice=function(t,h){var x=this.size;return d(t,h,x)?this:new Le(this._value,g(h,x)-f(t,x))},Le.prototype.reverse=function(){return this},Le.prototype.indexOf=function(t){return de(this._value,t)?0:-1},Le.prototype.lastIndexOf=function(t){return de(this._value,t)?this.size:-1},Le.prototype.__iterate=function(t,h){for(var x=0;x<this.size;x++)if(t(this._value,x,this)===!1)return x+1;return x},Le.prototype.__iterator=function(t,h){var x=this,Q=0;return new n(function(){return Q<x.size?m(t,Q++,x._value):v()})},Le.prototype.equals=function(t){return t instanceof Le?de(this._value,t._value):Ce(t)};var we;function Ue(t,h){if(!t)throw new Error(h)}e(Ge,_);function Ge(t,h,x){if(!(this instanceof Ge))return new Ge(t,h,x);if(Ue(x!==0,"Cannot step a Range by 0"),t=t||0,h===void 0&&(h=1/0),x=x===void 0?1:Math.abs(x),h<t&&(x=-x),this._start=t,this._end=h,this._step=x,this.size=Math.max(0,Math.ceil((h-t)/x-1)+1),this.size===0){if(be)return be;be=this}}Ge.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Ge.prototype.get=function(t,h){return this.has(t)?this._start+U(this,t)*this._step:h},Ge.prototype.includes=function(t){var h=(t-this._start)/this._step;return h>=0&&h<this.size&&h===Math.floor(h)},Ge.prototype.slice=function(t,h){return d(t,h,this.size)?this:(t=f(t,this.size),h=g(h,this.size),h<=t?new Ge(0,0):new Ge(this.get(t,this._end),this.get(h,this._end),this._step))},Ge.prototype.indexOf=function(t){var h=t-this._start;if(h%this._step===0){var x=h/this._step;if(x>=0&&x<this.size)return x}return-1},Ge.prototype.lastIndexOf=function(t){return this.indexOf(t)},Ge.prototype.__iterate=function(t,h){for(var x=this.size-1,Q=this._step,ee=h?this._start+x*Q:this._start,se=0;se<=x;se++){if(t(ee,se,this)===!1)return se+1;ee+=h?-Q:Q}return se},Ge.prototype.__iterator=function(t,h){var x=this.size-1,Q=this._step,ee=h?this._start+x*Q:this._start,se=0;return new n(function(){var fe=ee;return ee+=h?-Q:Q,se>x?v():m(t,se++,fe)})},Ge.prototype.equals=function(t){return t instanceof Ge?this._start===t._start&&this._end===t._end&&this._step===t._step:Ce(this,t)};var be;e($e,r);function $e(){throw TypeError("Abstract")}e(rt,$e);function rt(){}e(it,$e);function it(){}e(Qe,$e);function Qe(){}$e.Keyed=rt,$e.Indexed=it,$e.Set=Qe;var ut=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(h,x){h=h|0,x=x|0;var Q=h&65535,ee=x&65535;return Q*ee+((h>>>16)*ee+Q*(x>>>16)<<16>>>0)|0};function st(t){return t>>>1&1073741824|t&3221225471}function Je(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var h=typeof t;if(h==="number"){if(t!==t||t===1/0)return 0;var x=t|0;for(x!==t&&(x^=t*4294967295);t>4294967295;)t/=4294967295,x^=t;return st(x)}if(h==="string")return t.length>Et?vt(t):gt(t);if(typeof t.hashCode=="function")return t.hashCode();if(h==="object")return It(t);if(typeof t.toString=="function")return gt(t.toString());throw new Error("Value type "+h+" cannot be hashed.")}function vt(t){var h=xt[t];return h===void 0&&(h=gt(t),Pt===Ct&&(Pt=0,xt={}),Pt++,xt[t]=h),h}function gt(t){for(var h=0,x=0;x<t.length;x++)h=31*h+t.charCodeAt(x)|0;return st(h)}function It(t){var h;if(bt&&(h=wt.get(t),h!==void 0)||(h=t[ct],h!==void 0)||!lt&&(h=t.propertyIsEnumerable&&t.propertyIsEnumerable[ct],h!==void 0||(h=Rt(t),h!==void 0)))return h;if(h=++zt,zt&1073741824&&(zt=0),bt)wt.set(t,h);else{if(Lt!==void 0&&Lt(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(lt)Object.defineProperty(t,ct,{enumerable:!1,configurable:!1,writable:!1,value:h});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[ct]=h;else if(t.nodeType!==void 0)t[ct]=h;else throw new Error("Unable to set a non-enumerable property on object.")}return h}var Lt=Object.isExtensible,lt=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Rt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var bt=typeof WeakMap=="function",wt;bt&&(wt=new WeakMap);var zt=0,ct="__immutablehash__";typeof Symbol=="function"&&(ct=Symbol(ct));var Et=16,Ct=255,Pt=0,xt={};function Ft(t){Ue(t!==1/0,"Cannot perform this action with an infinite size.")}e(xe,rt);function xe(t){return t==null?Dt():ft(t)&&!P(t)?t:Dt().withMutations(function(h){var x=O(t);Ft(x.size),x.forEach(function(Q,ee){return h.set(ee,Q)})})}xe.of=function(){var t=u.call(arguments,0);return Dt().withMutations(function(h){for(var x=0;x<t.length;x+=2){if(x+1>=t.length)throw new Error("Missing value for key: "+t[x]);h.set(t[x],t[x+1])}})},xe.prototype.toString=function(){return this.__toString("Map {","}")},xe.prototype.get=function(t,h){return this._root?this._root.get(0,void 0,t,h):h},xe.prototype.set=function(t,h){return Kt(this,t,h)},xe.prototype.setIn=function(t,h){return this.updateIn(t,V,function(){return h})},xe.prototype.remove=function(t){return Kt(this,t,V)},xe.prototype.deleteIn=function(t){return this.updateIn(t,function(){return V})},xe.prototype.update=function(t,h,x){return arguments.length===1?t(this):this.updateIn([t],h,x)},xe.prototype.updateIn=function(t,h,x){x||(x=h,h=void 0);var Q=Sr(this,Yt(t),h,x);return Q===V?void 0:Q},xe.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Dt()},xe.prototype.merge=function(){return vr(this,void 0,arguments)},xe.prototype.mergeWith=function(t){var h=u.call(arguments,1);return vr(this,t,h)},xe.prototype.mergeIn=function(t){var h=u.call(arguments,1);return this.updateIn(t,Dt(),function(x){return typeof x.merge=="function"?x.merge.apply(x,h):h[h.length-1]})},xe.prototype.mergeDeep=function(){return vr(this,nr,arguments)},xe.prototype.mergeDeepWith=function(t){var h=u.call(arguments,1);return vr(this,gr(t),h)},xe.prototype.mergeDeepIn=function(t){var h=u.call(arguments,1);return this.updateIn(t,Dt(),function(x){return typeof x.mergeDeep=="function"?x.mergeDeep.apply(x,h):h[h.length-1]})},xe.prototype.sort=function(t){return Ht(Ne(this,t))},xe.prototype.sortBy=function(t,h){return Ht(Ne(this,h,t))},xe.prototype.withMutations=function(t){var h=this.asMutable();return t(h),h.wasAltered()?h.__ensureOwner(this.__ownerID):this},xe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new X)},xe.prototype.asImmutable=function(){return this.__ensureOwner()},xe.prototype.wasAltered=function(){return this.__altered},xe.prototype.__iterator=function(t,h){return new kt(this,t,h)},xe.prototype.__iterate=function(t,h){var x=this,Q=0;return this._root&&this._root.iterate(function(ee){return Q++,t(ee[1],ee[0],x)},h),Q},xe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?je(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function ft(t){return!!(t&&t[pt])}xe.isMap=ft;var pt="@@__IMMUTABLE_MAP__@@",Ze=xe.prototype;Ze[pt]=!0,Ze[D]=Ze.remove,Ze.removeIn=Ze.deleteIn;function Nt(t,h){this.ownerID=t,this.entries=h}Nt.prototype.get=function(t,h,x,Q){for(var ee=this.entries,se=0,fe=ee.length;se<fe;se++)if(de(x,ee[se][0]))return ee[se][1];return Q},Nt.prototype.update=function(t,h,x,Q,ee,se,fe){for(var he=ee===V,Pe=this.entries,Ie=0,Me=Pe.length;Ie<Me&&!de(Q,Pe[Ie][0]);Ie++);var Xe=Ie<Me;if(Xe?Pe[Ie][1]===ee:he)return this;if(Y(fe),(he||!Xe)&&Y(se),!(he&&Pe.length===1)){if(!Xe&&!he&&Pe.length>=ir)return Lr(t,Pe,Q,ee);var tt=t&&t===this.ownerID,ht=tt?Pe:Z(Pe);return Xe?he?Ie===Me-1?ht.pop():ht[Ie]=ht.pop():ht[Ie]=[Q,ee]:ht.push([Q,ee]),tt?(this.entries=ht,this):new Nt(t,ht)}};function $t(t,h,x){this.ownerID=t,this.bitmap=h,this.nodes=x}$t.prototype.get=function(t,h,x,Q){h===void 0&&(h=Je(x));var ee=1<<((t===0?h:h>>>t)&$),se=this.bitmap;return se&ee?this.nodes[hr(se&ee-1)].get(t+j,h,x,Q):Q},$t.prototype.update=function(t,h,x,Q,ee,se,fe){x===void 0&&(x=Je(Q));var he=(h===0?x:x>>>h)&$,Pe=1<<he,Ie=this.bitmap,Me=(Ie&Pe)!==0;if(!Me&&ee===V)return this;var Xe=hr(Ie&Pe-1),tt=this.nodes,ht=Me?tt[Xe]:void 0,St=rr(ht,t,h+j,x,Q,ee,se,fe);if(St===ht)return this;if(!Me&&St&&tt.length>=qr)return pr(t,tt,Ie,he,St);if(Me&&!St&&tt.length===2&&Tr(tt[Xe^1]))return tt[Xe^1];if(Me&&St&&tt.length===1&&Tr(St))return St;var Bt=t&&t===this.ownerID,tr=Me?St?Ie:Ie^Pe:Ie|Pe,sr=Me?St?mr(tt,Xe,St,Bt):Zt(tt,Xe,Bt):br(tt,Xe,St,Bt);return Bt?(this.bitmap=tr,this.nodes=sr,this):new $t(t,tr,sr)};function Wt(t,h,x){this.ownerID=t,this.count=h,this.nodes=x}Wt.prototype.get=function(t,h,x,Q){h===void 0&&(h=Je(x));var ee=(t===0?h:h>>>t)&$,se=this.nodes[ee];return se?se.get(t+j,h,x,Q):Q},Wt.prototype.update=function(t,h,x,Q,ee,se,fe){x===void 0&&(x=Je(Q));var he=(h===0?x:x>>>h)&$,Pe=ee===V,Ie=this.nodes,Me=Ie[he];if(Pe&&!Me)return this;var Xe=rr(Me,t,h+j,x,Q,ee,se,fe);if(Xe===Me)return this;var tt=this.count;if(!Me)tt++;else if(!Xe&&(tt--,tt<en))return Mr(t,Ie,tt,he);var ht=t&&t===this.ownerID,St=mr(Ie,he,Xe,ht);return ht?(this.count=tt,this.nodes=St,this):new Wt(t,tt,St)};function Xt(t,h,x){this.ownerID=t,this.keyHash=h,this.entries=x}Xt.prototype.get=function(t,h,x,Q){for(var ee=this.entries,se=0,fe=ee.length;se<fe;se++)if(de(x,ee[se][0]))return ee[se][1];return Q},Xt.prototype.update=function(t,h,x,Q,ee,se,fe){x===void 0&&(x=Je(Q));var he=ee===V;if(x!==this.keyHash)return he?this:(Y(fe),Y(se),dr(this,t,h,x,[Q,ee]));for(var Pe=this.entries,Ie=0,Me=Pe.length;Ie<Me&&!de(Q,Pe[Ie][0]);Ie++);var Xe=Ie<Me;if(Xe?Pe[Ie][1]===ee:he)return this;if(Y(fe),(he||!Xe)&&Y(se),he&&Me===2)return new qe(t,this.keyHash,Pe[Ie^1]);var tt=t&&t===this.ownerID,ht=tt?Pe:Z(Pe);return Xe?he?Ie===Me-1?ht.pop():ht[Ie]=ht.pop():ht[Ie]=[Q,ee]:ht.push([Q,ee]),tt?(this.entries=ht,this):new Xt(t,this.keyHash,ht)};function qe(t,h,x){this.ownerID=t,this.keyHash=h,this.entry=x}qe.prototype.get=function(t,h,x,Q){return de(x,this.entry[0])?this.entry[1]:Q},qe.prototype.update=function(t,h,x,Q,ee,se,fe){var he=ee===V,Pe=de(Q,this.entry[0]);if(Pe?ee===this.entry[1]:he)return this;if(Y(fe),he){Y(se);return}return Pe?t&&t===this.ownerID?(this.entry[1]=ee,this):new qe(t,this.keyHash,[Q,ee]):(Y(se),dr(this,t,h,Je(Q),[Q,ee]))},Nt.prototype.iterate=Xt.prototype.iterate=function(t,h){for(var x=this.entries,Q=0,ee=x.length-1;Q<=ee;Q++)if(t(x[h?ee-Q:Q])===!1)return!1},$t.prototype.iterate=Wt.prototype.iterate=function(t,h){for(var x=this.nodes,Q=0,ee=x.length-1;Q<=ee;Q++){var se=x[h?ee-Q:Q];if(se&&se.iterate(t,h)===!1)return!1}},qe.prototype.iterate=function(t,h){return t(this.entry)},e(kt,n);function kt(t,h,x){this._type=h,this._reverse=x,this._stack=t._root&&Te(t._root)}kt.prototype.next=function(){for(var t=this._type,h=this._stack;h;){var x=h.node,Q=h.index++,ee;if(x.entry){if(Q===0)return ce(t,x.entry)}else if(x.entries){if(ee=x.entries.length-1,Q<=ee)return ce(t,x.entries[this._reverse?ee-Q:Q])}else if(ee=x.nodes.length-1,Q<=ee){var se=x.nodes[this._reverse?ee-Q:Q];if(se){if(se.entry)return ce(t,se.entry);h=this._stack=Te(se,h)}continue}h=this._stack=this._stack.__prev}return v()};function ce(t,h){return m(t,h[0],h[1])}function Te(t,h){return{node:t,index:0,__prev:h}}function je(t,h,x,Q){var ee=Object.create(Ze);return ee.size=t,ee._root=h,ee.__ownerID=x,ee.__hash=Q,ee.__altered=!1,ee}var ot;function Dt(){return ot||(ot=je(0))}function Kt(t,h,x){var Q,ee;if(t._root){var se=B(K),fe=B(w);if(Q=rr(t._root,t.__ownerID,0,void 0,h,x,se,fe),!fe.value)return t;ee=t.size+(se.value?x===V?-1:1:0)}else{if(x===V)return t;ee=1,Q=new Nt(t.__ownerID,[[h,x]])}return t.__ownerID?(t.size=ee,t._root=Q,t.__hash=void 0,t.__altered=!0,t):Q?je(ee,Q):Dt()}function rr(t,h,x,Q,ee,se,fe,he){return t?t.update(h,x,Q,ee,se,fe,he):se===V?t:(Y(he),Y(fe),new qe(h,Q,[ee,se]))}function Tr(t){return t.constructor===qe||t.constructor===Xt}function dr(t,h,x,Q,ee){if(t.keyHash===Q)return new Xt(h,Q,[t.entry,ee]);var se=(x===0?t.keyHash:t.keyHash>>>x)&$,fe=(x===0?Q:Q>>>x)&$,he,Pe=se===fe?[dr(t,h,x+j,Q,ee)]:(he=new qe(h,Q,ee),se<fe?[t,he]:[he,t]);return new $t(h,1<<se|1<<fe,Pe)}function Lr(t,h,x,Q){t||(t=new X);for(var ee=new qe(t,Je(x),[x,Q]),se=0;se<h.length;se++){var fe=h[se];ee=ee.update(t,0,void 0,fe[0],fe[1])}return ee}function Mr(t,h,x,Q){for(var ee=0,se=0,fe=new Array(x),he=0,Pe=1,Ie=h.length;he<Ie;he++,Pe<<=1){var Me=h[he];Me!==void 0&&he!==Q&&(ee|=Pe,fe[se++]=Me)}return new $t(t,ee,fe)}function pr(t,h,x,Q,ee){for(var se=0,fe=new Array(F),he=0;x!==0;he++,x>>>=1)fe[he]=x&1?h[se++]:void 0;return fe[Q]=ee,new Wt(t,se+1,fe)}function vr(t,h,x){for(var Q=[],ee=0;ee<x.length;ee++){var se=x[ee],fe=O(se);L(se)||(fe=fe.map(function(he){return _e(he)})),Q.push(fe)}return ar(t,h,Q)}function nr(t,h,x){return t&&t.mergeDeep&&L(h)?t.mergeDeep(h):de(t,h)?t:h}function gr(t){return function(h,x,Q){if(h&&h.mergeDeepWith&&L(x))return h.mergeDeepWith(t,x);var ee=t(h,x,Q);return de(h,ee)?h:ee}}function ar(t,h,x){return x=x.filter(function(Q){return Q.size!==0}),x.length===0?t:t.size===0&&!t.__ownerID&&x.length===1?t.constructor(x[0]):t.withMutations(function(Q){for(var ee=h?function(fe,he){Q.update(he,V,function(Pe){return Pe===V?fe:h(Pe,fe,he)})}:function(fe,he){Q.set(he,fe)},se=0;se<x.length;se++)x[se].forEach(ee)})}function Sr(t,h,x,Q){var ee=t===V,se=h.next();if(se.done){var fe=ee?x:t,he=Q(fe);return he===fe?t:he}Ue(ee||t&&t.set,"invalid keyPath");var Pe=se.value,Ie=ee?V:t.get(Pe,V),Me=Sr(Ie,h,x,Q);return Me===Ie?t:Me===V?t.remove(Pe):(ee?Dt():t).set(Pe,Me)}function hr(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function mr(t,h,x,Q){var ee=Q?t:Z(t);return ee[h]=x,ee}function br(t,h,x,Q){var ee=t.length+1;if(Q&&h+1===ee)return t[h]=x,t;for(var se=new Array(ee),fe=0,he=0;he<ee;he++)he===h?(se[he]=x,fe=-1):se[he]=t[he+fe];return se}function Zt(t,h,x){var Q=t.length-1;if(x&&h===Q)return t.pop(),t;for(var ee=new Array(Q),se=0,fe=0;fe<Q;fe++)fe===h&&(se=1),ee[fe]=t[fe+se];return ee}var ir=F/4,qr=F/2,en=F/4;e(Vt,it);function Vt(t){var h=Vr();if(t==null)return h;if(Kr(t))return t;var x=S(t),Q=x.size;return Q===0?h:(Ft(Q),Q>0&&Q<F?Cr(0,Q,j,null,new or(x.toArray())):h.withMutations(function(ee){ee.setSize(Q),x.forEach(function(se,fe){return ee.set(fe,se)})}))}Vt.of=function(){return this(arguments)},Vt.prototype.toString=function(){return this.__toString("List [","]")},Vt.prototype.get=function(t,h){if(t=U(this,t),t>=0&&t<this.size){t+=this._origin;var x=Nr(this,t);return x&&x.array[t&$]}return h},Vt.prototype.set=function(t,h){return Gt(this,t,h)},Vt.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Vt.prototype.insert=function(t,h){return this.splice(t,0,h)},Vt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=j,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Vr()},Vt.prototype.push=function(){var t=arguments,h=this.size;return this.withMutations(function(x){fr(x,0,h+t.length);for(var Q=0;Q<t.length;Q++)x.set(h+Q,t[Q])})},Vt.prototype.pop=function(){return fr(this,0,-1)},Vt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(h){fr(h,-t.length);for(var x=0;x<t.length;x++)h.set(x,t[x])})},Vt.prototype.shift=function(){return fr(this,1)},Vt.prototype.merge=function(){return Ar(this,void 0,arguments)},Vt.prototype.mergeWith=function(t){var h=u.call(arguments,1);return Ar(this,t,h)},Vt.prototype.mergeDeep=function(){return Ar(this,nr,arguments)},Vt.prototype.mergeDeepWith=function(t){var h=u.call(arguments,1);return Ar(this,gr(t),h)},Vt.prototype.setSize=function(t){return fr(this,0,t)},Vt.prototype.slice=function(t,h){var x=this.size;return d(t,h,x)?this:fr(this,f(t,x),g(h,x))},Vt.prototype.__iterator=function(t,h){var x=0,Q=Hr(this,h);return new n(function(){var ee=Q();return ee===Rr?v():m(t,x++,ee)})},Vt.prototype.__iterate=function(t,h){for(var x=0,Q=Hr(this,h),ee;(ee=Q())!==Rr&&t(ee,x++,this)!==!1;);return x},Vt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Cr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function Kr(t){return!!(t&&t[wr])}Vt.isList=Kr;var wr="@@__IMMUTABLE_LIST__@@",Qt=Vt.prototype;Qt[wr]=!0,Qt[D]=Qt.remove,Qt.setIn=Ze.setIn,Qt.deleteIn=Qt.removeIn=Ze.removeIn,Qt.update=Ze.update,Qt.updateIn=Ze.updateIn,Qt.mergeIn=Ze.mergeIn,Qt.mergeDeepIn=Ze.mergeDeepIn,Qt.withMutations=Ze.withMutations,Qt.asMutable=Ze.asMutable,Qt.asImmutable=Ze.asImmutable,Qt.wasAltered=Ze.wasAltered;function or(t,h){this.array=t,this.ownerID=h}or.prototype.removeBefore=function(t,h,x){if(x===h?1<<h:this.array.length===0)return this;var Q=x>>>h&$;if(Q>=this.array.length)return new or([],t);var ee=Q===0,se;if(h>0){var fe=this.array[Q];if(se=fe&&fe.removeBefore(t,h-j,x),se===fe&&ee)return this}if(ee&&!se)return this;var he=Er(this,t);if(!ee)for(var Pe=0;Pe<Q;Pe++)he.array[Pe]=void 0;return se&&(he.array[Q]=se),he},or.prototype.removeAfter=function(t,h,x){if(x===(h?1<<h:0)||this.array.length===0)return this;var Q=x-1>>>h&$;if(Q>=this.array.length)return this;var ee;if(h>0){var se=this.array[Q];if(ee=se&&se.removeAfter(t,h-j,x),ee===se&&Q===this.array.length-1)return this}var fe=Er(this,t);return fe.array.splice(Q+1),ee&&(fe.array[Q]=ee),fe};var Rr={};function Hr(t,h){var x=t._origin,Q=t._capacity,ee=Pr(Q),se=t._tail;return fe(t._root,t._level,0);function fe(Ie,Me,Xe){return Me===0?he(Ie,Xe):Pe(Ie,Me,Xe)}function he(Ie,Me){var Xe=Me===ee?se&&se.array:Ie&&Ie.array,tt=Me>x?0:x-Me,ht=Q-Me;return ht>F&&(ht=F),function(){if(tt===ht)return Rr;var St=h?--ht:tt++;return Xe&&Xe[St]}}function Pe(Ie,Me,Xe){var tt,ht=Ie&&Ie.array,St=Xe>x?0:x-Xe>>Me,Bt=(Q-Xe>>Me)+1;return Bt>F&&(Bt=F),function(){do{if(tt){var tr=tt();if(tr!==Rr)return tr;tt=null}if(St===Bt)return Rr;var sr=h?--Bt:St++;tt=fe(ht&&ht[sr],Me-j,Xe+(sr<<Me))}while(!0)}}}function Cr(t,h,x,Q,ee,se,fe){var he=Object.create(Qt);return he.size=h-t,he._origin=t,he._capacity=h,he._level=x,he._root=Q,he._tail=ee,he.__ownerID=se,he.__hash=fe,he.__altered=!1,he}var kr;function Vr(){return kr||(kr=Cr(0,0,j))}function Gt(t,h,x){if(h=U(t,h),h!==h)return t;if(h>=t.size||h<0)return t.withMutations(function(fe){h<0?fr(fe,h).set(0,x):fr(fe,0,h+1).set(h,x)});h+=t._origin;var Q=t._tail,ee=t._root,se=B(w);return h>=Pr(t._capacity)?Q=Ur(Q,t.__ownerID,0,h,x,se):ee=Ur(ee,t.__ownerID,t._level,h,x,se),se.value?t.__ownerID?(t._root=ee,t._tail=Q,t.__hash=void 0,t.__altered=!0,t):Cr(t._origin,t._capacity,t._level,ee,Q):t}function Ur(t,h,x,Q,ee,se){var fe=Q>>>x&$,he=t&&fe<t.array.length;if(!he&&ee===void 0)return t;var Pe;if(x>0){var Ie=t&&t.array[fe],Me=Ur(Ie,h,x-j,Q,ee,se);return Me===Ie?t:(Pe=Er(t,h),Pe.array[fe]=Me,Pe)}return he&&t.array[fe]===ee?t:(Y(se),Pe=Er(t,h),ee===void 0&&fe===Pe.array.length-1?Pe.array.pop():Pe.array[fe]=ee,Pe)}function Er(t,h){return h&&t&&h===t.ownerID?t:new or(t?t.array.slice():[],h)}function Nr(t,h){if(h>=Pr(t._capacity))return t._tail;if(h<1<<t._level+j){for(var x=t._root,Q=t._level;x&&Q>0;)x=x.array[h>>>Q&$],Q-=j;return x}}function fr(t,h,x){h!==void 0&&(h=h|0),x!==void 0&&(x=x|0);var Q=t.__ownerID||new X,ee=t._origin,se=t._capacity,fe=ee+h,he=x===void 0?se:x<0?se+x:ee+x;if(fe===ee&&he===se)return t;if(fe>=he)return t.clear();for(var Pe=t._level,Ie=t._root,Me=0;fe+Me<0;)Ie=new or(Ie&&Ie.array.length?[void 0,Ie]:[],Q),Pe+=j,Me+=1<<Pe;Me&&(fe+=Me,ee+=Me,he+=Me,se+=Me);for(var Xe=Pr(se),tt=Pr(he);tt>=1<<Pe+j;)Ie=new or(Ie&&Ie.array.length?[Ie]:[],Q),Pe+=j;var ht=t._tail,St=tt<Xe?Nr(t,he-1):tt>Xe?new or([],Q):ht;if(ht&&tt>Xe&&fe<se&&ht.array.length){Ie=Er(Ie,Q);for(var Bt=Ie,tr=Pe;tr>j;tr-=j){var sr=Xe>>>tr&$;Bt=Bt.array[sr]=Er(Bt.array[sr],Q)}Bt.array[Xe>>>j&$]=ht}if(he<se&&(St=St&&St.removeAfter(Q,0,he)),fe>=tt)fe-=tt,he-=tt,Pe=j,Ie=null,St=St&&St.removeBefore(Q,0,fe);else if(fe>ee||tt<Xe){for(Me=0;Ie;){var Zr=fe>>>Pe&$;if(Zr!==tt>>>Pe&$)break;Zr&&(Me+=(1<<Pe)*Zr),Pe-=j,Ie=Ie.array[Zr]}Ie&&fe>ee&&(Ie=Ie.removeBefore(Q,Pe,fe-Me)),Ie&&tt<Xe&&(Ie=Ie.removeAfter(Q,Pe,tt-Me)),Me&&(fe-=Me,he-=Me)}return t.__ownerID?(t.size=he-fe,t._origin=fe,t._capacity=he,t._level=Pe,t._root=Ie,t._tail=St,t.__hash=void 0,t.__altered=!0,t):Cr(fe,he,Pe,Ie,St)}function Ar(t,h,x){for(var Q=[],ee=0,se=0;se<x.length;se++){var fe=x[se],he=S(fe);he.size>ee&&(ee=he.size),L(fe)||(he=he.map(function(Pe){return _e(Pe)})),Q.push(he)}return ee>t.size&&(t=t.setSize(ee)),ar(t,h,Q)}function Pr(t){return t<F?0:t-1>>>j<<j}e(Ht,xe);function Ht(t){return t==null?Fr():Yr(t)?t:Fr().withMutations(function(h){var x=O(t);Ft(x.size),x.forEach(function(Q,ee){return h.set(ee,Q)})})}Ht.of=function(){return this(arguments)},Ht.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ht.prototype.get=function(t,h){var x=this._map.get(t);return x!==void 0?this._list.get(x)[1]:h},Ht.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Fr()},Ht.prototype.set=function(t,h){return zr(this,t,h)},Ht.prototype.remove=function(t){return zr(this,t,V)},Ht.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ht.prototype.__iterate=function(t,h){var x=this;return this._list.__iterate(function(Q){return Q&&t(Q[1],Q[0],x)},h)},Ht.prototype.__iterator=function(t,h){return this._list.fromEntrySeq().__iterator(t,h)},Ht.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var h=this._map.__ensureOwner(t),x=this._list.__ensureOwner(t);return t?Gr(h,x,t,this.__hash):(this.__ownerID=t,this._map=h,this._list=x,this)};function Yr(t){return ft(t)&&P(t)}Ht.isOrderedMap=Yr,Ht.prototype[M]=!0,Ht.prototype[D]=Ht.prototype.remove;function Gr(t,h,x,Q){var ee=Object.create(Ht.prototype);return ee.size=t?t.size:0,ee._map=t,ee._list=h,ee.__ownerID=x,ee.__hash=Q,ee}var Wr;function Fr(){return Wr||(Wr=Gr(Dt(),Vr()))}function zr(t,h,x){var Q=t._map,ee=t._list,se=Q.get(h),fe=se!==void 0,he,Pe;if(x===V){if(!fe)return t;ee.size>=F&&ee.size>=Q.size*2?(Pe=ee.filter(function(Ie,Me){return Ie!==void 0&&se!==Me}),he=Pe.toKeyedSeq().map(function(Ie){return Ie[0]}).flip().toMap(),t.__ownerID&&(he.__ownerID=Pe.__ownerID=t.__ownerID)):(he=Q.remove(h),Pe=se===ee.size-1?ee.pop():ee.set(se,void 0))}else if(fe){if(x===ee.get(se)[1])return t;he=Q,Pe=ee.set(se,[h,x])}else he=Q.set(h,ee.size),Pe=ee.set(ee.size,[h,x]);return t.__ownerID?(t.size=he.size,t._map=he,t._list=Pe,t.__hash=void 0,t):Gr(he,Pe)}e(qt,H);function qt(t,h){this._iter=t,this._useKeys=h,this.size=t.size}qt.prototype.get=function(t,h){return this._iter.get(t,h)},qt.prototype.has=function(t){return this._iter.has(t)},qt.prototype.valueSeq=function(){return this._iter.valueSeq()},qt.prototype.reverse=function(){var t=this,h=jr(this,!0);return this._useKeys||(h.valueSeq=function(){return t._iter.toSeq().reverse()}),h},qt.prototype.map=function(t,h){var x=this,Q=Ir(this,t,h);return this._useKeys||(Q.valueSeq=function(){return x._iter.toSeq().map(t,h)}),Q},qt.prototype.__iterate=function(t,h){var x=this,Q;return this._iter.__iterate(this._useKeys?function(ee,se){return t(ee,se,x)}:(Q=h?Ot(this):0,function(ee){return t(ee,h?--Q:Q++,x)}),h)},qt.prototype.__iterator=function(t,h){if(this._useKeys)return this._iter.__iterator(t,h);var x=this._iter.__iterator(s,h),Q=h?Ot(this):0;return new n(function(){var ee=x.next();return ee.done?ee:m(t,h?--Q:Q++,ee.value,ee)})},qt.prototype[M]=!0,e(yr,_);function yr(t){this._iter=t,this.size=t.size}yr.prototype.includes=function(t){return this._iter.includes(t)},yr.prototype.__iterate=function(t,h){var x=this,Q=0;return this._iter.__iterate(function(ee){return t(ee,Q++,x)},h)},yr.prototype.__iterator=function(t,h){var x=this._iter.__iterator(s,h),Q=0;return new n(function(){var ee=x.next();return ee.done?ee:m(t,Q++,ee.value,ee)})},e(Or,ae);function Or(t){this._iter=t,this.size=t.size}Or.prototype.has=function(t){return this._iter.includes(t)},Or.prototype.__iterate=function(t,h){var x=this;return this._iter.__iterate(function(Q){return t(Q,Q,x)},h)},Or.prototype.__iterator=function(t,h){var x=this._iter.__iterator(s,h);return new n(function(){var Q=x.next();return Q.done?Q:m(t,Q.value,Q.value,Q)})},e(cr,H);function cr(t){this._iter=t,this.size=t.size}cr.prototype.entrySeq=function(){return this._iter.toSeq()},cr.prototype.__iterate=function(t,h){var x=this;return this._iter.__iterate(function(Q){if(Q){dt(Q);var ee=L(Q);return t(ee?Q.get(1):Q[1],ee?Q.get(0):Q[0],x)}},h)},cr.prototype.__iterator=function(t,h){var x=this._iter.__iterator(s,h);return new n(function(){for(;;){var Q=x.next();if(Q.done)return Q;var ee=Q.value;if(ee){dt(ee);var se=L(ee);return m(t,se?ee.get(0):ee[0],se?ee.get(1):ee[1],Q)}}})},yr.prototype.cacheResult=qt.prototype.cacheResult=Or.prototype.cacheResult=cr.prototype.cacheResult=Tt;function $r(t){var h=nt(t);return h._iter=t,h.size=t.size,h.flip=function(){return t},h.reverse=function(){var x=t.reverse.apply(this);return x.flip=function(){return t.reverse()},x},h.has=function(x){return t.includes(x)},h.includes=function(x){return t.has(x)},h.cacheResult=Tt,h.__iterateUncached=function(x,Q){var ee=this;return t.__iterate(function(se,fe){return x(fe,se,ee)!==!1},Q)},h.__iteratorUncached=function(x,Q){if(x===c){var ee=t.__iterator(x,Q);return new n(function(){var se=ee.next();if(!se.done){var fe=se.value[0];se.value[0]=se.value[1],se.value[1]=fe}return se})}return t.__iterator(x===s?i:s,Q)},h}function Ir(t,h,x){var Q=nt(t);return Q.size=t.size,Q.has=function(ee){return t.has(ee)},Q.get=function(ee,se){var fe=t.get(ee,V);return fe===V?se:h.call(x,fe,ee,t)},Q.__iterateUncached=function(ee,se){var fe=this;return t.__iterate(function(he,Pe,Ie){return ee(h.call(x,he,Pe,Ie),Pe,fe)!==!1},se)},Q.__iteratorUncached=function(ee,se){var fe=t.__iterator(c,se);return new n(function(){var he=fe.next();if(he.done)return he;var Pe=he.value,Ie=Pe[0];return m(ee,Ie,h.call(x,Pe[1],Ie,t),he)})},Q}function jr(t,h){var x=nt(t);return x._iter=t,x.size=t.size,x.reverse=function(){return t},t.flip&&(x.flip=function(){var Q=$r(t);return Q.reverse=function(){return t.flip()},Q}),x.get=function(Q,ee){return t.get(h?Q:-1-Q,ee)},x.has=function(Q){return t.has(h?Q:-1-Q)},x.includes=function(Q){return t.includes(Q)},x.cacheResult=Tt,x.__iterate=function(Q,ee){var se=this;return t.__iterate(function(fe,he){return Q(fe,he,se)},!ee)},x.__iterator=function(Q,ee){return t.__iterator(Q,!ee)},x}function _r(t,h,x,Q){var ee=nt(t);return Q&&(ee.has=function(se){var fe=t.get(se,V);return fe!==V&&!!h.call(x,fe,se,t)},ee.get=function(se,fe){var he=t.get(se,V);return he!==V&&h.call(x,he,se,t)?he:fe}),ee.__iterateUncached=function(se,fe){var he=this,Pe=0;return t.__iterate(function(Ie,Me,Xe){if(h.call(x,Ie,Me,Xe))return Pe++,se(Ie,Q?Me:Pe-1,he)},fe),Pe},ee.__iteratorUncached=function(se,fe){var he=t.__iterator(c,fe),Pe=0;return new n(function(){for(;;){var Ie=he.next();if(Ie.done)return Ie;var Me=Ie.value,Xe=Me[0],tt=Me[1];if(h.call(x,tt,Xe,t))return m(se,Q?Xe:Pe++,tt,Ie)}})},ee}function tn(t,h,x){var Q=xe().asMutable();return t.__iterate(function(ee,se){Q.update(h.call(x,ee,se,t),0,function(fe){return fe+1})}),Q.asImmutable()}function rn(t,h,x){var Q=R(t),ee=(P(t)?Ht():xe()).asMutable();t.__iterate(function(fe,he){ee.update(h.call(x,fe,he,t),function(Pe){return Pe=Pe||[],Pe.push(Q?[he,fe]:fe),Pe})});var se=et(t);return ee.map(function(fe){return ze(t,se(fe))})}function Br(t,h,x,Q){var ee=t.size;if(h!==void 0&&(h=h|0),x!==void 0&&(x===1/0?x=ee:x=x|0),d(h,x,ee))return t;var se=f(h,ee),fe=g(x,ee);if(se!==se||fe!==fe)return Br(t.toSeq().cacheResult(),h,x,Q);var he=fe-se,Pe;he===he&&(Pe=he<0?0:he);var Ie=nt(t);return Ie.size=Pe===0?Pe:t.size&&Pe||void 0,!Q&&Ee(t)&&Pe>=0&&(Ie.get=function(Me,Xe){return Me=U(this,Me),Me>=0&&Me<Pe?t.get(Me+se,Xe):Xe}),Ie.__iterateUncached=function(Me,Xe){var tt=this;if(Pe===0)return 0;if(Xe)return this.cacheResult().__iterate(Me,Xe);var ht=0,St=!0,Bt=0;return t.__iterate(function(tr,sr){if(!(St&&(St=ht++<se)))return Bt++,Me(tr,Q?sr:Bt-1,tt)!==!1&&Bt!==Pe}),Bt},Ie.__iteratorUncached=function(Me,Xe){if(Pe!==0&&Xe)return this.cacheResult().__iterator(Me,Xe);var tt=Pe!==0&&t.__iterator(Me,Xe),ht=0,St=0;return new n(function(){for(;ht++<se;)tt.next();if(++St>Pe)return v();var Bt=tt.next();return Q||Me===s?Bt:Me===i?m(Me,St-1,void 0,Bt):m(Me,St-1,Bt.value[1],Bt)})},Ie}function ne(t,h,x){var Q=nt(t);return Q.__iterateUncached=function(ee,se){var fe=this;if(se)return this.cacheResult().__iterate(ee,se);var he=0;return t.__iterate(function(Pe,Ie,Me){return h.call(x,Pe,Ie,Me)&&++he&&ee(Pe,Ie,fe)}),he},Q.__iteratorUncached=function(ee,se){var fe=this;if(se)return this.cacheResult().__iterator(ee,se);var he=t.__iterator(c,se),Pe=!0;return new n(function(){if(!Pe)return v();var Ie=he.next();if(Ie.done)return Ie;var Me=Ie.value,Xe=Me[0],tt=Me[1];return h.call(x,tt,Xe,fe)?ee===c?Ie:m(ee,Xe,tt,Ie):(Pe=!1,v())})},Q}function te(t,h,x,Q){var ee=nt(t);return ee.__iterateUncached=function(se,fe){var he=this;if(fe)return this.cacheResult().__iterate(se,fe);var Pe=!0,Ie=0;return t.__iterate(function(Me,Xe,tt){if(!(Pe&&(Pe=h.call(x,Me,Xe,tt))))return Ie++,se(Me,Q?Xe:Ie-1,he)}),Ie},ee.__iteratorUncached=function(se,fe){var he=this;if(fe)return this.cacheResult().__iterator(se,fe);var Pe=t.__iterator(c,fe),Ie=!0,Me=0;return new n(function(){var Xe,tt,ht;do{if(Xe=Pe.next(),Xe.done)return Q||se===s?Xe:se===i?m(se,Me++,void 0,Xe):m(se,Me++,Xe.value[1],Xe);var St=Xe.value;tt=St[0],ht=St[1],Ie&&(Ie=h.call(x,ht,tt,he))}while(Ie);return se===c?Xe:m(se,tt,ht,Xe)})},ee}function ie(t,h){var x=R(t),Q=[t].concat(h).map(function(fe){return L(fe)?x&&(fe=O(fe)):fe=x?Ae(fe):ye(Array.isArray(fe)?fe:[fe]),fe}).filter(function(fe){return fe.size!==0});if(Q.length===0)return t;if(Q.length===1){var ee=Q[0];if(ee===t||x&&R(ee)||I(t)&&I(ee))return ee}var se=new le(Q);return x?se=se.toKeyedSeq():I(t)||(se=se.toSetSeq()),se=se.flatten(!0),se.size=Q.reduce(function(fe,he){if(fe!==void 0){var Pe=he.size;if(Pe!==void 0)return fe+Pe}},0),se}function ve(t,h,x){var Q=nt(t);return Q.__iterateUncached=function(ee,se){var fe=0,he=!1;function Pe(Ie,Me){var Xe=this;Ie.__iterate(function(tt,ht){return(!h||Me<h)&&L(tt)?Pe(tt,Me+1):ee(tt,x?ht:fe++,Xe)===!1&&(he=!0),!he},se)}return Pe(t,0),fe},Q.__iteratorUncached=function(ee,se){var fe=t.__iterator(ee,se),he=[],Pe=0;return new n(function(){for(;fe;){var Ie=fe.next();if(Ie.done!==!1){fe=he.pop();continue}var Me=Ie.value;if(ee===c&&(Me=Me[1]),(!h||he.length<h)&&L(Me))he.push(fe),fe=Me.__iterator(ee,se);else return x?Ie:m(ee,Pe++,Me,Ie)}return v()})},Q}function Oe(t,h,x){var Q=et(t);return t.toSeq().map(function(ee,se){return Q(h.call(x,ee,se,t))}).flatten(!0)}function Re(t,h){var x=nt(t);return x.size=t.size&&t.size*2-1,x.__iterateUncached=function(Q,ee){var se=this,fe=0;return t.__iterate(function(he,Pe){return(!fe||Q(h,fe++,se)!==!1)&&Q(he,fe++,se)!==!1},ee),fe},x.__iteratorUncached=function(Q,ee){var se=t.__iterator(s,ee),fe=0,he;return new n(function(){return(!he||fe%2)&&(he=se.next(),he.done)?he:fe%2?m(Q,fe++,h):m(Q,fe++,he.value,he)})},x}function Ne(t,h,x){h||(h=Ut);var Q=R(t),ee=0,se=t.toSeq().map(function(fe,he){return[he,fe,ee++,x?x(fe,he,t):fe]}).toArray();return se.sort(function(fe,he){return h(fe[3],he[3])||fe[2]-he[2]}).forEach(Q?function(fe,he){se[he].length=2}:function(fe,he){se[he]=fe[1]}),Q?H(se):I(t)?_(se):ae(se)}function Ve(t,h,x){if(h||(h=Ut),x){var Q=t.toSeq().map(function(ee,se){return[ee,x(ee,se,t)]}).reduce(function(ee,se){return Be(h,ee[1],se[1])?se:ee});return Q&&Q[0]}else return t.reduce(function(ee,se){return Be(h,ee,se)?se:ee})}function Be(t,h,x){var Q=t(x,h);return Q===0&&x!==h&&(x==null||x!==x)||Q>0}function Ye(t,h,x){var Q=nt(t);return Q.size=new le(x).map(function(ee){return ee.size}).min(),Q.__iterate=function(ee,se){for(var fe=this.__iterator(s,se),he,Pe=0;!(he=fe.next()).done&&ee(he.value,Pe++,this)!==!1;);return Pe},Q.__iteratorUncached=function(ee,se){var fe=x.map(function(Ie){return Ie=r(Ie),q(se?Ie.reverse():Ie)}),he=0,Pe=!1;return new n(function(){var Ie;return Pe||(Ie=fe.map(function(Me){return Me.next()}),Pe=Ie.some(function(Me){return Me.done})),Pe?v():m(ee,he++,h.apply(null,Ie.map(function(Me){return Me.value})))})},Q}function ze(t,h){return Ee(t)?h:t.constructor(h)}function dt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ot(t){return Ft(t.size),z(t)}function et(t){return R(t)?O:I(t)?S:l}function nt(t){return Object.create((R(t)?H:I(t)?_:ae).prototype)}function Tt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):k.prototype.cacheResult.call(this)}function Ut(t,h){return t>h?1:t<h?-1:0}function Yt(t){var h=q(t);if(!h){if(!W(t))throw new TypeError("Expected iterable or array-like: "+t);h=q(r(t))}return h}e(At,rt);function At(t,h){var x,Q=function(fe){if(fe instanceof Q)return fe;if(!(this instanceof Q))return new Q(fe);if(!x){x=!0;var he=Object.keys(t);nn(ee,he),ee.size=he.length,ee._name=h,ee._keys=he,ee._defaultValues=t}this._map=xe(fe)},ee=Q.prototype=Object.create(yt);return ee.constructor=Q,Q}At.prototype.toString=function(){return this.__toString(Mt(this)+" {","}")},At.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},At.prototype.get=function(t,h){if(!this.has(t))return h;var x=this._defaultValues[t];return this._map?this._map.get(t,x):x},At.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=mt(this,Dt()))},At.prototype.set=function(t,h){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Mt(this));if(this._map&&!this._map.has(t)){var x=this._defaultValues[t];if(h===x)return this}var Q=this._map&&this._map.set(t,h);return this.__ownerID||Q===this._map?this:mt(this,Q)},At.prototype.remove=function(t){if(!this.has(t))return this;var h=this._map&&this._map.remove(t);return this.__ownerID||h===this._map?this:mt(this,h)},At.prototype.wasAltered=function(){return this._map.wasAltered()},At.prototype.__iterator=function(t,h){var x=this;return O(this._defaultValues).map(function(Q,ee){return x.get(ee)}).__iterator(t,h)},At.prototype.__iterate=function(t,h){var x=this;return O(this._defaultValues).map(function(Q,ee){return x.get(ee)}).__iterate(t,h)},At.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var h=this._map&&this._map.__ensureOwner(t);return t?mt(this,h,t):(this.__ownerID=t,this._map=h,this)};var yt=At.prototype;yt[D]=yt.remove,yt.deleteIn=yt.removeIn=Ze.removeIn,yt.merge=Ze.merge,yt.mergeWith=Ze.mergeWith,yt.mergeIn=Ze.mergeIn,yt.mergeDeep=Ze.mergeDeep,yt.mergeDeepWith=Ze.mergeDeepWith,yt.mergeDeepIn=Ze.mergeDeepIn,yt.setIn=Ze.setIn,yt.update=Ze.update,yt.updateIn=Ze.updateIn,yt.withMutations=Ze.withMutations,yt.asMutable=Ze.asMutable,yt.asImmutable=Ze.asImmutable;function mt(t,h,x){var Q=Object.create(Object.getPrototypeOf(t));return Q._map=h,Q.__ownerID=x,Q}function Mt(t){return t._name||t.constructor.name||"Record"}function nn(t,h){try{h.forEach(an.bind(void 0,t))}catch{}}function an(t,h){Object.defineProperty(t,h,{get:function(){return this.get(h)},set:function(x){Ue(this.__ownerID,"Cannot set on an immutable record."),this.set(h,x)}})}e(jt,Qe);function jt(t){return t==null?ln():on(t)&&!P(t)?t:ln().withMutations(function(h){var x=l(t);Ft(x.size),x.forEach(function(Q){return h.add(Q)})})}jt.of=function(){return this(arguments)},jt.fromKeys=function(t){return this(O(t).keySeq())},jt.prototype.toString=function(){return this.__toString("Set {","}")},jt.prototype.has=function(t){return this._map.has(t)},jt.prototype.add=function(t){return un(this,this._map.set(t,!0))},jt.prototype.remove=function(t){return un(this,this._map.remove(t))},jt.prototype.clear=function(){return un(this,this._map.clear())},jt.prototype.union=function(){var t=u.call(arguments,0);return t=t.filter(function(h){return h.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(h){for(var x=0;x<t.length;x++)l(t[x]).forEach(function(Q){return h.add(Q)})})},jt.prototype.intersect=function(){var t=u.call(arguments,0);if(t.length===0)return this;t=t.map(function(x){return l(x)});var h=this;return this.withMutations(function(x){h.forEach(function(Q){t.every(function(ee){return ee.includes(Q)})||x.remove(Q)})})},jt.prototype.subtract=function(){var t=u.call(arguments,0);if(t.length===0)return this;t=t.map(function(x){return l(x)});var h=this;return this.withMutations(function(x){h.forEach(function(Q){t.some(function(ee){return ee.includes(Q)})&&x.remove(Q)})})},jt.prototype.merge=function(){return this.union.apply(this,arguments)},jt.prototype.mergeWith=function(t){var h=u.call(arguments,1);return this.union.apply(this,h)},jt.prototype.sort=function(t){return ur(Ne(this,t))},jt.prototype.sortBy=function(t,h){return ur(Ne(this,h,t))},jt.prototype.wasAltered=function(){return this._map.wasAltered()},jt.prototype.__iterate=function(t,h){var x=this;return this._map.__iterate(function(Q,ee){return t(ee,ee,x)},h)},jt.prototype.__iterator=function(t,h){return this._map.map(function(x,Q){return Q}).__iterator(t,h)},jt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var h=this._map.__ensureOwner(t);return t?this.__make(h,t):(this.__ownerID=t,this._map=h,this)};function on(t){return!!(t&&t[cn])}jt.isSet=on;var cn="@@__IMMUTABLE_SET__@@",er=jt.prototype;er[cn]=!0,er[D]=er.remove,er.mergeDeep=er.merge,er.mergeDeepWith=er.mergeWith,er.withMutations=Ze.withMutations,er.asMutable=Ze.asMutable,er.asImmutable=Ze.asImmutable,er.__empty=ln,er.__make=dn;function un(t,h){return t.__ownerID?(t.size=h.size,t._map=h,t):h===t._map?t:h.size===0?t.__empty():t.__make(h)}function dn(t,h){var x=Object.create(er);return x.size=t?t.size:0,x._map=t,x.__ownerID=h,x}var pn;function ln(){return pn||(pn=dn(Dt()))}e(ur,jt);function ur(t){return t==null?sn():vn(t)?t:sn().withMutations(function(h){var x=l(t);Ft(x.size),x.forEach(function(Q){return h.add(Q)})})}ur.of=function(){return this(arguments)},ur.fromKeys=function(t){return this(O(t).keySeq())},ur.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function vn(t){return on(t)&&P(t)}ur.isOrderedSet=vn;var Qr=ur.prototype;Qr[M]=!0,Qr.__empty=sn,Qr.__make=gn;function gn(t,h){var x=Object.create(Qr);return x.size=t?t.size:0,x._map=t,x.__ownerID=h,x}var hn;function sn(){return hn||(hn=gn(Fr()))}e(_t,it);function _t(t){return t==null?fn():mn(t)?t:fn().unshiftAll(t)}_t.of=function(){return this(arguments)},_t.prototype.toString=function(){return this.__toString("Stack [","]")},_t.prototype.get=function(t,h){var x=this._head;for(t=U(this,t);x&&t--;)x=x.next;return x?x.value:h},_t.prototype.peek=function(){return this._head&&this._head.value},_t.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,h=this._head,x=arguments.length-1;x>=0;x--)h={value:arguments[x],next:h};return this.__ownerID?(this.size=t,this._head=h,this.__hash=void 0,this.__altered=!0,this):xr(t,h)},_t.prototype.pushAll=function(t){if(t=S(t),t.size===0)return this;Ft(t.size);var h=this.size,x=this._head;return t.reverse().forEach(function(Q){h++,x={value:Q,next:x}}),this.__ownerID?(this.size=h,this._head=x,this.__hash=void 0,this.__altered=!0,this):xr(h,x)},_t.prototype.pop=function(){return this.slice(1)},_t.prototype.unshift=function(){return this.push.apply(this,arguments)},_t.prototype.unshiftAll=function(t){return this.pushAll(t)},_t.prototype.shift=function(){return this.pop.apply(this,arguments)},_t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):fn()},_t.prototype.slice=function(t,h){if(d(t,h,this.size))return this;var x=f(t,this.size),Q=g(h,this.size);if(Q!==this.size)return it.prototype.slice.call(this,t,h);for(var ee=this.size-x,se=this._head;x--;)se=se.next;return this.__ownerID?(this.size=ee,this._head=se,this.__hash=void 0,this.__altered=!0,this):xr(ee,se)},_t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?xr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},_t.prototype.__iterate=function(t,h){if(h)return this.reverse().__iterate(t);for(var x=0,Q=this._head;Q&&t(Q.value,x++,this)!==!1;)Q=Q.next;return x},_t.prototype.__iterator=function(t,h){if(h)return this.reverse().__iterator(t);var x=0,Q=this._head;return new n(function(){if(Q){var ee=Q.value;return Q=Q.next,m(t,x++,ee)}return v()})};function mn(t){return!!(t&&t[En])}_t.isStack=mn;var En="@@__IMMUTABLE_STACK__@@",Dr=_t.prototype;Dr[En]=!0,Dr.withMutations=Ze.withMutations,Dr.asMutable=Ze.asMutable,Dr.asImmutable=Ze.asImmutable,Dr.wasAltered=Ze.wasAltered;function xr(t,h,x,Q){var ee=Object.create(Dr);return ee.size=t,ee._head=h,ee.__ownerID=x,ee.__hash=Q,ee.__altered=!1,ee}var yn;function fn(){return yn||(yn=xr(0))}function lr(t,h){var x=function(Q){t.prototype[Q]=h[Q]};return Object.keys(h).forEach(x),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(h).forEach(x),t}r.Iterator=n,lr(r,{toArray:function(){Ft(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(h,x){t[x]=h}),t},toIndexedSeq:function(){return new yr(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new qt(this,!0)},toMap:function(){return xe(this.toKeyedSeq())},toObject:function(){Ft(this.size);var t={};return this.__iterate(function(h,x){t[x]=h}),t},toOrderedMap:function(){return Ht(this.toKeyedSeq())},toOrderedSet:function(){return ur(R(this)?this.valueSeq():this)},toSet:function(){return jt(R(this)?this.valueSeq():this)},toSetSeq:function(){return new Or(this)},toSeq:function(){return I(this)?this.toIndexedSeq():R(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _t(R(this)?this.valueSeq():this)},toList:function(){return Vt(R(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,h){return this.size===0?t+h:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+h},concat:function(){var t=u.call(arguments,0);return ze(this,ie(this,t))},includes:function(t){return this.some(function(h){return de(h,t)})},entries:function(){return this.__iterator(c)},every:function(t,h){Ft(this.size);var x=!0;return this.__iterate(function(Q,ee,se){if(!t.call(h,Q,ee,se))return x=!1,!1}),x},filter:function(t,h){return ze(this,_r(this,t,h,!0))},find:function(t,h,x){var Q=this.findEntry(t,h);return Q?Q[1]:x},forEach:function(t,h){return Ft(this.size),this.__iterate(h?t.bind(h):t)},join:function(t){Ft(this.size),t=t!==void 0?""+t:",";var h="",x=!0;return this.__iterate(function(Q){x?x=!1:h+=t,h+=Q!=null?Q.toString():""}),h},keys:function(){return this.__iterator(i)},map:function(t,h){return ze(this,Ir(this,t,h))},reduce:function(t,h,x){Ft(this.size);var Q,ee;return arguments.length<2?ee=!0:Q=h,this.__iterate(function(se,fe,he){ee?(ee=!1,Q=se):Q=t.call(x,Q,se,fe,he)}),Q},reduceRight:function(t,h,x){var Q=this.toKeyedSeq().reverse();return Q.reduce.apply(Q,arguments)},reverse:function(){return ze(this,jr(this,!0))},slice:function(t,h){return ze(this,Br(this,t,h,!0))},some:function(t,h){return!this.every(Jr(t),h)},sort:function(t){return ze(this,Ne(this,t))},values:function(){return this.__iterator(s)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,h){return z(t?this.toSeq().filter(t,h):this)},countBy:function(t,h){return tn(this,t,h)},equals:function(t){return Ce(this,t)},entrySeq:function(){var t=this;if(t._cache)return new le(t._cache);var h=t.toSeq().map(An).toIndexedSeq();return h.fromEntrySeq=function(){return t.toSeq()},h},filterNot:function(t,h){return this.filter(Jr(t),h)},findEntry:function(t,h,x){var Q=x;return this.__iterate(function(ee,se,fe){if(t.call(h,ee,se,fe))return Q=[se,ee],!1}),Q},findKey:function(t,h){var x=this.findEntry(t,h);return x&&x[0]},findLast:function(t,h,x){return this.toKeyedSeq().reverse().find(t,h,x)},findLastEntry:function(t,h,x){return this.toKeyedSeq().reverse().findEntry(t,h,x)},findLastKey:function(t,h){return this.toKeyedSeq().reverse().findKey(t,h)},first:function(){return this.find(C)},flatMap:function(t,h){return ze(this,Oe(this,t,h))},flatten:function(t){return ze(this,ve(this,t,!0))},fromEntrySeq:function(){return new cr(this)},get:function(t,h){return this.find(function(x,Q){return de(Q,t)},void 0,h)},getIn:function(t,h){for(var x=this,Q=Yt(t),ee;!(ee=Q.next()).done;){var se=ee.value;if(x=x&&x.get?x.get(se,V):V,x===V)return h}return x},groupBy:function(t,h){return rn(this,t,h)},has:function(t){return this.get(t,V)!==V},hasIn:function(t){return this.getIn(t,V)!==V},isSubset:function(t){return t=typeof t.includes=="function"?t:r(t),this.every(function(h){return t.includes(h)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:r(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(h){return de(h,t)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ve(this,t)},maxBy:function(t,h){return Ve(this,h,t)},min:function(t){return Ve(this,t?On(t):Sn)},minBy:function(t,h){return Ve(this,h?On(h):Sn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return ze(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,h){return ze(this,te(this,t,h,!0))},skipUntil:function(t,h){return this.skipWhile(Jr(t),h)},sortBy:function(t,h){return ze(this,Ne(this,h,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return ze(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,h){return ze(this,ne(this,t,h))},takeUntil:function(t,h){return this.takeWhile(Jr(t),h)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=In(this))}});var Jt=r.prototype;Jt[E]=!0,Jt[a]=Jt.values,Jt.__toJS=Jt.toArray,Jt.__toStringMapper=Tn,Jt.inspect=Jt.toSource=function(){return this.toString()},Jt.chain=Jt.flatMap,Jt.contains=Jt.includes,lr(O,{flip:function(){return ze(this,$r(this))},mapEntries:function(t,h){var x=this,Q=0;return ze(this,this.toSeq().map(function(ee,se){return t.call(h,[se,ee],Q++,x)}).fromEntrySeq())},mapKeys:function(t,h){var x=this;return ze(this,this.toSeq().flip().map(function(Q,ee){return t.call(h,Q,ee,x)}).flip())}});var Xr=O.prototype;Xr[T]=!0,Xr[a]=Jt.entries,Xr.__toJS=Jt.toObject,Xr.__toStringMapper=function(t,h){return JSON.stringify(h)+": "+Tn(t)},lr(S,{toKeyedSeq:function(){return new qt(this,!1)},filter:function(t,h){return ze(this,_r(this,t,h,!1))},findIndex:function(t,h){var x=this.findEntry(t,h);return x?x[0]:-1},indexOf:function(t){var h=this.keyOf(t);return h===void 0?-1:h},lastIndexOf:function(t){var h=this.lastKeyOf(t);return h===void 0?-1:h},reverse:function(){return ze(this,jr(this,!1))},slice:function(t,h){return ze(this,Br(this,t,h,!1))},splice:function(t,h){var x=arguments.length;if(h=Math.max(h|0,0),x===0||x===2&&!h)return this;t=f(t,t<0?this.count():this.size);var Q=this.slice(0,t);return ze(this,x===1?Q:Q.concat(Z(arguments,2),this.slice(t+h)))},findLastIndex:function(t,h){var x=this.findLastEntry(t,h);return x?x[0]:-1},first:function(){return this.get(0)},flatten:function(t){return ze(this,ve(this,t,!1))},get:function(t,h){return t=U(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?h:this.find(function(x,Q){return Q===t},void 0,h)},has:function(t){return t=U(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return ze(this,Re(this,t))},interleave:function(){var t=[this].concat(Z(arguments)),h=Ye(this.toSeq(),_.of,t),x=h.flatten(!0);return h.size&&(x.size=h.size*t.length),ze(this,x)},keySeq:function(){return Ge(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,h){return ze(this,te(this,t,h,!1))},zip:function(){var t=[this].concat(Z(arguments));return ze(this,Ye(this,Pn,t))},zipWith:function(t){var h=Z(arguments);return h[0]=this,ze(this,Ye(this,t,h))}}),S.prototype[b]=!0,S.prototype[M]=!0,lr(l,{get:function(t,h){return this.has(t)?t:h},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),l.prototype.has=Jt.includes,l.prototype.contains=l.prototype.includes,lr(H,O.prototype),lr(_,S.prototype),lr(ae,l.prototype),lr(rt,O.prototype),lr(it,S.prototype),lr(Qe,l.prototype);function Cn(t,h){return h}function An(t,h){return[h,t]}function Jr(t){return function(){return!t.apply(this,arguments)}}function On(t){return function(){return-t.apply(this,arguments)}}function Tn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Pn(){return Z(arguments)}function Sn(t,h){return t<h?1:t>h?-1:0}function In(t){if(t.size===1/0)return 0;var h=P(t),x=R(t),Q=h?1:0,ee=t.__iterate(x?h?function(se,fe){Q=31*Q+Rn(Je(se),Je(fe))|0}:function(se,fe){Q=Q+Rn(Je(se),Je(fe))|0}:h?function(se){Q=31*Q+Je(se)|0}:function(se){Q=Q+Je(se)|0});return Ln(ee,Q)}function Ln(t,h){return h=ut(h,3432918353),h=ut(h<<15|h>>>-15,461845907),h=ut(h<<13|h>>>-13,5),h=(h+3864292196|0)^t,h=ut(h^h>>>16,2246822507),h=ut(h^h>>>13,3266489909),h=st(h^h>>>16),h}function Rn(t,h){return t^h+2654435769+(t<<6)+(t>>2)|0}var Nn={Iterable:r,Seq:k,Collection:$e,Map:xe,OrderedMap:Ht,List:Vt,Stack:_t,Set:jt,OrderedSet:ur,Record:At,Range:Ge,Repeat:Le,is:de,fromJS:_e};return Nn})},19619:(re,u,e)=>{var r=e(29537),O=e(50656);function S(l,L,R){(R!==void 0&&!O(l[L],R)||R===void 0&&!(L in l))&&r(l,L,R)}re.exports=S},74952:(re,u,e)=>{var r=e(60366),O=e(19619),S=e(22417),l=e(33952),L=e(57990),R=e(86806),I=e(36985);function A(P,E,T,b,M){P!==E&&S(E,function(D,j){if(M||(M=new r),L(D))l(P,E,j,T,A,b,M);else{var F=b?b(I(P,j),D,j+"",P,E,M):void 0;F===void 0&&(F=D),O(P,j,F)}},R)}re.exports=A},33952:(re,u,e)=>{var r=e(19619),O=e(97187),S=e(61906),l=e(57590),L=e(59423),R=e(55079),I=e(1403),A=e(94173),P=e(32518),E=e(32095),T=e(57990),b=e(54666),M=e(66377),D=e(36985),j=e(98450);function F($,V,K,w,B,Y,X){var Z=D($,K),z=D(V,K),U=X.get(z);if(U){r($,K,U);return}var C=Y?Y(Z,z,K+"",$,V,X):void 0,d=C===void 0;if(d){var f=I(z),g=!f&&P(z),o=!f&&!g&&M(z);C=z,f||g||o?I(Z)?C=Z:A(Z)?C=l(Z):g?(d=!1,C=O(z,!0)):o?(d=!1,C=S(z,!0)):C=[]:b(z)||R(z)?(C=Z,R(Z)?C=j(Z):(!T(Z)||E(Z))&&(C=L(z))):d=!1}d&&(X.set(z,C),B(C,z,w,Y,X),X.delete(z)),r($,K,C)}re.exports=F},78433:re=>{var u=9007199254740991,e=Math.floor;function r(O,S){var l="";if(!O||S<1||S>u)return l;do S%2&&(l+=O),S=e(S/2),S&&(O+=O);while(S);return l}re.exports=r},67766:(re,u,e)=>{var r=e(51658),O=e(14378),S=e(17238);function l(L,R){return S(O(L,R,r),L+"")}re.exports=l},45486:(re,u,e)=>{var r=e(50357);function O(S,l){return r(l,function(L){return S[L]})}re.exports=O},9881:(re,u,e)=>{var r=e(67766),O=e(67967);function S(l){return r(function(L,R){var I=-1,A=R.length,P=A>1?R[A-1]:void 0,E=A>2?R[2]:void 0;for(P=l.length>3&&typeof P=="function"?(A--,P):void 0,E&&O(R[0],R[1],E)&&(P=A<3?void 0:P,A=1),L=Object(L);++I<A;){var T=R[I];T&&l(L,T,I,P)}return L})}re.exports=S},36985:re=>{function u(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}re.exports=u},67603:(re,u,e)=>{var r=e(5195),O=/[\\^$.*+?()[\]{}|]/g,S=RegExp(O.source);function l(L){return L=r(L),L&&S.test(L)?L.replace(O,"\\$&"):L}re.exports=l},78125:(re,u,e)=>{var r=e(94145),O=e(29346),S=e(14882),l=e(75327),L=e(28852),R=Math.max;function I(A,P,E,T){A=O(A)?A:L(A),E=E&&!T?l(E):0;var b=A.length;return E<0&&(E=R(b+E,0)),S(A)?E<=b&&A.indexOf(P,E)>-1:!!b&&r(A,P,E)>-1}re.exports=I},94173:(re,u,e)=>{var r=e(29346),O=e(92395);function S(l){return O(l)&&r(l)}re.exports=S},71668:(re,u,e)=>{var r=e(76618),O=e(36723),S=e(55079),l=e(1403),L=e(29346),R=e(32518),I=e(22638),A=e(66377),P="[object Map]",E="[object Set]",T=Object.prototype,b=T.hasOwnProperty;function M(D){if(D==null)return!0;if(L(D)&&(l(D)||typeof D=="string"||typeof D.splice=="function"||R(D)||A(D)||S(D)))return!D.length;var j=O(D);if(j==P||j==E)return!D.size;if(I(D))return!r(D).length;for(var F in D)if(b.call(D,F))return!1;return!0}re.exports=M},14882:(re,u,e)=>{var r=e(87490),O=e(1403),S=e(92395),l="[object String]";function L(R){return typeof R=="string"||!O(R)&&S(R)&&r(R)==l}re.exports=L},46729:(re,u,e)=>{var r=e(29537),O=e(34340),S=e(32667);function l(L,R){var I={};return R=S(R,3),O(L,function(A,P,E){r(I,P,R(A,P,E))}),I}re.exports=l},71470:(re,u,e)=>{var r=e(74952),O=e(9881),S=O(function(l,L,R){r(l,L,R)});re.exports=S},81723:(re,u,e)=>{var r=e(74952),O=e(9881),S=O(function(l,L,R,I){r(l,L,R,I)});re.exports=S},77955:(re,u,e)=>{var r=e(50357),O=e(32667),S=e(98279),l=e(47433);function L(R,I){if(R==null)return{};var A=r(l(R),function(P){return[P]});return I=O(I),S(R,A,function(P,E){return I(P,E[0])})}re.exports=L},961:(re,u,e)=>{var r=e(78433),O=e(67967),S=e(75327),l=e(5195);function L(R,I,A){return(A?O(R,I,A):I===void 0)?I=1:I=S(I),r(l(R),I)}re.exports=L},23241:(re,u,e)=>{var r=e(55262),O=e(18385),S=e(75327),l=e(5195);function L(R,I,A){return R=l(R),A=A==null?0:r(S(A),0,R.length),I=O(I),R.slice(A,A+I.length)==I}re.exports=L},75327:(re,u,e)=>{var r=e(55533);function O(S){var l=r(S),L=l%1;return l===l?L?l-L:l:0}re.exports=O},98450:(re,u,e)=>{var r=e(65597),O=e(86806);function S(l){return r(l,O(l))}re.exports=S},28852:(re,u,e)=>{var r=e(45486),O=e(52116);function S(l){return l==null?[]:r(l,O(l))}re.exports=S},50590:function(re){(function(e,r){re.exports=r()})(this,function(){return function(u){var e={};function r(O){if(e[O])return e[O].exports;var S=e[O]={i:O,l:!1,exports:{}};return u[O].call(S.exports,S,S.exports,r),S.l=!0,S.exports}return r.m=u,r.c=e,r.d=function(O,S,l){r.o(O,S)||Object.defineProperty(O,S,{configurable:!1,enumerable:!0,get:l})},r.n=function(O){var S=O&&O.__esModule?function(){return O.default}:function(){return O};return r.d(S,"a",S),S},r.o=function(O,S){return Object.prototype.hasOwnProperty.call(O,S)},r.p="",r(r.s=3)}([function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(l,L){var R={},I=l||"Abstract",A=[],P=null,E;if(R._type=I,R.getType=function(){return I},R.setType=function(D){I=D},R.getChildren=function(){return A},R.addChild=function(D){if(D){if(!D.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(D)};D.setParent(R),A.push(D)}},R.getParent=function(){return P},R.setParent=function(D){P=D},R.getContext=function(D){return E||D.activeContext.peek()},R.setContext=function(D){E=D},R.getStartPosition=function(){return L>>16},R.getEndPosition=function(){return L&65535},R.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},R.toString=function(){var D="Kind: "+R.getType();D+=", Children: [";for(var j=0,F=R.getChildren().length;j<F;j+=1)D+="{"+R.getChildren()[j]+"}, ";return D+="]",D},L===0)throw{name:"Error",message:"Position cannot be 0"};for(var T=arguments.length,b=Array(T>2?T-2:0),M=2;M<T;M++)b[M-2]=arguments[M];return b&&b.forEach(function(D){R.addChild(D)}),R}var S=e.SpelNode={create:O}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=O;function O(S){this.elements=S||[]}O.prototype.push=function(S){return this.elements.push(S),S},O.prototype.pop=function(){return this.elements.pop()},O.prototype.peek=function(){return this.elements[this.elements.length-1]},O.prototype.empty=function(){return this.elements.length>0},O.prototype.search=function(S){return this.elements.length-this.elements.indexOf(S)}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function S(L){this.type=L,this.tokenChars=O[L],this._hasPayload=typeof O[L]!="string",typeof O[L]=="number"&&(this._ordinal=O[L])}for(var l in O)O.hasOwnProperty(l)&&(S[l]=new S(l));S.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},S.prototype.getLength=function(){return this.tokenChars.length},S.prototype.hasPayload=function(){return this._hasPayload},S.prototype.valueOf=function(L){for(var R in O)if(O.hasOwnProperty(R)&&O[R]===L)return S[R]},S.prototype.ordinal=function(){return this._ordinal},e.TokenKind=S},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardContext=e.SpelExpressionEvaluator=void 0;var O=r(4),S=r(50);e.SpelExpressionEvaluator=O.SpelExpressionEvaluator,e.StandardContext=S.StandardContext},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionEvaluator=void 0;var O=r(5),S=r(1),l={};function L(R,I,A){var P=new S.Stack,E;return I||(I={}),P.push(I),E={rootContext:I,activeContext:P,locals:A},R.getValue(E)}l.compile=function(R){var I=(0,O.SpelExpressionParser)().parse(R);return{eval:function(P,E){return L(I,P,E)},_compiledExpression:I}},l.eval=function(R,I,A){return l.compile(R).eval(I,A)},e.SpelExpressionEvaluator=l},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionParser=void 0;var O=r(2),S=r(6),l=r(8),L=r(9),R=r(10),I=r(11),A=r(12),P=r(13),E=r(14),T=r(15),b=r(16),M=r(17),D=r(18),j=r(19),F=r(20),$=r(21),V=r(22),K=r(23),w=r(24),B=r(25),Y=r(26),X=r(27),Z=r(28),z=r(29),U=r(30),C=r(31),d=r(32),f=r(33),g=r(34),o=r(35),i=r(36),s=r(37),c=r(38),y=r(39),p=r(40),a=r(41),n=r(42),m=r(43),v=r(44),N=r(45),G=r(46),q=r(47),J=r(48),W=r(49),k=e.SpelExpressionParser=function(){var _=new RegExp("[\\p{L}\\p{N}_$]+"),ae,oe=[],le,ue,me,pe;function Ee(ce){ae=ce}function ge(ce,Te){try{le=ce,ue=S.Tokenizer.tokenize(ce),me=ue.length,pe=0,oe=[];var je=Se();return xe()&&Ze(pt().startPos,"MORE_INPUT",ft().toString()),je}catch(ot){throw ot.message}}function Se(){var ce=Ae();if(xe()){var Te=pt();if(Te.getKind()===O.TokenKind.ASSIGN){ce===null&&(ce=I.NullLiteral.create(kt(Te.startPos-1,Te.endPos-1))),ft();var je=Ae();return D.Assign.create(qe(Te),ce,je)}if(Te.getKind()===O.TokenKind.ELVIS){ce===null&&(ce=I.NullLiteral.create(kt(Te.startPos-1,Te.endPos-2))),ft();var ot=Se();return ot===null&&(ot=I.NullLiteral.create(kt(Te.startPos+1,Te.endPos+1))),c.Elvis.create(qe(Te),ce,ot)}if(Te.getKind()===O.TokenKind.QMARK){ce===null&&(ce=I.NullLiteral.create(kt(Te.startPos-1,Te.endPos-1))),ft();var Dt=Se();ct(O.TokenKind.COLON);var Kt=Se();return s.Ternary.create(qe(Te),ce,Dt,Kt)}}return ce}function Ae(){for(var ce=ye();xt("or")||Et(O.TokenKind.SYMBOLIC_OR);){var Te=ft(),je=ye();$t(Te,ce,je),ce=o.OpOr.create(qe(Te),ce,je)}return ce}function ye(){for(var ce=De();xt("and")||Et(O.TokenKind.SYMBOLIC_AND);){var Te=ft(),je=De();$t(Te,ce,je),ce=g.OpAnd.create(qe(Te),ce,je)}return ce}function De(){var ce=Fe(),Te=zt();if(Te!==null){var je=ft(),ot=Fe();$t(je,ce,ot);var Dt=Te.kind;if(Te.isNumericRelationalOperator()){var Kt=qe(je);return Dt===O.TokenKind.GT?V.OpGT.create(Kt,ce,ot):Dt===O.TokenKind.LT?w.OpLT.create(Kt,ce,ot):Dt===O.TokenKind.LE?K.OpLE.create(Kt,ce,ot):Dt===O.TokenKind.GE?$.OpGE.create(Kt,ce,ot):Dt===O.TokenKind.EQ?j.OpEQ.create(Kt,ce,ot):F.OpNE.create(Kt,ce,ot)}return Dt===O.TokenKind.INSTANCEOF?m.OpInstanceof.create(qe(je),ce,ot):Dt===O.TokenKind.MATCHES?i.OpMatches.create(qe(je),ce,ot):v.OpBetween.create(qe(je),ce,ot)}return ce}function Fe(){for(var ce=We();Pt(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.INC);){var Te=ft(),je=We();Xt(Te,je),Te.getKind()===O.TokenKind.PLUS?ce=B.OpPlus.create(qe(Te),ce,je):Te.getKind()===O.TokenKind.MINUS&&(ce=Y.OpMinus.create(qe(Te),ce,je))}return ce}function We(){for(var ce=Ke();Pt(O.TokenKind.STAR,O.TokenKind.DIV,O.TokenKind.MOD);){var Te=ft(),je=Ke();$t(Te,ce,je),Te.getKind()===O.TokenKind.STAR?ce=X.OpMultiply.create(qe(Te),ce,je):Te.getKind()===O.TokenKind.DIV?ce=Z.OpDivide.create(qe(Te),ce,je):ce=z.OpModulus.create(qe(Te),ce,je)}return ce}function Ke(){var ce=_e(),Te;if(Et(O.TokenKind.POWER)){Te=ft();var je=_e();return Xt(Te,je),U.OpPower.create(qe(Te),ce,je)}return ce!==null&&Pt(O.TokenKind.INC,O.TokenKind.DEC)?(Te=ft(),Te.getKind()===O.TokenKind.INC?C.OpInc.create(qe(Te),!0,ce):d.OpDec.create(qe(Te),!0,ce)):ce}function _e(){var ce,Te;return Pt(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.NOT)?(ce=ft(),Te=_e(),ce.getKind()===O.TokenKind.NOT?f.OpNot.create(qe(ce),Te):ce.getKind()===O.TokenKind.PLUS?B.OpPlus.create(qe(ce),Te):Y.OpMinus.create(qe(ce),Te)):Pt(O.TokenKind.INC,O.TokenKind.DEC)?(ce=ft(),Te=_e(),ce.getKind()===O.TokenKind.INC?C.OpInc.create(qe(ce),!1,Te):d.OpDec.create(qe(ce),!1,Te)):He()}function He(){var ce=[],Te=be();for(ce.push(Te);at();)ce.push(Rt());return ce.length===1?ce[0]:b.CompoundExpression.create(kt(Te.getStartPosition(),ce[ce.length-1].getEndPosition()),ce)}function at(){var ce=null;return Pt(O.TokenKind.DOT,O.TokenKind.SAFE_NAVI)?ce=de():ce=ke(),ce===null?!1:(lt(ce),!0)}function ke(){return Et(O.TokenKind.LSQUARE)&&st()?Rt():null}function de(){var ce=ft(),Te=ce.getKind()===O.TokenKind.SAFE_NAVI;return It(Te)||Ce()||Qe(Te)||Je(Te)?Rt():(pt()===null?Ze(ce.startPos,"OOD"):Ze(ce.startPos,"UNEXPECTED_DATA_AFTER_DOT",Nt(pt())),null)}function Ce(){if(!Et(O.TokenKind.HASH))return!1;var ce=ft(),Te=ct(O.TokenKind.IDENTIFIER),je=Le();return je===null?(lt(T.VariableReference.create(Te.data,kt(ce.startPos,Te.endPos))),!0):(lt(A.FunctionReference.create(Te.data,kt(ce.startPos,Te.endPos),je)),!0)}function Le(){if(!Et(O.TokenKind.LPAREN))return null;var ce=[];return Ue(ce),ct(O.TokenKind.RPAREN),ce}function we(ce){Et(O.TokenKind.LPAREN)||Ze(qe(pt()),"MISSING_CONSTRUCTOR_ARGS"),Ue(ce),ct(O.TokenKind.RPAREN)}function Ue(ce){var Te=pt().startPos,je;do{ft();var ot=pt();ot===null&&Ze(Te,"RUN_OUT_OF_ARGUMENTS"),ot.getKind()!==O.TokenKind.RPAREN&&ce.push(Se()),je=pt()}while(je!==null&&je.kind===O.TokenKind.COMMA);je===null&&Ze(Te,"RUN_OUT_OF_ARGUMENTS")}function Ge(ce){return ce===null?le.length:ce.startPos}function be(){return bt()||wt()||rt()||it()||Lt()||It(!1)||Ce()||$e()||Qe(!1)||Je(!1)||st()||ut()?Rt():null}function $e(){if(Et(O.TokenKind.BEAN_REF)){var ce=ft(),Te=null,je=null;Et(O.TokenKind.IDENTIFIER)?(Te=ct(O.TokenKind.IDENTIFIER),je=Te.data):Et(O.TokenKind.LITERAL_STRING)?(Te=ct(O.TokenKind.LITERAL_STRING),je=Te.stringValue(),je=je.substring(1,je.length()-1)):Ze(ce.startPos,"INVALID_BEAN_REFERENCE");var ot=G.BeanReference.create(qe(Te),je);return lt(ot),!0}return!1}function rt(){if(Et(O.TokenKind.IDENTIFIER)){var ce=pt();if(ce.stringValue()!=="T")return!1;var Te=ft();if(Et(O.TokenKind.RSQUARE))return lt(E.PropertyReference.create(Te.stringValue(),qe(Te))),!0;ct(O.TokenKind.LPAREN);for(var je=vt(),ot=0;Ct(O.TokenKind.LSQUARE,!0);)ct(O.TokenKind.RSQUARE),ot++;return ct(O.TokenKind.RPAREN),lt(N.TypeReference.create(qe(ce),je,ot)),!0}return!1}function it(){if(Et(O.TokenKind.IDENTIFIER)){var ce=pt();return ce.stringValue().toLowerCase()!=="null"?!1:(ft(),lt(I.NullLiteral.create(qe(ce))),!0)}return!1}function Qe(ce){var Te=pt();if(!Ct(O.TokenKind.PROJECT,!0))return!1;var je=Se();return ct(O.TokenKind.RSQUARE),lt(n.Projection.create(ce,qe(Te),je)),!0}function ut(){var ce=pt(),Te=[];if(!Ct(O.TokenKind.LCURLY,!0))return!1;var je=null,ot=pt();if(Ct(O.TokenKind.RCURLY,!0))je=y.InlineList.create(kt(ce.startPos,ot.endPos));else if(Ct(O.TokenKind.COLON,!0))ot=ct(O.TokenKind.RCURLY),je=p.InlineMap.create(kt(ce.startPos,ot.endPos));else{var Dt=Se();if(Et(O.TokenKind.RCURLY))Te.push(Dt),ot=ct(O.TokenKind.RCURLY),je=y.InlineList.create(kt(ce.startPos,ot.endPos),Te);else if(Ct(O.TokenKind.COMMA,!0)){Te.push(Dt);do Te.push(Se());while(Ct(O.TokenKind.COMMA,!0));ot=ct(O.TokenKind.RCURLY),je=y.InlineList.create(qe(ce.startPos,ot.endPos),Te)}else if(Ct(O.TokenKind.COLON,!0)){var Kt=[];for(Kt.push(Dt),Kt.push(Se());Ct(O.TokenKind.COMMA,!0);)Kt.push(Se()),ct(O.TokenKind.COLON),Kt.push(Se());ot=ct(O.TokenKind.RCURLY),je=p.InlineMap.create(kt(ce.startPos,ot.endPos),Kt)}else Ze(ce.startPos,"OOD")}return lt(je),!0}function st(){var ce=pt();if(!Ct(O.TokenKind.LSQUARE,!0))return!1;var Te=Se();return ct(O.TokenKind.RSQUARE),lt(M.Indexer.create(qe(ce),Te)),!0}function Je(ce){var Te=pt();if(!Ft())return!1;ft();var je=Se();return je===null&&Ze(qe(Te),"MISSING_SELECTION_EXPRESSION"),ct(O.TokenKind.RSQUARE),Te.getKind()===O.TokenKind.SELECT_FIRST?lt(a.Selection.create(ce,a.Selection.FIRST,qe(Te),je)):Te.getKind()===O.TokenKind.SELECT_LAST?lt(a.Selection.create(ce,a.Selection.LAST,qe(Te),je)):lt(a.Selection.create(ce,a.Selection.ALL,qe(Te),je)),!0}function vt(){for(var ce=[],Te=pt();gt(Te);)ft(),Te.kind!==O.TokenKind.DOT&&ce.push(q.Identifier.create(Te.stringValue(),qe(Te))),Te=pt();ce.length||(Te===null&&Ze(le.length(),"OOD"),Ze(Te.startPos,"NOT_EXPECTED_TOKEN","qualified ID",Te.getKind().toString().toLowerCase()));var je=kt(ce[0].getStartPosition(),ce[ce.length-1].getEndPosition());return J.QualifiedIdentifier.create(je,ce)}function gt(ce){if(ce===null||ce.kind===O.TokenKind.LITERAL_STRING)return!1;if(ce.kind===O.TokenKind.DOT||ce.kind===O.TokenKind.IDENTIFIER)return!0;var Te=ce.stringValue();return Te&&Te.length&&_.test(Te)}function It(ce){if(Et(O.TokenKind.IDENTIFIER)){var Te=ft(),je=Le();return je===null?(lt(E.PropertyReference.create(ce,Te.stringValue(),qe(Te))),!0):(lt(P.MethodReference.create(ce,Te.stringValue(),qe(Te),je)),!0)}return!1}function Lt(){if(xt("new")){var ce=ft();if(Et(O.TokenKind.RSQUARE))return lt(E.PropertyReference.create(ce.stringValue(),qe(ce))),!0;var Te=vt(),je=[];if(je.push(Te),Et(O.TokenKind.LSQUARE)){for(var ot=[];Ct(O.TokenKind.LSQUARE,!0);)Et(O.TokenKind.RSQUARE)?ot.push(null):ot.push(Se()),ct(O.TokenKind.RSQUARE);ut()&&je.push(Rt()),lt(W.ConstructorReference.create(qe(ce),ot,je))}else we(je),lt(W.ConstructorReference.create(qe(ce),je));return!0}return!1}function lt(ce){oe.push(ce)}function Rt(){return oe.pop()}function bt(){var ce=pt();if(ce===null)return!1;if(ce.getKind()===O.TokenKind.LITERAL_INT||ce.getKind()===O.TokenKind.LITERAL_LONG)lt(L.NumberLiteral.create(parseInt(ce.stringValue(),10),qe(ce)));else if(ce.getKind()===O.TokenKind.LITERAL_REAL||ce.getKind()===O.TokenKind.LITERAL_REAL_FLOAT)lt(L.NumberLiteral.create(parseFloat(ce.stringValue()),qe(ce)));else if(ce.getKind()===O.TokenKind.LITERAL_HEXINT||ce.getKind()===O.TokenKind.LITERAL_HEXLONG)lt(L.NumberLiteral.create(parseInt(ce.stringValue(),16),qe(ce)));else if(xt("true"))lt(l.BooleanLiteral.create(!0,qe(ce)));else if(xt("false"))lt(l.BooleanLiteral.create(!1,qe(ce)));else if(ce.getKind()===O.TokenKind.LITERAL_STRING)lt(R.StringLiteral.create(ce.stringValue(),qe(ce)));else return!1;return ft(),!0}function wt(){if(Et(O.TokenKind.LPAREN)){ft();var ce=Se();return ct(O.TokenKind.RPAREN),lt(ce),!0}else return!1}function zt(){var ce=pt();if(ce===null)return null;if(ce.isNumericRelationalOperator())return ce;if(ce.isIdentifier()){var Te=ce.stringValue();if(Te.toLowerCase()==="instanceof")return ce.asInstanceOfToken();if(Te.toLowerCase()==="matches")return ce.asMatchesToken();if(Te.toLowerCase()==="between")return ce.asBetweenToken()}return null}function ct(ce){var Te=ft();return Te===null&&Ze(le.length,"OOD"),Te.getKind()!==ce&&Ze(Te.startPos,"NOT_EXPECTED_TOKEN",ce.toString().toLowerCase(),Te.getKind().toString().toLowerCase()),Te}function Et(ce){return Ct(ce,!1)}function Ct(ce,Te){if(!xe())return!1;var je=pt();return je.getKind()===ce?(Te&&pe++,!0):ce===O.TokenKind.IDENTIFIER&&je.getKind().ordinal()>=O.TokenKind.DIV.ordinal()&&je.getKind().ordinal()<=O.TokenKind.NOT.ordinal()&&je.data!==null}function Pt(){if(!xe())return!1;for(var ce=pt(),Te=Array.prototype.slice.call(arguments),je=0,ot=Te.length;je<ot;je+=1)if(ce.getKind()===Te[je])return!0;return!1}function xt(ce){if(!xe())return!1;var Te=pt();return Te.getKind()===O.TokenKind.IDENTIFIER&&Te.stringValue().toLowerCase()===ce.toLowerCase()}function Ft(){if(!xe())return!1;var ce=pt();return ce.getKind()===O.TokenKind.SELECT||ce.getKind()===O.TokenKind.SELECT_FIRST||ce.getKind()===O.TokenKind.SELECT_LAST}function xe(){return pe<ue.length}function ft(){return pe>=me?null:ue[pe++]}function pt(){return pe>=me?null:ue[pe]}function Ze(ce,Te,je,ot){throw je&&(Te+=`
Expected: `+je),ot&&(Te+=`
Actual: `+ot),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+le+"' at position "+ce+". Message: "+Te}}function Nt(ce){return ce.getKind().hasPayload()?ce.stringValue():ce.getKind().toString().toLowerCase()}function $t(ce,Te,je){Wt(ce,Te),Xt(ce,je)}function Wt(ce,Te){Te===null&&Ze(ce.startPos,"LEFT_OPERAND_PROBLEM")}function Xt(ce,Te){Te===null&&Ze(ce.startPos,"RIGHT_OPERAND_PROBLEM")}function qe(ce){return(ce.startPos<<16)+ce.endPos}function kt(ce,Te){return(ce<<16)+Te}return{setConfiguration:Ee,parse:ge}}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var O=r(7),S=r(2),l=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],L=[],R=1,I=2,A=4;function P(){var b;for(b="0".charCodeAt(0);b<="9".charCodeAt(0);b+=1)L[b]|=R|I;for(b="A".charCodeAt(0);b<="F".charCodeAt(0);b+=1)L[b]|=I;for(b="a".charCodeAt(0);b<="f".charCodeAt(0);b+=1)L[b]|=I;for(b="A".charCodeAt(0);b<="Z".charCodeAt(0);b+=1)L[b]|=A;for(b="a".charCodeAt(0);b<="z".charCodeAt(0);b+=1)L[b]|=A}P();function E(b){var M=b,D=b+"\0",j=D.length,F=0,$=[];function V(){for(var v;F<j;)if(v=D[F],n(v))Y();else switch(v){case"+":C(S.TokenKind.INC)?f(S.TokenKind.INC):d(S.TokenKind.PLUS);break;case"_":Y();break;case"-":C(S.TokenKind.DEC)?f(S.TokenKind.DEC):d(S.TokenKind.MINUS);break;case":":d(S.TokenKind.COLON);break;case".":d(S.TokenKind.DOT);break;case",":d(S.TokenKind.COMMA);break;case"*":d(S.TokenKind.STAR);break;case"/":d(S.TokenKind.DIV);break;case"%":d(S.TokenKind.MOD);break;case"(":d(S.TokenKind.LPAREN);break;case")":d(S.TokenKind.RPAREN);break;case"[":d(S.TokenKind.LSQUARE);break;case"#":d(S.TokenKind.HASH);break;case"]":d(S.TokenKind.RSQUARE);break;case"{":d(S.TokenKind.LCURLY);break;case"}":d(S.TokenKind.RCURLY);break;case"@":d(S.TokenKind.BEAN_REF);break;case"^":C(S.TokenKind.SELECT_FIRST)?f(S.TokenKind.SELECT_FIRST):d(S.TokenKind.POWER);break;case"!":C(S.TokenKind.NE)?f(S.TokenKind.NE):C(S.TokenKind.PROJECT)?f(S.TokenKind.PROJECT):d(S.TokenKind.NOT);break;case"=":C(S.TokenKind.EQ)?f(S.TokenKind.EQ):d(S.TokenKind.ASSIGN);break;case"&":if(!C(S.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+M+") at position "+F};f(S.TokenKind.SYMBOLIC_AND);break;case"|":if(!C(S.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+M+") at position "+F};f(S.TokenKind.SYMBOLIC_OR);break;case"?":C(S.TokenKind.SELECT)?f(S.TokenKind.SELECT):C(S.TokenKind.ELVIS)?f(S.TokenKind.ELVIS):C(S.TokenKind.SAFE_NAVI)?f(S.TokenKind.SAFE_NAVI):d(S.TokenKind.QMARK);break;case"$":C(S.TokenKind.SELECT_LAST)?f(S.TokenKind.SELECT_LAST):Y();break;case">":C(S.TokenKind.GE)?f(S.TokenKind.GE):d(S.TokenKind.GT);break;case"<":C(S.TokenKind.LE)?f(S.TokenKind.LE):d(S.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":B(v==="0");break;case" ":case"	":case"\r":case`
`:F+=1;break;case"'":K();break;case'"':w();break;case"\0":F+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+M+") at position "+F};default:throw{name:"SpelParseException",message:"Cannot handle character '"+v+"' in expression ("+M+") at position "+F}}}function K(){for(var v=F,N=!1,G;!N;)if(F+=1,G=D[F],G==="'"&&(D[F+1]==="'"?F+=1:N=!0),G.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+M+") at position "+F};F+=1,$.push(new O.Token(S.TokenKind.LITERAL_STRING,U(v,F),v,F))}function w(){for(var v=F,N=!1,G;!N;)if(F+=1,G=D[F],G==='"'&&(D[F+1]==='"'?F+=1:N=!0),G.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+M+") at position "+F};F+=1,$.push(new O.Token(S.TokenKind.LITERAL_STRING,U(v,F),v,F))}function B(v){var N=!1,G=F,q=D[F+1],J=q==="x"||q==="X",W,k,H,_;if(v&&J){F=F+1;do F+=1;while(m(D[F]));i("L","l")?(Z(U(G+2,F),!0,G,F),F+=1):Z(U(G+2,F),!1,G,F);return}do F+=1;while(a(D[F]));if(q=D[F],q==="."){N=!0,W=F;do F+=1;while(a(D[F]));if(F===W+1){F=W,X(U(G,F),!1,G,F);return}}if(k=F,i("L","l")){if(N)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+M+") at position "+F};X(U(G,k),!0,G,k),F+=1}else if(s(D[F])){N=!0,F+=1,H=D[F],p(H)&&(F+=1);do F+=1;while(a(D[F]));_=!1,c(D[F])?(_=!0,F+=1,k=F):y(D[F])&&(F+=1,k=F),z(U(G,F),_,G,F)}else q=D[F],_=!1,c(q)?(N=!0,_=!0,F+=1,k=F):y(q)&&(N=!0,F+=1,k=F),N?z(U(G,k),_,G,k):X(U(G,k),!1,G,k)}function Y(){var v=F,N,G,q;do F+=1;while(o(D[F]));if(N=U(v,F),(F-v===2||F-v===3)&&(G=N.toUpperCase(),q=l.indexOf(G),q>=0)){g(S.TokenKind.valueOf(G),v,N);return}$.push(new O.Token(S.TokenKind.IDENTIFIER,N.replace("\0",""),v,F))}function X(v,N,G,q){N?$.push(new O.Token(S.TokenKind.LITERAL_LONG,v,G,q)):$.push(new O.Token(S.TokenKind.LITERAL_INT,v,G,q))}function Z(v,N,G,q){if(v.length===0)throw N?{name:"SpelParseException",message:"Not a long in expression ("+M+") at position "+F}:{name:"SpelParseException",message:"Not an int in expression ("+M+") at position "+F};N?$.push(new O.Token(S.TokenKind.LITERAL_HEXLONG,v,G,q)):$.push(new O.Token(S.TokenKind.LITERAL_HEXINT,v,G,q))}function z(v,N,G,q){N?$.push(new O.Token(S.TokenKind.LITERAL_REAL_FLOAT,v,G,q)):$.push(new O.Token(S.TokenKind.LITERAL_REAL,v,G,q))}function U(v,N){return D.substring(v,N)}function C(v){return v.tokenChars.length===2&&D[F]===v.tokenChars[0]?D[F+1]===v.tokenChars[1]:!1}function d(v){$.push(new O.Token(v,null,F,F+1)),F+=1}function f(v){$.push(new O.Token(v,null,F,F+2)),F+=2}function g(v,N,G){$.push(new O.Token(v,G,N,N+v.getLength()))}function o(v){return n(v)||a(v)||v==="_"||v==="$"}function i(v,N){var G=D[F];return G===v||G===N}function s(v){return v==="e"||v==="E"}function c(v){return v==="f"||v==="F"}function y(v){return v==="d"||v==="D"}function p(v){return v==="+"||v==="-"}function a(v){return v.charCodeAt(0)>255?!1:(L[v.charCodeAt(0)]&R)!==0}function n(v){return v.charCodeAt(0)>255?!1:(L[v.charCodeAt(0)]&A)!==0}function m(v){return v.charCodeAt(0)>255?!1:(L[v.charCodeAt(0)]&I)!==0}return V(),$}var T=e.Tokenizer={tokenize:E}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0;var O=r(2);function S(l,L,R,I){this.kind=l,this.startPos=R,this.endPos=I,L&&(this.data=L)}S.prototype.getKind=function(){return this.kind},S.prototype.toString=function(){var l="[";return l+=this.kind.toString(),this.kind.hasPayload()&&(l+=":"+this.data),l+="]",l+="("+this.startPos+","+this.endPos+")",l},S.prototype.isIdentifier=function(){return this.kind===O.TokenKind.IDENTIFIER},S.prototype.isNumericRelationalOperator=function(){return this.kind===O.TokenKind.GT||this.kind===O.TokenKind.GE||this.kind===O.TokenKind.LT||this.kind===O.TokenKind.LE||this.kind===O.TokenKind.EQ||this.kind===O.TokenKind.NE},S.prototype.stringValue=function(){return this.data},S.prototype.asInstanceOfToken=function(){return new S(O.TokenKind.INSTANCEOF,this.startPos,this.endPos)},S.prototype.asMatchesToken=function(){return new S(O.TokenKind.MATCHES,this.startPos,this.endPos)},S.prototype.asBetweenToken=function(){return new S(O.TokenKind.BETWEEN,this.startPos,this.endPos)},S.prototype.getStartPosition=function(){return this.startPos},S.prototype.getEndPosition=function(){return this.endPos},e.Token=S},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteral=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("boolean",R);return I.getValue=function(){return L},I.setValue=function(A){return L=A},I}var l=e.BooleanLiteral={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteral=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("number",R);return I.getValue=function(){return L},I.setValue=function(A){return L=A},I}var l=e.NumberLiteral={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringLiteral=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("string",R);function A(P){return(P[0]==="'"&&P[P.length-1]==="'"||P[0]==='"'&&P[P.length-1]==='"')&&(P=P.substring(1,P.length-1)),P.replace(/''/g,"'").replace(/""/g,'"')}return L=A(L),I.getValue=function(){return L},I.setValue=function(P){return L=P},I}var l=e.StringLiteral={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullLiteral=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("null",R);return I.getValue=function(){return null},I}var l=e.NullLiteral={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionReference=void 0;var O=r(0),S=r(1);function l(R,I,A){var P=O.SpelNode.create("function",I);return P.getRaw=function(){return{functionName:R,args:A}},P.getValue=function(E){var T=E.locals||{},b=E.rootContext,M=[];if(A.forEach(function(D){var j=E.activeContext;E.activeContext=new S.Stack,E.activeContext.push(E.rootContext),M.push(D.getValue(E)),E.activeContext=j}),T[R])return T[R].apply(b,M);throw{name:"FunctionDoesNotExistException",message:"Function '"+R+"' does not exist."}},P}var L=e.FunctionReference={create:l}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MethodReference=void 0;var O=r(0),S=r(1);function l(R,I,A,P){var E=O.SpelNode.create("method",A);return E.getRaw=function(){return{methodName:I,args:P}},E.getValue=function(T){var b=T.activeContext.peek(),M=[],D;if(!b)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+I+"' for an undefined context."};function j(F){if(F==null){if(R)return null;throw{name:"NullPointerException",message:"Method "+I+" does not exist."}}return F}if(P.forEach(function(F){var $=T.activeContext;T.activeContext=new S.Stack,T.activeContext.push(T.rootContext),M.push(F.getValue(T)),T.activeContext=$}),I.substr(0,3)==="get"&&!b[I])return j(b[I.charAt(3).toLowerCase()+I.substring(4)]);if(I.substr(0,3)==="set"&&!b[I])return b[I.charAt(3).toLowerCase()+I.substring(4)]=M[0];if(Array.isArray(b)){if(I==="size")return b.length;if(I==="contains")return b.includes(M[0])}return D=j(b[I]),D?D.apply(b,M):null},E}var L=e.MethodReference={create:l}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyReference=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("property",I);return A.getRaw=function(){return R},A.getValue=function(P){var E=P.activeContext.peek();if(!E){if(L)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+R+"' for an undefined context."}}if(E[R]===void 0||E[R]===null){if(L)return null;if(R==="size"&&Array.isArray(E))return E.length;throw{name:"NullPointerException",message:"Property '"+R+"' does not exist."}}return E[R]},A.setValue=function(P,E){var T=E.activeContext.peek();if(!T)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+R+"' for an undefined context."};return T[R]=P},A.getName=function(){return R},A}var l=e.PropertyReference={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VariableReference=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("variable",R);return I.getRaw=function(){return L},I.getValue=function(A){var P=A.activeContext.peek(),E=A.locals;if(!P)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+L+"' for an undefined context."};return L==="this"?P:L==="root"?A.rootContext:E[L]},I.setValue=function(A,P){var E=P.locals;return E[L]=A},I}var l=e.VariableReference={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompoundExpression=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create.apply(null,["compound",L].concat(R));function A(P){var E=I.getChildren().length,T;for(T=0;T<E;T+=1)I.getChildren()[T].getType()==="indexer"?P.activeContext.push(P.activeContext.peek()[I.getChildren()[T].getValue(P)]):P.activeContext.push(I.getChildren()[T].getValue(P));return function(){for(T=0;T<E;T+=1)P.activeContext.pop()}}return I.getValue=function(P){var E=P.activeContext.peek(),T;if(!E)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var b=A(P);return T=P.activeContext.peek(),b(),T},I.setValue=function(P,E){var T=A(E),b=I.getChildren().length;return E.activeContext.pop(),P=I.getChildren()[b-1].setValue(P,E),E.activeContext.push(null),T(),P},I}var l=e.CompoundExpression={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Indexer=void 0;var O=r(0),S=r(1);function l(R,I){var A=O.SpelNode.create.apply(null,["indexer",R].concat(I));return A.getValue=function(P){var E=P.activeContext,T,b=A.getChildren().length,M,D;if(P.activeContext=new S.Stack,P.activeContext.push(P.rootContext),T=P.activeContext.peek(),!T)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(M=0;M<b;M+=1)P.activeContext.push(A.getChildren()[M].getValue(P));for(D=P.activeContext.peek(),M=0;M<b;M+=1)P.activeContext.pop();return P.activeContext=E,D},A}var L=e.Indexer={create:l}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assign=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("assign",L,R,I);return A.getValue=function(P){var E=P.activeContext.peek();if(!E)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+R.getValue(P)+"' for an undefined context."};return R.setValue(I.getValue(P),P)},A}var l=e.Assign={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpEQ=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-eq",L,R,I);return A.getValue=function(P){return R.getValue(P)===I.getValue(P)},A}var l=e.OpEQ={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNE=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-ne",L,R,I);return A.getValue=function(P){return R.getValue(P)!==I.getValue(P)},A}var l=e.OpNE={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGE=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-ge",L,R,I);return A.getValue=function(P){return R.getValue(P)>=I.getValue(P)},A}var l=e.OpGE={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGT=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-gt",L,R,I);return A.getValue=function(P){return R.getValue(P)>I.getValue(P)},A}var l=e.OpGT={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLE=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-le",L,R,I);return A.getValue=function(P){return R.getValue(P)<=I.getValue(P)},A}var l=e.OpLE={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLT=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-lt",L,R,I);return A.getValue=function(P){return R.getValue(P)<I.getValue(P)},A}var l=e.OpLT={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPlus=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-plus",L,R,I);return A.getValue=function(P){return I?R.getValue(P)+I.getValue(P):+R.getValue(P)},A}var l=e.OpPlus={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMinus=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-minus",L,R,I);return A.getValue=function(P){return I?R.getValue(P)-I.getValue(P):-R.getValue(P)},A}var l=e.OpMinus={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMultiply=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-multiply",L,R,I);return A.getValue=function(P){var E=R.getValue(P),T=I.getValue(P);if(typeof E=="number"&&typeof T=="number")return E*T;if(typeof E=="string"&&typeof T=="number"){for(var b="",M=0;M<T;M+=1)b+=E;return b}return null},A}var l=e.OpMultiply={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDivide=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-divide",L,R,I);return A.getValue=function(P){return R.getValue(P)/I.getValue(P)},A}var l=e.OpDivide={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpModulus=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-modulus",L,R,I);return A.getValue=function(P){return R.getValue(P)%I.getValue(P)},A}var l=e.OpModulus={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPower=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-power",L,R,I);return A.getValue=function(P){return Math.pow(R.getValue(P),I.getValue(P))},A}var l=e.OpPower={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInc=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-inc",L,I);return A.getValue=function(P){var E=I.getValue(P);return I.setValue(E+1,P),R?E:E+1},A}var l=e.OpInc={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDec=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-dec",L,I);return A.getValue=function(P){var E=I.getValue(P);return I.setValue(E-1,P),R?E:E-1},A}var l=e.OpDec={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNot=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("op-not",L,R);return I.getValue=function(A){return!R.getValue(A)},I}var l=e.OpNot={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpAnd=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-and",L,R,I);return A.getValue=function(P){return!!R.getValue(P)&&!!I.getValue(P)},A}var l=e.OpAnd={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpOr=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("op-or",L,R,I);return A.getValue=function(P){return!!R.getValue(P)||!!I.getValue(P)},A}var l=e.OpOr={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMatches=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("matches",L,R,I);return A.getValue=function(P){var E=R.getValue(P),T=I.getValue(P);try{var b=new RegExp(T);return!!b.exec(E)}catch(M){throw{name:"EvaluationException",message:M.toString()}}},A}var l=e.OpMatches={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ternary=void 0;var O=r(0);function S(L,R,I,A){var P=O.SpelNode.create("ternary",L,R,I,A);return P.getValue=function(E){return R.getValue(E)?I.getValue(E):A.getValue(E)},P}var l=e.Ternary={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elvis=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("elvis",L,R,I);return A.getValue=function(P){return R.getValue(P)!==null?R.getValue(P):I.getValue(P)},A}var l=e.Elvis={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineList=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("list",L),A=[].concat(R||[]);return I.getRaw=function(){return A},I.getValue=function(P){return A.map(function(E){return E.getValue(P)})},I}var l=e.InlineList={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineMap=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("map",L),A=[].concat(R||[]);return I.getValue=function(P){var E=!0,T=null,b={};return A.forEach(function(M){E?M.getType()==="property"?T=M.getName():T=M.getValue(P):b[T]=M.getValue(P),E=!E}),b},I}var l=e.InlineMap={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},S=r(0);function l(P,E,T){var b=!1;return T.activeContext.push(P),b=E.getValue(T),T.activeContext.pop(),b}function L(P,E,T,b){var M=P.filter(function(D){return l(D,T,b)});switch(E){case"ALL":return M;case"FIRST":return M[0]||null;case"LAST":return M.length?M[M.length-1]:null}}function R(P,E,T,b){var M={},D,j,F=[],$={};for(j in P)P.hasOwnProperty(j)&&(D={key:j,value:P[j]},l(D,T,b)&&F.push(D));switch(E){case"ALL":return F.forEach(function(V){M[V.key]=V.value}),M;case"FIRST":return F.length?($[F[0].key]=F[0].value,$):null;case"LAST":return F.length?($[F[F.length-1].key]=F[F.length-1].value,$):null}F.forEach(function(V){M[V.key]=V.value})}function I(P,E,T,b){var M=S.SpelNode.create("selection",T,b);return M.getValue=function(D){var j=D.activeContext.peek();if(j){if(Array.isArray(j))return L(j,E,b,D);if((typeof j>"u"?"undefined":O(j))==="object")return R(j,E,b,D)}return null},M}var A=e.Selection={create:I,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Projection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},S=r(0);function l(I,A,P){return I.map(function(E){var T;return P.activeContext.push(E),T=A.getValue(P),P.activeContext.pop(),T})}function L(I,A,P){var E=S.SpelNode.create("projection",A,P);return E.getValue=function(T){var b=T.activeContext.peek(),M=[],D;if(Array.isArray(b))return l(b,P,T);if((typeof b>"u"?"undefined":O(b))==="object"){for(D in b)b.hasOwnProperty(D)&&M.push(b[D]);return l(M,P,T)}return null},E}var R=e.Projection={create:L}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInstanceof=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("instanceof",L,R,I);return A.getValue=function(P){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},A}var l=e.OpInstanceof={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpBetween=void 0;var O=r(0);function S(L,R,I){var A=O.SpelNode.create("between",L,R,I);return A.getValue=function(P){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},A}var l=e.OpBetween={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeReference=void 0;var O=r(0);function S(L,A,I){var A=O.SpelNode.create("typeref",L,A);return A.getValue=function(P){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},A}var l=e.TypeReference={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeanReference=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("beanref",L);return I.getValue=function(A){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},I}var l=e.BeanReference={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Identifier=void 0;var O=r(0);function S(L,R){var I=O.SpelNode.create("identifier",R);return I.getRaw=function(){return L},I.getValue=function(A){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},I}var l=e.Identifier={create:S}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QualifiedIdentifier=void 0;var O=r(0);function S(R){if(Array.isArray(R)){for(var I=0,A=Array(R.length);I<R.length;I++)A[I]=R[I];return A}else return Array.from(R)}function l(R,I){var A=O.SpelNode.create.apply(O.SpelNode,["qualifiedidentifier",R].concat(S(I)));return A.getRaw=function(){return I.map(function(P){return P.getRaw()})},A.getValue=function(P){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},A}var L=e.QualifiedIdentifier={create:l}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorReference=void 0;var O=r(0),S=r(1);function l(A){if(Array.isArray(A)){for(var P=0,E=Array(A.length);P<A.length;P++)E[P]=A[P];return E}else return Array.from(A)}function L(A){return Array.isArray(A)?A:Array.from(A)}function R(A,P,E){var T=E!==void 0,b;T?b=P.length&&P[0]&&P[0].getType()==="number"?P[0].getValue():null:(E=P,P=void 0);var M=E,D=L(M),j=D[0],F=D.slice(1),$=O.SpelNode.create.apply(O.SpelNode,["constructorref",A].concat(l(E)));return $.getRaw=function(){return b},$.getValue=function(V){if(T&&F.length<=1){var K=[];return F.forEach(function(w){var B=V.activeContext;V.activeContext=new S.Stack,V.activeContext.push(V.rootContext),K.push(w.getValue(V)),V.activeContext=B}),F.length===1?K[0]:b?new Array(b):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},$}var I=e.ConstructorReference={create:R}},function(u,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(l,L){var R={};return R.authentication=l||{},R.principal=L||{},R.hasRole=function(I){var A=!1;return!I||!R.authentication&&!Array.isArray(R.authentication.authorities)?!1:(R.authentication.authorities.forEach(function(P){P.authority.toLowerCase()===I.toLowerCase()&&(A=!0)}),A)},R.hasPermission=function(){var I=Array.prototype.slice.call(arguments);if(I.length===1)return R.hasRole(I[0])},R}var S=e.StandardContext={create:O}}])})},79240:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=R(e(78125)),O=R(e(17012)),S=R(e(27359)),l=R(e(15338)),L=R(e(39722));function R(b){return b&&b.__esModule?b:{default:b}}function I(b,M){if(!(b instanceof M))throw new TypeError("Cannot call a class as a function")}function A(b,M){for(var D=0;D<M.length;D++){var j=M[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}function P(b,M,D){return M&&A(b.prototype,M),D&&A(b,D),b}var E=function(M){return M.replace(/[\t ]+$/,"")},T=function(){function b(M,D,j){I(this,b),this.cfg=M||{},this.indentation=new S.default(this.cfg.indent),this.inlineBlock=new l.default,this.params=new L.default(this.cfg.params),this.tokenizer=D,this.tokenOverride=j,this.previousReservedWord={},this.tokens=[],this.index=0}return P(b,[{key:"format",value:function(D){this.tokens=this.tokenizer.tokenize(D);var j=this.getFormattedQueryFromTokens();return j.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var D=this,j="";return this.tokens.forEach(function(F,$){D.index=$,D.tokenOverride&&(F=D.tokenOverride(F,D.previousReservedWord)||F),F.type===O.default.WHITESPACE||(F.type===O.default.LINE_COMMENT?j=D.formatLineComment(F,j):F.type===O.default.BLOCK_COMMENT?j=D.formatBlockComment(F,j):F.type===O.default.RESERVED_TOP_LEVEL?(j=D.formatTopLevelReservedWord(F,j),D.previousReservedWord=F):F.type===O.default.RESERVED_TOP_LEVEL_NO_INDENT?(j=D.formatTopLevelReservedWordNoIndent(F,j),D.previousReservedWord=F):F.type===O.default.RESERVED_NEWLINE?(j=D.formatNewlineReservedWord(F,j),D.previousReservedWord=F):F.type===O.default.RESERVED?(j=D.formatWithSpaces(F,j),D.previousReservedWord=F):F.type===O.default.OPEN_PAREN?j=D.formatOpeningParentheses(F,j):F.type===O.default.CLOSE_PAREN?j=D.formatClosingParentheses(F,j):F.type===O.default.PLACEHOLDER?j=D.formatPlaceholder(F,j):F.value===","?j=D.formatComma(F,j):F.value===":"?j=D.formatWithSpaceAfter(F,j):F.value==="."?j=D.formatWithoutSpaces(F,j):F.value===";"?j=D.formatQuerySeparator(F,j):j=D.formatWithSpaces(F,j))}),j}},{key:"formatLineComment",value:function(D,j){return this.addNewline(j+D.value)}},{key:"formatBlockComment",value:function(D,j){return this.addNewline(this.addNewline(j)+this.indentComment(D.value))}},{key:"indentComment",value:function(D){return D.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(D,j){return this.indentation.decreaseTopLevel(),j=this.addNewline(j)+this.equalizeWhitespace(this.formatReservedWord(D.value)),this.addNewline(j)}},{key:"formatTopLevelReservedWord",value:function(D,j){return this.indentation.decreaseTopLevel(),j=this.addNewline(j),this.indentation.increaseTopLevel(),j+=this.equalizeWhitespace(this.formatReservedWord(D.value)),this.addNewline(j)}},{key:"formatNewlineReservedWord",value:function(D,j){return this.addNewline(j)+this.equalizeWhitespace(this.formatReservedWord(D.value))+" "}},{key:"equalizeWhitespace",value:function(D){return D.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(D,j){var F=[O.default.WHITESPACE,O.default.OPEN_PAREN,O.default.LINE_COMMENT];return(0,r.default)(F,this.previousToken().type)||(j=E(j)),j+=this.cfg.uppercase?D.value.toUpperCase():D.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),j=this.addNewline(j)),j}},{key:"formatClosingParentheses",value:function(D,j){return D.value=this.cfg.uppercase?D.value.toUpperCase():D.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(D,j)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(D,this.addNewline(j)))}},{key:"formatPlaceholder",value:function(D,j){return j+this.params.get(D)+" "}},{key:"formatComma",value:function(D,j){return j=E(j)+D.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?j:this.addNewline(j)}},{key:"formatWithSpaceAfter",value:function(D,j){return E(j)+D.value+" "}},{key:"formatWithoutSpaces",value:function(D,j){return E(j)+D.value}},{key:"formatWithSpaces",value:function(D,j){var F=D.type==="reserved"?this.formatReservedWord(D.value):D.value;return j+F+" "}},{key:"formatReservedWord",value:function(D){return this.cfg.uppercase?D.toUpperCase():D}},{key:"formatQuerySeparator",value:function(D,j){return this.indentation.resetIndentation(),E(j)+D.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(D){return D=E(D),D.endsWith(`
`)||(D+=`
`),D+this.indentation.getIndent()}},{key:"previousToken",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-D]||{}}}]),b}();u.default=T,re.exports=u.default},27359:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=S(e(961)),O=S(e(13509));function S(E){return E&&E.__esModule?E:{default:E}}function l(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")}function L(E,T){for(var b=0;b<T.length;b++){var M=T[b];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}function R(E,T,b){return T&&L(E.prototype,T),b&&L(E,b),E}var I="top-level",A="block-level",P=function(){function E(T){l(this,E),this.indent=T||"  ",this.indentTypes=[]}return R(E,[{key:"getIndent",value:function(){return(0,r.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(I)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(A)}},{key:"decreaseTopLevel",value:function(){(0,O.default)(this.indentTypes)===I&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var b=this.indentTypes.pop();if(b!==I)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),E}();u.default=P,re.exports=u.default},15338:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=O(e(17012));function O(A){return A&&A.__esModule?A:{default:A}}function S(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function l(A,P){for(var E=0;E<P.length;E++){var T=P[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,T.key,T)}}function L(A,P,E){return P&&l(A.prototype,P),E&&l(A,E),A}var R=50,I=function(){function A(){S(this,A),this.level=0}return L(A,[{key:"beginIfPossible",value:function(E,T){this.level===0&&this.isInlineBlock(E,T)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(E,T){for(var b=0,M=0,D=T;D<E.length;D++){var j=E[D];if(b+=j.value.length,b>R)return!1;if(j.type===r.default.OPEN_PAREN)M++;else if(j.type===r.default.CLOSE_PAREN&&(M--,M===0))return!0;if(this.isForbiddenToken(j))return!1}return!1}},{key:"isForbiddenToken",value:function(E){var T=E.type,b=E.value;return T===r.default.RESERVED_TOP_LEVEL||T===r.default.RESERVED_NEWLINE||T===r.default.COMMENT||T===r.default.BLOCK_COMMENT||b===";"}}]),A}();u.default=I,re.exports=u.default},39722:(re,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;function e(l,L){if(!(l instanceof L))throw new TypeError("Cannot call a class as a function")}function r(l,L){for(var R=0;R<L.length;R++){var I=L[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(l,I.key,I)}}function O(l,L,R){return L&&r(l.prototype,L),R&&r(l,R),l}var S=function(){function l(L){e(this,l),this.params=L,this.index=0}return O(l,[{key:"get",value:function(R){var I=R.key,A=R.value;return this.params?I?this.params[I]:this.params[this.index++]:A}}]),l}();u.default=S,re.exports=u.default},11160:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=l(e(71668)),O=l(e(67603)),S=l(e(17012));function l(P){return P&&P.__esModule?P:{default:P}}function L(P,E){if(!(P instanceof E))throw new TypeError("Cannot call a class as a function")}function R(P,E){for(var T=0;T<E.length;T++){var b=E[T];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(P,b.key,b)}}function I(P,E,T){return E&&R(P.prototype,E),T&&R(P,T),P}var A=function(){function P(E){L(this,P),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(E.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(E.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(E.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(E.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(E.reservedWords),this.WORD_REGEX=this.createWordRegex(E.specialWordChars),this.STRING_REGEX=this.createStringRegex(E.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(E.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(E.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(E.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(E.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(E.namedPlaceholderTypes,this.createStringPattern(E.stringTypes))}return I(P,[{key:"createLineCommentRegex",value:function(T){return new RegExp("^((?:".concat(T.map(function(b){return(0,O.default)(b)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(T){var b=T.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(b,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(T.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(T){return new RegExp("^("+this.createStringPattern(T)+")","u")}},{key:"createStringPattern",value:function(T){var b={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return T.map(function(M){return b[M]}).join("|")}},{key:"createParenRegex",value:function(T){var b=this;return new RegExp("^("+T.map(function(M){return b.escapeParen(M)}).join("|")+")","iu")}},{key:"escapeParen",value:function(T){return T.length===1?(0,O.default)(T):"\\b"+T+"\\b"}},{key:"createPlaceholderRegex",value:function(T,b){if((0,r.default)(T))return!1;var M=T.map(O.default).join("|");return new RegExp("^((?:".concat(M,")(?:").concat(b,"))"),"u")}},{key:"tokenize",value:function(T){if(!T)return[];for(var b=[],M;T.length;)M=this.getNextToken(T,M),T=T.substring(M.value.length),b.push(M);return b}},{key:"getNextToken",value:function(T,b){return this.getWhitespaceToken(T)||this.getCommentToken(T)||this.getStringToken(T)||this.getOpenParenToken(T)||this.getCloseParenToken(T)||this.getPlaceholderToken(T)||this.getNumberToken(T)||this.getReservedWordToken(T,b)||this.getWordToken(T)||this.getOperatorToken(T)}},{key:"getWhitespaceToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(T){return this.getLineCommentToken(T)||this.getBlockCommentToken(T)}},{key:"getLineCommentToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(T){return this.getIdentNamedPlaceholderToken(T)||this.getStringNamedPlaceholderToken(T)||this.getIndexedPlaceholderToken(T)}},{key:"getIdentNamedPlaceholderToken",value:function(T){return this.getPlaceholderTokenWithKey({input:T,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(M){return M.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(T){var b=this;return this.getPlaceholderTokenWithKey({input:T,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(D){return b.getEscapedPlaceholderKey({key:D.slice(2,-1),quoteChar:D.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(T){return this.getPlaceholderTokenWithKey({input:T,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(M){return M.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(T){var b=T.input,M=T.regex,D=T.parseKey,j=this.getTokenOnFirstMatch({input:b,regex:M,type:S.default.PLACEHOLDER});return j&&(j.key=D(j.value)),j}},{key:"getEscapedPlaceholderKey",value:function(T){var b=T.key,M=T.quoteChar;return b.replace(new RegExp((0,O.default)("\\"+M),"gu"),M)}},{key:"getNumberToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(T,b){if(!(b&&b.value&&b.value==="."))return this.getTopLevelReservedToken(T)||this.getNewlineReservedToken(T)||this.getTopLevelReservedTokenNoIndent(T)||this.getPlainReservedToken(T)}},{key:"getTopLevelReservedToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(T){return this.getTokenOnFirstMatch({input:T,type:S.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(T){var b=T.input,M=T.type,D=T.regex,j=b.match(D);if(j)return{type:M,value:j[1]}}}]),P}();u.default=A,re.exports=u.default},17012:(re,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};u.default=e,re.exports=u.default},18083:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=S(e(79240)),O=S(e(11160));function S(M){return M&&M.__esModule?M:{default:M}}function l(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function L(M,D){for(var j=0;j<D.length;j++){var F=D[j];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(M,F.key,F)}}function R(M,D,j){return D&&L(M.prototype,D),j&&L(M,j),M}var I=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],A=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],P=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],E=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],T,b=function(){function M(D){l(this,M),this.cfg=D}return R(M,[{key:"format",value:function(j){return T||(T=new O.default({reservedWords:I,reservedTopLevelWords:A,reservedNewlineWords:E,reservedTopLevelWordsNoIndent:P,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new r.default(this.cfg,T).format(j)}}]),M}();u.default=b,re.exports=u.default},5020:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=S(e(79240)),O=S(e(11160));function S(M){return M&&M.__esModule?M:{default:M}}function l(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function L(M,D){for(var j=0;j<D.length;j++){var F=D[j];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(M,F.key,F)}}function R(M,D,j){return D&&L(M.prototype,D),j&&L(M,j),M}var I=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],A=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],P=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],E=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],T,b=function(){function M(D){l(this,M),this.cfg=D}return R(M,[{key:"format",value:function(j){return T||(T=new O.default({reservedWords:I,reservedTopLevelWords:A,reservedNewlineWords:E,reservedTopLevelWordsNoIndent:P,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,T).format(j)}}]),M}();u.default=b,re.exports=u.default},4538:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=l(e(79240)),O=l(e(11160)),S=l(e(17012));function l(j){return j&&j.__esModule?j:{default:j}}function L(j,F){if(!(j instanceof F))throw new TypeError("Cannot call a class as a function")}function R(j,F){for(var $=0;$<F.length;$++){var V=F[$];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(j,V.key,V)}}function I(j,F,$){return F&&R(j.prototype,F),$&&R(j,$),j}var A=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],P=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],E=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],T=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],b=function(F,$){if(F.type===S.default.RESERVED_TOP_LEVEL&&F.value==="SET"&&$.value==="BY")return F.type=S.default.RESERVED,F},M,D=function(){function j(F){L(this,j),this.cfg=F}return I(j,[{key:"format",value:function($){return M||(M=new O.default({reservedWords:A,reservedTopLevelWords:P,reservedNewlineWords:T,reservedTopLevelWordsNoIndent:E,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new r.default(this.cfg,M,b).format($)}}]),j}();u.default=D,re.exports=u.default},24673:(re,u,e)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var r=S(e(79240)),O=S(e(11160));function S(M){return M&&M.__esModule?M:{default:M}}function l(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function L(M,D){for(var j=0;j<D.length;j++){var F=D[j];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(M,F.key,F)}}function R(M,D,j){return D&&L(M.prototype,D),j&&L(M,j),M}var I=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],A=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],P=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],E=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],T,b=function(){function M(D){l(this,M),this.cfg=D}return R(M,[{key:"format",value:function(j){return T||(T=new O.default({reservedWords:I,reservedTopLevelWords:A,reservedNewlineWords:E,reservedTopLevelWordsNoIndent:P,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,T).format(j)}}]),M}();u.default=b,re.exports=u.default},80261:(re,u,e)=>{"use strict";var r;r={value:!0},u.ZP=r=void 0;var O=R(e(18083)),S=R(e(5020)),l=R(e(4538)),L=R(e(24673));function R(P){return P&&P.__esModule?P:{default:P}}var I=function(E){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(T.language){case"db2":return new O.default(T).format(E);case"n1ql":return new S.default(T).format(E);case"pl/sql":return new l.default(T).format(E);case"sql":case void 0:return new L.default(T).format(E);default:throw Error("Unsupported SQL dialect: ".concat(T.language))}};r=I;var A={format:I};u.ZP=A},72344:(re,u,e)=>{re.exports=e(57619)},57619:(re,u,e)=>{var r=e(45399).Buffer,O=u,S=/`/g,l=/\./g,L=/[\0\b\t\n\r\x1a\"\'\\]/g,R={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};O.escapeId=function(T,b){if(Array.isArray(T)){for(var M="",D=0;D<T.length;D++)M+=(D===0?"":", ")+O.escapeId(T[D],b);return M}else return b?"`"+String(T).replace(S,"``")+"`":"`"+String(T).replace(S,"``").replace(l,"`.`")+"`"},O.escape=function(T,b,M){if(T==null)return"NULL";switch(typeof T){case"boolean":return T?"true":"false";case"number":return T+"";case"object":return Object.prototype.toString.call(T)==="[object Date]"?O.dateToString(T,M||"local"):Array.isArray(T)?O.arrayToList(T,M):r.isBuffer(T)?O.bufferToString(T):typeof T.toSqlString=="function"?String(T.toSqlString()):b?I(T.toString()):O.objectToValues(T,M);default:return I(T)}},O.arrayToList=function(T,b){for(var M="",D=0;D<T.length;D++){var j=T[D];Array.isArray(j)?M+=(D===0?"":", ")+"("+O.arrayToList(j,b)+")":M+=(D===0?"":", ")+O.escape(j,!0,b)}return M},O.format=function(T,b,M,D){if(b==null)return T;Array.isArray(b)||(b=[b]);for(var j=0,F=/\?+/g,$="",V=0,K;V<b.length&&(K=F.exec(T));){var w=K[0].length;if(!(w>2)){var B=w===2?O.escapeId(b[V]):O.escape(b[V],M,D);$+=T.slice(j,K.index)+B,j=F.lastIndex,V++}}return j===0?T:j<T.length?$+T.slice(j):$},O.dateToString=function(T,b){var M=new Date(T);if(isNaN(M.getTime()))return"NULL";var D,j,F,$,V,K,w;if(b==="local")D=M.getFullYear(),j=M.getMonth()+1,F=M.getDate(),$=M.getHours(),V=M.getMinutes(),K=M.getSeconds(),w=M.getMilliseconds();else{var B=P(b);B!==!1&&B!==0&&M.setTime(M.getTime()+B*6e4),D=M.getUTCFullYear(),j=M.getUTCMonth()+1,F=M.getUTCDate(),$=M.getUTCHours(),V=M.getUTCMinutes(),K=M.getUTCSeconds(),w=M.getUTCMilliseconds()}var Y=A(D,4)+"-"+A(j,2)+"-"+A(F,2)+" "+A($,2)+":"+A(V,2)+":"+A(K,2)+"."+A(w,3);return I(Y)},O.bufferToString=function(T){return"X"+I(T.toString("hex"))},O.objectToValues=function(T,b){var M="";for(var D in T){var j=T[D];typeof j!="function"&&(M+=(M.length===0?"":", ")+O.escapeId(D)+" = "+O.escape(j,!0,b))}return M},O.raw=function(T){if(typeof T!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return T}}};function I(E){for(var T=L.lastIndex=0,b="",M;M=L.exec(E);)b+=E.slice(T,M.index)+R[M[0]],T=L.lastIndex;return T===0?"'"+E+"'":T<E.length?"'"+b+E.slice(T)+"'":"'"+b+"'"}function A(E,T){for(E=E.toString();E.length<T;)E="0"+E;return E}function P(E){if(E==="Z")return 0;var T=E.match(/([\+\-\s])(\d\d):?(\d\d)?/);return T?(T[1]==="-"?-1:1)*(parseInt(T[2],10)+(T[3]?parseInt(T[3],10):0)/60)*60:!1}},11019:re=>{function u(e,r){(r==null||r>e.length)&&(r=e.length);for(var O=0,S=new Array(r);O<r;O++)S[O]=e[O];return S}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},95162:re=>{function u(e){if(Array.isArray(e))return e}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},14956:(re,u,e)=>{var r=e(11019);function O(S){if(Array.isArray(S))return r(S)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},36742:re=>{function u(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},83139:re=>{function u(r,O,S,l,L,R,I){try{var A=r[R](I),P=A.value}catch(E){S(E);return}A.done?O(P):Promise.resolve(P).then(l,L)}function e(r){return function(){var O=this,S=arguments;return new Promise(function(l,L){var R=r.apply(O,S);function I(P){u(R,l,L,I,A,"next",P)}function A(P){u(R,l,L,I,A,"throw",P)}I(void 0)})}}re.exports=e,re.exports.__esModule=!0,re.exports.default=re.exports},43717:re=>{function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},24143:(re,u,e)=>{var r=e(725);function O(l,L){for(var R=0;R<L.length;R++){var I=L[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(l,r(I.key),I)}}function S(l,L,R){return L&&O(l.prototype,L),R&&O(l,R),Object.defineProperty(l,"prototype",{writable:!1}),l}re.exports=S,re.exports.__esModule=!0,re.exports.default=re.exports},43427:(re,u,e)=>{var r=e(725);function O(S,l,L){return l=r(l),l in S?Object.defineProperty(S,l,{value:L,enumerable:!0,configurable:!0,writable:!0}):S[l]=L,S}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},29801:(re,u,e)=>{var r=e(74188);function O(){return typeof Reflect<"u"&&Reflect.get?(re.exports=O=Reflect.get.bind(),re.exports.__esModule=!0,re.exports.default=re.exports):(re.exports=O=function(l,L,R){var I=r(l,L);if(I){var A=Object.getOwnPropertyDescriptor(I,L);return A.get?A.get.call(arguments.length<3?l:R):A.value}},re.exports.__esModule=!0,re.exports.default=re.exports),O.apply(this,arguments)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},27148:re=>{function u(e){return re.exports=u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},re.exports.__esModule=!0,re.exports.default=re.exports,u(e)}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},77588:(re,u,e)=>{var r=e(36089);function O(S,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(l&&l.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),l&&r(S,l)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},86593:re=>{function u(e){return e&&e.__esModule?e:{default:e}}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},20869:re=>{function u(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},3015:re=>{function u(e,r){var O=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(O!=null){var S,l,L,R,I=[],A=!0,P=!1;try{if(L=(O=O.call(e)).next,r===0){if(Object(O)!==O)return;A=!1}else for(;!(A=(S=L.call(O)).done)&&(I.push(S.value),I.length!==r);A=!0);}catch(E){P=!0,l=E}finally{try{if(!A&&O.return!=null&&(R=O.return(),Object(R)!==R))return}finally{if(P)throw l}}return I}}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},15007:re=>{function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},43610:re=>{function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},99592:(re,u,e)=>{var r=e(7941);function O(S,l){if(S==null)return{};var L=r(S,l),R,I;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(S);for(I=0;I<A.length;I++)R=A[I],!(l.indexOf(R)>=0)&&Object.prototype.propertyIsEnumerable.call(S,R)&&(L[R]=S[R])}return L}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},7941:re=>{function u(e,r){if(e==null)return{};var O={},S=Object.keys(e),l,L;for(L=0;L<S.length;L++)l=S[L],!(r.indexOf(l)>=0)&&(O[l]=e[l]);return O}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},8807:(re,u,e)=>{var r=e(55629).default,O=e(36742);function S(l,L){if(L&&(r(L)==="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(l)}re.exports=S,re.exports.__esModule=!0,re.exports.default=re.exports},69295:(re,u,e)=>{var r=e(55629).default;function O(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */re.exports=O=function(){return S},re.exports.__esModule=!0,re.exports.default=re.exports;var S={},l=Object.prototype,L=l.hasOwnProperty,R=Object.defineProperty||function(o,i,s){o[i]=s.value},I=typeof Symbol=="function"?Symbol:{},A=I.iterator||"@@iterator",P=I.asyncIterator||"@@asyncIterator",E=I.toStringTag||"@@toStringTag";function T(o,i,s){return Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}),o[i]}try{T({},"")}catch{T=function(s,c,y){return s[c]=y}}function b(o,i,s,c){var y=i&&i.prototype instanceof j?i:j,p=Object.create(y.prototype),a=new d(c||[]);return R(p,"_invoke",{value:Z(o,s,a)}),p}function M(o,i,s){try{return{type:"normal",arg:o.call(i,s)}}catch(c){return{type:"throw",arg:c}}}S.wrap=b;var D={};function j(){}function F(){}function $(){}var V={};T(V,A,function(){return this});var K=Object.getPrototypeOf,w=K&&K(K(f([])));w&&w!==l&&L.call(w,A)&&(V=w);var B=$.prototype=j.prototype=Object.create(V);function Y(o){["next","throw","return"].forEach(function(i){T(o,i,function(s){return this._invoke(i,s)})})}function X(o,i){function s(y,p,a,n){var m=M(o[y],o,p);if(m.type!=="throw"){var v=m.arg,N=v.value;return N&&r(N)=="object"&&L.call(N,"__await")?i.resolve(N.__await).then(function(G){s("next",G,a,n)},function(G){s("throw",G,a,n)}):i.resolve(N).then(function(G){v.value=G,a(v)},function(G){return s("throw",G,a,n)})}n(m.arg)}var c;R(this,"_invoke",{value:function(p,a){function n(){return new i(function(m,v){s(p,a,m,v)})}return c=c?c.then(n,n):n()}})}function Z(o,i,s){var c="suspendedStart";return function(y,p){if(c==="executing")throw new Error("Generator is already running");if(c==="completed"){if(y==="throw")throw p;return g()}for(s.method=y,s.arg=p;;){var a=s.delegate;if(a){var n=z(a,s);if(n){if(n===D)continue;return n}}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(c==="suspendedStart")throw c="completed",s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);c="executing";var m=M(o,i,s);if(m.type==="normal"){if(c=s.done?"completed":"suspendedYield",m.arg===D)continue;return{value:m.arg,done:s.done}}m.type==="throw"&&(c="completed",s.method="throw",s.arg=m.arg)}}}function z(o,i){var s=i.method,c=o.iterator[s];if(c===void 0)return i.delegate=null,s==="throw"&&o.iterator.return&&(i.method="return",i.arg=void 0,z(o,i),i.method==="throw")||s!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+s+"' method")),D;var y=M(c,o.iterator,i.arg);if(y.type==="throw")return i.method="throw",i.arg=y.arg,i.delegate=null,D;var p=y.arg;return p?p.done?(i[o.resultName]=p.value,i.next=o.nextLoc,i.method!=="return"&&(i.method="next",i.arg=void 0),i.delegate=null,D):p:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,D)}function U(o){var i={tryLoc:o[0]};1 in o&&(i.catchLoc=o[1]),2 in o&&(i.finallyLoc=o[2],i.afterLoc=o[3]),this.tryEntries.push(i)}function C(o){var i=o.completion||{};i.type="normal",delete i.arg,o.completion=i}function d(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(U,this),this.reset(!0)}function f(o){if(o){var i=o[A];if(i)return i.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var s=-1,c=function y(){for(;++s<o.length;)if(L.call(o,s))return y.value=o[s],y.done=!1,y;return y.value=void 0,y.done=!0,y};return c.next=c}}return{next:g}}function g(){return{value:void 0,done:!0}}return F.prototype=$,R(B,"constructor",{value:$,configurable:!0}),R($,"constructor",{value:F,configurable:!0}),F.displayName=T($,E,"GeneratorFunction"),S.isGeneratorFunction=function(o){var i=typeof o=="function"&&o.constructor;return!!i&&(i===F||(i.displayName||i.name)==="GeneratorFunction")},S.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,$):(o.__proto__=$,T(o,E,"GeneratorFunction")),o.prototype=Object.create(B),o},S.awrap=function(o){return{__await:o}},Y(X.prototype),T(X.prototype,P,function(){return this}),S.AsyncIterator=X,S.async=function(o,i,s,c,y){y===void 0&&(y=Promise);var p=new X(b(o,i,s,c),y);return S.isGeneratorFunction(i)?p:p.next().then(function(a){return a.done?a.value:p.next()})},Y(B),T(B,E,"Generator"),T(B,A,function(){return this}),T(B,"toString",function(){return"[object Generator]"}),S.keys=function(o){var i=Object(o),s=[];for(var c in i)s.push(c);return s.reverse(),function y(){for(;s.length;){var p=s.pop();if(p in i)return y.value=p,y.done=!1,y}return y.done=!0,y}},S.values=f,d.prototype={constructor:d,reset:function(i){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!i)for(var s in this)s.charAt(0)==="t"&&L.call(this,s)&&!isNaN(+s.slice(1))&&(this[s]=void 0)},stop:function(){this.done=!0;var i=this.tryEntries[0].completion;if(i.type==="throw")throw i.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var s=this;function c(v,N){return a.type="throw",a.arg=i,s.next=v,N&&(s.method="next",s.arg=void 0),!!N}for(var y=this.tryEntries.length-1;y>=0;--y){var p=this.tryEntries[y],a=p.completion;if(p.tryLoc==="root")return c("end");if(p.tryLoc<=this.prev){var n=L.call(p,"catchLoc"),m=L.call(p,"finallyLoc");if(n&&m){if(this.prev<p.catchLoc)return c(p.catchLoc,!0);if(this.prev<p.finallyLoc)return c(p.finallyLoc)}else if(n){if(this.prev<p.catchLoc)return c(p.catchLoc,!0)}else{if(!m)throw new Error("try statement without catch or finally");if(this.prev<p.finallyLoc)return c(p.finallyLoc)}}}},abrupt:function(i,s){for(var c=this.tryEntries.length-1;c>=0;--c){var y=this.tryEntries[c];if(y.tryLoc<=this.prev&&L.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var p=y;break}}p&&(i==="break"||i==="continue")&&p.tryLoc<=s&&s<=p.finallyLoc&&(p=null);var a=p?p.completion:{};return a.type=i,a.arg=s,p?(this.method="next",this.next=p.finallyLoc,D):this.complete(a)},complete:function(i,s){if(i.type==="throw")throw i.arg;return i.type==="break"||i.type==="continue"?this.next=i.arg:i.type==="return"?(this.rval=this.arg=i.arg,this.method="return",this.next="end"):i.type==="normal"&&s&&(this.next=s),D},finish:function(i){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c.finallyLoc===i)return this.complete(c.completion,c.afterLoc),C(c),D}},catch:function(i){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c.tryLoc===i){var y=c.completion;if(y.type==="throw"){var p=y.arg;C(c)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(i,s,c){return this.delegate={iterator:f(i),resultName:s,nextLoc:c},this.method==="next"&&(this.arg=void 0),D}},S}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},36089:re=>{function u(e,r){return re.exports=u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,l){return S.__proto__=l,S},re.exports.__esModule=!0,re.exports.default=re.exports,u(e,r)}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},74208:(re,u,e)=>{var r=e(95162),O=e(3015),S=e(11411),l=e(15007);function L(R,I){return r(R)||O(R,I)||S(R,I)||l()}re.exports=L,re.exports.__esModule=!0,re.exports.default=re.exports},74188:(re,u,e)=>{var r=e(27148);function O(S,l){for(;!Object.prototype.hasOwnProperty.call(S,l)&&(S=r(S),S!==null););return S}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},77495:(re,u,e)=>{var r=e(95162),O=e(20869),S=e(11411),l=e(15007);function L(R){return r(R)||O(R)||S(R)||l()}re.exports=L,re.exports.__esModule=!0,re.exports.default=re.exports},93502:(re,u,e)=>{var r=e(14956),O=e(20869),S=e(11411),l=e(43610);function L(R){return r(R)||O(R)||S(R)||l()}re.exports=L,re.exports.__esModule=!0,re.exports.default=re.exports},47321:(re,u,e)=>{var r=e(55629).default;function O(S,l){if(r(S)!=="object"||S===null)return S;var L=S[Symbol.toPrimitive];if(L!==void 0){var R=L.call(S,l||"default");if(r(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(S)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},725:(re,u,e)=>{var r=e(55629).default,O=e(47321);function S(l){var L=O(l,"string");return r(L)==="symbol"?L:String(L)}re.exports=S,re.exports.__esModule=!0,re.exports.default=re.exports},55629:re=>{function u(e){"@babel/helpers - typeof";return re.exports=u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},re.exports.__esModule=!0,re.exports.default=re.exports,u(e)}re.exports=u,re.exports.__esModule=!0,re.exports.default=re.exports},11411:(re,u,e)=>{var r=e(11019);function O(S,l){if(S){if(typeof S=="string")return r(S,l);var L=Object.prototype.toString.call(S).slice(8,-1);if(L==="Object"&&S.constructor&&(L=S.constructor.name),L==="Map"||L==="Set")return Array.from(S);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return r(S,l)}}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},18562:(re,u,e)=>{var r=e(69295)();re.exports=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}}]);

//# sourceMappingURL=5216.565cbd1aa042f890edf2.js.map