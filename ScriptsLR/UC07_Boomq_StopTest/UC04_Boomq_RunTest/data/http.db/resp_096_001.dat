"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[53],{70053:(_,H,r)=>{r.d(H,{l:()=>Nt});var s=r(27702),h=r(27173),V=r(32195),z=r(47875),Q=r(19559);function I({children:n,width:e,height:a,onLoad:t,onChange:o}){const i=(0,s.useId)(),[l,d]=(0,s.useState)(!1),[c,f]=(0,s.useState)(!1),D=(0,s.useRef)(null);return(0,Q.Z)(()=>{I.addCallback(i,B=>{!l&&B.isIntersecting&&(d(!0),t?.()),f(B.isIntersecting),o?.(B.isIntersecting)});const M=D.current;return M&&I.observer.observe(M),()=>{delete I.callbacks[i],M&&I.observer.unobserve(M),Object.keys(I.callbacks).length===0&&I.observer.disconnect()}}),s.createElement("div",{id:i,ref:D,style:{width:e,height:a}},l&&(typeof n=="function"?n({isInView:c}):n))}const g={};I.callbacks=g,I.addCallback=(n,e)=>I.callbacks[n]=e,I.observer=new IntersectionObserver(n=>{for(const e of n)I.callbacks[e.target.id]&&I.callbacks[e.target.id](e)},{rootMargin:"100px"});var L=r(89898),A=r.n(L),u=r(19973),v=r(53933),E=r(8508),p=r(74639),P=r(9772),O=r(26129),K=r(92056),y=r(12308),C=r(97957),x=r(69037);function w(n){return/(d-solo|dashboard-solo)/.test(n?.toLowerCase())}function F(n,e){return!!e.find(a=>a.id==="apps")?.children?.find(a=>a.id===`plugin-page-${n}`)?.children?.some(a=>a.url?.endsWith(`/a/${n}`))}var N=r(26858),Z=r(18112),J=r(39317),S=r(86312),G=r(49516),j=r(36676),U=r(42844),ee=r(41999),te=r(66310),ie=r(80011),Y=r(73453),ke=r(37424),se=r(89746),Ue=r(80434),fe=r(30973);function We({panelLinks:n,onShowPanelLinks:e}){const a=(0,te.wW)(we),t=()=>{const o=e();return s.createElement(se.v,null,o?.map((i,l)=>s.createElement(se.v.Item,{key:l,label:i.title,url:i.href,target:i.target,onClick:i.onClick})))};if(n.length===1){const o=e()[0];return s.createElement(K.fm.TitleItem,{href:o.href,onClick:o.onClick,target:o.target,title:o.title},s.createElement(Y.J,{name:"external-link-alt",size:"md"}))}else return s.createElement(Ue.L,{overlay:t},s.createElement(fe.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links",className:a.menuTrigger}))}const we=n=>({menuTrigger:(0,U.css)({height:"100%",background:"inherit",border:"none",borderRadius:`${n.shape.borderRadius()}`,cursor:"context-menu"})});var ve=r(97289);const He=({notice:n,onClick:e})=>{const a=(0,te.wW)(Fe),t=n.severity==="error"||n.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return n.inspect&&e?s.createElement(fe.h,{className:a.notice,icon:t,iconSize:"md",key:n.severity,tooltip:n.text,onClick:o=>e(o,n.inspect)}):n.link?s.createElement("a",{className:a.notice,"aria-label":n.text,href:n.link,target:"_blank",rel:"noreferrer"},s.createElement(Y.J,{name:t,style:{marginRight:"8px"},size:"md"})):s.createElement(ie.u,{key:n.severity,content:n.text},s.createElement("span",{className:a.iconTooltip},s.createElement(Y.J,{name:t,size:"md"})))},Fe=n=>({notice:(0,U.css)({background:"inherit",border:"none",borderRadius:n.shape.borderRadius()}),iconTooltip:(0,U.css)({color:`${n.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${n.shape.borderRadius()}`,padding:`${n.spacing(0,1)}`,height:` ${n.spacing(n.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,ve.getFocusStyles)(n),zIndex:1},"&: focus:not(:focus-visible)":(0,ve.getMouseFocusStyles)(n),"&:hover ":{boxShadow:`${n.shadows.z1}`,color:`${n.colors.text.primary}`,background:`${n.colors.background.secondary}`}})}),Ee=({frames:n,panelId:e})=>{const a=(0,s.useCallback)((o,i)=>{o.stopPropagation(),O.E1.partial({inspect:e,inspectTab:i})},[e]),t={};for(const o of n)if(!(!o.meta||!o.meta.notices))for(const i of o.meta.notices)t[i.severity]=i;return s.createElement(s.Fragment,null,Object.values(t).map(o=>s.createElement(He,{notice:o,onClick:a,key:o.severity})))};function Be(n){const{alertState:e,data:a,panelId:t,onShowPanelLinks:o,panelLinks:i}=n,l=(0,te.wW)(Ve),d=s.createElement(ie.u,{content:`alerting is ${e}`},s.createElement(K.fm.TitleItem,{className:(0,U.cx)({[l.ok]:e===ee.Z.OK,[l.pending]:e===ee.Z.Pending,[l.alerting]:e===ee.Z.Alerting})},s.createElement(Y.J,{name:e==="alerting"?"heart-break":"heart",className:"panel-alert-icon",size:"md"}))),c=s.createElement(s.Fragment,null,a.request&&a.request.timeInfo&&s.createElement(ie.u,{content:s.createElement(ke.IF,{timeRange:a.request?.range,timeZone:a.request?.timezone})},s.createElement(K.fm.TitleItem,{className:l.timeshift},s.createElement(Y.J,{name:"clock-nine",size:"md"})," ",a.request?.timeInfo)));return s.createElement(s.Fragment,null,i&&i.length>0&&o&&s.createElement(We,{onShowPanelLinks:o,panelLinks:i}),s.createElement(Ee,{panelId:t,frames:a.series}),c,e&&d)}const Ve=n=>({ok:(0,U.css)({color:n.colors.success.text}),pending:(0,U.css)({color:n.colors.warning.text}),alerting:(0,U.css)({color:n.colors.error.text}),timeshift:(0,U.css)({color:n.colors.text.link,gap:n.spacing(.5),whiteSpace:"nowrap","&:hover":{color:n.colors.emphasize(n.colors.text.link,.03)}})});function Ce(n){let e=!1;function a(){return n.data.request&&n.data.request.timeInfo?!1:!n.panel.hasTitle()}const t=()=>{const b=(0,J.J)().replace(n.panel.description,n.panel.scopedVars),R=(0,Z.a)(b);return e||((0,S.ff)("dashboards_panelheader_description_displayed"),e=!0),R},o=()=>{const b=(0,j.H)(n.panel);if(!b)return[];const R=b&&b.getLinks(n.panel.replaceVariables);return R.map(X=>({...X,onClick:(...re)=>{(0,S.ff)("dashboards_panelheader_datalink_clicked",{has_multiple_links:R.length>1}),X.onClick?.(...re)}}))},i=(b,R)=>{b.stopPropagation(),O.E1.partial({inspect:n.panel.id,inspectTab:R})},l=b=>{b.stopPropagation(),O.E1.partial({inspect:n.panel.id,inspectTab:G.q.Error}),(0,S.ff)("dashboards_panelheader_statusmessage_clicked")},d=()=>{n.panel.getQueryRunner().cancelQuery(),(0,S.ff)("dashboards_panelheader_cancelquery_clicked",{data_state:n.data.state})},c=n.plugin.noPadding?"none":"md",f=n.data.alertState?.state,M=(n.panel.links&&n.panel.links.length>0&&o||n.data.series.length>0&&n.data.series.some(b=>(b.meta?.notices?.length??0)>0)||n.data.request&&n.data.request.timeInfo||f)&&s.createElement(Be,{alertState:f,data:n.data,panelId:n.panel.id,panelLinks:n.panel.links,onShowPanelLinks:o}),B=n.panel.description?t:void 0,$=!(n.isViewing||n.isEditing)&&(n.isDraggable??!0)?"grid-drag-handle":"",W=n.panel.getDisplayTitle();return{hasOverlayHeader:a,onShowPanelDescription:t,onShowPanelLinks:o,onOpenInspector:i,onOpenErrorInspect:l,onCancelQuery:d,padding:c,description:B,dragClass:$,title:W,titleItems:M,onOpenMenu:()=>{(0,S.ff)("dashboards_panelheader_menu",{item:"menu"})}}}var ze=r(8430),Ke=r(39118);const $e=({state:n,onClick:e})=>{const a=(0,te.wW)(Qe);return n===v.Gu.Loading?s.createElement("div",{className:"panel-loading",onClick:e},s.createElement(ie.u,{content:"Cancel query"},s.createElement(Y.J,{className:"panel-loading__spinner spin-clockwise",name:"sync"}))):n===v.Gu.Streaming?s.createElement("div",{className:"panel-loading",onClick:e},s.createElement("div",{title:"Streaming (click to stop)",className:a.streamIndicator})):null};function Qe(n){return{streamIndicator:(0,U.css)`
      width: 10px;
      height: 10px;
      background: ${n.colors.text.disabled};
      box-shadow: 0 0 2px ${n.colors.text.disabled};
      border-radius: ${n.shape.radius.circle};
      position: relative;
      top: 6px;
      right: 1px;
    `}}function Je({children:n,onOpenMenu:e,...a}){const t=(0,s.useRef)({x:0,y:0}),[o,i]=(0,s.useState)(!1),l=(0,s.useCallback)(c=>{Ge(t.current,Pe(c))&&(i(!o),o&&e?.())},[o,i,e]),d=(0,s.useCallback)(c=>{t.current=Pe(c)},[]);return s.createElement("header",{...a,className:"panel-title-container",onClick:l,onMouseDown:d},n({panelMenuOpen:o,closeMenu:()=>i(!1)}))}function Ge(n,e,a=3.5){return Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<=a}function Pe(n){return{x:n.clientX,y:n.clientY}}var Ze=r(15166);class je extends s.PureComponent{constructor(){super(...arguments),this.renderItems=(e,a=!1)=>s.createElement("ul",{className:A()("dropdown-menu","dropdown-menu--menu","panel-menu",this.props.itemsClassName),style:this.props.style,role:a?"":"menu"},e.map((t,o)=>s.createElement(Ze.u,{key:`${t.text}${o}`,type:t.type,text:t.text,iconClassName:t.iconClassName,onClick:t.onClick,shortcut:t.shortcut,href:t.href},t.subMenu&&this.renderItems(t.subMenu,!0))))}render(){return s.createElement("div",{className:A()("panel-menu-container","dropdown","open",this.props.className)},this.renderItems(le(this.props.items)))}}function le(n){return n.reduce((e,a)=>{if(Array.isArray(a.subMenu)&&a.type==="submenu")return e.push({...a,subMenu:le(a.subMenu)}),e;if(Array.isArray(a.subMenu)&&a.type==="group"){const{subMenu:t,...o}=a;return e.push(o),e.push.apply(e,le(t)),e}return e.push(a),e},[])}function Ye({items:n}){const e=a=>a.map(t=>{switch(t.type){case"divider":return s.createElement(se.v.Divider,{key:t.text});case"group":return s.createElement(se.v.Group,{key:t.text,label:t.text},t.subMenu?e(t.subMenu):void 0);default:return s.createElement(se.v.Item,{key:t.text,label:t.text,icon:t.iconClassName,childItems:t.subMenu?e(t.subMenu):void 0,url:t.href,onClick:t.onClick,shortcut:t.shortcut,testId:p.wl.components.Panels.Panel.menuItems(t.text)})}});return s.createElement(se.v,null,e(n))}var Xe=r(18771),qe=r(15766),_e=r(10864),et=r(82123),k=r(65322),ye=r(91368),tt=r(89024),q=r(22377),nt=r(73668),ce=r(63245),at=r(36617),xe=r(84749),st=r(29739);function rt(n,e,a){const t=m=>{m.preventDefault(),O.E1.partial({viewPanel:e.id}),(0,S.ff)("dashboards_panelheader_menu",{item:"view"})},o=m=>{m.preventDefault(),O.E1.partial({editPanel:e.id}),(0,S.ff)("dashboards_panelheader_menu",{item:"edit"})},i=m=>{m.preventDefault(),(0,q.Po)(n,e),(0,S.ff)("dashboards_panelheader_menu",{item:"share"})},l=m=>{m.preventDefault(),(0,q.Kq)(n,e),(0,S.ff)("dashboards_panelheader_menu",{item:"createLibraryPanel"})},d=m=>{m.preventDefault(),(0,q.oe)(e),(0,S.ff)("dashboards_panelheader_menu",{item:"unlinkLibraryPanel"})},c=m=>{O.E1.partial({inspect:e.id,inspectTab:m}),(0,S.ff)("dashboards_panelheader_menu",{item:"inspect",tab:m??G.q.Data})},f=m=>{m.preventDefault()},D=m=>{m.preventDefault(),(0,q.jN)(n,e),(0,S.ff)("dashboards_panelheader_menu",{item:"duplicate"})},M=m=>{m.preventDefault(),(0,q.bY)(e),(0,S.ff)("dashboards_panelheader_menu",{item:"copy"})},B=m=>{m.preventDefault(),(0,q.WJ)(n,e,!0),(0,S.ff)("dashboards_panelheader_menu",{item:"remove"})},$=m=>{m.preventDefault();const ne=m.ctrlKey||m.metaKey?oe=>window.open(`${y.default.appSubUrl}${oe}`):void 0;xe.h.dispatch((0,st.m$)(e,{getDataSourceSrv:_e.F,getTimeSrv:N.$t,getExploreUrl:tt.H6,openInNewWindow:ne})),(0,S.ff)("dashboards_panelheader_menu",{item:"explore"})},W=m=>{m.preventDefault(),(0,q.qw)(e),(0,S.ff)("dashboards_panelheader_menu",{item:"toggleLegend"})},T=[];e.isEditing||T.push({text:(0,k.t)("panel.header-menu.view","View"),iconClassName:"eye",onClick:t,shortcut:"v"}),n.canEditPanel(e)&&!e.isEditing&&T.push({text:(0,k.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",onClick:o,shortcut:"e"}),T.push({text:(0,k.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:i,shortcut:"p s"}),ye.contextSrv.hasAccessToExplore()&&!(e.plugin&&e.plugin.meta.skipDataQuery)&&e.datasource?.uid!==at.oe&&T.push({text:(0,k.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",onClick:$,shortcut:"p x"});const b=[];e.plugin&&!e.plugin.meta.skipDataQuery&&(b.push({text:(0,k.t)("panel.header-menu.inspect-data","Data"),onClick:m=>c(G.q.Data)}),n.meta.canEdit&&b.push({text:(0,k.t)("panel.header-menu.query","Query"),onClick:m=>c(G.q.Query)})),b.push({text:(0,k.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:m=>c(G.q.JSON)}),T.push({type:"submenu",text:(0,k.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",onClick:m=>{const ne=m.currentTarget,oe=m.target,ae=oe.closest('[role="menuitem"]');(oe===ne||ae===ne)&&c()},shortcut:"i",subMenu:b});const R=[],X=n.canEditPanel(e);if(e.isViewing||e.isEditing||(X?(R.push({text:(0,k.t)("panel.header-menu.duplicate","Duplicate"),onClick:D,shortcut:"p d"}),R.push({text:(0,k.t)("panel.header-menu.copy","Copy"),onClick:M}),(0,nt.V)(e)?R.push({text:(0,k.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:d}):R.push({text:(0,k.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:l})):ye.contextSrv.isEditor&&R.push({text:(0,k.t)("panel.header-menu.copy","Copy"),onClick:M})),a){const m=a.getScope(),ne=m.$$childHead.ctrl,oe=ne.getExtendedMenu();for(const ae of oe){const Ne={text:ae.text,href:ae.href,shortcut:ae.shortcut};ae.click&&(Ne.onClick=()=>{m.$eval(ae.click,{ctrl:ne})}),R.push(Ne)}}e.options.legend&&R.push({text:e.options.legend.showLegend?(0,k.t)("panel.header-menu.hide-legend","Hide legend"):(0,k.t)("panel.header-menu.show-legend","Show legend"),onClick:W,shortcut:"p l"}),e.isEditing&&(R.length=0),X&&e.plugin&&!e.plugin.meta.skipDataQuery&&R.push({text:(0,k.t)("panel.header-menu.get-help","Get help"),onClick:m=>c(G.q.Help)});const{extensions:re}=(0,et.dj)({extensionPointId:qe.y.DashboardPanelMenu,context:ot(e,n),limitPerPlugin:3});return re.length>0&&!e.isEditing&&T.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:it(re)}),R.length&&T.push({type:"submenu",text:(0,k.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:R,onClick:f}),n.canEditPanel(e)&&!e.isEditing&&!e.isViewing&&(T.push({type:"divider",text:""}),T.push({text:(0,k.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:B,shortcut:"p r"})),T}function ot(n,e){return{id:n.id,pluginId:n.type,title:n.title,timeRange:e.time,timeZone:e.timezone,dashboard:{uid:e.uid,title:e.title,tags:Array.from(e.tags)},targets:n.targets,scopedVars:n.scopedVars,data:n.getQueryRunner().getLastResult()}}function it(n){const e={},a=[];for(const o of n){const i=o.category;if(!i){a.push({text:(0,ce.ew)(o.title,25),href:o.path,onClick:o.onClick});continue}Array.isArray(e[i])||(e[i]=[]),e[i].push({text:(0,ce.ew)(o.title,25),href:o.path,onClick:o.onClick})}const t=Object.keys(e).reduce((o,i)=>(o.push({text:(0,ce.ew)(i,25),type:"group",subMenu:e[i]}),o),[]);return a.length>0&&(t.length>0&&t.push({text:"divider",type:"divider"}),Array.prototype.push.apply(t,a)),t}function De({panel:n,dashboard:e,loadingState:a,children:t}){const[o,i]=(0,s.useState)([]),l=(0,Xe.useSelector)(d=>(0,x.i)(d,n)?.angularComponent);return(0,s.useEffect)(()=>{i(rt(e,n,l))},[e,n,l,a,i]),t({items:o})}function lt({panel:n,dashboard:e,loadingState:a,style:t,menuItemsClassName:o,menuWrapperClassName:i}){return s.createElement(De,{panel:n,dashboard:e,loadingState:a},({items:l})=>s.createElement(je,{className:i,itemsClassName:o,style:t,items:l}))}function Ie({style:n,panel:e,dashboard:a,loadingState:t}){return s.createElement(De,{panel:e,dashboard:a,loadingState:t},({items:o})=>s.createElement(Ye,{style:n,items:o}))}function Se({panel:n,error:e,isViewing:a,isEditing:t,data:o,alertState:i,dashboard:l}){const d=()=>n.getQueryRunner().cancelQuery(),c=n.getDisplayTitle(),f=(0,U.cx)("panel-header",a||t?"":"grid-drag-handle"),D=(0,te.wW)(ct),M=()=>{(0,S.ff)("dashboards_panelheader_menu",{item:"menu"})};return s.createElement(s.Fragment,null,s.createElement($e,{state:o.state,onClick:d}),s.createElement(Ke.Z,{panel:n,title:n.title,description:n.description,scopedVars:n.scopedVars,links:(0,j.H)(n),error:e}),s.createElement("div",{className:f},s.createElement(Je,{"data-testid":p.wl.components.Panels.Panel.title(c),onOpenMenu:M},({closeMenu:B,panelMenuOpen:$})=>s.createElement(ze.L,{onClick:B,parent:document},s.createElement("div",{className:"panel-title"},s.createElement(Ee,{frames:o.series,panelId:n.id}),i?s.createElement(Y.J,{name:i==="alerting"?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}):null,s.createElement("h2",{className:D.titleText},c),!l.meta.publicDashboardAccessToken&&s.createElement("div",{"data-testid":"panel-dropdown"},s.createElement(Y.J,{name:"angle-down",className:"panel-menu-toggle"}),$?s.createElement(lt,{panel:n,dashboard:l}):null),o.request&&o.request.timeInfo&&s.createElement("span",{className:"panel-time-info"},s.createElement(Y.J,{name:"clock-nine",size:"sm"})," ",o.request.timeInfo))))))}const ct=n=>({titleText:(0,U.css)`
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      max-width: calc(100% - 38px);
      cursor: pointer;
      font-weight: ${n.typography.fontWeightMedium};
      font-size: ${n.typography.body.fontSize};
      margin: 0;

      &:hover {
        color: ${n.colors.text.primary};
      }
      .panel-has-alert & {
        max-width: calc(100% - 54px);
      }
    `});class dt extends s.PureComponent{constructor(e){super(e),this.element=null,this.timeSrv=(0,N.$t)(),this.subs=new u.w0,this.state={data:{state:v.Gu.NotStarted,series:[],timeRange:(0,E.JK)()}}}componentDidMount(){const{panel:e}=this.props;this.loadAngularPanel();const a=e.getQueryRunner();this.subs.add(a.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:t=>this.onPanelDataUpdate(t)}))}onPanelDataUpdate(e){let a;if(e.state===v.Gu.Error){const{error:t}=e;t&&a!==t.message&&(a=t.message)}this.setState({data:e,errorMessage:a})}componentWillUnmount(){this.subs.unsubscribe(),this.props.angularComponent&&this.props.angularComponent?.destroy()}componentDidUpdate(e,a){const{plugin:t,height:o,width:i,panel:l}=this.props;e.plugin!==t&&this.loadAngularPanel(),(e.width!==i||e.height!==o)&&this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),l.render())}getInnerPanelHeight(){const{plugin:e,height:a}=this.props,{theme:t}=y.default,o=this.hasOverlayHeader()?0:t.panelHeaderHeight,i=e.noPadding?0:t.panelPadding;return a-o-i*2-C.QO}getInnerPanelWidth(){const{plugin:e,width:a}=this.props,{theme:t}=y.default,o=e.noPadding?0:t.panelPadding;return a-o*2-C.QO}loadAngularPanel(){const{panel:e,dashboard:a,setPanelAngularComponent:t}=this.props;if(!this.element)return;const o=(0,P.w)(),i='<plugin-component type="panel" class="panel-height-helper"></plugin-component>';this.scopeProps={panel:e,dashboard:a,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},t({key:e.key,angularComponent:o.load(this.element,this.scopeProps,i)})}hasOverlayHeader(){const{panel:e}=this.props,{data:a}=this.state;return a.request&&a.request.timeInfo?!1:!e.hasTitle()}render(){const{dashboard:e,panel:a,isViewing:t,isEditing:o,plugin:i}=this.props,{errorMessage:l,data:d}=this.state,{transparent:c}=a,f=d.alertState?.state,D=Ce({...this.props,data:d}),M=A()({"panel-container":!0,"panel-container--absolute":w(O.E1.getLocation().pathname),"panel-container--transparent":c,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":a.alert!==void 0,[`panel-alert-state--${f}`]:f!==void 0}),B=A()({"panel-content":!0,"panel-content--no-padding":i.noPadding});if(y.default.featureToggles.newPanelChromeUI){const $=(a.gridPos?.y??0)===0?-16:void 0,W=s.createElement("div",{"data-testid":"panel-dropdown"},s.createElement(Ie,{panel:a,dashboard:e,loadingState:d.state}));return s.createElement(K.fm,{width:this.props.width,height:this.props.height,title:D.title,loadingState:d.state,statusMessage:l,statusMessageOnClick:D.onOpenErrorInspect,description:D.description,titleItems:D.titleItems,menu:this.props.hideMenu?void 0:W,dragClass:D.dragClass,dragClassCancel:"grid-drag-cancel",padding:D.padding,hoverHeaderOffset:$,hoverHeader:D.hasOverlayHeader(),displayMode:c?"transparent":"default",onCancelQuery:D.onCancelQuery,onOpenMenu:D.onOpenMenu},()=>s.createElement("div",{ref:T=>this.element=T,className:"panel-height-helper"}))}else return s.createElement("div",{className:M,"data-testid":p.wl.components.Panels.Panel.title(a.title),"aria-label":p.wl.components.Panels.Panel.containerByTitle(a.title)},s.createElement(Se,{panel:a,dashboard:e,title:a.title,description:a.description,links:a.links,error:l,isViewing:t,isEditing:o,data:d,alertState:f}),s.createElement("div",{className:B},s.createElement("div",{ref:$=>this.element=$,className:"panel-height-helper"})))}}const ut=(n,e)=>({angularComponent:(0,x.i)(n,e.panel)?.angularComponent}),ht={setPanelAngularComponent:z.o8},pt=(0,h.connect)(ut,ht)(dt);var mt=r(79248),de=r(84714),Me=r(99633),gt=r(17312),ue=r(62247),ft=r(32053),vt=r(90665),Et=r(32713),Oe=r(34667),Re=r(70823),be=r(37647),Te=r(54788),Ct=r(5926),Pt=r(74030),yt=r(75506),Le=r(19221),xt=r(93666);const Dt=(n,e,a)=>{const{overrides:t}=a,o=a.overrides.findIndex(f=>f.matcher.id===Le.mi.byName&&f.matcher.options===n);if(o<0)return{...a,overrides:[...a.overrides,It(n,e)]};const i=Array.from(t),l=i[o],d=l.properties.findIndex(f=>f.id==="color");if(d<0)return i[o]={...l,properties:[...l.properties,he(e)]},{...a,overrides:i};const c=Array.from(l.properties);return c[d]=he(e),i[o]={...l,properties:c},{...a,overrides:i}},It=(n,e)=>({matcher:{id:Le.mi.byName,options:n},properties:[he(e)]}),he=n=>({id:"color",value:{mode:xt.S.Fixed,fixedColor:n}});var St=r(43620),pe=r(11285),me=r(77972),Mt=r(69887),Ot=r(48549),ge=r(87909);const Rt="Error in plugin";class bt extends s.PureComponent{constructor(e){super(e),this.timeSrv=(0,N.$t)(),this.subs=new u.w0,this.eventFilter={onlyLocal:!0},this.getSync=()=>this.props.isEditing?mt.m.Off:this.props.dashboard.graphTooltip,this.onInstanceStateChange=t=>{this.props.onInstanceStateChange(t),this.setState({context:{...this.state.context,instanceState:t}})},this.onUpdateData=t=>(0,yt.F)(this.props.panel,t),this.onSeriesColorChange=(t,o)=>{this.onFieldConfigChange(Dt(t,o,this.props.panel.fieldConfig))},this.onSeriesVisibilityChange=(t,o)=>{this.onFieldConfigChange((0,Ot.N)(t,o,this.props.panel.fieldConfig,this.state.data.series))},this.onToggleLegendSort=t=>{const o=this.props.panel.options.legend;if(!o)return;let i=o.sortDesc,l=o.sortBy;t!==l&&(i=void 0),i===!1?(l=void 0,i=void 0):(i=!i,l=t),this.onOptionsChange({...this.props.panel.options,legend:{...o,sortBy:l,sortDesc:i}})},this.onRefresh=()=>{const{dashboard:t,panel:o,isInView:i,width:l}=this.props;if(!i){this.setState({refreshWhenInView:!0});return}const d=(0,q.W1)(o,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(l<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),o.runAllPanelQueries({dashboardUID:t.uid,dashboardTimezone:t.getTimezone(),publicDashboardAccessToken:t.meta.publicDashboardAccessToken,timeData:d,width:l})}else this.setState({data:{...this.state.data,timeRange:this.timeSrv.timeRange()},renderCounter:this.state.renderCounter+1,liveTime:void 0})},this.onRender=()=>{const t={renderCounter:this.state.renderCounter+1};this.setState(t)},this.onOptionsChange=t=>{this.props.panel.updateOptions(t)},this.onFieldConfigChange=t=>{this.props.panel.updateFieldConfig(t)},this.onPanelError=t=>{const o=t.message||Rt;this.state.errorMessage!==o&&this.setState({errorMessage:o})},this.onPanelErrorRecover=()=>{this.setState({errorMessage:void 0})},this.onAnnotationCreate=async t=>{const o=t.from!==t.to,i={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:o,time:t.from,timeEnd:o?t.to:0,tags:t.tags,text:t.description};await(0,pe.xD)(i),(0,me.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new de.n1(i))},this.onAnnotationDelete=async t=>{await(0,pe.Dl)({id:t}),(0,me.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new de.n1({id:t}))},this.onAnnotationUpdate=async t=>{const o=t.from!==t.to,i={id:t.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:o,time:t.from,timeEnd:o?t.to:0,tags:t.tags,text:t.description};await(0,pe._E)(i),(0,me.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new de.n1(i))},this.onChangeTimeRange=t=>{this.timeSrv.setTime({from:(0,Me.zh)(t.from),to:(0,Me.zh)(t.to)})},this.onAddAdHocFilter=t=>{const{key:o,value:i,operator:l}=t,d=(0,Ct.ak)().getInstanceSettings(this.props.panel.datasource),c=d&&(0,gt.iU)(d);c&&(0,xe.WI)((0,Pt.m2)({datasource:c,key:o,operator:l,value:i}))};const a=e.dashboard.events.newScopedBus(`panel:${e.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventsScope:"__global_",eventBus:a,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:e.dashboard.canAddAnnotations.bind(e.dashboard),canEditAnnotations:e.dashboard.canEditAnnotations.bind(e.dashboard),canDeleteAnnotations:e.dashboard.canDeleteAnnotations.bind(e.dashboard),onAddAdHocFilter:this.onAddAdHocFilter,onUpdateData:this.onUpdateData},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?ue.zj.PanelEditor:this.props.isViewing?ue.zj.PanelViewer:ue.zj.Dashboard}getInitialPanelDataState(){return{state:v.Gu.NotStarted,series:[],timeRange:(0,E.JK)()}}componentDidMount(){const{panel:e,dashboard:a}=this.props;if(this.subs.add(e.events.subscribe(Et.U5,this.onRefresh)),this.subs.add(e.events.subscribe(St._z,this.onRender)),a.panelInitialized(this.props.panel),this.hasPanelSnapshot){this.setState({data:(0,Mt.y)(e,a),isFirstLoad:!1});return}this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(e.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:t=>this.onDataUpdate(t)})),ge.A.listen(this)}componentWillUnmount(){this.subs.unsubscribe(),ge.A.remove(this)}liveTimeChanged(e){const{data:a}=this.state;if(a.timeRange){const t=e.to.valueOf()-a.timeRange.to.valueOf();if(t<100){console.log("Skip tick render",this.props.panel.title,t);return}}this.setState({liveTime:e})}componentDidUpdate(e){const{isInView:a,width:t}=this.props,{context:o}=this.state,i=this.getPanelContextApp();o.app!==i&&this.setState({context:{...o,app:i}}),a!==e.isInView&&a&&this.state.refreshWhenInView&&this.onRefresh(),t!==e.width&&ge.A.updateInterval(this)}onDataUpdate(e){const{dashboard:a,panel:t,plugin:o}=this.props;if(o.meta.skipDataQuery){this.setState({data:this.getInitialPanelDataState()});return}let{isFirstLoad:i}=this.state,l;switch(e.state){case v.Gu.Loading:if(this.state.data.state===v.Gu.Loading)return;break;case v.Gu.Error:const{error:d,errors:c}=e;c?.length?c.length===1?l=c[0].message:l="Multiple errors found. Click for more details":d&&l!==d.message&&(l=d.message);break;case v.Gu.Done:a.snapshot&&(t.snapshotData=e.series.map(f=>(0,ft.og)(f))),i&&(i=!1);break}this.setState({isFirstLoad:i,errorMessage:l,data:e,liveTime:void 0})}get hasPanelSnapshot(){const{panel:e}=this.props;return e.snapshotData&&e.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(e,a){return e===v.Gu.Done||e===v.Gu.Error||a.skipDataQuery}skipFirstRender(e){const{isFirstLoad:a}=this.state;return this.wantsQueryExecution&&a&&(e===v.Gu.Loading||e===v.Gu.NotStarted)}renderPanelContent(e,a){const{panel:t,plugin:o,dashboard:i}=this.props,{renderCounter:l,data:d}=this.state,{state:c}=d;if(this.skipFirstRender(c))return null;this.shouldSignalRenderingCompleted(c,o.meta)&&Te.r.renderingCompleted();const f=o.panel,D=this.state.liveTime??d.timeRange??this.timeSrv.timeRange(),M=t.getOptions();return this.eventFilter.onlyLocal=i.graphTooltip===0,s.createElement(s.Fragment,null,s.createElement(Re._w,{value:this.state.context},s.createElement(f,{id:t.id,data:d,title:t.title,timeRange:D,timeZone:this.props.dashboard.getTimezone(),options:M,fieldConfig:t.fieldConfig,transparent:t.transparent,width:e,height:a,renderCounter:l,replaceVariables:t.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:i.events})))}renderPanel(e,a){const{panel:t,plugin:o,dashboard:i}=this.props,{renderCounter:l,data:d}=this.state,{theme:c}=Oe.config,{state:f}=d;if(this.skipFirstRender(f))return null;this.shouldSignalRenderingCompleted(f,o.meta)&&Te.r.renderingCompleted();const D=o.panel,M=this.state.liveTime??d.timeRange??this.timeSrv.timeRange(),B=this.hasOverlayHeader()?0:c.panelHeaderHeight,$=o.noPadding?0:c.panelPadding,W=e-$*2-C.QO,T=a-B-$*2-C.QO,b=A()({"panel-content":!0,"panel-content--no-padding":o.noPadding}),R=t.getOptions();this.eventFilter.onlyLocal=i.graphTooltip===0;const X=this.props.timezone||this.props.dashboard.getTimezone();return s.createElement(s.Fragment,null,s.createElement("div",{className:b},s.createElement(vt.b,{meta:o.meta},s.createElement(Re._w,{value:this.state.context},s.createElement(D,{id:t.id,data:d,title:t.title,timeRange:M,timeZone:X,options:R,fieldConfig:t.fieldConfig,transparent:t.transparent,width:W,height:T,renderCounter:l,replaceVariables:t.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:i.events})))))}hasOverlayHeader(){const{panel:e}=this.props,{data:a}=this.state;return a.request&&a.request.timeInfo?!1:!e.hasTitle()}render(){const{dashboard:e,panel:a,isViewing:t,isEditing:o,width:i,height:l,plugin:d}=this.props,{errorMessage:c,data:f}=this.state,{transparent:D}=a,M=f.alertState?.state,B=this.hasOverlayHeader(),$=A()({"panel-container":!0,"panel-container--absolute":w(O.E1.getLocation().pathname),"panel-container--transparent":D,"panel-container--no-title":B,[`panel-alert-state--${M}`]:M!==void 0}),W=Ce({...this.props,data:f});if(Oe.config.featureToggles.newPanelChromeUI){const T=(a.gridPos?.y??0)===0?-16:void 0,b=s.createElement("div",{"data-testid":"panel-dropdown"},s.createElement(Ie,{panel:a,dashboard:e,loadingState:f.state}));return s.createElement(K.fm,{width:i,height:l,title:W.title,loadingState:f.state,statusMessage:c,statusMessageOnClick:W.onOpenErrorInspect,description:W.description,titleItems:W.titleItems,menu:this.props.hideMenu?void 0:b,dragClass:W.dragClass,dragClassCancel:"grid-drag-cancel",padding:W.padding,hoverHeaderOffset:T,hoverHeader:W.hasOverlayHeader(),displayMode:D?"transparent":"default",onCancelQuery:W.onCancelQuery,onOpenMenu:W.onOpenMenu},(R,X)=>s.createElement(s.Fragment,null,s.createElement(be.SV,{dependencies:[f,d,a.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:re})=>re?null:this.renderPanelContent(R,X))))}else return s.createElement("section",{className:$,"aria-label":p.wl.components.Panels.Panel.containerByTitle(a.title)},s.createElement(Se,{panel:a,dashboard:e,title:a.title,description:a.description,links:a.links,error:c,isEditing:o,isViewing:t,alertState:M,data:f}),s.createElement(be.SV,{dependencies:[f,d,a.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:T})=>T?null:this.renderPanel(i,l)))}}const Tt=(n,e)=>{const a=n.panels[e.stateKey];return a?{plugin:a.plugin,instanceState:a.instanceState}:{plugin:null}},Lt={initPanelState:V.JI,setPanelInstanceState:z.pC},At=(0,h.connect)(Tt,Lt);class Ae extends s.PureComponent{constructor(){super(...arguments),this.onInstanceStateChange=e=>{this.props.setPanelInstanceState({key:this.props.stateKey,value:e})},this.onVisibilityChange=e=>{this.props.panel.isInView=e},this.onPanelLoad=()=>{this.props.plugin||this.props.initPanelState(this.props.panel)},this.renderPanel=({isInView:e})=>{const{dashboard:a,panel:t,isViewing:o,isEditing:i,width:l,height:d,plugin:c,timezone:f,hideMenu:D,isDraggable:M=!0}=this.props;return c?c&&c.angularPanelCtrl?s.createElement(pt,{plugin:c,panel:t,dashboard:a,isViewing:o,isEditing:i,isInView:e,isDraggable:M,width:l,height:d}):s.createElement(bt,{plugin:c,panel:t,dashboard:a,isViewing:o,isEditing:i,isInView:e,isDraggable:M,width:l,height:d,onInstanceStateChange:this.onInstanceStateChange,timezone:f,hideMenu:D}):null}}componentDidMount(){this.props.panel.isInView=!this.props.lazy,this.props.lazy||this.onPanelLoad()}render(){const{width:e,height:a,lazy:t}=this.props;return t?s.createElement(I,{width:e,height:a,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad},this.renderPanel):this.renderPanel({isInView:!0})}}Ae.defaultProps={lazy:!0};const Nt=At(Ae)},39118:(_,H,r)=>{r.d(H,{Z:()=>v});var s=r(27702),h=r(18112),V=r(74639),z=r(39317),Q=r(26129),I=r(80011),g=r(26858),L=r(49516),A=(E=>(E.Error="Error",E.Info="Info",E.Links="Links",E))(A||{});class u extends s.Component{constructor(){super(...arguments),this.timeSrv=(0,g.$t)(),this.getInfoMode=()=>{const{panel:p,error:P}=this.props;if(P)return"Error";if(p.description)return"Info";if(p.links&&p.links.length)return"Links"},this.getInfoContent=()=>{const{panel:p}=this.props,P=p.description||"",O=(0,z.J)().replace(P,p.scopedVars),K=(0,h.a)(O),y=this.props.links&&this.props.links.getLinks(p.replaceVariables);return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:K}}),y&&y.length>0&&s.createElement("ul",{className:"panel-info-corner-links"},y.map((C,x)=>s.createElement("li",{key:x},s.createElement("a",{className:"panel-info-corner-links__item",href:C.href,target:C.target},C.title)))))},this.onClickError=()=>{Q.E1.partial({inspect:this.props.panel.id,inspectTab:L.q.Error})}}renderCornerType(p,P,O){const K=p==="Error"?"error":"info",y=`panel-info-corner panel-info-corner--${p.toLowerCase()}`,C=V.wl.components.Panels.Panel.headerCornerInfo(p.toLowerCase());return s.createElement(I.u,{content:P,placement:"top-start",theme:K,interactive:!0},s.createElement("button",{type:"button",className:y,onClick:O,"aria-label":C},s.createElement("i",{"aria-hidden":!0,className:"fa"}),s.createElement("span",{className:"panel-info-corner-inner"})))}render(){const{error:p}=this.props,P=this.getInfoMode();return P?P==="Error"&&p?this.renderCornerType(P,p,this.onClickError):P==="Info"||P==="Links"?this.renderCornerType(P,this.getInfoContent):null:null}}const v=u},15166:(_,H,r)=>{r.d(H,{u:()=>g});var s=r(42844),h=r(27702),V=r(74639),z=r(66310),Q=r(65469),I=r(73453);const g=u=>{const[v,E]=(0,h.useState)(null),p=u.type==="submenu",P=(0,z.wW)(A),O=u.iconClassName?(0,Q.toIconName)(u.iconClassName):void 0;switch(u.type){case"divider":return h.createElement("li",{className:"divider"});case"group":return h.createElement("li",null,h.createElement("span",{className:P.groupLabel},u.text));default:return h.createElement("li",{className:p?`dropdown-submenu ${L(v)}`:void 0,ref:E,"data-testid":V.wl.components.Panels.Panel.menuItems(u.text)},h.createElement("a",{onClick:u.onClick,href:u.href,role:"menuitem"},O&&h.createElement(I.J,{name:O,className:P.menuIconClassName}),h.createElement("span",{className:"dropdown-item-text","aria-label":V.wl.components.Panels.Panel.headerItems(u.text)},u.text,p&&h.createElement(I.J,{name:"angle-right",className:P.shortcutIconClassName})),u.shortcut&&h.createElement("span",{className:"dropdown-menu-item-shortcut"},h.createElement(I.J,{name:"keyboard",className:P.menuIconClassName})," ",u.shortcut)),u.children)}};function L(u){if(!u)return"invisible";const v=u.parentElement.getBoundingClientRect(),E=u.getBoundingClientRect();return E.width===0?"invisible":v.right+E.width+10>window.innerWidth?"pull-left":"pull-right"}function A(u){return{menuIconClassName:(0,s.css)({marginRight:u.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,s.css)({position:"absolute",top:"7px",right:u.spacing(.5),color:u.colors.text.secondary}),groupLabel:(0,s.css)({color:u.colors.text.secondary,fontSize:u.typography.size.sm,padding:u.spacing(.5,1)})}}},48549:(_,H,r)=>{r.d(H,{N:()=>u});var s=r(25587),h=r(1141),V=r(19221),z=r(29241),Q=r(75578),I=r(76178),g=r(76761);const L="hideSeriesFrom",A=(0,s.Y4)(L);function u(y,C,x,w){const{overrides:F}=x,N=y,Z=F.findIndex(A);if(Z<0){if(C===g.R.ToggleSelection){const ee=v([N,...K(F,w)]);return{...x,overrides:[...x.overrides,ee]}}const j=O(w,N),U=v(j);return{...x,overrides:[...x.overrides,U]}}const J=Array.from(F),[S]=J.splice(Z,1);if(C===g.R.ToggleSelection){let j=p(S);const U=K(J,w);if(U.length>0&&(j=j.filter(te=>U.indexOf(te)<0)),j[0]===N&&j.length===1)return{...x,overrides:J};const ee=v([N,...U]);return{...x,overrides:[...J,ee]}}const G=E(S,N);return P(G,w)?{...x,overrides:J}:{...x,overrides:[...J,G]}}function v(y,C=h.Ys.exclude,x){return x=x??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:L,matcher:{id:V.mi.byNames,options:{mode:C,names:y,prefix:C===h.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...x,value:{viz:!0,legend:!1,tooltip:!1}}]}}const E=(y,C,x=h.Ys.exclude)=>{const w=y.properties.find(Z=>Z.id==="custom.hideFrom"),F=p(y),N=F.findIndex(Z=>Z===C);return N<0?F.push(C):F.splice(N,1),v(F,x,w)},p=y=>{const C=y.matcher.options?.names;return Array.isArray(C)?[...C]:[]},P=(y,C)=>p(y).length===O(C).length,O=(y,C)=>{const x=new Set;for(const w of y)for(const F of w.fields){if(F.type!==z.fS.number)continue;const N=(0,Q.CZ)(F,w,y);N!==C&&x.add(N)}return Array.from(x)},K=(y,C)=>{let x=[];for(const w of y){const F=w.properties.find(N=>N.id==="custom.hideFrom");if(F!==void 0&&F.value?.legend===!0){const Z=I.Ls.get(w.matcher.id).get(w.matcher.options);for(const J of C)for(const S of J.fields){if(S.type!==z.fS.number)continue;const G=(0,Q.CZ)(S,J,C);Z(S,J,C)&&x.push(G)}}}return x}},69887:(_,H,r)=>{r.d(H,{y:()=>u});var s=r(32053),h=r(8508),V=r(46580),z=r(53933),Q=r(21708),I=r(12308),g=r(75049),L=r(26858),A=r(22377);function u(v,E){const p=(0,s.F9)(v.snapshotData),P=new g.g,O={dashboard:E,range:(0,h.JK)()},K=P.canWork(O)?P.getAnnotationsInSnapshot(E,v.id):[],y=[(0,V.P)(K)];return{timeRange:(0,A.W1)(v,(0,L.$t)().timeRange()).timeRange,state:z.Gu.Done,series:(0,Q.SM)({data:p,fieldConfig:{defaults:{},overrides:[]},replaceVariables:v.replaceVariables,fieldConfigRegistry:v.plugin.fieldConfigRegistry,theme:I.config.theme2,timeZone:E.getTimezone()}),annotations:y}}},49516:(_,H,r)=>{r.d(H,{q:()=>s});var s=(h=>(h.Data="data",h.Meta="meta",h.Error="error",h.Stats="stats",h.JSON="json",h.Query="query",h.Help="help",h))(s||{})},36676:(_,H,r)=>{r.d(H,{H:()=>I,n:()=>Q});var s=r(32053),h=r(21609),V=r(70732),z=r(89897);const Q=g=>{const L=g.field.links;if(!(!L||L.length===0))return{getLinks:A=>{const u={};if(g.view){const{dataFrame:E}=g.view;u.__series={value:{name:E.name,refId:E.refId},text:"Series"};const p=g.colIndex!==void 0?E.fields[g.colIndex]:void 0;if(p){if(u.__field={value:{name:p.name,labels:p.labels},text:"Field"},g.rowIndex!==void 0&&g.rowIndex>=0){const{timeField:P}=(0,s.sV)(E);u.__value={value:{raw:p.values[g.rowIndex],numeric:g.display.numeric,text:(0,h.zc)(g.display),time:P?P.values[g.rowIndex]:void 0},text:"Value"}}g.view&&(u.__data={value:{name:E.name,refId:E.refId,fields:(0,V.z)({frame:E,rowIndex:g.rowIndex})},text:"Data"})}else u.__value={value:{raw:g.display.numeric,numeric:g.display.numeric,text:(0,h.zc)(g.display),calc:g.name},text:"Value"}}else console.log("VALUE",g);const v=(E,p,P)=>{const O={...u,...p};return A(E,O,P)};return L.map(E=>(0,z.Bq)().getDataLinkUIModel(E,v,g))}}},I=g=>{const L=g.links;if(!(!L||L.length===0))return{getLinks:()=>L.map(A=>(0,z.Bq)().getDataLinkUIModel(A,g.replaceVariables,g))}}},69037:(_,H,r)=>{r.d(H,{i:()=>s});function s(h,V){return h.panels[V.key]}}}]);

//# sourceMappingURL=53.59d9e34c172df910b888.js.map